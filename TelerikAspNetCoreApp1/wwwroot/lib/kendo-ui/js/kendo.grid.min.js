/**
 * Kendo UI v2023.3.1010 (http://www.telerik.com/kendo-ui)
 * Copyright 2023 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("kendo.data.js"),require("kendo.columnsorter.js"),require("kendo.editable.js"),require("kendo.window.js"),require("kendo.filtermenu.js"),require("kendo.filtercell.js"),require("kendo.columnmenu.js"),require("kendo.groupable.js"),require("kendo.pager.js"),require("kendo.selectable.js"),require("kendo.sortable.js"),require("kendo.reorderable.js"),require("kendo.resizable.js"),require("kendo.ooxml.js"),require("kendo.excel.js"),require("kendo.pane.js"),require("kendo.progressbar.js"),require("kendo.pdf.js"),require("kendo.dialog.js"),require("kendo.switch.js"),require("kendo.html.button.js"),require("kendo.textbox.js"),require("kendo.form.js"),require("kendo.toolbar.js"),require("kendo.icons.js"),require("kendo.menu.js")):"function"==typeof define&&define.amd?define(["kendo.data.min","kendo.columnsorter.min","kendo.editable.min","kendo.window.min","kendo.filtermenu.min","kendo.filtercell.min","kendo.columnmenu.min","kendo.groupable.min","kendo.pager.min","kendo.selectable.min","kendo.sortable.min","kendo.reorderable.min","kendo.resizable.min","kendo.ooxml.min","kendo.excel.min","kendo.pane.min","kendo.progressbar.min","kendo.pdf.min","kendo.dialog.min","kendo.switch.min","kendo.html.button.min","kendo.textbox.min","kendo.form.min","kendo.toolbar.min","kendo.icons.min","kendo.menu.min"],t):((e="undefined"!=typeof globalThis?globalThis:e||self).kendogrid=e.kendogrid||{},e.kendogrid.js=t())}(this,(function(){!function(e,t){var r=window.kendo,o=r.ui.ContextMenu,l=e.extend,n=r.htmlEncode,a="action",i=o.extend({init:function(e,t){var r=this;o.fn.init.call(r,e,t),r._overrideTemplates(),r._extendItems(),r.bind("select",r._onSelect.bind(r)),r.bind("open",r._onOpen.bind(r))},_overrideTemplates:function(){this.templates.sprite=function(e){var t=e.icon,o=e.spriteCssClass;return""+(t||o?r.ui.icon({icon:n(t||""),iconClass:n(o||"")}):"")}},defaultItems:{separator:{name:"separator",separator:!0},create:{name:"create",text:"Add",icon:"plus",command:"AddCommand",rules:"isEditable"},edit:{name:"edit",text:"Edit",icon:"pencil",command:"EditCommand",rules:"isEditable"},destroy:{name:"destroy",text:"Delete",icon:"trash",command:"DeleteCommand",rules:"isEditable"},select:{name:"select",text:"Select",icon:"table-body",rules:"isSelectable",items:[{name:"selectRow",text:"Row",icon:"table-row-groups",command:"SelectRowCommand"},{name:"selectAllRows",text:"All rows",icon:"grid",command:"SelectAllRowsCommand"},{name:"clearSelection",text:"Clear selection",icon:"table-unmerge",softRules:"hasSelection",command:"ClearSelectionCommand"}]},copySelection:{name:"copySelection",text:"Copy selection",icon:"page-header-section",rules:"isSelectable",softRules:"hasSelection",command:"CopySelectionCommand",options:"withHeaders"},copySelectionNoHeaders:{name:"copySelectionNoHeaders",text:"Copy selection (No Headers)",icon:"file-txt",rules:"isSelectable",softRules:"hasSelection",command:"CopySelectionCommand"},reorderRow:{name:"reorderRow",text:"Reorder row",icon:"caret-alt-expand",rules:"isRowReorderable",softRules:"isSorted",items:[{name:"reorderRowUp",text:"Up",icon:"caret-alt-up",command:"ReorderRowCommand",options:"dir:up"},{name:"reorderRowDown",text:"Down",icon:"caret-alt-down",command:"ReorderRowCommand",options:"dir:down"},{name:"reorderRowTop",text:"Top",icon:"caret-alt-to-top",command:"ReorderRowCommand",options:"dir:top"},{name:"reorderRowBottom",text:"Bottom",icon:"caret-alt-to-bottom",command:"ReorderRowCommand",options:"dir:bottom"}]},exportPDF:{name:"exportPDF",text:"Export to PDF",icon:"file-pdf",command:"ExportPDFCommand"},exportExcel:{name:"exportExcel",text:"Export to Excel",icon:"file-excel",items:[{name:"exportToExcelAll",text:"All",command:"ExportExcelCommand"},{name:"exportToExcelSelection",text:"Selection",command:"ExportExcelCommand",softRules:"hasSelection",options:"selection,withHeaders"},{name:"exportToExcelSelectionNoHeaders",text:"Selection (No Headers)",softRules:"hasSelection",command:"ExportExcelCommand",options:"selection"}]},sortAsc:{name:"sortAsc",text:"Sort Ascending",icon:"sort-asc-small",rules:"isSortable",command:"SortCommand",options:"dir:asc"},sortDesc:{name:"sortDesc",text:"Sort Descending",icon:"sort-desc-small",rules:"isSortable",command:"SortCommand",options:"dir:desc"},moveGroupPrevious:{name:"moveGroupPrevious",text:"Move previous",icon:"arrow-left",rules:"isGroupable",softRules:"canMoveGroupPrev",command:"MoveGroupCommand",options:"dir:prev"},moveGroupNext:{name:"moveGroupNext",text:"Move next",icon:"arrow-right",rules:"isGroupable",softRules:"canMoveGroupNext",command:"MoveGroupCommand",options:"dir:next"}},events:o.fn.events.concat([a]),_onSelect:function(t){var r=e(t.item).data("command"),o=e(t.item).data("options");o=o?o.split(",").map((function(e){var t,r;if(e.indexOf(":")>-1){var o=e.split(":"),l=o[0];e=o[1];return(t={})[l||"_"]=e,t}return(r={})[e]=!0,r})).reduce((function(e,t){return Object.assign(e,t)}),{}):{};var l=e(t.target);r&&this.action({command:r,options:Object.assign(o,{target:l})})},_onOpen:function(t){var o=this,l=t.sender,n=l.options.items,a=e(t.event?t.event.target:null);!n&&e.isEmptyObject(this.defaultItems)||a.closest(".k-grid-column-menu").length?t.preventDefault():(this._toggleSeparatorVisibility(),l.element.find("["+r.attr("soft-rules")+"]").each((function(t,n){var i=e(n).attr(r.attr("soft-rules")).split(";");l.enable(n,o._validateSoftRules(i,a))})))},_toggleSeparatorVisibility:function(){this.element.find(".k-item.k-separator").filter((function(t,r){var o=e(r).prev(".k-item:not(.k-separator)"),l=e(r).next(".k-item:not(.k-separator)");return!(o.length&&l.length)})).hide()},_extendItems:function(){var t,r=this,o=r.options.items;if(o&&o.length)for(var l=0;l<o.length;l++)t=o[l],e.isPlainObject(t)&&1===Object.keys(t).length&&t.name&&(t=t.name),e.isPlainObject(t)?r._append(t):r.defaultItems[t]?(t=r.defaultItems[t],r._append(t)):"string"==typeof t&&(t={name:t,text:t,spriteCssClass:t,command:t+"Command"},r._append(t));else for(var n in r.defaultItems)t=r.defaultItems[n],r._append(t)},_extendItem:function(e){var t=this,o=t.options.messages,n=e.attr||{};if(e.command&&(n[r.attr("command")]=e.command),e.options&&(n[r.attr("options")]=e.options),e.softRules&&(n[r.attr("soft-rules")]=e.softRules),e.items)for(var a=0;a<e.items.length;a++)e.items.forEach((function(e){t._extendItem(e)}));l(e,{text:o.commands[e.name],icon:e.icon||"",spriteCssClass:e.spriteCssClass||"",attr:n,uid:r.guid()})},_validateSoftRules:function(e,t){if(!e||!e||!e.length)return!0;for(var r=0;r<e.length;r++)if(!this._readState(e[r],t))return!1;return!0},_validateRules:function(e){var t=e.rules?e.rules.split(";"):[];if(!t.length)return!0;for(var r=0;r<t.length;r++)if(!this._readState(t[r]))return!1;return!0},_readState:function(e,t){var o=this.options.states;return r.isFunction(o[e])?o[e](t):o[e]},_append:function(e){var t=this;t._extendItem(e),t._validateRules(e)&&t.append(e)},action:function(e){this.trigger(a,e)}});r.ui.grid=r.ui.grid||{},l(r.ui.grid,{ContextMenu:i})}(window.kendo.jQuery),function(e,t){var r=window.kendo,o=e.extend,l=r.Class.extend({init:function(e){this.options=e,this.grid=e.grid}}),n=l.extend({exec:function(){var e=this.grid.groupable,t=this.options,r=t.target.closest(".k-chip"),o="next"===t.dir?"after":"before";("next"===t.dir?r.next():r.prev())[o](r),e._change()}}),a=l.extend({exec:function(){var e,t,r=this.grid,o=r.dataSource,l=o.sort()||[],n=this.options,a=n.dir,i=r._getCellField(n.target),s=r.options.sortable.mode&&"multiple"===r.options.sortable.mode,d=r.options.compare;if(s){for(t=0,e=l.length;t<e;t++)if(l[t].field===i){l.splice(t,1);break}l.push({field:i,dir:a,compare:d})}else l=[{field:i,dir:a,compare:d}];o.sort(l)}}),i=l.extend({exec:function(){this.grid.addRow()}}),s=l.extend({exec:function(){var e=this,t=e.grid,r="incell"===t._editMode(),o=r?e.options.target:e.options.target.closest("tr");r?t.editCell(o):t.editRow(o)}}),d=l.extend({exec:function(){var e=this.grid,t=this.options.target.closest("tr");e.removeRow(t)}}),c=l.extend({exec:function(){var e=this.grid,t=this.options.withHeaders;e.copySelectionToClipboard(t)}}),u=l.extend({exec:function(){var e=this.grid,t=r.ui.Selectable.parseOptions(e.options.selectable),o=this.options.target.closest("tr");e.select(t.cell?o.find("td"):o)}}),h=l.extend({exec:function(){var e=this.grid,t=r.ui.Selectable.parseOptions(e.options.selectable),o=e.items();e.select(t.cell?o.find("td"):o)}}),p=l.extend({exec:function(){this.grid.clearSelection()}}),f=l.extend({exec:function(){var e,t=this,r=t.grid,o=t.options.dir,l=t.options.target.closest("tr"),n=l.index();switch(o){case"up":e=n-1;break;case"down":e=n+2;break;case"top":e=0;break;case"bottom":e=r.items().length}r.reorderRowTo(l,e)}}),g=l.extend({exec:function(){this.grid.saveAsPDF()}}),m=l.extend({exec:function(){var e=this,t=e.options.selection,r=e.options.withHeaders,o=e.grid;t?o.exportSelectedToExcel(r):o.saveAsExcel()}});r.ui.grid=r.ui.grid||{},o(r.ui.grid,{GridCommand:l,commands:{SortCommand:a,AddCommand:i,EditCommand:s,DeleteCommand:d,CopySelectionCommand:c,SelectRowCommand:u,SelectAllRowsCommand:h,ClearSelectionCommand:p,ReorderRowCommand:f,ExportPDFCommand:g,ExportExcelCommand:m,MoveGroupCommand:n}})}(window.kendo.jQuery);return function(e,t){var r,o=window.kendo,l=o.ui,n=o.data.DataSource,a=o.data.ObservableObject,i=o.support.tbodyInnerHtml,s=o._activeElement,d=l.Widget,c=o._outerWidth,u=o._outerHeight,h=o.keys,p=e.isPlainObject,f=e.extend,g=e.map,m=e.grep,b=Array.isArray,k=e.inArray,_=Array.prototype.push,v=o.isFunction,w=o.htmlEncode,C=e.isEmptyObject,y=e.contains,S=Math,x=".",T="progress",H="error",R=":not(.k-group-cell):not(["+o.attr("virtual")+"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left))):visible",I=":not(["+o.attr("virtual")+"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left)))",z="tr:not(.k-footer-template):visible",E=":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible",A="tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible",D="col:not(.k-group-col, .k-hierarchy-col)",M="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",F="a[class*='-i-caret-alt-down']",L="a[class*='-i-caret-alt-right']",q=L,P=".kendoGrid",V="edit",O="beforeEdit",W="save",B="remove",G="detailInit",N="filterMenuInit",j="columnMenuInit",U="filterMenuOpen",K="columnMenuOpen",$="cellClose",Q="changing",Y="change",J="columnHide",X="columnShow",Z="saveChanges",ee="dataBound",te="detailExpand",re="detailCollapse",oe="itemchange",le="page",ne="paging",ae="scroll",ie="sync",se="loadStart",de="loadEnd",ce="k-focus",ue="k-hover",he="k-active",pe=":kendoFocusable",fe="k-selected",ge="k-checkbox",me="input[data-role='checkbox'].k-select-checkbox."+ge,be="k-grid-norecords",ke="k-link",_e="k-icon",ve="k-svg-icon",we="k-sort-order",Ce="k-sorted",ye="k-grid-column-menu",Se="k-grid-filter-menu",xe="k-grid-content-sticky k-table-td",Te="k-grid-header-sticky k-header",He="k-grid-footer-sticky k-table-td",Re="k-grid-no-left-border",Ie="k-grouping-row",ze="resize",Ee="rowResize",Ae="columnResize",De="columnReorder",Me="columnLock",Fe="columnUnlock",Le="columnStick",qe="columnUnstick",Pe="rowReorder",Ve="navigate",Oe="click",We="mousedown",Be="mouseup",Ge="mouseenter",Ne="mouseleave",je="mousemove",Ue="dblclick",Ke="height",$e="width",Qe="auto",Ye="tabIndex",Je="function",Xe="string",Ze="bottom",et="container-for",tt="field",rt="input",ot="incell",lt="inline",nt="overflow",at="sort",it="group-sort",st="Collapse",dt="Expand",ct="id",ut="px",ht="tr",pt="div",ft="aria-label",gt="aria-owns",mt="aria-rowcount",bt="aria-colcount",kt="aria-colindex",_t="aria-rowindex",vt="aria-expanded",wt="aria-checked",Ct="aria-activedescendant",yt="role",St="none",xt="row",Tt="rowgroup",Ht="columnheader",Rt="gridcell",It=/(\}|\#)/gi,zt="[\\x20\\t\\r\\n\\f]",Et=(new RegExp("(\\s*left\\s*:\\s*\\d*px;?)*","ig"),new RegExp("(\\s*right\\s*:\\s*\\d*px;?)*","ig"),new RegExp("(^|"+zt+")(k-group-cell|k-hierarchy-cell)("+zt+"|$)")),At=new RegExp("(^|"+zt+")(k-filter-row)("+zt+"|$)"),Dt=function(e){return'<button type="button" class="'+e.className+'" '+e.attr+">"+e.text+"</button>"},Mt=function(e){var t=e.size;return'<input tabindex="-1" class="k-select-checkbox '+ge+" "+t+' k-rounded-md" data-role="checkbox" aria-label="Select row" aria-checked="false" type="checkbox">'},Ft=function(e){var t=e.size;return'<input tabindex="-1" class="k-select-checkbox '+ge+" "+t+' k-rounded-md" data-role="checkbox" aria-label="Select all rows" aria-checked="false" type="checkbox">'},Lt=function(){return o.ui.icon("reorder")},qt=function(e){return'<span class="k-cell-inner"><span class="k-link"><span class="k-column-title">'+e.text+"</span></span></span>"},Pt=!1,Vt=o.support.browser,Ot=Vt.msie&&11===Vt.version,Wt=/Mac OS/.test(navigator.userAgent),Bt="k-content",Gt="k-scroll-container",Nt="k-cell-inner",jt=["copySelection","copySelectionNoHeaders","separator","create","edit","destroy","select","separator","reorderRow","exportPDF","exportExcel","separator"],Ut=["sortAsc","sortDesc","separator"],Kt=["moveGroupPrevious","moveGroupNext","separator"];l.Pager&&(r=l.Pager.extend({init:function(e,t){l.Pager.fn.init.call(this,e,f(!0,{},t)),this.dataSource.options.useRanges=!0,this.dataSource._omitPrefetch=!0},options:{name:"GroupsPager"},totalPages:function(){return Math.ceil((this._collapsedTotal()||0)/(this.pageSize()||1))},_collapsedTotal:function(){var e=this.dataSource;return e&&e.groupsTotal(!0)||0}}));var $t=d.extend({init:function(e,t){var r=this;d.fn.init.call(r,e,t),r._refreshHandler=r.refresh.bind(r),r.setDataSource(t.dataSource),r.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(Y,t._refreshHandler),t.dataSource=e,t.dataSource.bind(Y,t._refreshHandler),t.dataSource.options.useRanges=!0,t.dataSource.options.virtual=!0},options:{name:"VirtualScrollable",itemHeight:e.noop,prefetch:!0,maxScrollHeight:25e4},events:[ne,le,ae,se,de],destroy:function(){var e=this;d.fn.destroy.call(e),e.dataSource.unbind(Y,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(P),clearTimeout(e._timeout),e._scrollingTimeout&&clearTimeout(e._scrollingTimeout),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,r=this,l=o.support.scrollbar()+1,n=r.element;n.css({width:Qe,overflow:"hidden"}).css(Pt?"padding-left":"padding-right",l),r.content=n.children().first(),t=r.wrapper=r.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().on("DOMMouseScroll"+P+" mousewheel"+P,r._wheelScroll.bind(r)),r._wrapper(),(o.support.kineticScrollNeeded||o.support.touch)&&(r.wrapper.css("touch-action",St),r.drag=new o.UserEvents(r.wrapper,{global:!0,allowSelection:!0,start:function(e){e.sender.capture()},move:function(e){r.verticalScrollbar.scrollTop(r.verticalScrollbar.scrollTop()-e.y.delta),o.scrollLeft(t,o.scrollLeft(t)-e.x.delta),e.preventDefault()}})),r.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:l}).appendTo(n).on("scroll"+P,r._scroll.bind(r))},_wrapper:function(){Ot&&(this.wrapper.css({"overflow-y":ae}),this.element.css(Pt?"padding-left":"padding-right",0))},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.verticalScrollbar,r=t.scrollTop(),l=o.wheelDeltaY(e);!l||l>0&&0===r||l<0&&r+t[0].clientHeight==t[0].scrollHeight||(e.preventDefault(),this.verticalScrollbar.scrollTop(r+-l))}},_scroll:function(e){var t=this,r=!t.options.prefetch,o=e.currentTarget.scrollTop,l=t.dataSource,n=t.itemHeight,a=l.skip()||0,i=t._rangeStart||a,s=t.element.innerHeight(),d=!!(t._scrollbarTop&&t._scrollbarTop>o),c=S.max(S.floor(o/n),0),u=d?S.ceil(s/n):S.floor(s/n),h=S.max(c+u,0);t._preventScroll?t._preventScroll=!1:(t._prevScrollTop=t._scrollTop,t._scrollTop=o-i*n,t._scrollbarTop=o,t._scrolling=r,t._fetch(c,h,d)||(t.wrapper[0].scrollTop=t._scrollTop),t.trigger(ae),r&&(t._scrollingTimeout&&clearTimeout(t._scrollingTimeout),t._scrollingTimeout=setTimeout((function(){t._scrolling=!1,t._page(t._rangeStart,t.dataSource.take())}),100)))},scrollToTop:function(){this._scrollTo(0)},scrollToBottom:function(){var e=this.verticalScrollbar;this._scrollTo(e[0].scrollHeight-e.height())},_scrollWrapperToTop:function(){this.wrapper.scrollTop(0)},_scrollWrapperToBottom:function(){this.wrapper.scrollTop(this.wrapper[0].scrollHeight)},_scrollWrapperOnColumnResize:function(){var e=this,t=this.wrapper,r=t.scrollTop();t[0].scrollWidth>t[0].clientWidth?(!e._wrapperScrolled&&r||e._isScrolledToBottom())&&(t.scrollTop(r+o.support.scrollbar()),e._scrollTop=t.scrollTop(),e._wrapperScrolled=!0):e._wrapperScrolled&&(e._isWrapperScrolledToBottom()||(t.scrollTop(r-o.support.scrollbar()),e._scrollTop=t.scrollTop()),e._wrapperScrolled=!1)},_scrollTo:function(e){var t=this,r=t.verticalScrollbar;r.scrollTop()!==e&&(t._preventScroll=!0),t.wrapper.scrollTop(e),t._scrollTop=t.wrapper.scrollTop(),r.scrollTop(e),t._scrollbarTop=r.scrollTop()},_isScrolledToTop:function(){return 0===this.verticalScrollbar.scrollTop()},_isScrolledToBottom:function(){var e=this.verticalScrollbar,t=e.scrollTop();return t>0&&t>=parseInt(e[0].scrollHeight-e.height(),10)},_isWrapperScrolledToBottom:function(){var e=this.wrapper;return e.scrollTop()>=parseInt(e[0].scrollHeight-e.height(),10)},itemIndex:function(e){return(this._rangeStart||this.dataSource.skip()||0)+e},position:function(e){var t,r=this._rangeStart||this.dataSource.skip()||0,o=this.dataSource.pageSize();return(t=e>r?e-r:r-e-1)>o?o:t},scrollIntoView:function(e){var t=this.wrapper[0],r=t.clientHeight,o=this._isScrolledToBottom()?t.scrollTop:this._scrollTop||t.scrollTop,l=e[0].offsetTop,n=e[0].offsetHeight;o>l?this.verticalScrollbar[0].scrollTop-=r/2:l+n>=o+r&&(this.verticalScrollbar[0].scrollTop+=r/2)},_fetch:function(t,r,o){var l=this,n=l.dataSource,a=l.itemHeight,i=n.take(),s=l._rangeStart||n.skip()||0,d=S.floor(t/i)*i,c=!1,u=l.verticalScrollbar,h=Vt.webkit?1:0,p=n._isGroupPaged()?n.groupsTotal(!0):n.total();return t<s?(c=!0,s=S.max(0,r-i),l._scrollTop=u.scrollTop()-s*a,l._page(s,i)):r>=s+i&&!o?(c=!0,s=S.min(t,p-i),u.scrollTop()>=u[0].scrollHeight-u[0].offsetHeight-h?l._scrollTop=l.wrapper[0].scrollHeight-l.wrapper[0].offsetHeight:l.dataSource._isGroupPaged()&&t>=p-i?l._scrollTop=l.wrapper[0].scrollHeight-l.wrapper[0].offsetHeight-(l._scrollTop-l._prevScrollTop):l._scrollTop=a,l._page(s,i)):!l._fetching&&l.options.prefetch&&(t<d+i-.33*i&&t>i&&n.prefetch(d-i,i,e.noop),r>d+.33*i&&n.prefetch(d+i,i,e.noop)),c},fetching:function(){return this._fetching},_page:function(t,r,o){var l=this,n=!l.options.prefetch,a=l.dataSource,i=a._isGroupPaged();o=v(o)?o:e.noop,l.trigger(ne,{skip:t,take:r})||(clearTimeout(l._timeout),l._fetching=!0,l._rangeStart=t,i&&a._groupRangeExists(t,t+r)||!i&&a.inRange(t,r)?(l.trigger(se),a.range(t,r,(function(){l.trigger(de),o(),l.trigger(le)}),"page")):(n||l.trigger(se),l._timeout=setTimeout((function(){l._scrolling||(n&&l.trigger(se),a.range(t,r,(function(){l.trigger(de),o(),l.trigger(le)})))}),100)))},repaintScrollbar:function(t){var r,l,n=this,a=n.options.maxScrollHeight,i=n.dataSource,s=o.support.kineticScrollNeeded?0:o.support.scrollbar(),d=n.wrapper[0],c=n._isScrolledToBottom();l=n.itemHeight=n.options.itemHeight()||0;var u=d.scrollWidth>d.offsetWidth?s:0;r=(i._isGroupPaged()?i.groupsTotal(!0):i.total())*l+u;var h=e(new Array(S.floor(r/a)+1).join("<div></div>")).css({width:"1px",height:a+"px"});r%a&&(h=h.add(e("<div></div>").css({width:"1px",height:r%a+"px"}))),n.verticalScrollbar.empty().append(h),!c||n._isScrolledToBottom()||n.dataSource._isGroupPaged()||n.scrollToBottom(),void 0!==n._scrollTop&&t&&(d.scrollTop=n._scrollTop,n._scrollWrapperOnColumnResize())},refresh:function(e){var t=this,r=t.dataSource,o=t._rangeStart,l=(e||{}).action,n=t._isScrolledToBottom()||!l||l!==oe&&l!==B&&l!==ie;t.trigger(de),clearTimeout(t._timeout),t.repaintScrollbar(n),t.drag&&t.drag.cancel(),void 0===o||t._fetching||((!l||l!==ie&&l!==oe&&"expandGroup"!==l)&&(t._rangeStart=r.skip()),1!==r.page()||l&&(l===ie||l===oe||"expandGroup"===l||"collapseGroup"===l)||(t.verticalScrollbar[0].scrollTop=0)),t._fetching=!1}});function Qt(e,t){return"["+o.attr(e)+"="+t+"]"}function Yt(e){return new Array(e+1).join('<td class="k-table-td k-group-cell">&nbsp;</td>')}function Jt(e){var t,r=" ";if(e){if(typeof e===Xe)return e;for(t in e)""!==e[t]&&(r+=t+'="'+e[t]+'"')}return r}var Xt={create:{text:"Add new record",className:"k-grid-add",iconClass:"k-i-plus"},cancel:{text:"Cancel changes",className:"k-grid-cancel-changes",iconClass:"k-i-cancel"},save:{text:"Save changes",className:"k-grid-save-changes",iconClass:"k-i-check"},destroy:{text:"Delete",className:"k-grid-remove-command",iconClass:"k-i-x"},edit:{text:"Edit",className:"k-grid-edit-command",iconClass:"k-i-pencil",themeColor:"primary"},update:{text:"Save",className:"k-grid-save-command",iconClass:"k-i-save",themeColor:"primary"},canceledit:{text:"Cancel",className:"k-grid-cancel-command",iconClass:"k-i-cancel-outline"},excel:{text:"Export to Excel",className:"k-grid-excel",iconClass:"k-i-file-excel"},pdf:{text:"Export to PDF",className:"k-grid-pdf",iconClass:"k-i-file-pdf"},search:{text:"Search...",className:"k-grid-search"}};function Zt(t,r){e("th, th .k-grid-filter-menu, th .k-link",t).add(document.body).css("cursor",r)}function er(t,r,o,l,n){var a=r;r=e(),n=n||1;for(var i=0;i<n;i++)r=r.add(t.eq(a+i));"number"==typeof o?r[l?"insertBefore":"insertAfter"](t.eq(o)):r.appendTo(o)}function tr(t,r,o){return e(t).add(r).find(o)}function rr(e,t,r){var o,l,n,a;for(o=0,l=(r=b(r)?r:[r]).length;o<l;o++)n=r[o],p(n)&&n.click&&(a=n.name||n.text,t.on(Oe+P,".k-grid-"+(a||"").replace(/\s/g,""),{commandName:a},n.click.bind(e)))}function or(e,t,r,l,n){return g(e,(function(e){var a;(e=typeof e===Xe?{field:e}:e).parentIds=n,e.attributes instanceof Function&&(e._attributesFunction=e.attributes),hr(e)&&!r||(e.attributes=Zr(e.attributes),e.footerAttributes=Zr(e.footerAttributes),e.headerAttributes=Zr(e.headerAttributes),a=!0);var i=o.guid();return l&&!e.locked&&(e.locked=l),e.headerAttributes=f({headers:n},e.headerAttributes),e.headerAttributes.id?e.uid=i=e.headerAttributes.id:(e.headerAttributes=f({id:i},e.headerAttributes),e.uid=i),e.columns&&(e.columns=or(e.columns,t,a,e.locked,n?n+" "+i:i)),f({encoded:t,hidden:a,locked:l},e)}))}function lr(e,t){var r=[];return nr(e,t,r),r[r.length-1]}function nr(e,t,r){r=r||[];for(var o=0;o<t.length;o++){if(e===t[o])return!0;if(t[o].columns){var l=r.length;if(r.push(t[o]),nr(e,t[o].columns,r))return!0;r.splice(l,r.length-l)}}return!1}function ar(e,t){ir(e,t,t)}function ir(e,t,r){var o=r?eo:Zr;e.hidden=!t,e.attributes=o(e.attributes),e.footerAttributes=o(e.footerAttributes),e.headerAttributes=o(e.headerAttributes)}function sr(e,t){dr(e),ir(e,t,e._hideByMedia?e.matchesMedia:t)}function dr(e){e.matchesMedia=cr(e)}function cr(e){return e&&(gr(e.media)||!gr(e.media)&&o.matchesMedia(e.media))}function ur(){return this.style.display!==St}function hr(e){return pr([e]).length>0}function pr(e){return m(e,(function(e){var t=!e.hidden&&!1!==e.matchesMedia;return t&&e.columns&&(t=pr(e.columns).length>0),t}))}function fr(e){for(var t,r=[],o=0;o<e.length;o++){if(!gr((t=e[o]).media)){if(!gr(t.minScreenWidth))throw new Error("Using 'media' and 'minScreenWidth' options at the same time is not supported.");r.push(t)}t.columns&&(r=r.concat(fr(t.columns)))}return r}function gr(e){return void 0===e}function mr(t){return e(t).map((function(){return this.toArray()}))}function br(e,t){for(var r=0;r<e.length;r++)if(e[r].field==t)return e[r]}function kr(t,r,o,l,n,a,i,s){var d=vr(t),c=vr([r]);if(d>c){var u=new Array(i+1).join('<th class="k-group-cell k-header k-table-th" scope="col">&nbsp;</th>'),h=a.children(":not(.k-filter-row)");e(new Array(d-c+1).join("<tr class='k-table-row'>"+u+"</tr>")).insertAfter(h.last())}!function(e,t){for(var r=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),o=0;o<r.length;o++)r[o].rowSpan+=t}(a,d-c),wr(o,l,n,a,s)}function _r(t,r,l){var n;l=l||0;var a=r;r=Kr(r);for(var i={},s=t.find(">tr:not(.k-filter-row)"),d=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},c=0,u=r.length;c<u;c++)i[(n=Cr(r[c],a)).row]||(i[n.row]=s.eq(n.row).find(".k-header").filter(d)),i[n.row].eq(n.cell).attr(o.attr("index"),l+c);return r.length}function vr(e){for(var t=0,r=0;r<e.length;r++)if(e[r].columns){var o=vr(e[r].columns);o>t&&(t=o)}return 1+t}function wr(t,r,o,l,n){var a,i=xr(t[0],r),s=o.find(">tr:not(.k-filter-row)").eq(i.row).children("th.k-header"),d=e(),c=i.cell;for(a=0;a<t.length;a++)d=d.add(s.eq(c+a));l.find(">tr:not(.k-filter-row)").eq(i.row)[n](d);var u=[];for(a=0;a<t.length;a++)t[a].columns&&(u=u.concat(t[a].columns));u.length&&wr(u,r,o,l,n)}function Cr(e,t,r,o){var l,n;for((o=o||{})[r=r||0]=o[r]||0,n=0;n<t.length;n++){if(t[n]==e){l={cell:o[r],row:r};break}if(t[n].columns&&(l=Cr(e,t[n].columns,r+1,o)))break;o[r]++}return l}function yr(e){var t=e,r=t.match(/class=["][^"]+/g);if(r){var o=r[0].split('"').pop();t=t.replace(o,o+" k-table-td")}else t=t.replace("<td","<td class='k-table-td'");return t}function Sr(e,t,r,o,l){if(t.columns)return(t=t.columns)[o?0:t.length-1];var n,a=lr(t,e);n=a?a.columns:e;var i=k(t,n);0===i&&o?i++:i==n.length-1&&!o||!r.locked&&!t.columns&&!o?i--:(i>0||0===i&&!o)&&i++,t=function(e,t,r,o){var l,n,a=!!r.locked;do{l=e[t],t+=o?1:-1,n=!!l.locked}while(l&&t>-1&&t<e.length&&l!=r&&!l.columns&&n===a);return l}(n,i,r,k(r,n)>i);var s=k(t,l);return(!t.columns||s&&s!==n.length-1)&&t&&t!=r&&t.columns?Sr(e,t,r,o,l):null}function xr(e,t,r,o){var l,n;for((o=o||{})[r=r||0]=o[r]||0,n=0;n<t.length;n++){if(t[n]==e){l={cell:o[r],row:r};break}if(t[n].columns&&(l=xr(e,t[n].columns,r+1,o)))break;t[n].hidden||o[r]++}return l}function Tr(e){return Rr(Pr(e)).concat(Rr(Vr(e)))}function Hr(e,t,r,o){var l=e[r],n=e[o],a=lr(l,t);return t=a?a.columns:t,k(n,t)}function Rr(e){for(var t=[],r=[],o=0;o<e.length;o++)t.push(e[o]),e[o].columns&&(r=r.concat(e[o].columns));return r.length&&(t=t.concat(Rr(r))),t}function Ir(e){for(var t,r=0,o=0;o<e.length;o++)(t=e[o]).columns?r+=Ir(t.columns):t.hidden&&r++;return r}function zr(e){for(var t=0,r=0,o=e.length;r<o;r++)e[r].hidden||(t+=parseInt(e[r].width,10));return t}function Er(e){for(var t,r=0,o=0,l=e.length;o<l;o++)(t=e[o].style.width)&&-1==t.indexOf("%")&&(r+=parseInt(t,10));return r}function Ar(t){for(var r=t.find("tr:not(.k-filter-row)"),o=r.filter((function(){return!e(this).children().length})).remove().length,l=r.find("th:not(.k-group-cell,.k-hierarchy-cell)"),n=0;n<l.length;n++)l[n].rowSpan>1&&(l[n].rowSpan-=o);return r.length-o}function Dr(e,t,r,o,l){var n,a,i,s=[];for(n=0,i=e.length;n<i;n++)(a=r[o]||[]).push(t.eq(l+n)),r[o]=a,e[n].columns&&(s=s.concat(e[n].columns));s.length&&Dr(s,t,r,o+1,l+e.length)}function Mr(e,t,r){e.css({left:t,right:r})}function Fr(e,t,r){e[t]=e[t]||{},e[t][r]=e[t][r]||""}function Lr(e,t,r,o){Fr(e,t,r),""!==e[t][r]?e[t][r]+=" "+o:e[t][r]=o}function qr(e,t,r,o,l){Fr(e,t,r),l?delete e[t][r]:e[t][r]=e[t][r].replace(o,"")}function Pr(e){return m(e,(function(e){return e.locked}))}function Vr(e){return m(e,(function(e){return!e.locked}))}function Or(e){return m(e,(function(e){return e.sticky&&!e.locked}))}function Wr(e){return m(e,(function(e){return!e.locked&&hr(e)}))}function Br(e){return m(e,(function(e){return e.locked&&hr(e)}))}function Gr(e){for(var t=[],r=0;r<e.length;r++)e[r].hidden||(e[r].columns?t=t.concat(Gr(e[r].columns)):t.push(e[r]));return t}function Nr(e){for(var t=[],r=0;r<e.length;r++)e[r].hidden||(e[r].columns?t=t.concat(Gr(e[r].columns)):t.push({field:e[r].field,width:e[r].width,values:e[r].values,title:e[r].title}));return t}function jr(e){for(var t=[],r=0;r<e.length;r++)e[r].columns&&(t=t.concat(e[r].columns));return t}function Ur(e){var t=jr(e);return t=t.filter((function(e){return!e.hidden}))}function Kr(e){for(var t=[],r=0;r<e.length;r++)e[r].columns?t=t.concat(Kr(e[r].columns)):t.push(e[r]);return t}function $r(e){return{field:e.field,title:e.title,format:e.format,editor:e.editor,values:e.values,editorOptions:f(!0,{format:e.format},e.editorOptions),label:e.title||e.field||""}}function Qr(r){var l=r.find(">tr:not(.k-filter-row)"),n=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},a=e();l.length>1&&(a=l.find("th").filter(n).filter((function(){return this.rowSpan>1}))),a=a.add(l.last().find("th").filter(n));var i=o.attr("index");return a.sort((function(r,o){r=e(r),o=e(o);var l=r.attr(i),n=o.attr(i);return l===t&&(l=e(r).index()),n===t&&(n=e(o).index()),(l=parseInt(l,10))>(n=parseInt(n,10))?1:l<n?-1:0})),a}function Yr(t){var r=t.closest("table"),o=e().add(t),l=t.closest(ht),n=r.find("tr:not(.k-filter-row)"),a=n.index(l);if(a>0){for(var i=n.eq(a-1).find("th:not(.k-group-cell,.k-hierarchy-cell)").filter((function(){return!e(this).attr("rowspan")})),s=0,d=l.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),c=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter((function(){return this.colSpan>1})),u=0;u<c.length;u++)s+=c[u].colSpan||1;for(d+=Math.max(s-1,0),s=0,u=0;u<i.length;u++){var h=i.eq(u);if(h.attr("data-colspan")?s+=h[0].getAttribute("data-colspan"):s+=1,d>=u&&d<s){o=Yr(h).add(o);break}}}return o}function Jr(t){var r=t.closest("thead"),l=e().add(t),n=t.closest(ht),a=r.find("tr:not(.k-filter-row)"),i=a.index(n)+t[0].rowSpan,s=o.attr("colspan");if(i<=a.length-1){var d,c=n.next(),u=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)");u=u.filter((function(){return!this.rowSpan||1===this.rowSpan}));var h=0;for(d=0;d<u.length;d++)h+=parseInt(u.eq(d).attr(s),10)||1;var p=c.find("th:not(.k-group-cell,.k-hierarchy-cell)"),f=parseInt(t.attr(s),10)||1;for(d=0;d<f;){c=p.eq(d+h),l=l.add(Jr(c));var g=parseInt(c.attr(s),10);g>1&&(f-=g-1),d++}}return l}function Xr(t,r,l,n,a){var s,d=t;if(n&&t.empty(),i){var c=e(l);o.applyStylesFromKendoAttributes(c,["display","left","right"]),t.empty().append(c)}else(s=document.createElement(pt)).innerHTML="<table class='k-grid-table k-table'><tbody class='k-table-tbody'>"+l+"</tbody></table>",e(s).find("table").addClass(o.getValidCssClass("k-table-","size",a)),t=s.firstChild.firstChild,r[0].replaceChild(t,d[0]),t=e(t);return t}function Zr(e){e=e||{};var t={};return t[o.attr("style-display")]="none",f({},e,t)}function eo(e){return delete(e=e||{})[o.attr("style-display")],e}function to(t,r,l,n){var a,i=t.find(">colgroup"),s=g(r,(function(e){return(a=e.width)&&0!==parseInt(a,10)?o.format("<col "+o.attr("style-width")+'="{0}"/>',typeof a===Xe?a:a+ut):"<col />"}));(l||i.find(".k-hierarchy-col").length)&&s.splice(0,0,'<col class="k-hierarchy-col" />'),i.length&&i.remove(),i=e(new Array(n+1).join('<col class="k-group-col">')+s.join("")),o.applyStylesFromKendoAttributes(i,["width"]),i.is("colgroup")||(i=e("<colgroup/>").append(i)),t.prepend(i)}function ro(e){var t,r,o,l={};for(r=0,o=e.length;r<o;r++)l[(t=e[r]).value]=t.text;return l}function oo(e,t,r,l){var n=r&&r.length&&p(r[0])&&"value"in r[0]?ro(r)[e]:e;return n=null!=n?n:"",t?o.format(t,n):!1===l?n:o.htmlEncode(n)}function lo(e,t,r){for(var o=0,l=e[o];l;){if((!!r||l.style.display!==St)&&!Et.test(l.className)&&--t<0){l.style.display=r?"":St;break}l=e[++o]}}function no(t,r){for(var o,l,n=0,a=t.length;n<a;n+=1)(l=t.eq(n)).is(".k-grouping-row,.k-detail-row")?(o=l.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(o.attr("colspan"),10)-1):(l.hasClass("k-grid-edit-row")&&(o=l.children(".k-edit-container")[0])&&((o=e(o)).attr("colspan",parseInt(o.attr("colspan"),10)-1),o.find("col").eq(r).remove(),l=o.find(ht).first()),lo(l[0].cells,r,!1))}function ao(e){for(var t,r=[],o=0;o<e.length&&("field"in(t=e[o])&&"value"in t&&"items"in t);o++)r.push(t),t.hasSubgroups&&(r=r.concat(ao(t.items)));return r}function io(e){for(var t,r=[],o=0;o<e.length&&("field"in(t=e[o])&&"value"in t&&"items"in t);o++)t.hasSubgroups&&(r=r.concat(io(t.items))),r.push(t.aggregates);return r}function so(t,r){for(var o,l,n=0,a=t.length;n<a;n+=1)(l=t.eq(n)).is(".k-grouping-row,.k-detail-row")?(o=l.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(o.attr("colspan"),10)+1):(l.hasClass("k-grid-edit-row")&&(o=l.children(".k-edit-container")[0])&&((o=e(o)).attr("colspan",parseInt(o.attr("colspan"),10)+1),to(o.find(">form>table"),pr(undefined),!1,0),l=o.find(ht).first()),lo(l[0].cells,r,!0))}function co(e,t,r){var o,l,n;for(r=r||1,l=0,n=e.length;l<n;l++)(o=e.eq(l).children(":not([hidden])").last()).attr("colspan",parseInt(o.attr("colspan"),10)+r),(o=t.eq(l).children(":not([hidden])").last()).attr("colspan",parseInt(o.attr("colspan"),10)-r)}function uo(e){var t,r,o=0,l=e.find(">colgroup>col");for(t=0,r=l.length;t<r;t+=1)o+=parseInt(l[t].style.width,10);return o}var ho=o.ui.DataBoundWidget.extend({init:function(t,r,l){var n=this;r=b(r)?{dataSource:r}:r,d.fn.init.call(n,t,r),l&&(n._events=l),Pt=o.support.isRtl(t),L=Pt?"a[class*='-i-caret-alt-left']":q,n._element(),n._ariaId(),n._columns(e.extend(!0,[],n.options.columns)),n._foreignKeyPromises?e.when.apply(null,n._foreignKeyPromises).then((function(){n._foreignKeyPromises=null,n._continueInit()})):n._continueInit()},_continueInit:function(){var t=this;t._dataSource(),t._stickyColumns(),t._tbody(),t._thead(),t._rowResizing(),t._groupable(),t._toolbar(),t._pageable(),t._setContentHeight(),t._templates(),t._navigatable(),t._selectable(),t._clipboard(),t._details(),t._editable(),t._attachCustomCommandsEvent(),t._adaptiveColumns(),t._minScreenSupport(),t.options.autoBind?t.dataSource.fetch():(t._group=t._groups()>0,t._footer()),t.options.contextMenu&&t._initContextMenu(),t.lockedContent&&(t.wrapper.addClass("k-grid-lockedcolumns"),t._resizeHandler=function(){t.resize()},e(window).on("resize"+P,t._resizeHandler)),o.notify(t),t._showWatermarkOverlay&&t._showWatermarkOverlay(t.wrapper[0])},events:[Y,Q,"dataBinding","cancel",ee,te,re,G,N,U,j,K,V,O,W,B,Z,$,Ee,Ae,De,X,J,Me,Fe,Le,qe,Pe,Ve,"page","sort","filter","group","groupExpand","groupCollapse","kendoKeydown"],setDataSource:function(e){var t,r=this,l=r.options.scrollable;r.options.dataSource=e,r._dataSource(),r._pageable(),r._thead(),r._rowResizing(),l&&(l.virtual?(t=r.content.find(">.k-virtual-scrollable-wrap"),o.scrollLeft(t,vo(t,Pt))):(t=r.tbody,o.scrollLeft(r.content,vo(t,Pt)))),r.options.groupable&&r._groupable(),r.virtualScrollable&&r.virtualScrollable.setDataSource(r.options.dataSource),r.options.navigatable&&r._navigatable(),r.options.selectable&&r._selectable(),r.options.autoBind?r.dataSource.fetch():r._footer()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,navigatable:!1,pageable:!1,persistSelection:!1,editable:!1,encodeTitles:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",search:!1,noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,contextMenu:!1,columnResizeHandleWidth:3,size:"medium",mobile:"",loaderType:"loadingPanel",messages:{editable:{cancelDelete:"Cancel",confirmation:"Are you sure you want to delete this record?",confirmDelete:"Delete"},commands:{create:Xt.create.text,cancel:Xt.cancel.text,save:Xt.save.text,destroy:Xt.destroy.text,edit:Xt.edit.text,update:Xt.update.text,canceledit:Xt.canceledit.text,excel:Xt.excel.text,pdf:Xt.pdf.text,search:Xt.search.text,select:"Select",selectRow:"Select Row",selectAllRows:"All rows",clearSelection:"Clear selection",copySelection:"Copy selection",copySelectionNoHeaders:"Copy selection (No Headers)",reorderRow:"Reorder row",reorderRowUp:"Up",reorderRowDown:"Down",reorderRowTop:"Top",reorderRowBottom:"Bottom",exportPdf:"Export to PDF",exportExcel:"Export to Excel",exportToExcelAll:"All",exportToExcelSelection:"Selection",exportToExcelSelectionNoHeaders:"Selection (No Headers)",sortAsc:"Sort Ascending",sortDesc:"Sort Descending",moveGroupPrevious:"Move previous",moveGroupNext:"Move next"},noRecords:"No records available.",expandCollapseColumnHeader:"",groupHeader:"Press ctrl + space to group",ungroupHeader:"Press ctrl + space to ungroup",itemsSelected:"items selected",dragHandleLabel:"Drag row",toolbarLabel:"grid toolbar",groupingHeaderLabel:"grid grouping header",filterCellTitle:"filter cell"},width:null},destroy:function(){var t,r,l=this;l._angularItems("cleanup"),l._destroyColumnAttachments(),d.fn.destroy.call(l),this._navigatableTables&&(this._navigatableTables.off(P),this._navigatableTables=null,this._headertables=null),l._resizeHandler&&e(window).off("resize"+P,l._resizeHandler),l.pager&&l.pager.element&&l.pager.destroy(),l.timer&&clearTimeout(l.timer),l._progressTimeOut&&clearTimeout(l._progressTimeOut),l._collapseGroupsTimeOut&&clearTimeout(l._collapseGroupsTimeOut),l._endlessFetchTimeOut&&clearTimeout(l._endlessFetchTimeOut),l.pager=null,l._destroyGroupable(),(r=l.wrapper.data("kendoReorderable"))&&r.destroy(),(r=l.tbody?l.tbody.data("kendoReorderable"):null)&&r.destroy(),l.selectable&&l.selectable.element&&(l.selectable.destroy(),l.clearArea(),l._selectedIds=null,l.copyHandler&&(l.wrapper.off("keydown",l.copyHandler),l.unbind(l.copyHandler)),l.updateClipBoardState&&(l.unbind(l.updateClipBoardState),l.updateClipBoardState=null),l.clearAreaHandler&&l.wrapper.off("keyup",l.clearAreaHandler)),l.selectable=null,l.resizable&&(l.resizable.destroy(),l._resizeUserEvents&&(l._resizeHandleDocumentClickHandler&&e(document).off("click",l._resizeHandleDocumentClickHandler),l._resizeUserEvents.destroy(),l._resizeUserEvents=null),l.resizable=null),l._destroyRowResizing(),l._destroyVirtualScrollable(),l.editableUserEvents&&(l.editableUserEvents.destroy(),l.editableUserEvents=null),l._lockedContentUserEvents&&(l._lockedContentUserEvents.destroy(),l._lockedContentUserEvents=null),l._destroyEditable(),l.dataSource&&(l.dataSource.unbind(Y,l._refreshHandler).unbind(T,l._progressHandler).unbind(H,l._errorHandler).unbind(at,l._clearSortClasses),l._refreshHandler=l._progressHandler=l._errorHandler=l._sortHandler=null),t=l.element.add(l.wrapper).add(l.table).add(l.thead).add(l.wrapper.find(">.k-grid-toolbar")),l.content&&(t=t.add(l.content).add(l.content.find(">.k-virtual-scrollable-wrap"))),l.lockedHeader&&l._removeLockedContainers(),l.pane&&l.pane.destroy(),l._isMobile&&(l.wrapper.off("transitionend"+P),l.wrapper.off("contextmenu"+P)),l.minScreenResizeHandler&&e(window).off("resize",l.minScreenResizeHandler),l._detachColumnMediaResizeHandler(),l._draggableInstance&&l._draggableInstance.element&&l._draggableInstance.destroy(),l._draggableInstance=null,l._draggableRowsInstance&&l._draggableRowsInstance.element&&l._draggableRowsInstance.destroy(),l.tbodyContextMenu&&l.tbodyContextMenu.destroy(),l.theadContextMenu&&l.theadContextMenu.destroy(),l._draggableRowsInstance=null,t.off(P),o.destroy(l.wrapper),l.rowTemplate=l.altRowTemplate=l.lockedRowTemplate=l.lockedAltRowTemplate=l.detailTemplate=l.footerTemplate=l.groupFooterTemplate=l.lockedGroupFooterTemplate=l.noRecordsTemplate=null,l.scrollables=l.thead=l.tbody=l.element=l.table=l.content=l.footer=l.wrapper=l.lockedTable=l.lockedContent=l.lockedHeader=l.lockedFooter=l._groupableClickHandler=l._groupRows=l._setContentWidthHandler=null},getOptions:function(){this.options.dataSource=null;var r=f(!0,{},this.options);r.columns=o.deepExtend([],this.columns);var l=this.dataSource,n=l.options.data&&l._data;return l.options.data=null,r.dataSource=e.extend(!0,{},l.options),l.options.data=n,r.dataSource.data=n,r.dataSource.page=l.page(),r.dataSource.filter=e.extend(!0,{},l.filter()),r.dataSource.pageSize=l.pageSize(),r.dataSource.sort=l.sort(),r.dataSource.group=l.group(),r.dataSource.aggregate=l.aggregate(),r.dataSource.transport&&(r.dataSource.transport.dataSource=null),r.pageable&&r.pageable.pageSize&&(r.pageable.pageSize=l.pageSize()),r.$angular=t,r},setOptions:function(e){var t=this.getOptions();o.deepExtend(t,e),e.dataSource?e.dataSource.filter&&(t.dataSource.filter=e.dataSource.filter):t.dataSource=this.dataSource;var r=this.wrapper,l=this._events,n=this.element;if(this.destroy(),this.options=null,this._isMobile){var a=r.closest(o.roleSelector("pane")).parent();a.after(r),a.remove(),r.removeClass("k-grid-mobile")}r[0]!==n[0]&&(r.before(n),r.remove()),n.empty(),this.init(n,t,l),this._setEvents(t)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t,r){return t.children().filter((function(){var t=e(this);return!((r?t.hasClass("k-detail-row"):t.hasClass(Ie))||t.hasClass("k-detail-row")||t.hasClass("k-group-footer"))}))},dataItems:function(){var e=o.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(var t=e.length,r=new Array(2*t),l=t;--l>=0;)r[l]=r[l+t]=e[l];e=r}return e},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&(this.angular("cleanup",(function(){return{elements:t.thead.get()}})),t.thead.add(t.lockedHeader).find("th").each((function(){var t=e(this),r=t.data("kendoFilterMenu"),o=t.data("kendoColumnSorter"),l=t.data("kendoColumnMenu");r&&r.destroy(),o&&o.destroy(),l&&l.destroy()})))},_attachCustomCommandsEvent:function(){var e,t,r,o=this,l=Kr(o.columns||[]);for(t=0,r=l.length;t<r;t++)(e=l[t].command)&&rr(o,o.wrapper,e)},_aria:function(){var e,t,r,l,n,a=this.wrapper,i=this._hasDetails()?"treegrid":this.options.navigatable?"grid":null,s=this.table,d=a.find(".k-grid-toolbar"),c=a.find(".k-grouping-header"),u=s.attr(ct),h=s.attr(Ye),p=this.thead.find(ht).length+this.wrapper.find(".k-grid-footer-wrap table tr").length,f=this._trailingColumns(),g=this.virtualScroll,m=this.options.pageable;s.attr(Ye,h>=0?h:0),i&&s.attr(yt,i),s.find("tbody, thead, tfoot").attr(yt,Tt),s.find(ht).attr(yt,xt),s.find("th").attr(yt,Ht),s.find("td").attr(yt,Rt),m&&this.dataSource.totalPages()>1||g&&g.rows?(n=this._groups()>0?-1:this._hasDetails()?p+2*this.dataSource.total():p+this.dataSource.total(),s.attr(mt,n)):this._hasDetails()&&(n=this._groups()>0?-1:p+2*this.dataSource.total(),s.attr(mt,n)),n&&n>0&&this._ariaRowIndex(),(g&&g.columns||!s.attr(bt)&&(s.find("td:not([group-header-spanned-hidden]):hidden").length>0||a.find(".k-grid-content-locked td:not([group-header-spanned-hidden]):hidden").length>0))&&(s.attr(bt,f+Kr(this.columns).length),this._ariaColumnIndex()),u||(u=o.guid(),s.attr(ct,u)),this.pager&&this.pager.element.attr("aria-controls",u),d.attr({role:"toolbar","aria-label":this.options.messages.toolbarLabel,"aria-controls":u}),c.attr({role:"toolbar","aria-label":this.options.messages.groupingHeaderLabel,"aria-controls":u}),t=this._ariaHeaderFooter("header","thead","th, td",Ht),r=this._ariaHeaderFooter("footer","tfoot","td",Rt),a.find(".k-grid-content-locked").length>0&&this._ariaLockedContent(),(t||r)&&(l=[t,e=this.tbody.attr(ct)||o.guid(),r].join(" "),this.tbody.attr(ct,e),s.attr(gt,l)),this.options.groupable&&this._ariaGroupTitles()},_ariaColumnIndex:function(){var t,r,o,l,n=this._trailingColumns(),a=this.tbody.find(">tr").last().find("> td[data-virtual]"),i=this.thead.find(">tr").not(".k-filter-row"),s=this.wrapper.find(".k-grid-header-locked thead > tr").not(".k-filter-row"),d=Number.MAX_VALUE,c=0,u=0,h=0,p=0,f=function(r,o){var l=o.getAttribute("data-index"),n=Number(l),a=e(o).closest(".k-grid-header-locked");0===a.length&&n<d&&(d=n),a.length>0&&u<n&&(u=n),0===a.length&&c<n&&(c=n),null!==l?(o.setAttribute(kt,Number(n)+1),t=Number(n)+1+o.getAttribute("colspan")):(o.setAttribute(kt,t+1),t+=o.getAttribute("colspan"))};for(2===a.length?(h=Number(a[0].getAttribute("colspan")),p=Number(a[1].getAttribute("colspan"))):1===a.length&&0===a.prev().length?h=Number(a[0].getAttribute("colspan")):1===a.length&&1===a.prev().length&&(p=Number(a[0].getAttribute("colspan"))),r=0;r<s.length;r++)t=0,s.eq(r).find("th").each(f);for(r=0;r<i.length;r++)t=0,i.eq(r).find("th").each(f);for(r=0;r<=u;r++)o=r+n,this.wrapper.find(".k-grid-content-locked tbody > tr > td:nth-child("+(r+1)+")").attr(kt,o+1);for(r=h;r<=c-d-p;r++)l=0===h?r+1:r-h+2,o=d+r+n,this.tbody.find("> tr > td:nth-child("+l+")").attr(kt,o+1)},_ariaGroupTitles:function(){var e=this,t=e.dataSource.group(),r=e.wrapper.find(".k-grid-header th");r.each((function(t,r){r.getAttribute("title")===e.options.messages.ungroupHeader&&r.setAttribute("title",e.options.messages.groupHeader)})),t&&t.length>0&&t.forEach((function(t){var l=t.field,n=r.filter("["+o.attr("field")+"='"+l+"']");n.attr("title")===e.options.messages.groupHeader&&n.attr("title",e.options.messages.ungroupHeader)}))},_ariaHeaderFooter:function(e,t,r,l){var n,a=this.wrapper,i=a.find(".k-grid-"+e+" .k-grid-"+e+"-wrap table"),s=a.find(".k-grid-"+e+" .k-grid-"+e+"-locked table"),d="";return i.length>0&&(d=(n=i.find(t+", tbody")).attr(ct)||o.guid(),i.attr(yt,St),i.find(ht).attr(yt,xt),i.find(r).attr(yt,l),n.attr({role:Tt,id:d})),s.length>0&&this._ariaLocked(e,t,r,l),s.find("td").attr(yt,Rt),i.find("td").attr(yt,Rt),d},_ariaId:function(){var e=this.element.attr(ct)||"aria";e&&(this._cellId=e+"_active_cell")},_ariaLocked:function(t,r,o,l){var n=this,a=n.wrapper,i=a.find(".k-grid-"+t+" .k-grid-"+t+"-wrap table"),s=a.find(".k-grid-"+t+" .k-grid-"+t+"-locked table"),d=i.find(ht),c=s.find(ht);s.attr(yt,St),s.find(r+", tbody").attr(yt,St),c.attr(yt,St),s.find(o).attr(yt,l),d.each((function(r,l){var a=[];a=(a=n._cellsIds(c.eq(r).find(o),"locked_"+t,r)).concat(n._cellsIds(e(l).find(o),t,r)),l.setAttribute(gt,a.join(" "))}))},_ariaLockedContent:function(){var t=this,r=t.table.find(ht),o=t.wrapper.find(".k-grid-content-locked table"),l=o.find(ht);o.attr(yt,St),o.find("tbody").attr(yt,St),l.attr(yt,St),o.find("td").attr(yt,Rt),r.each((function(r,o){var n=[];n=(n=t._cellsIds(l.eq(r).find("td"),"locked_datacell",r)).concat(t._cellsIds(e(o).find("td"),"datacell",r)),o.setAttribute(gt,n.join(" "))}))},_ariaAddHiddenColIndex:function(){var e=this.virtualScroll||{},t=this.columns,r=this.table,o=Kr(t).length;e.columns||r.attr(bt)||(this._ariaColumnIndex(),r.attr(bt,o))},_ariaRemoveHiddenColIndex:function(){var e=this.virtualScroll||{},t=Kr(this.columns).length;e.columns||t!==Gr(this.columns).length||(this.wrapper.find("td, th").removeAttr(kt),this.table.removeAttr(bt))},_ariaRowIndex:function(){var e,t,r=this.thead.find(">tr"),o=r.length,l=this.tbody.find(">tr"),n=this.wrapper.find(".k-grid-footer-wrap tfoot > tr"),a=this.dataSource.total(),i=this.dataSource.skip()||0,s=1,d=!1;for(this._hasDetails()&&(a*=2,i*=2),e=0;e<o;e++)r.eq(e).attr(_t,s+e);for(s=o+i,e=0;e<l.length;e++)t=l.eq(e),this._hasDetails()&&t.hasClass("k-master-row")?(s+=d?2:1,d=!0):(s+=1,d=!1),t.attr(_t,s);for(s=o+a+1,e=0;e<n.length;e++)n.eq(e).attr(_t,s+e)},_cellsIds:function(e,t,r){var o=[];return e.each((function(e,l){var n=l.getAttribute(ct)||t+"_"+r+"_"+e;l.setAttribute(ct,n),o.push(n)})),o},_trailingColumns:function(){return this._groups()+(this._hasDetails()?1:0)},_element:function(){var t=this,r=t.element;r.is("table")||(r=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table")).length||(r=e("<table />").appendTo(t.element)),r.addClass("k-grid-table k-table"),r.addClass(o.getValidCssClass("k-table-","size",t.options.size)),t.table=r,t._wrapper()},_createResizeHandle:function(t,r){var l,n,a,i,s,d,c,h=this,p=h.options.columnResizeHandleWidth,f=h.options.scrollable,g=h.resizeHandle,m=3*p/2,b=0;g&&h.lockedContent&&g.data("th")[0]!==r[0]&&(g.off(P).remove(),g=null),g||(g=h.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(g)),s=o.scrollLeft(t),Pt&&(Vt.mozilla||Vt.webkit&&Vt.version>=85)&&(s*=-1),i=parseFloat(t.css("borderLeftWidth")),d=r.offset().left+s-parseFloat(r.css("marginLeft"))-(t.offset().left+i),Pt?f&&(b=d<=s?m:0,(l=r.closest(".k-grid-header-wrap, .k-grid-header-locked"))[0].scrollWidth-l[0].offsetWidth,a=parseFloat(l.css("marginLeft")),n=Vt.msie?2*o.scrollLeft(l)+i-a-b:0,d-=-b+(Vt.mozilla?i-a-b:0)+n):d+=r[0].offsetWidth,c=r.offset().top-parseFloat(r.css("marginTop"))-(t.offset().top+parseFloat(t.css("borderTopWidth"))),g.css({top:c,left:d-m,height:u(r),width:3*p-b}).data("th",r).show(),g.off(Ue+P).on(Ue+P,(function(){h._autoFitLeafColumn(parseInt(r.attr(o.attr("index")),10))}))},_positionColumnResizeHandle:function(){var t=this,r=t.lockedHeader?t.lockedHeader.find("thead").first():e();t.thead.add(r).on(je+P,"tr:not(.k-filter-row) > th",(function(r){var l=void 0!==r.buttons?r.buttons:r.which||r.button,n=e(this);n.hasClass("k-group-cell")||n.hasClass("k-hierarchy-cell")||void 0!==l&&0!==l||n[0].hasAttribute(o.attr("colSpan"))||t._createResizeHandle(n.closest(pt),n)}))},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._resetResizeHandleHeader(),this._hideResizeHandle())},_resetResizeHandleHeader:function(){var t;this.resizeHandle&&(t=e(this.resizeHandle).data("th"))&&(t.find(x+ke).find(x+_e+","+x+ve).show(),t.find(x+we).show(),t.find(x+ye).show(),t.find(x+Se).show())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.off(P).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,r=t.lockedHeader?t.lockedHeader.find("thead").first():e();t._resizeUserEvents=new o.UserEvents(r.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,minHold:500,hold:function(r){var o=e(r.target);r.preventDefault(),t.resizeHandle&&(t.resizeHandle.data("th").removeClass("k-column-active"),t._resetResizeHandleHeader()),o.addClass("k-column-active"),o.find(x+ke).find(x+_e+","+x+ve).hide(),o.find(x+we).hide(),o.find(x+ye).hide(),o.find(x+Se).hide(),t._createResizeHandle(o.closest(pt),o),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=t._resizeHandleDocumentClick.bind(t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},resizeColumn:function(t,r){var l,n=this,a=!!t.locked,i=!!t.hidden,s=this.options,d=o.support.mobileOS?0:o.support.scrollbar(),u=k(t,a?Br(Gr(n.columns)):Wr(Gr(n.columns))),h=a?n.lockedTable:n.table,p=n.footer||e(),f=a?n.lockedHeader.find("table"):n.thead.closest("table"),g=t.minResizableWidth||10,m=c(a?h.find("tbody"):n.tbody);if(i)t.width=r>g?r:g;else{if(n.footer&&n.lockedContent&&(p=a?n.footer.children(".k-grid-footer-locked"):n.footer.children(".k-grid-footer-wrap")),l=s.scrollable?f.find("col:not(.k-group-col,.k-hierarchy-col)").eq(u).add(h.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(u)).add(p.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(u)):h.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(u),s.scrollable){var b=!1,_=n.wrapper.width()-d,v=r=r>g?r:g;a&&m-r+v>_&&((v=r+(_-m-2*d))<0&&(v=r),b=!0),v>10&&v>=g&&(l.css("width",v),m&&(v=b?_-2*d:m+(r-t.width),h.add(f).add(p).css("width",v),a||(n._footerWidth=v))),n._scrollVirtualWrapperOnColumnResize()}else r>10&&r>=g&&l.css("width",r);t.width=r,n._applyLockedContainersWidth(),n._syncLockedContentHeight(),n._syncLockedHeaderHeight(),n._updateStickyColumns()}},_resizable:function(){var t,r,n,a,i,s,d,h,p=this,f=p.options,g=this._isMobile,m=o.support.mobileOS?0:o.support.scrollbar();(!0===f.resizable||f.resizable&&!0===f.resizable.columns)&&(t=f.scrollable?p.wrapper.find(".k-grid-header-wrap").first():p.wrapper,g?p._positionColumnResizeHandleTouch(t):p._positionColumnResizeHandle(t),p.resizable&&p.resizable.destroy(),p.resizable=new l.Resizable(t.add(p.lockedHeader),{handle:(f.scrollable?"":">")+".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:u(t.data("th"))+p.tbody.attr("clientHeight")})},start:function(t){h=e(t.currentTarget).data("th"),g&&p._hideResizeHandle();var o=h.closest("table"),l=e.inArray(h[0],Qr(h.closest("thead")).filter(":visible")),u=(s=o.parent().hasClass("k-grid-header-locked"))?p.lockedTable:p.table,m=p.footer||e();p.footer&&p.lockedContent&&(m=s?p.footer.children(".k-grid-footer-locked"):p.footer.children(".k-grid-footer-wrap")),Zt(p.wrapper,"col-resize"),d=f.scrollable?o.find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(l).add(u.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(l)).add(m.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(l)):u.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(l);var b=e.map(p.columns,(function(e){return!e.hidden&&(s&&e.locked||!s&&!e.locked)?e:null}));r=t.x.location,n=c(h),a=Kr(b)[l].minResizableWidth||10,i=c(s?u.children("tbody"):p.tbody),Vt.webkit&&p.wrapper.addClass("k-grid-column-resizing")},resize:function(t){var o=Pt?-1:1,l=n+t.x.location*o-r*o;if(f.scrollable){var c;s&&p.lockedFooter?c=p.lockedFooter.children("table"):p.footer&&(c=p.footer.find(">.k-grid-footer-wrap>table")),c&&c[0]||(c=e());var u=h.closest("table"),g=s?p.lockedTable:p.table,b=!1,k=p.wrapper.width()-m,_=l;s&&i-n+_>k&&((_=n+(k-i-2*m))<0&&(_=l),b=!0),_>10&&_>=a&&(d.css("width",_),i&&(_=b?k-2*m:i+t.x.location*o-r*o,g.add(u).add(c).css("width",_),s||(p._footerWidth=_))),p._scrollVirtualWrapperOnColumnResize()}else l>10&&l>=a&&d.css("width",l)},resizeend:function(){var e,t,r=c(h);if(Zt(p.wrapper,""),Vt.webkit&&p.wrapper.removeClass("k-grid-column-resizing"),h&&n!=r){t=p.lockedHeader?p.lockedHeader.find("thead").first().find(ht).first().add(p.thead.find(ht).first()):h.parent();var l=h.attr(o.attr("index"));l||(l=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(h)),(e=Kr(p.columns)[l]).width=r,p.trigger(Ae,{column:e,oldWidth:n,newWidth:r}),p._applyLockedContainersWidth(),p._syncLockedContentHeight(),p._syncLockedHeaderHeight(),p._updateStickyColumns()}p._resetResizeHandleHeader(),p._hideResizeHandle(),h=null}}))},_addLockedRowResizing:function(e){var t=e.index();return this.lockedTable.find(ht).eq(t).add(this.tbody.find(ht).eq(t))},_getMinRowHeight:function(e){var t=0;return e.each((function(e,r){var o;r.style.height="",(o=u(r))>t&&(t=o)})),t},_cacheRowHeight:function(e,t){var r=this;r._cachedRowsHeight||(r._cachedRowsHeight={}),e.each((function(e,o){var l=o.getAttribute("data-uid");r._cachedRowsHeight[l]=t}))},_clearCachedRowsHeight:function(e){var t=this;e&&t._cachedRowsHeight?e.each((function(e,r){var o=r.getAttribute("data-uid");delete t._cachedRowsHeight[o]})):t._cachedRowsHeight=null},_mapCachedRowsHeight:function(e,t){var r=this._cachedRowsHeight,o=this.dataSource,l={};Object.keys(r).forEach((function(n){var a=o[e](n);l[a[t]]=r[n]})),this._cachedRowsHeight=l},_rowResizerDblClick:function(){var t,r,o=this,l=o.rowResizer,n=l.data(ht),a=u(n);r=n.hasClass(fe)?o.select():n,o.lockedTable?(r=(n=o._addLockedRowResizing(n)).hasClass(fe)?o.lockedTable.find(x+fe):o.lockedTable.find(ht).eq(n.index())).each((function(t,r){var l=r.rowIndex,n=e(r).add(o.tbody.find(ht).eq(l)),a=o._getMinRowHeight(n);n.css(Ke,a)})):r.css(Ke,Qe),o._clearCachedRowsHeight(r),l.removeClass(ue),l.removeClass(he),a!=(t=u(n))&&o.trigger(Ee,{row:n,rows:r,oldHeight:a,newHeight:t})},_setupRowResizer:function(e,t,r){e.data(ht,t).css({top:r})},_attachRowResizerEvents:function(){var e=this.rowResizer,t=!1;e.on(We+P,(function(t){0===t.button&&(e.removeClass(ue),e.addClass(he))})).on(Be+P,(function(t){0===t.button&&(e.removeClass(he),e.addClass(ue))})).on(Ge+P,(function(){t=!0,setTimeout((function(){t&&e.addClass(ue)}),200)})).on(Ne+P,(function(){t=!1,e.removeClass(ue)}))},_getResizerTop:function(e,t){var r=this.rowResizer,o=r.find(".k-row-resizer")[0],l=parseInt(getComputedStyle(r[0]).paddingTop);return e.offset().top-parseFloat(e.css("marginTop"))-(t.offset().top+parseFloat(t.css("borderTopWidth")))-o.clientHeight-l+t.scrollTop()},_getResizerContainer:function(){var e=this.tbody.closest(pt);return this.lockedTable&&(e=e.closest(".k-grid-container")),e},_createRowResizer:function(t){var r,o=this,l=e(t.currentTarget),n=t.currentTarget.clientHeight,a=t.offsetY,i=o.rowResizer,s=l.prev("tr:visible"),d=o._getResizerContainer();i||(i=o.rowResizer=e('<div class="k-resizer-wrap"><div class="k-row-resizer"></div></div>'),d.append(i),o._attachRowResizerEvents(),i.off(Ue+P).on(Ue+P,o._rowResizerDblClick.bind(o))),r=o._getResizerTop(l,d),0!==s.length&&n/2>a?s.hasClass(Ie)||o._setupRowResizer(i,s,r):l.hasClass(Ie)||o._setupRowResizer(i,l,r+n)},_detachRowResizerEvents:function(){this.rowResizer.off(We+P).off(Be+P).off(Ge+P).off(Ne+P)},_mapResizedRows:function(t,r,o){var l=this;t.each((function(t,n){var a;if(r){var i=n.rowIndex,s=o,d=0,c=e(n).add(l.tbody.find(ht).eq(i));c.each((function(e,t){var r;t.style.height="",(r=u(t))>d&&(d=r)})),s<d?(s=d,l._clearCachedRowsHeight(c.eq(0))):l._cacheRowHeight(c.eq(0),s),c.css(Ke,s)}else n.style.height="",a=u(n),o>a?(n.style.height=o+ut,l._cacheRowHeight(e(n),o)):l._clearCachedRowsHeight(e(n))}))},_rowResizing:function(){var t,r,o,n,a=this,i=a.options;i.resizable&&!0===i.resizable.rows&&(a.tbody.parent().add(a.lockedTable).on(je+P,".k-grid-footer tr, .k-table-tbody tr",a._createRowResizer.bind(a)),a.rowResizing&&a.rowResizing.destroy(),t=a._getResizerContainer(),a.rowResizing=new l.Resizable(t,{handle:".k-resizer-wrap",start:function(t){n=e(t.currentTarget).data(ht),a.lockedTable&&(n=a._addLockedRowResizing(n)),n.addClass(ue),a._detachRowResizerEvents(),r=t.y.location,o=u(n)},resize:function(e){var l=o+e.y.location-r,i=0;n.length>1&&(i=a._getMinRowHeight(n)),l<i&&(l=i),n.css("height",l),a._setupRowResizer(a.rowResizer,n,a._getResizerTop(n,t)+l)},resizeend:function(){var e,t=u(n),r=!1;n.hasClass(fe)?(e=a.select(),n.length>1&&e.length>n.length&&(e=a.lockedTable.find(x+fe).not(n),r=!0)):e=n,a._mapResizedRows(e,r,t),n.removeClass(ue),a.rowResizer.removeClass(he),a.rowResizer.addClass(ue),a._attachRowResizerEvents(),r&&(e=a.select()),o!=t&&a.trigger(Ee,{row:n,rows:e,oldHeight:o,newHeight:t}),n=null}}))},_draggable:function(){var t=this,r=t.options.reorderable;if(!0===r||r&&r.columns){t._draggableInstance&&t._draggableInstance.destroy();var l=t.wrapper.children(".k-grid-header");t._draggableInstance=t.wrapper.kendoDraggable({group:o.guid(),autoScroll:!0,filter:t.content?".k-grid-header:first "+M:"table:first>.k-grid-header "+M,dragstart:function(){l.children(".k-grid-header-wrap").off("scroll"+P+"scrolling").on("scroll"+P+"scrolling",(function(e){t.virtualScrollable?o.scrollLeft(t.content.find(">.k-virtual-scrollable-wrap"),this.scrollLeft):o.scrollLeft(t.scrollables.not(e.currentTarget),this.scrollLeft)}))},dragend:function(){t._resetResizeHandleHeader(),l.children(".k-grid-header-wrap").off("scroll"+P+"scrolling")},drag:function(){t._hideResizeHandle()},hint:function(t){var r=t.attr(o.attr("title"));return r&&(r=o.htmlEncode(r)),e('<div class="k-reorder-clue k-drag-clue" />').html(r||t.attr(o.attr("field"))||t.text()).prepend(o.ui.icon({icon:"cancel",iconClass:"k-drag-status"}))}}).data("kendoDraggable")}},_reorderable:function(){var t=this,r=t.options.reorderable;(!0===r||r&&r.columns)&&(t.wrapper.data("kendoReorderable")&&t.wrapper.data("kendoReorderable").destroy(),t.wrapper.kendoReorderable({draggable:t._draggableInstance,dropFilter:M,dragOverContainers:function(e,r){var o=Tr(t.columns);return!1!==o[e].lockable&&Hr(o,t.columns,e,r)>-1},inSameContainer:function(r){return e(r.source).parent()[0]===e(r.target).parent()[0]&&Hr(Tr(t.columns),t.columns,r.sourceIndex,r.targetIndex)>-1},change:function(e){var r=Tr(t.columns),o=r[e.oldIndex],l=Hr(r,t.columns,e.oldIndex,e.newIndex);t.trigger(De,{newIndex:l,oldIndex:k(o,r),column:o}),t.reorderColumn(l,o,"before"===e.position)}}))},_reorderHeader:function(e,t,r,o){for(var l,n,a=this,i=Cr(e[0],a.columns),s=Cr(t,a.columns),d=[],c=0;c<e.length;c++)e[c].columns&&(d=d.concat(e[c].columns));n=o?tr(o,o,"tr:eq("+i.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"):tr(a.lockedHeader,a.thead,"tr:eq("+i.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)");var u,h,p,f,g,m,b=Pr(e).length,k=Pr([t]).length;d.length?(b>0&&0===k?(l="prepend",kr(e,t,d,a.columns,a.lockedHeader.find("thead"),a.thead,this._groups(),l)):0===b&&k>0&&(l=0!==s.cell||!e[0].columns||t.columns||a._group?"append":"prepend",kr(e,t,d,Vr(a.columns),a.thead,a.lockedHeader.find("thead"),this._groups(),l)),(t.columns||i.cell-s.cell>1||s.cell-i.cell>1)&&(t=Sr(a.columns,t,e[0],r,a.columns))&&(b>0&&0===k?a._reorderHeader(d,t,r,a.thead):0===b&&k>0?a._reorderHeader(d,t,r,a.lockedHead):a._reorderHeader(d,t,r))):b!==k&&(u=n[i.cell],h=a.columns,p=b,f=vr(Pr(h)),g=vr(Vr(h)),m=u.rowSpan,u.rowSpan=p?f>g?m-(f-g)||1:m+(g-f):f>g?m+(f-g):m-(g-f)||1),er(n,i.cell,s.cell,r,e.length)},_reorderContent:function(t,r,o){var l,n,a,i=this,s=e(),d=t[0],c=pr(t),u=k(d,Kr(i.columns)),h=k(r,Kr(i.columns)),p=k(c[0],Gr(i.columns)),f=k(r,Gr(i.columns)),g=Pr(i.columns).length,m=!!r.locked,b=i.footer||i.wrapper.find(".k-grid-footer");if(l=n=f,r.hidden){var _=m?Pr(i.columns):Vr(i.columns);pr(_).length>0?(l=n=f=this._findClosestVisibleColumnIndex(_,h),a=pr(_.slice(h)).length>0):m?(f=i.lockedTable.find("colgroup"),l=i.lockedHeader.find("colgroup"),n=e(i.lockedFooter).find(">table>colgroup")):(f=i.tbody.prev(),l=i.thead.prev(),n=b.find(".k-grid-footer-wrap").find(">table>colgroup"))}i._hasFilterRow()&&er(i.wrapper.find(".k-filter-row td:not(.k-group-cell,.k-hierarchy-cell)"),u,h,o,t.length),p>=0&&er(tr(i.lockedHeader,i.thead.prev(),D),p,l,a||o,c.length),i.options.scrollable&&p>=0&&!i._hasVirtualColumns()&&er(tr(i.lockedTable,i.tbody.prev(),D),p,f,a||o,c.length),b&&b.length&&(p>=0&&er(tr(i.lockedFooter,b.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),p,n,a||o,c.length),er(b.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),u,h,o,t.length));var v=i.tbody.children(":not(.k-grouping-row,.k-detail-row)");i.lockedTable&&(g>h?g<=u&&co(i.lockedTable.find(">tbody>tr.k-grouping-row:not([hidden])"),i.table.find(">tbody>tr.k-grouping-row:not([hidden])"),t.length):g>u&&co(i.table.find(">tbody>tr.k-grouping-row:not([hidden])"),i.lockedTable.find(">tbody>tr.k-grouping-row:not([hidden])"),t.length),s=i.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)"));for(var w=0,C=v.length;w<C;w+=1)er(tr(s[w],v[w],">td:not(.k-group-cell,.k-hierarchy-cell)"),u,h,o,t.length)},_findClosestVisibleColumnIndex:function(e,t){var r=pr(e.slice(t)).length>0?e.slice(t):e.slice(0,t+1).reverse(),o=pr(r)[0];return k(o,pr(this.columns))},_autoFitLeafColumn:function(e){this.autoFitColumn(Kr(this.columns)[e])},_hasReorderableRows:function(){return this._hasDragHandleColumn||this.options.reorderable&&this.options.reorderable.rows},_draggableRows:function(){var t=this,r=t._checkBoxSelection||t.options.selectable&&!o.ui.Selectable.parseOptions(t.options.selectable).cell,l=!1,n=!(!t._isMobile&&!o.support.mobileOS);t._draggableRowsInstance&&t._draggableRowsInstance.destroy(),!1!==this.options.reorderable.rows.clickMoveClick&&this._hasDragHandleColumn&&(l=!0),t._draggableRowsInstance=t.tbody.kendoDraggable({holdToDrag:n,showHintOnHold:n,preventOsHoldFeatures:n,group:"row-draggable",autoScroll:!0,filter:(r?" > .k-selected":" > "+A)+(t._hasDragHandleColumn?" > .k-drag-cell":""),hint:function(l){var n=e('<div class="k-reorder-clue k-drag-clue">'+o.ui.icon({icon:"cancel",iconClass:"k-drag-status"})+"</div>");if(r&&t.select().length>1)n.append("<span>"+t.select().length+" "+w(t.options.messages.itemsSelected)+"</span>");else{var a=l.closest(A).clone();a.find("td.k-command-cell").remove(),a.find("td").each((function(e,t){n.append("<span>"+t.innerText+"&nbsp;</span>")}))}return n},clickMoveClick:l,cursorOffset:{top:0,left:0}}).data("kendoDraggable")},_reorderableRows:function(){var t=this,r=t._checkBoxSelection||t.options.selectable&&!o.ui.Selectable.parseOptions(t.options.selectable).cell;t.tbody.data("kendoReorderable")&&t.tbody.data("kendoReorderable").destroy(),t.tbody.kendoReorderable({smartPosition:!1,draggable:t._draggableRowsInstance,dragOverContainers:function(o,l){var n=!0,a=e(A,t.content).eq(l);return r&&(n=!a.is(".k-selected")),n},inSameContainer:function(t){return!r||!e(t.target).is(".k-selected")},dropFilter:"> "+A,allowIcon:"insert-middle",orientation:"vertical",reorderDropCue:e('<div class="k-drop-hint k-drop-hint-h"><div class="k-drop-hint-start"></div><div class="k-drop-hint-line"></div></div>'),positionDropCue:function(e,t){var r=o.getOffset(t.children(R).eq(0)).left;e.css({transform:"translate(0,-50%)",left:r})},externalDraggable:function(e){var t=e.draggable;if(t)return t},change:function(e){t._triggerRowRorder(e)}})},_triggerRowRorder:function(e){var t=this,r={newIndex:"after"===e.position?e.newIndex+1:e.newIndex,oldIndex:e.oldIndex},l=e.element,n=t._checkBoxSelection||t.options.selectable&&!o.ui.Selectable.parseOptions(t.options.selectable).cell;r=n&&t.select().length>1?f(r,{rows:t.select()}):f(r,{row:l}),t.trigger(Pe,r)||t.reorderRows(n?t.select():l,r.newIndex)},reorderRowTo:function(e,t){var r=this,o=r.dataItem(e),l=e.index();t<0||t===l||r.trigger(Pe,{row:e,oldIndex:e.index(),newIndex:t})||r.dataSource.pushMove(t,[o])},reorderRows:function(e,t){var r=this,o=r.dataSource,l=r.tbody.children(A).length,n=r.dataItem(r.tbody.children(A).eq(t)),a=e.toArray().map((function(e){return r.dataItem(e)}));n?t=o.indexOf(n):(n=r.dataItem(r.tbody.children(A).eq(l-1)),t=o.indexOf(n)+1),t>=0&&(r._rowDropping=!0,o.pushMove(t,a),r._rowDropping=!1)},autoFitColumns:function(e){var t=this;e=e||t.columns;for(var r=0;r<e.length;r++){var o=e[r];o.columns?t.autoFitColumns(o.columns):t.autoFitColumn(o)}},autoFitColumn:function(t){var r,l,n,a,i,s,d,u,h,f,g,b=this,_=b.options,v=b.columns,w=b.lockedHeader?Qr(b.lockedHeader.find(">table>thead")).filter(ur).length:0,C="col:not(.k-group-col):not(.k-hierarchy-col)",y="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if((t="number"==typeof t?v[t]:p(t)?m(Rr(v),(function(e){return e===t}))[0]:m(Rr(v),(function(e){return e.field===t}))[0])&&hr(t)){a=Kr(v),d=t.minResizableWidth,r=k(t,a),f=(l=(n=(i=t.locked)?b.lockedHeader.children("table"):b.thead.parent()).find("[data-index='"+r+"']")).find("a.k-grid-column-menu, a.k-grid-filter-menu");var S=i?b.lockedTable:b.table,x=b.footer||e();b.footer&&b.lockedContent&&(x=i?b.footer.children(".k-grid-footer-locked"):b.footer.children(".k-grid-footer-wrap"));var T=x.find("table").first();b.lockedHeader&&!i&&(r-=w);for(var H=0;H<a.length&&a[H]!==t;H++)a[H].hidden&&r--;_.scrollable?(s=n.find(C).eq(r).add(S.children("colgroup").find(C).eq(r)).add(T.find("colgroup").find(C).eq(r)),i||(u=S.parent(),h=o.scrollLeft(u))):s=S.children("colgroup").find(C).eq(r);var R=n.add(S).add(T);Vt.safari&&l.css("white-space","initial");var I=c(l);s.width(""),R.css("table-layout","fixed"),s.width(Qe),R.addClass("k-autofitting"),R.css("table-layout",""),g=f.length?c(f)+c(l):c(l);var z=Math.ceil(Math.max(g,c(S.find("tr:not(.k-grouping-row)").eq(0).children(y).eq(r)),c(T.find(ht).eq(0).children(y).eq(r))))+1;if(d&&d>z&&(z=d),s.width(z),t.width=z,Vt.safari&&l.css("white-space",""),_.scrollable){for(var E,A=n.find("col"),D=0,M=0,F=A.length;M<F;M+=1)if((E=A[M].style.width)&&-1==E.indexOf("%"))D+=parseInt(E,10);else{if(!A.eq(M).hasClass("k-group-col")){D=0;break}D+=parseInt(A.eq(M).width(),10)}D&&R.each((function(){this.style.width=D+ut}))}R.removeClass("k-autofitting"),h&&o.scrollLeft(u,h),b.trigger(Ae,{column:t,oldWidth:I,newWidth:z}),b._applyLockedContainersWidth(),b._syncLockedContentHeight(),b._syncLockedHeaderHeight(),b._updateStickyColumns()}},reorderColumn:function(e,r,o){var l,n=this,a=lr(r,n.columns),i=a?a.columns:n.columns,s=k(r,i),d=i[e],c=n.virtualScroll||{},u=!!d.locked,h=Pr(n.columns).length,p=m(Kr(n.columns),(function(e){return e.groupHeaderColumnTemplate}));if(s!==e&&(r.locked||!u||1!=Vr(n.columns).length)&&(!r.locked||u||1!=h)){n._hideResizeHandle(),o===t&&(o=e<s);var f=[r];n._reorderHeader(f,d,o),n.lockedHeader&&(Ar(n.thead),Ar(n.lockedHeader)),d.columns&&(d=(d=Kr(d.columns))[o?0:d.length-1]),r.columns&&(f=Kr(r.columns)),n._reorderContent(f,d,o),l=(l=!!r.locked)!=u,r.locked=u,i.splice(o?e:e+1,0,r),i.splice(s<e?s:s+1,1),n._updateLockedCols(),n._updateCols(),n._templates(),n._updateColumnCellIndex(),n._updateColumnSorters(),p.length>0&&n._renderGroupRows(),n._updateTablesWidth(),n._applyLockedContainersWidth(),n._syncLockedHeaderHeight(),n._syncLockedContentHeight(),n._updateFirstColumnClass(),n._updateStickyColumns(),c.columns&&n.refresh(),l&&(u?n.trigger(Me,{column:r}):n.trigger(Fe,{column:r}))}},_updateColumnCellIndex:function(){var e=0;this.lockedHeader&&(e=_r(this.lockedHeader.find("thead"),Pr(this.columns))),_r(this.thead,Vr(this.columns),e)},lockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&!e.locked&&!e.hidden){e.sticky&&this.unstickColumn(t.indexOf(e));var r=Pr(t).length-1;this.reorderColumn(r,e,!1)}},unlockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&e.locked&&!e.hidden){var r=Pr(t).length;this.reorderColumn(r,e,!0)}},stickColumn:function(e){var t=this.columns;!(e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])||e.sticky||e.hidden||e.locked&&(this.unlockColumn(t.indexOf(e)),e.locked)||(e.sticky=!0,this._updateStickyColumns())},unstickColumn:function(e){var t=this.columns;(e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&e.sticky&&!e.locked&&!e.hidden&&(this._removeStickyAttributes([e]),this._removeStickyStyles(Or(t)),e.sticky=!1,this._updateStickyColumns(),0===this._anyStickyColumns()&&(this._templates(),this._hasFilterRow()&&this._updateStickyFilterCells()))},cellIndex:function(t){var r=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(r=Kr(Pr(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+r},_modelForContainer:function(t){(t=e(t)).is(ht)||"popup"===this._editMode()||(t=t.closest(ht));var r=t.attr(o.attr("uid"))||t.find(".k-popup-edit-form").attr(o.attr("uid"));return this.dataSource.getByUid(r)},_calculateColumnIndex:function(t){var r=this.cellIndex(t),o=0;return this._hasVirtualColumns()&&(o=(o=parseInt(e(t).closest(ht).find("td").first().attr("colspan"),10))>1?o-1:0),r+o},_editable:function(){var t,r=this,l=r.options.editable,n=!(!r._isMobile&&!o.support.mobileOS);l&&(this.wrapper.addClass("k-editable"),"incell"===r._editMode()?(r.table.add(r.lockedTable).on(We+P,z+">"+E,(function(t){var l=e(t.target);"incell"===r._editMode()&&l.hasClass("k-checkbox")&&l.prev().attr(o.attr("bind"))&&t.preventDefault()})),!1!==l.update&&(Wt&&r.wrapper.on(Oe+P,".k-edit-cell > input[type='checkbox']",(function(t){e(t.target).trigger("focus")})).on(Oe+P,".k-edit-cell",(function(t){e(t.target).is("input")||e(t.currentTarget).find("input[type='checkbox']").trigger("focus")})).on(We+P,"tr:not(.k-grouping-row) > td",(function(t){var o=r._editContainer;o&&o[0]&&(e.contains(o[0],t.target)||o[0]===t.target)?r._mousedownOnEditCell=!0:r._mousedownOnEditCell=!1})),r.editableUserEvents=new o.UserEvents(r.wrapper,((t={filter:"tr:not(.k-grouping-row) > td",allowSelection:!0,supportDoubleTap:n,fastTap:n})[n?"doubleTap":"tap"]=function(t){var o=e(t.target),l=r.lockedTable&&o.closest("table")[0]===r.lockedTable[0];r._mousedownOnEditCell=!1,o.hasClass("k-hierarchy-cell")||o.hasClass("k-detail-cell")||o.hasClass("k-group-cell")||o.hasClass("k-edit-cell")||o.has(".k-grid-remove-command").length||o.closest("tbody")[0]!==r.tbody[0]&&!l||e(t.target).is(":input")||(r.editable?r.editable.end()?(e(s()).trigger("blur"),r.closeCell(),r.editCell(o)):r._scrollVirtualWrapper():r.editCell(o))},t)),r.wrapper.on("focusin"+P,(function(){e.contains(this,s())||(clearTimeout(r.timer),r.timer=null)})).on("focusout"+P,(function(t){var o=!0;(Wt&&r._mousedownOnEditCell||r._virtualColScroll)&&(o=!1),r._mousedownOnEditCell=!1,o&&(r.timer=setTimeout((function(){var t,o;t=s(),(o=r._editContainer)&&o[0]&&!e.contains(o[0],t)&&o[0]!==t&&!e(t).closest(".k-animation-container").length&&(r.editable.end()?r.closeCell():r._scrollVirtualWrapper())}),1))})))):!1!==l.update&&(r.wrapper.on(Oe+P,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command",(function(t){var o=e(this);r._belongsToGrid(o)&&(t.preventDefault(),r.editRow(o.closest(ht)))})),r._isVirtualInlineEditable()&&r.wrapper.on("focusout"+P,"tr:not(.k-grouping-row) > td",(function(){r.editable&&!r.editable.end()&&r._scrollVirtualWrapper()}))),!1!==l.destroy?r.wrapper.on(Oe+P,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command",(function(t){var o=e(this);r._belongsToGrid(o)&&(t.preventDefault(),t.stopPropagation(),r.removeRow(o.closest(ht)))})):r.wrapper.on(Oe+P,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command",(function(t){r._belongsToGrid(e(this))&&(t.stopPropagation(),r._confirmation()||t.preventDefault())})))},editCell:function(t){t=e(t);var r=this,o=Kr(r.columns)[r._calculateColumnIndex(t)],l=r._modelForContainer(t);if(r.closeCell(),l&&bo(o,l)&&!o.command){if(r.trigger(O,{model:l}))return;r._attachModelChange(l),r._editContainer=t,r._shouldClearEditableState&&r._clearEditableState(),r.editable=t.addClass("k-edit-cell").kendoEditable({fields:$r(o),model:l,size:r.options.size,target:r,change:function(e){r.trigger(W,{values:e.values,container:t,model:l})&&e.preventDefault()},skipFocus:!(!r._isVirtualIncellEditable()&&!r._hasVirtualColumns()||!r._editableState)}).data("kendoEditable");var n=t.parent().addClass("k-grid-edit-row");r.lockedContent&&(po(n[0],r._relatedRow(n).addClass("k-grid-edit-row")[0]),r._syncLockedScroll()),r.trigger(V,{container:t,model:l})}},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),r=e[0].offsetWidth>t[0].clientWidth?o.support.scrollbar():0;this.lockedContent.height(t[0].offsetHeight-r)},_syncLockedScroll:function(){this.lockedContent[0].scrollTop=this.content[0].scrollTop,this.virtualScrollable&&(this.lockedContent[0].scrollTop=this.wrapper.find(".k-virtual-scrollable-wrap")[0].scrollTop)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var e=this.lockedHeader.children("table"),t=this.thead.parent();this._adjustRowsHeight(e,t),function(e,t){if(e=e[0],t=t[0],e.rows.length!==t.rows.length){var r,o,l=e.offsetHeight,n=t.offsetHeight;l>n?(r=t.rows[t.rows.length-1],At.test(r.className)&&(r=t.rows[t.rows.length-2]),o=l-n):(r=e.rows[e.rows.length-1],At.test(r.className)&&(r=e.rows[e.rows.length-2]),o=n-l),r.style.height=r.offsetHeight+o+ut}}(e,t)}},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer,r=e._editContainer.data("kendoWindow");t&&(t.off(Oe+P,".k-grid-cancel-command",e._editCancelClickHandler),t.off(Oe+P,".k-grid-save-command",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,r&&r.destroy(),e._editContainer=null,e._destroyEditView(),e._editableIsClosing=null}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editableIsClosing?e._editContainer.data("kendoWindow").bind("deactivate",t):(e._editableIsClosing=!0,e._editContainer.data("kendoWindow").bind("deactivate",t).close())),e._confirmDialog&&(e._confirmDialog.close(),e._confirmDialog.destroy(),e._confirmDialog=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,r=e._modelForContainer(t);r&&r.unbind(Y,e._modelChangeHandler)},closeCell:function(e){var t,r,o,n=this,a=n._editContainer;a&&(o=n._modelForContainer(a),e&&n.trigger("cancel",{container:a,model:o})||(n.trigger($,{type:e?"cancel":"save",model:o,container:a}),a.removeClass("k-edit-cell"),t=Kr(n.columns)[n._calculateColumnIndex(a)],r=a.parent().removeClass("k-grid-edit-row"),n.lockedContent&&n._relatedRow(r).removeClass("k-grid-edit-row"),n._destroyEditable(),n._displayCell(a,t,o),n._shouldClearEditableState&&n._clearEditableState(),n.trigger("itemChange",{item:r,data:o,ns:l}),n.lockedContent&&po(r.css(Ke,"")[0],n._relatedRow(r).css(Ke,"")[0])))},_displayCell:function(e,t,r){var l=this,n={storage:{},count:0},a=f({},o.Template,l.options.templateSettings),i=o.template(l._cellTmpl(t,n),a);n.count>0&&(i=i.bind(n.storage)),e.empty().html(i(r)),l.angular("compile",(function(){return{elements:e,data:[{dataItem:r}]}}))},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var r,o,l,n=this,a=n._editMode();"incell"!==a&&n.cancelRow(),t=e(t),n.lockedContent&&(t=t.add(n._relatedRow(t))),t=t.hide(),n.dataSource._isGroupPaged()&&n._removeGroupIfEmpty(t),(r=n._modelForContainer(t))&&!n.trigger(B,{row:t,model:r})?(l=n.dataSource.options.schema,n._selectedIds&&l&&l.model&&(o=r[v(n.dataSource.options.schema.model)?n.dataSource.options.schema.model.fn.idField:n.dataSource.options.schema.model.id],delete n._selectedIds[o]),n.dataSource.remove(r),"inline"!==a&&"popup"!==a||n.dataSource.sync()):"incell"===a&&n._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return!0!==t&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(t){var r,l=this;t instanceof a?r=t:(t=e(t),r=l._modelForContainer(t));var n,i=l._editMode();l.cancelRow(),r&&(t=l.tbody.children("["+o.attr("uid")+"="+r.uid+"]"),l._attachModelChange(r),"popup"===i?l._createPopupEditor(r):"inline"===i?l._createInlineEditor(t,r):"incell"===i&&e(t).children(R).each((function(){var t=e(this),o=Kr(l.columns)[l._calculateColumnIndex(t)];if((r=l._modelForContainer(t))&&(!r.editable||r.editable(o.field))&&o.field&&!o.selectable)return l.editCell(t),!1})),(n=l.editView?l.editView.element:l._editContainer)&&(this._editCancelClickHandler||(this._editCancelClickHandler=this._editCancelClick.bind(this)),n.on(Oe+P,".k-grid-cancel-command",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=this._editUpdateClick.bind(this)),n.on(Oe+P,".k-grid-save-command",this._editUpdateClickHandler)))},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var r=this,o=r.options.navigatable,l=r.editable.options.model,n=r.editView?r.editView.element:r._editContainer;if(t.preventDefault(),t.stopPropagation(),!r.trigger("cancel",{container:n,model:l})){var a=r.items().index(e(r.current()).parent());r.cancelRow(),o&&(r._setCurrent(r.items().eq(a).children().filter(E).first()),go(r.table,!0))}},_editFields:function(e,t){for(var r,o=[],l=0;l<e.length;l++)(r=e[l]).selectable||r.command||bo(r,t)&&o.push($r(r));return o},_createPopupEditor:function(t){var r,n,a,i,s,d,c,u,h,g,m,b,k,_,v=this,C="<div "+o.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form"><'+(v._isMobile?'ul class="k-edit-form-container k-listgroup k-listgroup-flush">':'div class="k-edit-form-container">'),y=Kr(v.columns),S=o.guid(),x=v.options.editable,T=x.template,H=p(x)?x.window:{},R=f({},o.Template,v.options.templateSettings);if(!v.trigger(O,{model:t})){if(H=H||{},T)for(typeof T===Xe&&(T=o.unescape(T)),C+=o.template(T,R)(t),a=0,i=y.length;a<i;a++)(r=y[a]).command&&(g=fo(r.command,"edit"))&&(n=g);else for(a=0,i=y.length;a<i;a++)(r=y[a]).selectable||(r.command?r.command&&(g=fo(r.command,"edit"))&&(n=g):v._isMobile&&(C+='<li class="k-item k-listgroup-item">',bo(r,t)?(C+='<label class="k-label k-listgroup-form-row">',C+='<span class="k-item-title k-listgroup-form-field-label">'+(r.title&&(v.options.encodeTitles?xo(r.title,!0):r.title)||r.field||"")+"</span>",C+='<div class="k-listgroup-form-field-wrapper" id="'+r.field+"_"+S+'" '+o.attr("container-for")+'="'+r.field+'"></div>',C+="</label>"):(b={storage:{},count:0},s=o.template(v._cellTmpl(r,b),R),b.count>0&&(s=s.bind(b.storage)),C+='<label class="k-label k-listgroup-form-row k-no-click">',C+='<span class="k-item-title k-listgroup-form-field-label">'+(r.title&&(v.options.encodeTitles?xo(r.title,!0):r.title)||r.field||"")+"</span>",C+='<span class="k-no-editor k-listgroup-form-field-wrapper">'+s(t)+"</span>",C+="</label>"),C+="</li>"));n&&p(n)&&(p(n.text)&&(d=n.text.update,c=n.text.cancel),p(n.iconClass)&&(u=n.iconClass.update,h=n.iconClass.cancel),n.attr&&(m=n.attr)),v._isMobile?(C+="</ul></div>",v.editView=v.pane.append("<div data-"+o.ns+'role="view" class="k-grid-edit-form"><div data-'+o.ns+'role="header" class="k-header"><a href="\\#" class="k-header-cancel k-link k-grid-cancel-command" title="#=messages.cancel#" aria-label="#=messages.cancel#">'+o.ui.icon("chevron-left")+"</a>"+w(v.options.messages.commands.edit||"Edit")+'<a href="\\#" class="k-header-done k-link k-grid-save-command" title="#=messages.done#" aria-label="#=messages.done#">'+o.ui.icon("check")+"</a></div><div data-"+o.ns+'role="content" class="'+Bt+'">'+C+"</div></div>"),k=v._editContainer=v.editView.element.find(".k-popup-edit-form")):(_='<div class="k-edit-buttons k-actions-start">',_+=v._createButton({name:"update",text:d,attr:m,iconClass:u,size:"medium"})+v._createButton({name:"canceledit",text:c,attr:m,iconClass:h,size:"medium"}),_+="</div>",C+=T?_+"</div>":"</div>",k=v._editContainer=e(C).appendTo(v.wrapper).eq(0).kendoWindow(f({modal:!0,resizable:!1,draggable:!0,title:v.options.messages.commands.edit||"Edit",visible:!1,close:function(r){if(r.userTriggered){if(r.sender.element.trigger("focus"),v.trigger("cancel",{container:k,model:t}))return void r.preventDefault();var o=v.items().index(e(v.current()).parent());v._editableIsClosing=!0,v.cancelRow(),v.options.navigatable&&(v._setCurrent(v.items().eq(o).children().filter(E).first()),go(v.table,!0))}}},H))),T||v._isMobile?v.editable=v._editContainer.kendoEditable({fields:v._isMobile?v._editFields(y,t):null,model:t,clearContainer:!1,target:v,skipFocus:!0}).data("kendoEditable"):(v.editable=new l.Form(v._editContainer.find(".k-edit-form-container"),{items:v._editFields(y,t),buttonsTemplate:function(){return""},formData:t}).editable,v._editContainer.append(_)),v._openPopUpEditor(),v.trigger(V,{container:k,model:t})}},_openPopUpEditor:function(){var e=this,t=e._editContainer?e._editContainer.data("kendoWindow"):null,r=(e.options.editable||{}).window||{};this._isMobile?this.pane.navigate(this.editView,this._editAnimation):t&&(r.position||t.center(),t.open())},_createInlineEditor:function(t,r){var l,n,a,i=this,s=[];i.trigger(O,{model:r})||(i.lockedContent&&(t=t.add(i._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each((function(){if(n=e(this),!(l=Kr(i.columns)[i._calculateColumnIndex(n)]).command&&bo(l,r))s.push($r(l)),n.attr(o.attr("container-for"),l.field),n.empty();else if(l.command){var t,d,c,u,h;if(a=fo(l.command,"edit"))n.empty(),p(a)&&(p(a.text)&&(t=a.text.update,d=a.text.cancel),p(a.iconClass)&&(c=a.iconClass.update,u=a.iconClass.cancel),a.attr&&(h=a.attr)),e(i._createButton({name:"update",text:t,attr:h,iconClass:c})+i._createButton({name:"canceledit",text:d,attr:h,iconClass:u})).appendTo(n)}})),i._editContainer=t,i._editContainer.addClass("k-grid-edit-row"),i._shouldClearEditableState&&i._clearEditableState(),i.editable=new o.ui.Editable(i._editContainer,{target:i,fields:s,size:i.options.size,model:r,skipFocus:i._isVirtualInlineEditable()&&i._editableState&&!!i._editableState.field||i._hasVirtualColumns(),clearContainer:!1}),t.length>1&&(po(t[0],t[1]),i._applyLockedContainersWidth()),i.trigger(V,{container:t,model:r}))},cancelRow:function(e){var t,r=this,l=r._editContainer;if(l){if(!(t=r._modelForContainer(l))||e&&r.trigger("cancel",{container:l,model:t}))return;r._destroyEditable(),r.dataSource.cancelChanges(t),r._clearEditableState(),"popup"!==r._editMode()?r._displayRow(l):r._displayRow(r.tbody.find("["+o.attr("uid")+"="+t.uid+"]"))}},saveRow:function(){var t,r=this,o=this._editContainer,l=this._modelForContainer(o),n=e.Deferred();return o&&this.editable?!(t=r.editable&&r.editable.end())||this.trigger(W,{container:o,model:l})?(t||r._scrollVirtualWrapper(),n.reject().promise()):(r._clearEditableState(),this.dataSource.sync()):n.resolve().promise()},_displayRow:function(t){var r,n,a,i=this,s=i._modelForContainer(t),d=t.hasClass(fe),c=t.hasClass("k-alt");if(s){i.lockedContent&&(r=e((c?i.lockedAltRowTemplate:i.lockedRowTemplate)(s)),i._relatedRow(t.last()).replaceWith(r)),i.angular("cleanup",(function(){return{elements:t.get()}})),n=e((c?i.altRowTemplate:i.rowTemplate)(s)),t.is(":visible")||n.hide(),t.replaceWith(n),i.trigger("itemChange",{item:n,data:s,ns:l}),r&&r.length&&i.trigger("itemChange",{item:r,data:s,ns:l});var u=n,h=[{dataItem:s}];r&&r.length&&(u=n.add(r),h.push({dataItem:s})),i.angular("compile",(function(){return{elements:u.get(),data:h}})),d&&(i.options.selectable||i._checkBoxSelection)&&i.select(n.add(r)),r&&po(n[0],r[0]),(a=n.next()).hasClass("k-detail-row")&&a.is(":visible")&&o.ui.icon(n.find(".k-hierarchy-cell .k-icon,.k-hierarchy-cell .k-svg-icon"),{icon:"caret-alt-down"})}},_showMessage:function(t,r){var l=this;return l._isMobile?((l._confirmDialog=new o.ui.Confirm(e("<div />").appendTo(document.body),{modal:{preventScroll:!0},closable:!1,title:!1,content:t.title,messages:{okText:t.confirmDelete,cancel:t.cancelDelete},open:function(){l.content&&(l.content.data(nt,l.content.css(nt)),l.content.css(nt,"hidden"))},close:function(){l.content&&l.content.css(nt,l.content.data(nt))}})).result.done((function(){l._removeRow(r)})).fail((function(){var e=l._confirmDialog;e&&(e.close(),e.destroy())})),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,r=t.options.editable,o=!0===r||typeof r===Xe?t.options.messages.editable.confirmation:r.confirmation;return p(r)&&typeof r.mode===Xe&&typeof o!==Je&&typeof o!==Xe&&!1!==o&&(o=t.options.messages.editable.confirmation),!1===o||null==o||(typeof o===Je&&(o=o(t._modelForContainer(e))),t._showMessage({confirmDelete:r.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:r.cancelDelete||t.options.messages.editable.cancelDelete,title:!0===o?t.options.messages.editable.confirmation:o},e))},cancelChanges:function(){var e=this;e._cachedRowsHeight&&(e._mapCachedRowsHeight("getByUid","id"),e._shouldMapHights=!0),e.dataSource.cancelChanges(),e._isVirtualEditable()&&e._virtualPageToTop((function(){e.virtualScrollable.scrollToTop()}))},saveChanges:function(){var e=this,t=e.editable&&e.editable.end();!t&&e.editable||e.trigger(Z)?t||e._scrollVirtualWrapper():e.dataSource.sync()},addRow:function(){var e,t,r=this,o=r.dataSource,l=r._editMode(),n=r.options.editable.createAt||"",a=o.pageSize(),i=o.view()||[],s=n.toLowerCase()===Ze,d=r._isVirtualEditable();r.editable&&r.editable.end()||!r.editable?("incell"!=l&&r.cancelRow(),e=o.indexOf(i[0]),s&&(e+=i.length,a&&!o.options.serverPaging&&a<=i.length&&(e-=1)),e<0&&(e=o.page()>o.totalPages()?(o.page()-1)*a:0),r.options.navigatable&&"incell"==l&&r._removeCurrent(),d?r._virtualAddRow():(t=o.insert(e,{}),r._editModel(t))):r._scrollVirtualWrapper()},_editModel:function(e){var t=this,r=t.options.editable.createAt||"",l=t._editMode();if(e){var n=e.uid,a=(t.lockedContent?t.lockedTable:t.table).find("tr["+o.attr("uid")+"="+n+"]"),i=a.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(t._firstEditableColumnIndex(a));"inline"===l&&a.length?t.editRow(a):"popup"===l?t.editRow(e):i.length&&t.editCell(i),"bottom"==r.toLowerCase()&&t.lockedContent&&(t.lockedContent[0].scrollTop=t.content[0].scrollTop=t.table[0].offsetHeight)}},_virtualAddRow:function(){var e=this,t=(e.options.editable.createAt||"").toLowerCase()===Ze;e._clearEditableState(),t?e._virtualAddRowAtBottom():e._virtualAddRowAtTop()},_virtualAddRowAtTop:function(){var e,t=this,r=t.dataSource,o=t.virtualScrollable;1===r.page()?(e=r.insert(0,{}),t._editModel(e),o.scrollToTop()):t._virtualPageToTop((function(){e=r.insert(0,{}),t._editModel(e),o.scrollToTop()}))},_virtualAddRowAtBottom:function(){var e,t=this,r=t.dataSource,o=t.virtualScrollable,l=r.total();r.at(l-1)instanceof a?(e=r.insert(l,{}),t._virtualPageToBottom((function(){t._editModel(e),o.scrollToBottom()}))):t._virtualPageToBottom((function(){e=r.insert(l,{}),t._editModel(e),o.scrollToBottom()}))},_virtualPageToTop:function(e){this._virtualPage(0,this.dataSource.take(),(function(){e()}))},_virtualPageToBottom:function(e){var t=this.dataSource,r=t.take(),o=t.total(),l=o>r?o-r:0;this._virtualPage(l,r,(function(){e()}))},_virtualPage:function(e,t,r){var o=this;o._isVirtualEditable()&&(o.virtualScrollable._preventScroll=!0,o.virtualScrollable._page(e,t,r))},_firstEditableColumnIndex:function(e){var t,r,o,l=Kr(this.columns),n=this._modelForContainer(e);for(r=0,o=l.length;r<o;r++)if(t=l[r],n&&(!n.editable||n.editable(t.field))&&!t.command&&t.field&&!0!==t.hidden)return r;return-1},_clickAdd:function(e){e.preventDefault&&e.preventDefault(),this.addRow()},_clickCancel:function(e){e.preventDefault&&e.preventDefault(),this.cancelChanges()},_clickExcel:function(e){e.preventDefault&&e.preventDefault(),this.saveAsExcel()},_clickPdf:function(e){var t=this;e.preventDefault&&e.preventDefault();var r=t.saveAsPDF();r&&r.done((function(){t._pdfInitialized=!1}))},_clickSave:function(e){e.preventDefault&&e.preventDefault(),this.saveChanges()},_searchInput:function(e){var t=this,r=e.currentTarget;clearTimeout(t._searchTimeOut),t._searchTimeOut=setTimeout((function(){t._searchTimeOut=null;var e=t.options,o=e.search?e.search.fields:null,l={filters:[],logic:"or"},n=r.value;if(o||(o=function(e){var t=[];e=Kr(e);for(var r=0;r<e.length;r++)"string"==typeof e[r]?t.push(e[r]):e[r].field&&t.push(e[r].field);return t}(e.columns)),t.dataSource.options.endless&&(t.dataSource.options.endless=null,t._endlessPageSize=t.dataSource.options.pageSize),n)for(var a=0;a<o.length;a++)t._pushExpression(l.filters,o[a],n);else l={};t.dataSource.filter(l)}),300)},_pushExpression:function(e,t,r){var l=this,n=l.dataSource.options.serverFiltering,a={string:"contains",number:"gte",date:"gte",enums:"eq",boolean:"eq"},i=t.name||t,s=t.operator,d=l.dataSource.reader.model&&l.dataSource.reader.model.fields,c=d&&d[i],u=c&&c.parse,h={field:i,operator:s||a.string,value:r};(s||n)&&c&&o.isFunction(u)&&null!==u(r)&&f(h,{operator:s||a[c.type],value:u(r)}),n&&c&&o.isFunction(u)&&null===u(r)||e.push(h)},_toolbar:function(){var t,r,l=this,n=l.wrapper,a=l.options.toolbar;a&&(l._createClickHandler=l._addClickHandler=l._clickAdd.bind(l),l._cancelClickHandler=l._clickCancel.bind(l),l._saveClickHandler=l._clickSave.bind(l),l._excelClickHandler=l._clickExcel.bind(l),l._pdfClickHandler=l._clickPdf.bind(l),l._serachHandler=l._searchInput.bind(l),(t=l.wrapper.find(".k-grid-toolbar")).length?l._attachToolbarClicks():(t=e('<div class="k-grid-toolbar k-toolbar" />').prependTo(n),typeof a===Xe||v(a)?(typeof a===Xe&&(a=o.template(a).bind(l)),t.html(a({grid:l})),l._attachToolbarClicks()):b(a)&&(r=l._processItems(a),t.kendoToolBar({navigateOnTab:!l.options.navigatable,size:l.options.size,items:r})),l.angular("compile",(function(){return{elements:t.get()}}))),t.on(rt+P,".k-grid-search input",this._serachHandler))},_attachToolbarClicks:function(){var e=this.options.editable,t=this.wrapper.find(".k-grid-toolbar");e&&!1!==e.create&&t.on(Oe+P,".k-grid-add",this._createClickHandler).on(Oe+P,".k-grid-cancel-changes",this._cancelClickHandler).on(Oe+P,".k-grid-save-changes",this._saveClickHandler),t.on(Oe+P,".k-grid-excel",this._excelClickHandler),t.on(Oe+P,".k-grid-pdf",this._pdfClickHandler)},_processItems:function(e){var r=this,l=[],n=this.options.messages.commands;return e.map((function(e){var a,i,s,d,c="";if("string"==typeof e?(a=e.toLowerCase(),(e={}).text=n[a]||a):(a=(e.name||e.text||"").toLowerCase(),e.text=e.text||n[a]||a),"search"===a)l.push({type:"spacer"}),i=e.text||n.search,s=e.icon||e.iconClass||"search",c+="<span class='k-searchbox k-input "+o.getValidCssClass("k-input-","size",r.options.size)+" k-rounded-md k-input-solid k-grid-search'>",c+=o.ui.icon({icon:s,iconClass:"k-input-icon"}),c+="<input autocomplete='off' placeholder='"+i+"' title='"+i+"' aria-label='"+i+"' class='k-input-inner' />",c+="</span>",l.push({name:"search",overflow:"never",template:c});else{if(!(a||p(e)&&e.template))throw new Error("Custom commands should have name specified");d=(e=f({type:"button"},Xt[a],e)).className||"k-grid-"+(a||"").replace(/\s/g,""),e.spriteCssClass=e.icon?null:e.iconClass,e.attributes=r._processAttr(e.attr),delete e.attr,d&&(e.attributes.class===t&&(e.attributes.class=""),e.attributes.class+=" "+d),e.template&&delete e.type,r["_"+a+"ClickHandler"]&&(e.click=r["_"+a+"ClickHandler"]),l.push(e)}})),l},_processAttr:function(e){var t={};return typeof e===Xe&&e.length>0?e.split(" ").map((function(e){var r=e.split("=");2===r.length&&(t[r[0]]=r[1].replaceAll('"',"").replaceAll("'",""))})):p(e)&&(t=e),t},_createButton:function(r){var l,n,a=r.template||Dt,i=typeof r===Xe?r:r.name||r.text,s={className:Xt[i]?Xt[i].className:"k-grid-"+(i||"").replace(/\s/g,""),text:i,attr:"",iconClass:"",size:r.size||this.options.size},d=this.options.messages.commands;if(!(i||p(r)&&r.template))throw new Error("Custom commands should have name specified");return p(r)?((r=f(!0,{},r)).className&&k(s.className,r.className.split(" "))<0?r.className+=" "+s.className:r.className===t&&(r.className=s.className),r.className.indexOf("k-primary")>-1&&(r.className=r.className.replace("k-primary",""),r.themeColor="primary"),"edit"===i&&((r=f(!0,{},r)).text=p(r.text)?r.text.edit:r.text,r.iconClass=p(r.iconClass)?r.iconClass.edit:r.iconClass),r.attr&&(p(r.attr)&&(r.attr=Jt(r.attr)),typeof r.attr===Xe&&(n=r.attr.match(/class="(.+?)"/))&&k(n[1],r.className.split(" "))<0&&(r.className+=" "+n[1])),s=f(!0,s,Xt[i],{text:d[i]},r)):s=f(!0,s,Xt[i],{text:d[i]}),l=o.template(a)(s),r.template?l:o.html.renderButton(e(l),s)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(Oe+P,t._groupableClickHandler):t._groupableClickHandler=function(r){var o=e(this),l=o.closest(ht),n=t._groupRows?t._groupRows[t.wrapper.find(x+Ie).index(l)]:{};o.is(F)?t.trigger("groupCollapse",{group:n,element:l})||t.collapseGroup(l):t.trigger("groupExpand",{group:n,element:l})||t.expandGroup(l),r.preventDefault(),r.stopPropagation()},t._isLocked()?t.lockedTable.on(Oe+P,".k-grouping-row "+L+", .k-grouping-row "+F,t._groupableClickHandler):t.table.on(Oe+P,".k-grouping-row "+L+", .k-grouping-row "+F,t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,r=t.wrapper,n=t.options.groupable,a=M+"["+o.attr("field")+"]",i=t.content?".k-grid-header:first "+a:"table:first>.k-grid-header "+a;n&&!1!==n.enabled&&(r.has("div.k-grouping-header")[0]||e("<div/>").addClass("k-grouping-header").prependTo(r),t.groupable&&t._destroyGroupable(),Vt.chrome&&(r.find("div.k-grouping-header").css("touch-action",St),r.find(i).css("touch-action",St)),t.groupable=new l.Groupable(r,f({},n,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:i,filter:i,size:t.options.size,allowDrag:t.options.reorderable,enableContextMenu:!!t.options.contextMenu,removeGroup:function(e){t._showUngroupedColumn(e)},change:function(e){t.trigger("group",{groups:e.groups})?e.preventDefault():(t._clearEditableState(),t._hideGroupedColumns(e.groups),t.dataSource.options.endless&&t._resetEndless())}})),t._addGroupableOptionsToHeader())},_showUngroupedColumn:function(e){var t,r=Kr(this.columns);for(t=0;t<r.length;t++)r[t].uid==e.colID&&r[t].hideOnGroup&&this.showColumn(r[t])},_hideGroupedColumns:function(e){if(e){var t,r=Kr(this.columns),o=[];for(t=0;t<e.length;t++)e[t].colID&&o.push(e[t].colID);for(t=0;t<r.length;t++)o.indexOf(r[t].uid)>=0&&r[t].hideOnGroup&&this.hideColumn(r[t])}},_resetEndless:function(){var e=this;e.dataSource.options.endless=null,e._endlessPageSize=e.dataSource.options.pageSize,e.dataSource._skip=0,e.dataSource._pageSize=e.dataSource._take=e._endlessPageSize,e.dataSource._page=1},_addGroupableOptionsToHeader:function(){var e,t,r,l=Rr(this.columns),n={},a=this._headerCells();for(r=0;r<l.length;r++)l[r].field,n[l[r].field]=l[r];for(r=0;r<a.length;r++)(t=n[(e=a.eq(r)).attr(o.attr(tt))])&&t.groupable&&t.groupable.sort&&e.data(it,t.groupable.sort)},_destroyGroupable:function(){var e=this;e.groupable&&e.groupable.element&&e.groupable.element.kendoGroupable("destroy"),e.groupable=null,e._removeGroupableOptionsFromHeader()},_removeGroupableOptionsFromHeader:function(){for(var e=this._headerCells(),t=0;t<e.length;t++)e.eq(t).removeData(it)},_continuousItems:function(t,r){if(this.lockedContent){for(var o=this,l=o.table.add(o.lockedTable),n=e(t,l[0]),a=e(t,l[1]),i=r?Pr(Kr(o.columns)).length:1,s=r?Kr(o.columns).length-i:1,d=[],c=0;c<n.length;c+=i)_.apply(d,n.slice(c,c+i)),_.apply(d,a.splice(0,s));return d}},_selectable:function(){var t,r,l=this,n=[],a=l._isLocked(),i=l.options.selectable;if(i){l.selectable&&l.selectable.destroy(),l._selectedIds={},i=o.ui.Selectable.parseOptions(i),t=i.multiple,r=i.cell,l._hasDetails()&&(n[n.length]=".k-detail-row"),(l.options.groupable||l._hasFooters()||l._groups())&&(n[n.length]=".k-grouping-row,.k-group-footer"),""!==(n=n.join(","))&&(n=":not("+n+")");var s=l.table;a&&(s=s.add(l.lockedTable));var d=">"+(r?"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)":"tbody>tr"+n);l.selectable=new o.ui.Selectable(s,{filter:d,aria:!0,multiple:t,holdToDrag:!(!l._isMobile&&!o.support.mobileOS),toggleable:!(!l._isMobile&&!o.support.mobileOS),dragToSelect:l.options.selectable&&l.options.selectable.dragToSelect,changing:function(e){l.trigger(Q,{target:e.target,originalEvent:e.originalEvent})&&e.preventDefault()},change:function(e){var t;r||l._persistSelectedRows(),l._checkBoxSelection&&(t=l.selectable.value(),l._uncheckCheckBoxes(),l._checkRows(t),t.length&&t.length===l.items().length?l._toggleHeaderCheckState(!0):l._toggleHeaderCheckState(!1)),e.event&&l.trigger(Y)},useAllItems:a&&t&&r,relatedTarget:function(t){if(!r&&a){for(var o,n=e(),i=0,s=t.length;i<s;i++)o=l._relatedRow(t[i]),k(o[0],t)<0&&(n=n.add(o));return n}},continuousItems:function(){return l._continuousItems(d,r)},ignoreOverlapped:l.options.selectable&&l.options.selectable.ignoreOverlapped,addIdToRanges:!0}),l.options.navigatable&&s.on("keydown"+P,(function(o){var n,i,d=l.current(),c=o.target,u={event:o};if(d)if(o.keyCode===h.SPACEBAR&&!o.shiftKey&&e.inArray(c,s)>-1&&!d.is(".k-edit-cell,.k-header")&&d.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(o.preventDefault(),o.stopPropagation(),((n=!(d=r?d:d.parent()).hasClass(fe)||l.selectable.value().length>1)||t&&d.hasClass(fe)&&o.ctrlKey)&&l.trigger(Q,{target:d,originalEvent:o}))return;if(a&&!r&&(d=d.add(l._relatedRow(d))),t)if(o.ctrlKey){if(d.hasClass(fe))return l._deselectCheckRows(d),void l.trigger(Y)}else l.selectable.clear();else l.selectable.clear();r||(l.selectable._lastActive=d),l.selectable.value(d),n&&l.trigger(Y)}else if(!r&&(e(c).is("td")||e(c).is("table")&&k(c,this._navigatableTables))&&(o.shiftKey&&o.keyCode==h.LEFT||o.shiftKey&&o.keyCode==h.RIGHT||o.shiftKey&&o.keyCode==h.UP||o.shiftKey&&o.keyCode==h.DOWN||o.keyCode===h.SPACEBAR&&o.shiftKey)){if(o.preventDefault(),o.stopPropagation(),d=d.parent(),l.trigger(Q,{target:d,originalEvent:o}))return;i=l.selectable.value(),a&&(d=d.add(l._relatedRow(d))),t?(l.selectable._lastActive||(l.selectable._lastActive=d),l.selectable.selectRange(l.selectable._firstSelectee(),d),function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(i,l.selectable.value())||l.trigger(Y,u)):d.hasClass(fe)||(l.selectable.clear(),l.selectable.value(d),l.trigger(Y))}}))}},_clipboard:function(){var e=this.options;if(e.selectable&&e.allowCopy){var t=this;e.navigatable||(t.table.attr(Ye,0),t.table.add(t.lockedTable).on(We+P+" keydown"+P,".k-detail-cell",(function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()})).on(We+P,z+">"+E,_o.bind(t))),t.copyHandler=t.copySelection.bind(t),t.updateClipBoardState=function(){t.areaClipBoard&&t.areaClipBoard.val(t.getTSV()).trigger("focus").select()},t.bind("change",t.updateClipBoardState),t.wrapper.on("keydown",t.copyHandler),t.clearAreaHandler=t.clearArea.bind(t),t.wrapper.on("keyup",t.clearAreaHandler)}},copySelectionToClipboard:function(e){this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV(e)).trigger("focus").select(),document.execCommand("copy")},copySelection:function(t){t instanceof jQuery.Event&&!t.ctrlKey&&!t.metaKey||e(t.target).is("input:visible,textarea:visible")||window.getSelection&&window.getSelection().toString()||document.selection&&document.selection.createRange().text||(this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV()).trigger("focus").select())},_createAreaClipBoard:function(){this.areaClipBoard||(this.areaClipBoard=e("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper))},getTSV:function(r){var o=this,l=o.select(),n="\t",a=o.options.allowCopy,i=o._isLocked()&&Pr(o.columns).length;e.isPlainObject(a)&&a.delimeter&&(n=a.delimeter);var s="";if(l.length){l.eq(0).is(ht)&&(l=l.find("td:not(.k-group-cell)")),l.filter(":visible");var d,c=[],u=this.columns.length,h=o._isLocked()&&Pr(o.columns).length,p=!0,f=[],g=Gr(this.columns);e.each(l,(function(t,r){r=e(r),d=o._getCellField(r,i);var l=r.closest(ht).index(),n=r.index();n-=r.prevAll(":hidden").length,h&&p&&(p=e.contains(o.lockedTable[0],r[0])),o._groups()&&p&&(n-=o._groups()),n=p?n:n+h,d&&(f[n]=d),u>n&&(u=n);var a=r.text();c[l]||(c[l]=[]),c[l][n]=a}));var m=c.length;if(c=e.each(c,(function(e,t){t&&(c[e]=t.slice(u),m>e&&(m=e))})),r&&f.length){c.splice(m,0,f.map((function(e){return function(e,t){return t.filter((function(t){return t.field===e}))[0].title||e}(e,g)})));var b=c.findIndex((function(e){return e!==t}));c[b]=c[b].slice(u)}e.each(c.slice(m),(function(e,t){s+=t?t.join(n)+"\r\n":"\r\n"}))}return s},clearArea:function(e){this.areaClipBoard&&e&&e.target===this.areaClipBoard[0]&&go(this.table,!0),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_adaptiveColumns:function(){var e=this;e._anyColumnHasMediaQuery()&&(e._setColumnsMediaVisibility(e.columns),e._attachColumnMediaResizeHandler())},_anyColumnHasMediaQuery:function(){return this._columnsWithMediaQuery().length},_columnsWithMediaQuery:function(){return fr(this.columns)},_attachColumnMediaResizeHandler:function(){var t=this;t._detachColumnMediaResizeHandler(),t._columnMediaResizeHandler=t._onColumnMediaResize.bind(t),e(window).on(ze+P,t._columnMediaResizeHandler)},_detachColumnMediaResizeHandler:function(){this._columnMediaResizeHandler&&e(window).off(ze+P,this._columnMediaResizeHandler)},_onColumnMediaResize:function(){var e=this;e._setColumnsMediaVisibility(e.columns),e._setContentMediaWidth()},_setColumnsMediaVisibility:function(e){for(var t=e||[],r=0;r<t.length;r++)this._setColumnMediaVisibility(t[r])},_setColumnMediaVisibility:function(e){var t=this;gr(e.media)?t._setColumnsMediaVisibility(e.columns):cr(e)?(t._showColumnByMedia(e),e.hidden||t._setColumnsMediaVisibility(e.columns)):t._hideColumnByMedia(e)},_showColumnByMedia:function(e){e.hidden||this.showColumn(e),dr(e)},_hideColumnByMedia:function(e){var t=e.hidden;t||(e._hideByMedia=!0,this.hideColumn(e),e._hideByMedia=!1,e.hidden=t),dr(e)},_setContentMediaWidth:function(){var t,r,o=this,l=o.options,n=o._isLocked();if(l.scrollable&&(!0===l.resizable||l.resizable&&!0===l.resizable.columns)){n&&o.lockedFooter?t=o.lockedFooter.children("table"):o.footer&&(t=o.footer.find(">.k-grid-footer-wrap>table")),t&&t[0]||(t=e());var a=n?o.wrapper.find(".k-grid-header-locked").find("table"):o.wrapper.find(".k-grid-header").find("table"),i=n?o.lockedTable:o.table,s=a.find("th"),d=a.find("colgroup"),u=s.length,h=s.filter(ur).length,p=s.length-h,f=0;if(""!==a[0].style.width&&parseFloat(a[0].style.width)!==f){for(var g=a.css($e),m=0;m<u;m++)if(r=s[m],e(r)[0].style.display!==St){var b,k=Math.max(m,m-p),_=d.children()[k],v=_?_.style.width:"";""!==v?b=parseFloat(v):(a.css($e,Qe),b=c(s.eq(m)),a.css($e,g)),f+=b}i.css("width",f-1),a.css("width",f),t.css("width",f),o._updateStickyColumns()}}},_minScreenSupport:function(){this.hideMinScreenCols()&&(this.minScreenResizeHandler=this.hideMinScreenCols.bind(this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},_iterateMinScreenCols:function(e,r){for(var o=!1,l=0;l<e.length;l++){var n=e[l],a=n.minScreenWidth;a!==t&&null!==a&&(o=!0,a>r?this.hideColumn(n):this.showColumn(n)),!n.hidden&&n.columns&&(o=this._iterateMinScreenCols(n.columns,r)||o)}return o},_stickyColumns:function(){this._anyStickyColumns()&&this._setStickyColumns(!1)},_updateStickyColumns:function(){var e=this,t=m(Kr(e.columns),(function(e){return e.groupHeaderColumnTemplate}));e._anyStickyColumns()&&(e._setStickyColumns(!0),e._templates(),t.length>0&&e._renderGroupRows(),e._hasFilterRow()&&e._updateStickyFilterCells())},_updateStickyFilterCells:function(){var t=this.thead.find(".k-filter-row").find("td:not(.k-group-cell,.k-hierarchy-cell)");t.length&&t.each((function(){var t=e(this),r=t.data("column");r.sticky?(p(r.stickyStyle)&&t.css({left:r.stickyStyle.left||"",right:r.stickyStyle.right||""}),t.addClass(Te)):(t.css({left:"",right:""}),t.removeClass(Te))}))},_anyStickyColumns:function(){return Or(this.columns).length},_setStickyColumns:function(e){var t=this,r=Or(t.columns),o=function(e){return m(e,(function(e){return e.sticky&&!e.locked&&hr(e)}))}(t.columns),l=t._calculateStickyWidths(o);t._removeStickyAttributes(r),t._setStickyClassAttributes(r),t._setStickyStyleAttributes(o,l,e),e&&t._setStickyStyles(o,l)},_calculateStickyWidths:function(e,t,r){var o,l,n,a,i=Pt?"right":"left",s=Pt?"left":"right",d={left:new Array(e.length).fill(t||0),right:new Array(e.length).fill(r||0)};for(o=0;o<e.length-1;o++)l=e[o],n=this._sumColumnWidth(l)+d[i][o],d[i][o+1]=n;for(o=e.length-1;o>0;o--)l=e[o],a=this._sumColumnWidth(l)+d[s][o],d[s][o-1]=a;return d},_setStickyClassAttributes:function(e,t){var r,o;for(r=0;r<e.length;r++)(o=e[r]).columns&&(!t&&r&&(t=r),this._setStickyClassAttributes(jr([o]),t)),t&&Lr(o,"headerAttributes","class",Re),Lr(o,"attributes","class",xe),Lr(o,"headerAttributes","class",Te),Lr(o,"footerAttributes","class",He)},_setStickyStyleAttributes:function(e,t,r){var l,n,a,i,s,d,c,u=this;for(l=0;l<e.length;l++)n=e[l],s={left:(a=t.left[l])+"px",right:(i=t.right[l])+"px"},n.columns&&(d=Ur([n]),c=u._calculateStickyWidths(d,a,i),u._setStickyStyleAttributes(d,c,r),r&&u._setStickyStyles(d,c)),Lr(n,"attributes",o.attr("style-left"),s.left),Lr(n,"attributes",o.attr("style-right"),s.right),Lr(n,"headerAttributes",o.attr("style-left"),s.left),Lr(n,"headerAttributes",o.attr("style-right"),s.right),Lr(n,"footerAttributes",o.attr("style-left"),s.left),Lr(n,"footerAttributes",o.attr("style-right"),s.right),n.stickyStyle=s},_removeStickyAttributes:function(e){var t,r,l=new RegExp("(\\s*"+xe+")*","ig"),n=new RegExp("(\\s*"+Te+")*","ig"),a=new RegExp("(\\s*"+He+")*","ig"),i=new RegExp("(\\s*"+Re+")*","ig");for(t=0;t<e.length;t++)(r=e[t]).columns&&this._removeStickyAttributes(jr([r])),qr(r,"attributes","class",l),qr(r,"attributes",o.attr("style-left"),"",!0),qr(r,"attributes",o.attr("style-right"),"",!0),qr(r,"headerAttributes","class",n),qr(r,"headerAttributes","class",i),qr(r,"headerAttributes",o.attr("style-left"),"",!0),qr(r,"headerAttributes",o.attr("style-right"),"",!0),qr(r,"footerAttributes","class",a),qr(r,"footerAttributes",o.attr("style-left"),"",!0),qr(r,"footerAttributes",o.attr("style-right"),"",!0)},_setStickyStyles:function(t,r){var o,l,n,a,i,s,d,c,u,h,p,f=this,g=Kr(Vr(f.columns)),m=f.tbody.children(":not(.k-detail-row)");for(o=0;o<t.length;o++)if(a=t[o],s=r.left[o],d=r.right[o],i=g.indexOf(a),(c=f._getColumnHeader(a)).addClass(Te),a.headerAttributes.class&&-1!==a.headerAttributes.class.indexOf(Re)&&c.addClass(Re),Mr(c,s,d),!a.columns)for(f.footer&&((u=f.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(i)).addClass(He),Mr(u,s,d)),l=0;l<m.length;l++)(n=e(m[l])).hasClass(Ie)?((h=n.find("."+a.groupHeaderColumnTemplateClass)).addClass(xe),Mr(h,s,d)):((p=n.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(i)).addClass(xe),Mr(p,s,d))},_removeStickyStyles:function(t){var r,o,l,n,a,i,s,d,c,u=this,h=Kr(Vr(u.columns)),p=u.tbody.children(":not(.k-detail-row)");for(r=0;r<t.length;r++)if(n=t[r],a=h.indexOf(n),(i=u._getColumnHeader(n)).removeClass(Te),i.removeClass(Re),Mr(i,"",""),n.columns)u._removeStickyStyles(n.columns);else for(n.footerTemplate&&u.footer&&((s=u.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(a)).removeClass(He),Mr(s,"","")),o=0;o<p.length;o++)(l=e(p[o])).hasClass(Ie)?((d=l.find("."+n.groupHeaderColumnTemplateClass)).removeClass(xe),Mr(d,"","")):((c=l.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(a)).removeClass(xe),Mr(c,"",""))},_getColumnHeader:function(t){return e("#"+t.headerAttributes.id).length?e("#"+t.headerAttributes.id):e("#"+this._cellId)},_sumColumnWidth:function(e){return e.columns?this._sumCurrentWidths(Kr([e])):this._sumCurrentWidths([e])},_sumCurrentWidths:function(e){var t,r,o,l=0,n=0,a=e.length;for(o=0;o<a;o++)t=e[o],r=this._getColumnHeader(t),!t.hidden&&cr(t)&&(l+=(n=r.is(":visible")?r.outerWidth():t.width)?parseInt(n,10):0);return l},_belongsToGrid:function(e){return this.wrapper[0]===e.closest(".k-grid")[0]},getSelectedData:function(){for(var e=this,t=e.selectable.selectedRanges(),r=Object.keys(t),o=e.selectable.selectedSingleItems(),l=[],n=Gr(e.columns),a=0;a<r.length;a++)l=l.concat(e._mapSelectionToData(t[r[a]],n));return o.length&&(l=l.concat(e._mapSelectionToData(o,n))),l},exportSelectedToExcel:function(e){if(!o.excel||!o.ooxml)throw new Error("The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.");var t,r=this,l=this.options.excel||{},n=Gr(r.columns),a=new o.excel.ExcelExporter({}),i={sheets:[{columns:Array.apply(0,Array(n.length)).map((function(){return{autoWidth:!0}})),rows:[],freezePane:{},filter:!1}]},s=r.selectable.selectedRanges(),d=Object.keys(s),c=r.selectable.selectedSingleItems(),u=[],h=r._isLocked()&&Pr(r.columns).length,p=To.bind(r);for(t=0;t<d.length;t++)u=u.concat(r._mapSelectionToData(s[d[t]],n,Ho));if(u.length&&r._addRangeSelectionRows(i,a,u,e),(u=c.length?r._mapSelectionToData(c,n,Ho):[]).length&&(h&&(u=u.sort(p)),r._addSingleSelectionRows(i,a,u,e)),i.sheets[0].rows.length){var f=new o.ooxml.Workbook(i);f.options||(f.options={}),f.options.skipCustomHeight=!0,f.toDataURLAsync().then((function(e){o.saveAs({dataURI:e,fileName:i.fileName||l.fileName,proxyURL:l.proxyURL,forceProxy:l.forceProxy})}))}},_addSingleSelectionRows:function(e,t,r,o){var l,n=0,a=Nr(this.columns);for(n=0;n<r.length;n++)l=r[n],t.data=[l],this._setExporterColumns(t,a,l),this._createExportRows(e,t,o)},_addRangeSelectionRows:function(e,t,r,o){var l=Nr(this.columns);t.data=r,this._setExporterColumns(t,l,r[0]),this._createExportRows(e,t,o)},_createExportRows:function(e,t,r){e.sheets[0].rows=e.sheets[0].rows.concat(r?t._rows():t._dataRows(t.data,0))},_setExporterColumns:function(t,r,o){t.columns=t.options.columns=e.map(r.filter((function(e){return Object.keys(o).indexOf(e.field)>=0})),t._prepareColumn)},_mapSelectionToData:function(t,r,o){for(var l,n,a,i,s,d=this,c="TR"===t[0][0].nodeName,u={},h=function(e){var t={};if(e.field&&(!o||o(e)))return t[e.field]=l[e.field],t},p=d._isLocked()&&Pr(d.columns).length,f=0;f<t.length;f++)if(n=t[f],l=d.dataItem(c?n:n.parent()),c)u[l.uid]=e.extend.apply(null,r.map(h));else{if(!(i=d._getCellField(n,p)))continue;if((a=u[l.uid])||(a=u[l.uid]={}),!(s=br(r,i))||o&&!o(s))continue;a[i]=l[i]}return Object.keys(u).map((function(e){return u[e].uid=e,u[e]}))},_getCellField:function(t,r){var l=this,n=r&&e.contains(l.lockedTable[0],t[0]),a=o.attr("field"),i=o.attr("index");return r?l.element.find(".k-grid-header-"+(n?"locked":"wrap")+" th["+i+"='"+t.index()+"']").attr(a):l.thead.find("th["+i+"='"+t.index()+"']").attr(a)},_relatedRow:function(t){var r=this.lockedTable;if(t=e(t),!r)return t;var o=t.closest(this.table.add(this.lockedTable)),l=o.find(">tbody>tr").index(t);return(o=o[0]===this.table[0]?r:this.table).find(">tbody>tr").eq(l)},_relatedCell:function(t){var r=this.lockedTable;if(t=e(t),!r)return t;var o=t.closest(this.table.add(this.lockedTable)),l=o.find(">tbody>tr>td").index(t);return(o=o[0]===this.table[0]?r:this.table).find(">tbody>tr>td").index(l)},clearSelection:function(){var e=this;e.selectable&&!e._checkBoxSelection&&e.selectable.clear(),e._checkBoxSelection?e._deselectCheckRows(e.select()):e.options.persistSelection?e._persistSelectedRows():e._selectedIds={}},select:function(e){var t=this,r=t.selectable,l=o.ui.Selectable.parseOptions(this.options.selectable).cell;return(e=t.table.add(t.lockedTable).find(e)).length?(r&&!r.options.multiple&&(r.clear(),e=e.first()),t._isLocked()&&(e=e.add(e.map((function(){return l?t._relatedCell(this):t._relatedRow(this)})))),r&&!t._checkBoxSelection?r.value(e):(t._checkRows(e),t.select().length===t.items().length&&t._toggleHeaderCheckState(!0)),void(l||t._persistSelectedRows())):r?r.value():t.items().filter("."+fe)},_toggleHeaderCheckState:function(e){var t=this;e?t.thead.add(t.lockedHeader).find("tr "+me).prop("checked",!0).attr(wt,!0).attr(ft,"Deselect all rows"):t.thead.add(t.lockedHeader).find("tr "+me).prop("checked",!1).attr(wt,!1).attr(ft,"Select all rows")},_uncheckCheckBoxes:function(){this.table.add(this.lockedTable).find("tbody "+me).attr(wt,!1).prop("checked",!1).attr(ft,"Select row")},_deselectCheckRows:function(t){var r=this,l=o.attr("range-selected");t=r.table.add(r.lockedTable).find(t),r._isLocked()&&(t=t.add(t.map((function(){return r._relatedRow(this)})))),t.each((function(){e(this).removeClass(fe).removeAttr(l).find(me).attr(wt,!1).prop("checked",!1).attr(ft,"Select row")})),r._toggleHeaderCheckState(!1),r._persistSelectedRows()},_checkRows:function(t){t.each((function(){e(this).addClass(fe).find(me).prop("checked",!0).attr(ft,"Deselect row").attr(wt,!0)}))},_persistSelectedRows:function(){var e,t,r,l=this,n=l.items(),a=l.dataSource.options.schema,i={};if(a&&a.model&&l._data&&(r=v(a.model)?a.model.fn.idField:a.model.id)){o.ui.Selectable.parseOptions(l.options.selectable).multiple||l._checkBoxSelection||(l._selectedIds={}),l.select().each((function(){t=l.dataItem(this),i[t[r]]=!0}));for(var s=0;s<n.length;s++)e=(t=l.dataItem(n[s]))[r],i[e]?l._selectedIds[e]=!0:delete l._selectedIds[e]}},selectedKeyNames:function(){var e=[];for(var t in this._selectedIds)e.push(t);return e.sort(),e},_updateCurrentAttr:function(t,r){var o,l,n=e(t).data("headerId");e(t).removeClass(ce),this.table.removeAttr(Ct),n?(n=n.replace(this._cellId,""),e(t).attr(ct,n)):e(t).removeAttr(ct),(o=r.attr(ct))!=this._cellId&&r.data("headerId",o),o?l=o:r.attr(ct,this._cellId),r.addClass(ce),this.table.attr(Ct,l||this._cellId),this._current=r},_scrollCurrent:function(){var t=this._current,r=this.options.scrollable;if(t&&r){var o=t.parent(),l=o.closest("table").parent(),n=l.is(".k-grid-content-locked,.k-grid-header-locked"),a=l.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap"),i=e(this.content).find(">.k-virtual-scrollable-wrap").addBack().last()[0];if(a)if(this.virtualScroll){var s=Math.max(k(o[0],this._items(o.parent())),0);this.virtualScroll.rows?(this._rowVirtualIndex=this.virtualScrollable.itemIndex(s),this.virtualScrollable.scrollIntoView(o)):(this._rowVirtualIndex=s,this._scrollTo(this._relatedRow(o)[0],i))}else this._scrollTo(this._relatedRow(o)[0],i);this.lockedContent&&(this.lockedContent[0].scrollTop=i.scrollTop),n||this._scrollTo(t[0],i)}},current:function(e){return this._setCurrent(e,!0)},_setCurrent:function(t,r,o){var l=this._current;if(t=e(t),l&&t&&l.length&&t.length&&l.closest(".k-filter-row").length>0&&0===t.closest(".k-filter-row").length&&this._filterFocusable().attr(Ye,-1),t.length&&(!l||l[0]!==t[0])){var n=t.parent(),a=n.children(R),i=parseInt(n.children().first().attr("colspan"),10);this._hasVirtualColumns()&&(this._virtualCellIndex=(i>1?i:0)+a.index(t)),this._updateCurrentAttr(l,t),o||this._scrollCurrent(),r||this.trigger(Ve,{element:t})}return t&&t.length&&(this._lastCellIndex=t.parent().children(".k-group-cell,"+I).index(t)),this._updateSelctCheckbox(l,t),this._current},_removeCurrent:function(){this._current&&(this._current.removeClass(ce),this._current=null)},_updateSelctCheckbox:function(e,t){var r;t&&t.length&&((r=t.find(".k-select-checkbox")).length>0?r.focus():e&&e.find(".k-select-checkbox").length>0&&go(this.table,!0))},_scrollTo:function(t,r){var l=t.tagName.toLowerCase(),n="td"===l||"th"===l,a=e(t).closest("table")[0],i=t[n?"offsetWidth":"offsetHeight"],s=r[n?"scrollLeft":"scrollTop"],d=r[n?"clientWidth":"clientHeight"],c="relative"===e(t).css("position")&&Pt&&n?Math.abs(a.offsetLeft-t.offsetLeft):t[n?"offsetLeft":"offsetTop"],u=c+i,h=0,p=0,f=0;Pt&&n&&(Vt.msie||Vt.edge?p=a.offsetLeft:(Vt.mozilla||Vt.webkit&&Vt.version>85)&&(f=a.offsetLeft-o.support.scrollbar())),h=(s=Math.abs(s+p-f))>c?c:u>s+d?i<=d?u-d:c:s,h=Math.abs(h+p)+f,r[n?"scrollLeft":"scrollTop"]=h},_navigatable:function(){var t=this;if(t.options.navigatable){var r=t.table.add(t.lockedTable),l=t.thead.parent().add(e(">table",t.lockedHeader)),n=r;t.options.scrollable&&(n=n.add(l)),this._navigatableTables=n,this._headertables=l,n.off(We+P+" focus"+P+" focusout"+P+" keydown"+P),l.find("a.k-link").attr("tabIndex",-1),r.on("keydown"+P,".k-detail-cell",(function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()})),n.on(o.support.touch?"touchstart"+P:We+P,z+">"+E,_o.bind(t)).on("focus"+P,t._tableFocus.bind(t)).on("focusout"+P,t._tableBlur.bind(t)).on("keydown"+P,t,t._tableKeyDown.bind(t)),t._filterFocusable().on("focus",t._filterFocus.bind(t))}},_filterFocus:function(t){var r=t.target.closest("th");this._filterFocusable().attr(Ye,0),this._setCurrent(r),e(r).removeClass(ce)},_tableFocus:function(){var e=this.current(),t=this.lockedTable?this.lockedTable:this.table;e&&e.is(":visible")?e.addClass(ce):this._virtualColScroll?this._setCurrent(t.find(z).first().children(E).first(),!0,!0):this._setCurrent(t.find(z).first().children(E).first()),this.table.attr(Ye,0)},_tableBlur:function(){var e=this.current();e&&e.removeClass(ce)},_findCellIndex:function(e,t,r){var o,l;if(r)for(l=t;l>=0&&(o=l,e[l].hidden);l--);else for(l=t;l<e.length&&(o=l,e[l].hidden);l++);return o},_scrollToColumn:function(e,r){if(this._virtualCellIndex===t)return!1;var l=this,n=l._virtualCellIndex,a=Kr(Vr(l.columns)),i=0;e==(Pt?h.LEFT:h.RIGHT)&&n!==a.length-1?n=l._findCellIndex(a,n+1):e==(Pt?h.RIGHT:h.LEFT)&&n?n=l._findCellIndex(a,n-1,!0):e==h.HOME?n=l._findCellIndex(a,0):e==h.END&&(n=l._findCellIndex(a,a.length-1,!0));for(var s=0;s<n;s++)i+=a[s].width;return l._virtualCellIndex=n,r&&(r.preventDefault(),r.stopPropagation()),o.scrollLeft(l.content,i),!0},_tableKeyDown:function(t){var r=this.current(),o=this.virtualScroll||{},l=this.virtualScrollable&&this.virtualScrollable.fetching(),n=e(t.target),a=!t.isDefaultPrevented()&&!n.is(":button,a,:input:not(.k-select-checkbox),a>.k-icon,a>.k-svg-icon");if(t.altKey&&t.keyCode==h.DOWN)return this.current().find(".k-grid-filter-menu, .k-grid-column-menu").click(),void t.stopImmediatePropagation();if(l)t.preventDefault();else if((!o.columns||r&&document.body.contains(r[0])||!this._scrollToColumn(t.keyCode,t))&&(r||(r=e(this.lockedTable).add(this.options.scrollable?this.table:this.tbody).find(z).first().children(E).first()),r.length)){var i=!1;t.isDefaultPrevented()||t.keyCode!==h.F10||(i=this._focusToolbar()),a&&t.keyCode==h.UP&&(i=this._moveUp(r,t.shiftKey,t.ctrlKey)),a&&t.keyCode==h.DOWN&&(i=this._moveDown(r,t.shiftKey,t.ctrlKey)),a&&t.keyCode==(Pt?h.LEFT:h.RIGHT)&&(i=this._moveRight(r,t.altKey,t.shiftKey,t.ctrlKey,t.currentTarget)),a&&t.keyCode==(Pt?h.RIGHT:h.LEFT)&&(i=this._moveLeft(r,t.altKey,t.shiftKey,t.ctrlKey,t.currentTarget)),a&&t.keyCode==h.PAGEDOWN&&(i=this._handlePageDown()),a&&t.keyCode==h.PAGEUP&&(i=this._handlePageUp()),a&&t.keyCode==h.HOME&&(i=this._handleHome(r,t.ctrlKey)),a&&t.keyCode==h.END&&(i=this._handleEnd(r,t.ctrlKey)),a&&t.keyCode==h.SPACEBAR&&(i=this._handleSpaceKey(r,t.ctrlKey)),t.keyCode!=h.ENTER&&t.keyCode!=h.F2||(i=this._handleEnterKey(r,t.currentTarget,n)),t.keyCode==h.ESC&&(i=this._handleEscKey(r,t.currentTarget)),t.keyCode==h.TAB&&(i=this._handleTabKey(r,t.currentTarget,t.shiftKey,n)),i&&(t.preventDefault(),t.stopPropagation())}},_focusToolbar:function(){var e=this.wrapper.find(".k-grid-toolbar [tabindex=0]");return e.length>0&&(e.first().addClass(".k-focus").trigger("focus"),!0)},_moveLeft:function(t,r,o,l,n){var a,i,s=t.parent(),d=s.parent();return r?s.hasClass(Ie)?this.collapseGroup(s):this.collapseRow(s):l&&t.is(".k-header")&&this.options.reorderable?this._moveColumn(t,!0):(i=d.find(z).index(s),(a=this._prevHorizontalCell(d,t,i))[0]||(o?this.lockedTable?(a=this._relatedRow(s),e.contains(this.lockedTable[0],s[0])&&(a=a.prevAll(A).first()),a=a.children(R).last()):a=this._tabNext(t,n,!0):(d=this._horizontalContainer(d),(a=this._prevHorizontalCell(d,t,i))[0]!==t[0]&&go(this.table,!0))),this._setCurrent(a)),!0},_moveRight:function(t,r,o,l,n){var a,i,s=t.parent(),d=s.parent();return r?s.hasClass(Ie)?this.expandGroup(s):this.expandRow(s):l&&t.is(".k-header")&&this.options.reorderable?this._moveColumn(t,!1):(i=d.find(z).index(s),(a=this._nextHorizontalCell(d,t,i))[0]||(o?this.lockedTable?(a=this._relatedRow(s),e.contains(this.table[0],s[0])&&(a=a.nextAll(A).first()),a=a.children(R).first()):a=this._tabNext(t,n,!1):(d=this._horizontalContainer(d,!0),(a=this._nextHorizontalCell(d,t,i))[0]!==t[0]&&go(this.table,!0))),this._setCurrent(a)),!0},_moveUp:function(e,t,r){var o,l,n,a,i=e.parent().parent();t?(o=(o=e.parent()).prevAll(A).first(),o=e.parent().is(A)?o.children().eq(e.index()):o.children(R).last()):r&&e.parent().is(A)&&this._hasReorderableRows()?(l=e.index(),o=(o=e.parent()).prevAll(A).first(),n=this.tbody.children(A).index(o),a=this.tbody.children(A).index(e.parent()),n>=0&&!this.trigger(Pe,{oldIndex:a,newIndex:n,row:e.parent()})&&(this.reorderRows(e.parent(),n),o=this.tbody.children(A).eq(n).children().eq(l))):(o=this._prevVerticalCell(i,e))[0]||(this._lastCellIndex=0,i=this._verticalContainer(i,!0),(o=this._prevVerticalCell(i,e))[0]&&go(this.table,!0));var s=this._lastCellIndex||0;return this._setCurrent(o),this._lastCellIndex=s,!0},_moveDown:function(e,t,r){var o,l,n,a,i=e.parent().parent();t?(o=(o=e.parent()).nextAll(A).first(),o=e.parent().is(A)?o.children().eq(e.index()):o.children(R).first()):r&&e.parent().is(A)&&this._hasReorderableRows()?(l=e.index(),o=(o=e.parent()).nextAll(A).first(),n=this.tbody.children(A).index(o),a=this.tbody.children(A).index(e.parent()),n>=0&&!this.trigger(Pe,{oldIndex:a,newIndex:n,row:e.parent()})&&(this.reorderRows(e.parent(),n+1),o=this.tbody.children(A).eq(n).children().eq(l))):(o=this._nextVerticalCell(i,e))[0]||(this._lastCellIndex=0,i=this._verticalContainer(i),(o=this._nextVerticalCell(i,e))[0]&&go(this.table,!0));var s=this._lastCellIndex||0;return this._setCurrent(this._findVisibleCell(o)),this._lastCellIndex=s,!0},_moveColumn:function(t,r){var o=this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter+":visible"),l=pr(Tr(this.columns)),n=o.index(e(t)),a=r?-1:1,i=l[n],s=Hr(l,this.columns,n,n+a);s>=0&&(this.reorderColumn(s,i,r),this.trigger(De,{newIndex:s,oldIndex:n,column:i}))},_handleHome:function(e,t){var r,o=e.parent(),l=o.parent(),n=this.lockedTable&&this.lockedTable.children("tbody")[0]===l[0],a=l[0]===this.tbody[0];return this._hasVirtualColumns()?(this._scrollToColumn(h.HOME),!0):(t?r=this.lockedTable?this.lockedTable.find(A).first().children(E).first():this.table.find(A).first().children(E).first():(a||n)&&(a&&this.lockedTable&&(o=this._relatedRow(o)),r=o.children(R).first()),r&&r.length?(this._setCurrent(r),!0):void 0)},_handleEnd:function(e,t){var r,o=e.parent(),l=o.parent(),n=this.lockedTable&&this.lockedTable.children("tbody")[0]===l[0],a=l[0]===this.tbody[0];return this._hasVirtualColumns()?(this._scrollToColumn(h.END),!0):(t?r=this.table.find(A).last().children(E).last():(a||n)&&(!a&&this.lockedTable&&(o=this._relatedRow(o)),r=o.children(R).last()),r&&r.length?(this._setCurrent(r),!0):void 0)},_handlePageDown:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()+1),!0)},_handlePageUp:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()-1),!0)},_handleTabKey:function(t,r,o,l){var n,a;if(!(this.options.editable&&"incell"==this._editMode())||t.is("th")||(this.options.scrollable?this._headertables.filter(r).length:this.thead.filter(l).length)){if(t.parent().hasClass("k-filter-row")){if(a=this._filterFocusable(),!o&&a[a.length-1]===document.activeElement)return a.first().trigger("focus"),!0;if(o&&a[0]===document.activeElement)return a.last().trigger("focus"),!0}return!1}return(n=e(s()).closest(".k-edit-cell"))[0]&&n[0]!==t[0]&&(t=n),(n=this._tabNext(t,r,o))[0]!==t[0]&&(!!n.length&&(this._handleEditing(t,n,n.closest("table")),!0))},_handleEscKey:function(t){var r,o=s(),l="incell"==this._editMode();if(!(r=t)||!r.hasClass("k-edit-cell")&&!r.parent().hasClass("k-grid-edit-row"))return t.has(o).length?(go(this.table,!0),!0):!!t.parent().hasClass("k-filter-row")&&(this._filterFocusable().attr(Ye,-1),go(this.table,!0),!0);if(l)this.closeCell(!0);else{var n=e(t).parent().index();o&&o.blur(),this.cancelRow(!0),n>=0&&this._setCurrent(this.items().eq(n).children(E).first())}return go(this.table,!0),!0},_toggleCurrent:function(e,t,r){var o=e.parent();return!e.is(".k-command-cell")&&(!o.is(".k-filter-row")&&((o.is(x+Ie)||!(t||!r))&&(o.find(".k-icon,.k-svg-icon").first().click(),!0)))},_handleSpaceKey:function(t,r){var l=this;if(r&&l.groupable&&t.hasClass("k-header")){var n=l.groupable.descriptors(),a=t.attr(o.attr("field")),i=l.groupable.aggregates();return l.groupable._canDrag(t)?n.push({field:a,dir:"asc",aggregates:i||[]}):n=e.grep(n,(function(e){return e.field!==a})),l.dataSource.group(n),!0}},_handleEnterKey:function(t,r,o){var l,n=this.options.editable&&!1!==this.options.editable.update,a=o.closest("td"),i=this._hasDetails();if(o.is("table")||e.contains(t[0],o[0])||(t=a),t.is("th"))return l=t.find(".k-link"),!(t.has(e(s())).length>0)&&(l.length?l.click():t.parent().hasClass("k-filter-row")?(this._filterFocusable().attr(Ye,0),t.find(":kendoFocusable").first().focus()):t.find(me).trigger("focus"),!0);if(this._toggleCurrent(t,n,i))return!0;var d=t.find(":kendoFocusable").first();return d[0]&&!t.hasClass("k-edit-cell")&&t.hasClass("k-focus")?(d.trigger("focus"),!0):!(!n||o.is(":button,.k-button,textarea"))&&(a[0]||(a=t),this._handleEditing(a,!1,r),!0)},_nextHorizontalCell:function(e,t,r){if(!t.nextAll(R).length){var o=e.find(z);if(-1==o.index(t.parent())){if(t.hasClass("k-header")){var l=[];return Dr([Pr(this.columns)[0]],Jr(o.eq(0).children(":visible").first()),l,0,0),l[r]?l[r][0]:t}return t.parent().hasClass("k-filter-row")?o.last().children(R).first():this._findVisibleCell(o.eq(r).children(I).first())}}return this._findVisibleCell(t.nextAll(R+",[hidden]").eq(0))},_prevHorizontalCell:function(e,t,r){var o=t.prevAll(R);if(!o.length){var l=e.find(z);if(-1==l.index(t.parent())){if(t.hasClass("k-header")){var n=[],a=Pr(this.columns);return Dr([a[a.length-1]],Jr(l.eq(0).children().last()),n,0,0),n[r]?n[r][0]:t}return t.parent().hasClass("k-filter-row")?l.last().children(R).last():l.eq(r).children(R).last()}}o=t.prevAll(R+",[hidden]");var i=this._findVisibleCell(o.first());return i.is(".k-group-cell")?i.next(R):i},_currentDataIndex:function(e,r){var o=r.attr("data-index");if(!o)return t;var l=Pr(this.columns).length;return l&&!e.closest(pt).hasClass("k-grid-content-locked")[0]?o-l:o},_findVisibleCell:function(e){var t,r=e.index(),o=e.closest("tr").index();if(e.is("[hidden]")){t=e.prevAll(":not([hidden])").first();var l=e.prevUntil(":not([hidden])","[hidden]").length;if(!t.attr("colspan")||t.attr("colspan")>1&&t.attr("colspan")<=l+1){if(0===(t=e.prevAll("[hidden]").last()).length)return e.closest("tr").prevAll().find("td:nth-of-type("+(r+1)+"):visible").last();for(;!(t.attr("rowspan")||t.attr("rowspan")>1&&t.attr("rowspan")!=o-t.closest("tr").index()||Math.abs(t.index()-r)==t.attr("colspan"));)if(0===(t=t.closest("tr").prevAll().find("td, th").eq(r).first()).length){t=e;break}}}else t=e;return t},_prevVerticalCell:function(t,r){var o,l=r.parent(),n=t.children(z),a=n.index(l),i=this._currentDataIndex(t,r);if(i||r.hasClass("k-header"))return(o=Yr(r)).eq(o.length-2);if(i=Math.max(l.children(I).index(r),this._lastCellIndex||0),l.hasClass("k-filter-row")){var s=n.last().children(".k-group-cell").length;return Qr(t).filter(ur).eq(Math.max(0,i-s))}if(-1==a){if(this._hasVirtualColumns()&&(i=this._virtualCellIndex),!(l=t.find("tr.k-filter-row:visible"))[0]){(this._hasDetails()||r.parent().find(".k-hierarchy-cell").length)&&i&&i--;var d=0;return r.parent().is(".k-table-group-row")&&(d=n.last().children(".k-group-cell").length),Qr(t).eq(Math.max(0,i-d))}this._hasDetails()&&i--}else l=0===a?e():n.eq(a-1);if((o=l.children(I)).length>i){var c=o.eq(i);return c.is(".k-group-cell")&&(c=c.nextAll(I+":not(.k-group-cell)").first()),this._findVisibleCell(c)}return o.eq(0)},_nextVerticalCell:function(e,r){var o,l,n,a=l=r.parent(),i=e.children(z),s=i.index(a),d=this._currentDataIndex(e,r),c=this.virtualScroll||{};if(-1!=s&&d===t&&r.hasClass("k-header"))return Jr(r).eq(1);d=d?parseInt(d,10):a.children(I).index(r),d=Math.max(d,this._lastCellIndex||0),-1==s?(a=i.eq(0),c.columns&&(n=parseInt(a.children().first().attr("colspan"),10),d=this._virtualCellIndex-(n>1?n:0)),(this._hasDetails()||a.find(".k-hierarchy-cell").length)&&d++,a.hasClass("k-table-group-row")&&(d+=l.children(".k-group-cell").length)):a=i.eq(s+r[0].rowSpan);var u=(o=a.children(".k-group-cell,"+I)).eq(0);return o.length>d&&(u=o.eq(d)),u.is(".k-group-cell")&&(u=u.next(":not(k-group-cell):not([hidden])")),u},_verticalContainer:function(e,t){var r=e.parent(),o=this._navigatableTables.length,l=Math.floor(o/2),n=k(r[0],this._navigatableTables);return t&&(l*=-1),((n+=l)>=0||n<o)&&(r=this._navigatableTables.eq(n)),r.find(t?">thead":">tbody")},_filterFocusable:function(){return this.wrapper.find(".k-filter-row").find(".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible")},_horizontalContainer:function(e,t){var r=this._navigatableTables.length;if(r<=2)return e;var o=e.parent(),l=k(o[0],this._navigatableTables);return l+=t?1:-1,!t||2!=l&&l!=r?!t&&(1==l||l<0)?e:this._navigatableTables.eq(l).find("thead, tbody"):e},_tabNext:function(e,t,r){var o=!0,l=r?e.prevAll(R).first():e.nextAll(":visible").first();if(!l.length){if(l=e.parent(),this.lockedTable&&(o=r&&t==this.lockedTable[0]||!r&&t==this.table[0],l=this._relatedRow(l)),o){if(this._hasVirtualColumns())return e;l=l[r?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible").first()}l=r?l.children(R).last():l.children(R).first()}return l},_handleEditing:function(t,r,o){var l,n,a=this,i=e(s()),d=a._editMode(),c=Vt.msie,u=a._editContainer,h=a.options.editable&&!1!==a.options.editable.update;if(o=e(o),n="incell"==d?t.hasClass("k-edit-cell"):t.parent().hasClass("k-grid-edit-row"),a.editable){if(e.contains(u[0],i[0])&&(i.trigger("blur"),c&&i.trigger("blur")),!a.editable)return void go(a.table);if(!a.editable.end())return"incell"==d?a._setCurrent(u):a._setCurrent(u.children().filter(R).first()),void((l=u.find(":kendoFocusable").first()[0])&&l.focus());"incell"==d?a.closeCell():(a.saveRow(),n=!0)}r&&a._setCurrent(r),go(a.table,!0),h&&(!n&&!r||r)&&(d===ot?e(a.current()).hasClass("k-hierarchy-cell")||a.editCell(a.current()):a.editRow(a.current().parent()))},_wrapper:function(){var e=this,t=e.table,r=e.options.height,l=e.options.width,n=e.element;n.is(pt)||(n=n.wrap("<div/>").parent()),e.wrapper=n.addClass("k-grid "+o.getValidCssClass("k-grid-","size",e.options.size)),r&&(e.wrapper.css(Ke,r),t.css(Ke,Qe)),l&&e.wrapper.css($e,l),e._initMobile()},_initContextMenu:function(){var e=this,t=e.options,r=p(t.contextMenu)&&b(t.contextMenu.groups)?{items:t.contextMenu.groups}:{items:Kt},o=p(t.contextMenu)&&b(t.contextMenu.body)?{items:t.contextMenu.body}:{items:jt},n=p(t.contextMenu)&&b(t.contextMenu.head)?{items:t.contextMenu.head}:{items:Ut},a=p(t.contextMenu)?t.contextMenu:{};o=f({},{messages:t.messages,target:e.tbody,filter:".k-table-td",action:e._action.bind(e),states:e._buildStates()},a,o),n=f({},{messages:t.messages,target:e.thead,filter:".k-table-th",action:e._action.bind(e),states:e._buildStates()},a,n),e.groupable&&(r=f({},{showOn:"click",target:e.groupable.groupContainer,filter:".k-groupable-context-menu",messages:t.messages,action:e._action.bind(e),states:e._buildStates()},a,r)),e.tbodyContextMenu=new l.grid.ContextMenu("<ul></ul>",o),e.theadContextMenu=new l.grid.ContextMenu("<ul></ul>",n),e.groupsContextMenu=!!e.groupable&&new l.grid.ContextMenu("<ul></ul>",r)},_buildStates:function(){var t=this,r=this;return{isEditable:r.options.editable,isSelectable:r.options.selectable,isSortable:r.options.sortable,isRowReorderable:p(r.options.reorderable)?r.options.reorderable.rows:r.options.reorderable,isGroupable:r.options.groupable,hasSelection:function(){return!!t.select()&&t.select().length>0},isSorted:function(){return!(t.dataSource.sort()&&t.dataSource.sort().length>0)},canMoveGroupPrev:function(t){return e(t).closest(".k-chip").index()>0},canMoveGroupNext:function(t){var r=e(t).closest(".k-chip-list").children().length-1;return e(t).closest(".k-chip").index()<r}}},_action:function(e){var t=e.command,r=f({grid:this},e.options);return new l.grid.commands[t](r).exec()},_initMobile:function(){var e=this.options,t=this;if(this._isMobile=!0===e.mobile&&o.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile,this._isMobile){var r=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+o.ns+'stretch="true" data-'+o.ns+'role="view" data-'+o.ns+'init-widgets="false"></div>').parent();this.pane=this._createPane(r),this.view=this.pane.view(),e.height?this.pane.element.parent().css(Ke,e.height):this.pane.element.parent().css(Ke,this.wrapper[0].style.height),this._editAnimation="slide",t.wrapper.on("transitionend"+P,(function(e){e.stopPropagation()})),t.wrapper.on("contextmenu"+P,"th a",(function(e){return e.preventDefault(),!1})),this.view.bind("showStart",(function(){t._isLocked()&&(t._updateTablesWidth(),t._applyLockedContainersWidth(),t._syncLockedContentHeight(),t._syncLockedHeaderHeight(),t._syncLockedFooterHeight())}))}},_createPane:function(e){return o.Pane.wrap(e,{viewEngine:{viewOptions:{renderOnInit:!0,wrap:!1,wrapInSections:!0,detachOnHide:!1,detachOnDestroy:!1}}})},_tbody:function(){var t,r=this.table;(t=r.find(">tbody")).length||(t=e("<tbody class='k-table-tbody'/>").appendTo(r)),this.tbody=t},_scrollable:function(){var t,r,l,n=this,a=n.options,i=a.scrollable,s=!0!==i&&i.virtual?function(e){var t;if("string"==typeof e)return"true"===(t=e.toLowerCase())?{rows:!0}:{rows:t.indexOf("rows")>-1,columns:t.indexOf("columns")>-1};if(!0===e)return{rows:!0}}(i.virtual):null,d=!o.support.kineticScrollNeeded||s&&s.rows?o.support.scrollbar():0;if(i){(t=n.wrapper.children(".k-grid-header"))[0]||(t=e('<div class="k-grid-header" />').insertBefore(n.table)),t.css(Pt?"padding-left":"padding-right",i.virtual?d+1:d),(r=e('<table role="none" class="k-grid-header-table k-table"/>')).addClass(o.getValidCssClass("k-table-","size",a.size)),r.width(n.table[0].style.width),r.append(n.thead),t.empty().append(e('<div class="k-grid-header-wrap k-auto-scrollable" />').append(r)),n.content=n.table.parent(),n.virtualScroll=s,n.content.is(".k-virtual-scrollable-wrap, ."+Gt)&&(n.content=n.content.parent()),n.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(n.content=n.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()),n.content.parent().hasClass("k-grid-container")||n.content.wrap("<div class='k-grid-container' />").parent(),s&&s.rows&&!n.virtualScrollable&&n._createVirtualScrollable(),s&&s.columns&&n.table.css({width:zr(Gr(Wr(n.columns)))}),l=t.children(".k-grid-header-wrap"),n.scrollables=l.add(n.content);var c=n.wrapper.find(".k-grid-footer");if(c.length&&(n.scrollables=n.scrollables.add(c.children(".k-grid-footer-wrap"))),l.off("scroll"+P).on("scroll"+P,(function(e){n._scrollLeft!==this.scrollLeft&&o.scrollLeft(n.scrollables.not(e.currentTarget),this.scrollLeft)})),s&&s.rows)n.content.find(">.k-virtual-scrollable-wrap").off("scroll"+P).on("scroll"+P,(function(){var e=this.scrollLeft!=n._scrollLeft;n._scrollLeft=this.scrollLeft,o.scrollLeft(n.scrollables,this.scrollLeft),n.lockedContent&&(n.lockedContent[0].scrollTop=this.scrollTop),s.columns&&e&&n.refresh()}));else{var u=i.endless,h=n.dataSource.options.pageSize;u&&(n._endlessPageSize=h),n.content.off("scroll"+P).on("scroll"+P,(function(e){var t=this.scrollLeft!=n._scrollLeft;n._scrollLeft=this.scrollLeft,o.scrollLeft(n.scrollables.not(e.currentTarget),n._scrollLeft),n.lockedContent&&e.currentTarget==n.content[0]&&(n.lockedContent[0].scrollTop=this.scrollTop),u&&this.scrollTop+this.clientHeight-this.scrollHeight>=-10&&!n._endlessFetchInProgress&&n._endlessPageSize<n.dataSource.total()&&(n._skipRerenderItemsCount=n._endlessPageSize,n._endlessPageSize=n._endlessPageSize+h,n.dataSource.options.endless=!0,n._endlessFetchInProgress=!0,n.dataSource.pageSize(n._endlessPageSize)),s&&s.columns&&t&&(n._virtualColScroll=!0,n._cacheEditableState(),n.refresh(),n._restoreEditableState(),n._virtualColScroll=!1),n.rowResizer&&n.rowResizer.css("left",e.currentTarget.scrollLeft+"px")}));var p=n.content.data("kendoTouchScroller");p&&p.destroy(),(p=o.touchScroller(n.content))&&p.movable&&(n.touchScroller=p,p.movable.bind("change",(function(e){o.scrollLeft(n.scrollables,-e.sender.x),n.lockedContent&&n.lockedContent.scrollTop(-e.sender.y)})),n.one(ee,(function(e){e.sender.wrapper.addClass("k-grid-backface")})))}}},_createVirtualScrollable:function(){var e=this;e.virtualScrollable&&e.virtualScrollable.destroy(),e.virtualScrollable=new $t(e.content,{dataSource:e.dataSource,itemHeight:function(){return e._averageRowHeight()},page:function(){e._restoreEditableState()},scroll:function(){e._focusEditable()},loadStart:function(){e._progress(!0)},loadEnd:function(){e._progress(!1)}}),e.virtualScrollable.bind(ne,e._onVirtualPaging.bind(e))},_onVirtualPaging:function(){var e=this;e._cacheEditableState(),e._isVirtualIncellEditable()&&(e._shouldClearEditableState=!1,e.closeCell(),e._shouldClearEditableState=!0)},_isVirtualEditable:function(){return this._isVirtualIncellEditable()||this._isVirtualInlineEditable()||this._isVirtualPopupEditable()},_isVirtualInlineEditable:function(){return this.virtualScrollable&&this._editMode()===lt},_isVirtualIncellEditable:function(){return this.virtualScrollable&&this._editMode()===ot},_isVirtualPopupEditable:function(){return this.virtualScrollable&&"popup"===this._editMode()},_hasVirtualColumns:function(){return!!(this.virtualScroll||{}).columns},_scrollVirtualWrapper:function(){var e=this,t=e.virtualScrollable;(e._isVirtualInlineEditable()||e._isVirtualIncellEditable())&&(t._isScrolledToBottom()?t._scrollWrapperToBottom():t._isScrolledToTop()&&t._scrollWrapperToTop())},_scrollVirtualWrapperOnColumnResize:function(){var e=this.virtualScrollable;e&&e._scrollWrapperOnColumnResize()},_restoreEditableState:function(){var t,r,o=this,l=o._editableState||{},n=l.model,a=o.dataSource,i=o._isVirtualInlineEditable(),s=o._isVirtualIncellEditable(),d=o._hasVirtualColumns();(i||s||d)&&n&&a._getByUid(n.uid,a.view())&&(o._editMode()===lt?(o._shouldClearEditableState=!1,o.editRow(n),d||o._focusEditable()):o._editMode()===ot&&(t=o.tbody.children(Qt("uid",n.uid)),(r=e(t).children(Qt(tt,l.field)))[0]&&(o._shouldClearEditableState=!1,o.editCell(r),d||o._focusEditable()))),o._shouldClearEditableState=!0},_focusEditable:function(){var e=this,t=(e._editableState||{}).field,r=e._editContainer;r&&r.length&&!y(r[0],s())&&e._canFocusEditable()&&(e._isVirtualInlineEditable()||e._hasVirtualColumns()?r.find(Qt(et,t)).find(pe).eq(0).trigger("focus"):(e._isVirtualIncellEditable()||e._hasVirtualColumns())&&r.find(pe).eq(0).trigger("focus"))},_canFocusEditable:function(){var e=this;return(e._isVirtualIncellEditable()||e._isVirtualInlineEditable()||e._hasVirtualColumns())&&(wo((e.virtualScrollable||{}).wrapper,e._editContainer)||wo(e.content,e._editContainer))},_cacheEditableState:function(){var t,r,l,n=this,a=n._editContainer,i=a?n._modelForContainer(a):null,d=n._isVirtualInlineEditable(),c=n._isVirtualIncellEditable(),u=n._hasVirtualColumns();(d||c||u)&&i&&(n._clearEditableState(),t=e(s()),a&&t[0]&&y(a[0],t[0])&&(t.change(),(r=o.widgetInstance(t,o.ui))&&v(r.value)&&t.is(rt)&&(l=t.val(),t.is("[type='checkbox'")&&(l=t.is(":checked")),r.value(l),r.trigger(Y))),n._editMode()===lt?n._editableState={model:i,field:t.closest("["+o.attr(et)+"]").attr(o.attr(et))}:n._editMode()===ot&&(n._editableState={model:i,field:a.attr(o.attr(tt))}))},_clearSortClasses:function(){var e=this,t=e.content||e.table,r=e.lockedContent;t&&t.find(D).removeClass(Ce),r&&r.find(D).removeClass(Ce)},_clearEditableState:function(){var e=this;(e.virtualScrollable||e.virtualScroll&&e._hasVirtualColumns())&&(e._editableState=null)},_destroyVirtualScrollable:function(){var e=this;e._clearEditableState(),e.virtualScrollable&&e.virtualScrollable.element&&e.virtualScrollable.destroy(),e.virtualScrollable=null},_destroyRowResizing:function(){this.rowResizing&&(this.rowResizing.destroy(),this.rowResizing=null),this.rowResizer&&(this._detachRowResizerEvents(),this.rowResizer.off(Ue+P),this.rowResizer=null,this._clearCachedRowsHeight())},_renderNoRecordsContent:function(){var t=this;if(t.options.noRecords){var r=t.table.parent().children("."+be);r.length&&(t.angular("cleanup",(function(){return{elements:r.get()}})),r.remove()),t.dataSource&&t.dataSource.view().length||(r=e(t.noRecordsTemplate({grid:t})),o.applyStylesFromKendoAttributes(r,["margin","position"]),r.insertAfter(t.table),t.angular("compile",(function(){return{elements:r.get(),data:[{}]}})))}},_setContentWidth:function(t){var r,l=this,n="k-grid-content-expander",a='<div class="'+n+'"></div>',i=l.resizable;l.options.scrollable&&l.wrapper.is(":visible")&&(r=l.table.parent().children("."+n),l._setContentWidthHandler=l._setContentWidth.bind(l),l.dataSource&&l.dataSource.view().length?r[0]&&(r.remove(),i&&i.unbind("resize",l._setContentWidthHandler)):(r[0]||(r=e(a).appendTo(l.table.parent()),i&&i.bind("resize",l._setContentWidthHandler)),l.thead&&(r.width(l.thead.width()),isNaN(parseFloat(t,10))||o.scrollLeft(l.content,t))),l._applyLockedContainersWidth(),l._syncLockedContentHeight(),l.lockedHeader&&0===l.table[0].clientWidth&&(l.table[0].style.width="1px"))},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),r=t.parent(),l=this.wrapper[0].clientWidth,n=this._groups(),a=o.support.scrollbar(),i=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),s=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),d=Er(i),u=Er(s);n>0&&(d+=c(this.lockedHeader.find(".k-group-cell").first())*n),d>=l&&(d=l-3*a),this.lockedHeader.add(this.lockedContent).width(d),r[0].style.width=r.parent().width()-d-2+ut,t.add(this.table).width(u),this.virtualScrollable&&!Ot&&(l-=a),this.content[0].style.width=l-d-1+ut,this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(d),(e=this.footer.find(".k-grid-footer-wrap"))[0].style.width=r[0].clientWidth+ut,e.children().first().width(u))}},_setContentHeight:function(){var e,t,r,l=this,n=l.options,a=l.wrapper.children(".k-grid-header"),i=o.support.scrollbar(),s=(n.scrollable||{}).height;if(n.scrollable&&l.wrapper.is(":visible")){s&&""===l.content[0].style.height&&(l.content[0].style.height=s),e=l.wrapper.innerHeight(),e-=u(a),l.pager&&l.pager.element.is(":visible")&&(e-=u(l.pager.element)),n.groupable&&(e-=u(l.wrapper.children(".k-grouping-header"))),n.toolbar&&(e-=u(l.wrapper.children(".k-grid-toolbar"))),l.footerTemplate&&(e-=u(l.wrapper.children(".k-grid-footer")));((t=l.wrapper)[0].style.height||(r=t.height(),t.height(Qe),r!=t.height()?(t.height(""),1):(t.height(""),0)))&&(e>2*i?(l.lockedContent&&(i=l.table[0].offsetWidth>l.table.parent()[0].clientWidth?i:0,l.lockedContent.height(e-i)),l.content.height(e)):l.content.height(2*i+1))}},_averageRowHeight:function(){var e=this,t=e._items(e.tbody,!0).length,r=e._rowHeight;if(0===t)return r;e._rowHeight||(e._rowHeight=r=u(e.table)/t,e._sum=r,e._measures=1);var o=u(e.table)/t;return r!==o&&(e._measures++,e._sum+=o,e._rowHeight=e._sum/e._measures),r},_dataSource:function(){var e,r=this,o=r.options,l=o.dataSource;l=b(l)?{data:l}:l,p(l)&&(f(l,{table:r.table,fields:r.columns}),e=o.pageable,p(e)&&e.pageSize!==t&&(l.pageSize=e.pageSize)),r.dataSource&&r._refreshHandler?r.dataSource.unbind(Y,r._refreshHandler).unbind(T,r._progressHandler).unbind(H,r._errorHandler).unbind(at,r._sortHandler):(r._refreshHandler=r.refresh.bind(r),r._progressHandler=r._requestStart.bind(r),r._errorHandler=r._error.bind(r),r._sortHandler=r._clearSortClasses.bind(r)),r.dataSource=n.create(l).bind(Y,r._refreshHandler).bind(T,r._progressHandler).bind(H,r._errorHandler).bind(at,r._sortHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var r,n,a,i,s,d,c,u,h,p=this,f=p.tbody,g=t.model,m=p.tbody.find("tr["+o.attr("uid")+"="+g.uid+"]"),b=m.hasClass("k-alt"),k=p._items(f).index(m),_=p.lockedContent;if(_&&(r=p._relatedRow(m)),m.add(r).children(".k-edit-cell").length&&!p.options.rowTemplate)m.add(r).children(":not(.k-group-cell,.k-hierarchy-cell)").each((function(){n=e(this),(a=Kr(p.columns)[p._calculateColumnIndex(n)]).field===t.field&&(n.hasClass("k-edit-cell")?n.addClass("k-dirty-cell"):p._displayCell(n,a,g))}));else if(!m.hasClass("k-grid-edit-row")){d=e().add(m),_&&(i=(b?p.lockedAltRowTemplate:p.lockedRowTemplate)(g),d=d.add(r),r.replaceWith(i)),p.angular("cleanup",(function(){return{elements:d.get()}})),i=(b?p.altRowTemplate:p.rowTemplate)(g),m.replaceWith(i),i=p._items(f).eq(k);var v=[{dataItem:g}];for(_&&(m=m.add(r),r=p._relatedRow(i)[0],po(i[0],r),i=i.add(r),v.push({dataItem:g})),p.angular("compile",(function(){return{elements:i.get(),data:v}})),((s=p.options.selectable)||p._checkBoxSelection)&&m.hasClass(fe)&&p.select(i),u=d.children(":not(.k-group-cell,.k-hierarchy-cell)"),c=i.children(":not(.k-group-cell,.k-hierarchy-cell)"),k=0,h=p.columns.length;k<h;k++)a=p.columns[k],n=c.eq(k),s&&u.eq(k).hasClass(fe)&&n.addClass(fe);p.trigger("itemChange",{item:i,data:g,ns:l})}},_pageable:function(){var t,l=this,n=l.options.pageable,a=l.options.size,i=l.options.navigatable;n&&((t=l.wrapper.children("div.k-grid-pager")).length||(t=e('<div class="k-pager k-grid-pager"/>')),"top"===n.position?t.prependTo(l.wrapper).addClass("k-grid-pager-top"):t.appendTo(l.wrapper),l.pager&&l.pager.destroy(),"object"==typeof n&&n instanceof o.ui.Pager?l.pager=n:l.dataSource._groupPaging?l.pager=new r(t,f({},n,{dataSource:l.dataSource,navigatable:i,size:a})):l.pager=new o.ui.Pager(t,f({},n,{dataSource:l.dataSource,navigatable:i,size:a})),l.pager.bind("pageChange",(function(e){l.trigger("page",{page:e.index})&&e.preventDefault()})),l._togglePagerVisibility())},_footer:function(){var t,r=this,l=r.dataSource.aggregates(),n="",a=r.footerTemplate,i=r.options,s=r.footer||r.wrapper.find(".k-grid-footer");if(a){if(n=e(r._wrapFooter(a(l))),o.applyStylesFromKendoAttributes(n,["display","left","right"]),s.length){var d=n;r.angular("cleanup",(function(){return{elements:s.get()}})),s.replaceWith(d),s=r.footer=d}else s=i.scrollable?r.footer=i.pageable&&"top"!==i.pageable.position?n.insertBefore(r.wrapper.children("div.k-grid-pager")):n.appendTo(r.wrapper):r.footer=n.insertAfter(r.tbody);r.angular("compile",(function(){return{elements:s.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:g(r.columns,(function(e){return{column:e,aggregate:l[e.field]}}))}}))}else s&&!r.footer&&(r.footer=s);if(s.length&&(i.scrollable&&(t=s.attr(Ye,-1).children(".k-grid-footer-wrap"),r.scrollables=e(r.scrollables.filter((function(){return!e(this).is(".k-grid-footer-wrap")})).toArray()).add(t)),r._footerWidth&&s.find("table").css("width",r._footerWidth),t)){var c=o.scrollLeft(r.content);!0!==i.scrollable&&r.virtualScroll&&r.virtualScroll.rows&&(c=o.scrollLeft(r.wrapper.find(".k-virtual-scrollable-wrap"))),o.scrollLeft(t,c)}r.lockedContent&&(r._appendLockedColumnFooter(),r._applyLockedContainersWidth(),r._syncLockedFooterHeight())},_wrapFooter:function(t){var r,l=this,n="",a=o.support.mobileOS?0:o.support.scrollbar();return l.options.scrollable?((r=(n=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table class="k-table k-grid-footer-table"><tfoot class="k-table-tfoot">'+t+"</tfoot></table></div></div>")).find("table")).addClass(o.getValidCssClass("k-table-","size",l.options.size)),l._appendCols(r),n.css(Pt?"padding-left":"padding-right",a),n):'<tfoot class="k-grid-footer k-table-tfoot">'+t+"</tfoot>"},_columnMenu:function(){var e,r,l,n,a,i,s=this,d=Kr(s.columns),c=s.options,u=c.columnMenu,h=m(s.columns,(function(e){return e.columns!==t})).length>0,p=m(s.columns,(function(e){return!1!==e.lockable})).length>0,g=m(s.columns,(function(e){return!0===e.stickable})).length>0,b=this._isMobile,k=function(e){s.trigger(j,{field:e.field,container:e.container})},_=function(e){s.trigger(K,{field:e.field,container:e.container})},v=function(){go(s.table,!0)},w=function(e){s.trigger(Le,{column:e.column})},C=function(e){s.trigger(qe,{column:e.column})},y=function(e){s.trigger("sort",{sort:e.sort})?e.preventDefault():(s._clearEditableState(),s.dataSource.options.endless&&s._resetEndless())},S=function(e){s.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(s._clearEditableState(),s.dataSource.options.endless&&s._resetEndless())},T=c.$angular;if(u){"boolean"==typeof u&&(u={}),s._setColumnsMediaVisibility(d);for(var H=0,R=(i=Qr(s.thead)).length;H<R;H++){r=d[H];var I=i.eq(H);!1===r.columnMenu||r.command||!r.field&&!I.attr("data-"+o.ns+"field")||((e=I.data("kendoColumnMenu"))&&e.destroy(),n=!1!==r.sortable&&!1!==u.sortable&&!1!==c.sortable&&f({},c.sortable,{compare:(r.sortable||{}).compare}),a=!(!c.filterable||!1===r.filterable||!1===u.filterable)&&f({pane:s.pane},c.filterable,r.filterable),r.filterable&&r.filterable.dataSource&&(a.forceUnique=!1,a.checkSource=r.filterable.dataSource),a&&(a.format=r.format),l={dataSource:s.dataSource,values:r.values,columns:u.columns,sortable:n,filterable:a,messages:u.messages,owner:s,closeCallback:v,init:k,open:_,stick:w,unstick:C,pane:s.pane,sort:y,filtering:S,filter:b?":not(.k-column-active)":"",autoSize:u.autoSize,hasLockableColumns:Pr(d).length>0&&p&&!h,hasStickableColumns:g&&!h,encodeTitles:s.options.encodeTitles,componentType:u.componentType,appendTo:x+Nt,reorderable:!0===c.reorderable||c.reorderable&&c.reorderable.columns,groupable:s.options.groupable&&!1!==r.groupable},T&&(l.$angular=T),I.kendoColumnMenu(l))}}},_headerCells:function(){return e(this.thead).find("th").filter((function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")}))},_hasFilterMenu:function(){var e=this.options.filterable;return(!e||typeof e.mode!=Xe||-1!=e.mode.indexOf("menu"))&&e},_filterable:function(){var e,t,r,l=this,n=Kr(l.columns),a=function(e){l.trigger(N,{field:e.field,container:e.container})},i=function(){go(l.table,!0)},s=function(e){l.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(l._clearEditableState(),l.dataSource.options.endless&&l._resetEndless())},d=function(e){l.trigger(U,{field:e.field,container:e.container})},c=l._hasFilterMenu();if(c&&!l.options.columnMenu)for(var u=0,h=(t=Qr(l.thead)).length;u<h;u++)if(r=t.eq(u),!1!==n[u].filterable&&!n[u].command&&(n[u].field||r.attr("data-"+o.ns+"field"))){(e=r.data("kendoFilterMenu"))&&e.destroy(),(e=r.data("kendoFilterMultiCheck"))&&e.destroy();var p=n[u].filterable,g=f({},c,p,{dataSource:l.dataSource,values:n[u].values,format:n[u].format,closeCallback:i,title:n[u].title||n[u].field,init:a,open:d,pane:l.pane,change:s,appendTo:x+Nt});p&&p.messages&&(g.messages=f(!0,{},c.messages,p.messages)),p&&p.dataSource&&(g.forceUnique=!1,g.checkSource=p.dataSource),p&&p.multi?r.kendoFilterMultiCheck(g):r.kendoFilterMenu(g)}},_filterRow:function(){var t=this;if(t._hasFilterRow()){var r,l=t.options.$angular,a=Kr(t.columns),i=t.options.filterable,s=t.thead.find(".k-filter-row"),d=function(e){t.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(t._clearEditableState(),t.dataSource.options.endless&&t._resetEndless())};this._updateHeader(t._groups());for(var c=0;c<a.length;c++){var u,h=a[c],p=t.options.filterable.operators,g=!1,m=e("<td class='k-table-td' title='"+t.options.messages.filterCellTitle+"'/>"),b=h.field;if(h.hidden&&m.hide(),s.append(m),b&&!1!==h.filterable){var k=h.filterable&&h.filterable.cell||{};(u=t.options.dataSource)instanceof n&&(u=t.options.dataSource.options);var _=f(!0,{},i.messages);if(h.filterable&&f(!0,_,h.filterable.messages),!1===k.enabled){m.html("&nbsp;");continue}k.dataSource&&(u=k.dataSource,g=!0),h.filterable&&h.filterable.operators&&(p=h.filterable.operators),r={column:h,dataSource:t.dataSource,suggestDataSource:u,customDataSource:g,field:b,messages:_,size:t.options.size,values:h.values,template:k.template,delay:k.delay,inputWidth:k.inputWidth,suggestionOperator:k.suggestionOperator,minLength:k.minLength,dataTextField:k.dataTextField,operator:k.operator,operators:p,showOperators:k.showOperators,change:d},l&&(r.$angular=l),e("<span/>").attr(o.attr("field"),b).appendTo(m).kendoFilterCell(r)}else m.html("&nbsp;");m.data("column",h)}this._filterFocusable().attr(Ye,-1)}},_sortable:function(){var e,t,r,l=this,n=Kr(l.columns),a=l.options.sortable,i=function(e){l.trigger("sort",{sort:e.sort})?e.preventDefault():l._clearEditableState()};if(a){for(var s=Qr(l.thead),d=0,c=s.length;d<c;d++)!1!==(e=n[d]).sortable&&!e.command&&e.field&&((t=(r=s.eq(d)).data("kendoColumnSorter"))&&t.destroy(),r.attr("data-"+o.ns+"field",e.field).kendoColumnSorter(f({},a,e.sortable,{dataSource:l.dataSource,aria:!0,filter:":not(.k-column-active)",change:i})));s=null}},_columns:function(t){var r,l,n,a=this,i=a.table,s=i.find("col"),d=a.element.find("thead tr"),c=a.options.dataSource;if(t=t.length?t:g(i.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),(function(t,r){var l=(t=e(t)).attr(o.attr("sortable")),n=t.attr(o.attr("filterable")),a=t.attr(o.attr("type")),i=t.attr(o.attr("groupable")),d=t.attr(o.attr("field")),c=t.attr(o.attr("title")),u=t.attr(o.attr("column-menu")),h=t.attr(o.attr("menu"));return d||(d=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:d,type:a,title:c,sortable:"false"!==l,filterable:"false"!==n,groupable:"false"!==i,menu:"false"!==h,columnMenu:"false"!==u,template:t.attr(o.attr("template")),width:s.eq(r).css($e)}})),r=!(a.table.find("tbody tr").length>0&&(!c||!c.transport)),a.options.scrollable){var u=t;if(l=Pr(t),t=Vr(t),l.length>0&&0===t.length)throw new Error("There should be at least one non locked column");!function(e,t){var r,o,l=0,n=e.find("th:not(.k-group-cell)");for(r=0,o=t.length;r<o;r++)t[r].locked&&(n.eq(r).insertBefore(n.eq(l)),n=e.find("th:not(.k-group-cell)"),l++)}(a.element.find("tr:has(th)").first(),u),t=l.concat(t)}if(d.length&&t.length&&a._updateColumnIDs(t,d.first()),a.columns=or(t,r),e.grep(Kr(a.columns),(function(e){return e.selectable})).length&&(a._selectedIds={},a._checkBoxSelection=!0,a.wrapper.on(Oe+P,"tbody > tr "+me,a._checkboxClick.bind(a)),a.wrapper.on(Oe+P,"thead > tr "+me,a._headerCheckboxClick.bind(a))),(n=e.grep(Kr(a.columns),(function(e){return e.draggable}))).length){a._hasDragHandleColumn=!0;for(var h=0;h<n.length;h++)n[h].headerAttributes=e.extend({"aria-label":a.options.messages.dragHandleLabel},n[h].headerAttributes)}a._foreignKeyBindings(a.columns)},_foreignKeyBindings:function(e){for(var t,r=e.length,o=0;o<r;o++)(t=e[o]).dataSource&&this._fetchForeignKeyValues(t)},_fetchForeignKeyValues:function(t){var r=this,o=e.Deferred();r._hasBoundForeignKey=!0,t.dataSource=n.create(t.dataSource),r._foreignKeyPromises||(r._foreignKeyPromises=[]),r._foreignKeyPromises.push(o),t.dataSource.fetch().then((function(){var e=t.dataSource.data();t.values=e.map((function(e){return{value:e[t.dataValueField],text:e[t.dataTextField]}})),o.resolve()}))},_updateColumnIDs:function(e,t){if(e.length){for(var r,o=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),l=0;l<e.length;l++)(r=o.eq(l).attr(ct))&&(e[l].headerAttributes=f(e[l].headerAttributes,{id:r}));this._updateColumnIDs(jr(e),t.next())}},_headerCheckboxClick:function(t){var r=this,o=e(t.target),l=o.prop("checked");r._belongsToGrid(o)&&(r.trigger(Q,{target:o,originalEvent:t})?t.preventDefault():(l?r.select(r.items()):r.clearSelection(),r.trigger(Y)))},_checkboxClick:function(t){var r=this,o=e(t.target).closest(ht),l=!o.hasClass(fe);r._belongsToGrid(o)&&(r.trigger(Q,{target:o,originalEvent:t})?t.preventDefault():(l?r.select(o):r._deselectCheckRows(o),r.trigger(Y)))},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(t,r,l,n){var a,i,s,d,c,u,h,p=this,g=f({},o.Template,p.options.templateSettings),m=(g.paramName,r.length),b={storage:{},count:0},k=p._hasDetails(),_=p._groups(),v=o.attr("field");return t||(h=function(t){var h=m?" "+o.attr("uid")+'="'+o.getter("uid")(t)+'"':"",g='<tr class="'+(l?"k-alt k-table-row k-table-alt-row ":"k-table-row ")+'k-master-row"'+h+">";for(_>0&&!n&&(g+=Yt(_)),k&&(g+='<td class="k-hierarchy-cell k-table-td" aria-expanded="false">'+o.ui.icon(e('<a href="#" '+ft+'="'+dt+'" tabindex="-1"></a>'),{icon:"caret-alt-"+(Pt?"left":"right")})+"</td>"),a=0;a<m;a++){if(s=r[a],i=s.template,typeof i,d=s.field,u={},p._editMode()===ot&&d){s.attributes=s.attributes||{},p.virtualScroll&&(s.attributes[v]=d);var w=p._dirtyCellTemplate(d)(t);s.attributes.class=s.attributes.class||"",s.attributes.class.indexOf(w)<0&&(s.attributes.class+=w)}s.colSpan&&s.colSpan>0&&(s.attributes||{})[o.attr("style-display")]?s.attributes=eo(s.attributes):!s.colSpan&&s.hidden&&(s.attributes=Zr(s.attributes)),s.command&&(s.attributes=s.attributes||{},void 0!==(c=s.attributes.class)?c.indexOf("k-command-cell")<0&&(s.attributes.class+=" k-command-cell"):s.attributes.class="k-command-cell"),s.draggable&&(s.attributes=s.attributes||{},void 0!==s.attributes.class?s.attributes.class+=" k-drag-cell k-touch-action-none":s.attributes.class="k-drag-cell k-touch-action-none",void 0===s.attributes[ft]&&(s.attributes[ft]=p.options.messages.dragHandleLabel),void 0!==s.attributes.style?s.attributes.style+=" cursor: move;":s.attributes.style="cursor: move;"),s._attributesFunction&&(u=s._attributesFunction(t));var C=Jt(f({},s.attributes,u)),y="";s.colSpan&&(s.colSpan>1&&(y+=" "+o.attr("virtual")),y+=' colSpan="'+s.colSpan+'"'),g+=yr("<td"+C+y+">"),g+=s.selectable?o.template(Mt)({size:o.getValidCssClass("k-checkbox-","size",p.options.size)}):p._cellTmpl(s,b)(t),g+="</td>"}return g+="</tr>"}),t=o.template(t||h,g),b.count>0?t.bind(b.storage):t},_dirtyCellTemplate:function(e){return function(t){return e&&t&&t.dirty&&t.dirtyFields&&("["===e.charAt(0)?o.getter(e)(t.dirtyFields):t.dirtyFields[e])?" k-dirty-cell":""}},_headerCellText:function(e){var t=f({},o.Template,this.options.templateSettings),r=e.headerTemplate,l=typeof r,n=e.title&&(this.options.encodeTitles?xo(e.title):e.title)||e.field||"";return l===Je?n=o.template(r,t)({}):l===Xe&&(n=r),n},_cellTmpl:function(e,t){var r,l,n=this,a=f({},o.Template,n.options.templateSettings),i=e.template,s=e.field,d=e.format,c=typeof i,u=e.values;return e.command?b(e.command)?function(t){var o="";for(r=0,l=e.command.length;r<l;r++)e.command[r].visible?o+=e.command[r].visible(t)?n._createButton(e.command[r]):"":o+=n._createButton(e.command[r]);return o}:function(){return n._createButton(e.command)}:e.selectable?Mt:e.draggable?Lt:function(r){var l=n._dirtyIndicatorTemplate(s)(r);if(c===Je)t.storage["tmpl"+t.count]=i,l+=i(r),t.count++;else if(c===Xe)l+=o.template(i,a)(r);else if(u&&u.length&&p(u[0])&&"value"in u[0]&&s){var h=ro(u)[a.useWithBlock?o.getter(s)(r):s];l+=w(null!=h?h:"")}else{var f="";s&&(f=null==(s=o.getter(s)(r))?"":s),d&&(f=o.format(d.replace(It,"$1"),f)),l+=e.encoded?w(f):f}return l}},_dirtyIndicatorTemplate:function(e){return function(t){return e&&t&&t.dirty&&t.dirtyFields&&("["===e.charAt(0)?o.getter(e)(t.dirtyFields):t.dirtyFields[e])?'<span class="k-dirty"></span>':""}},_virtualCols:function(t){var r,l=this,n=e.map(t,(function(e){return e.hidden?0:parseInt(e.width,10)})),a=l.virtualScrollable?o.scrollLeft(l.content.find(">.k-virtual-scrollable-wrap")):o.scrollLeft(l.content),i=c(l.content),s=zr(t),d=[],u=0,h=0,p=0,f=0,g=0;for(f=0;f<t.length;f++){if(r=f<n.length-1?n[f+1]:0,!(g+n[f]+2*r<a)){u=1+p;break}n[f]&&p++,g+=n[f]}p=0,g=0;for(var m=t.length-1;m>=0;m--){if(!(g+3*n[m]<s-i-a)){h=1+p;for(var b=f;b<=m;b++)t[b].locked||(d.push(t[b]),t[b].colSpan&&delete t[b].colSpan);d[0].colSpan=u,d[d.length-1].colSpan=h;break}n[m]&&p++,g+=n[m]}return d[0].hidden&&d[0].colSpan--,l.virtualCols=d,d},_templates:function(){var t=this,r=t.options,o=t.dataSource,l=o.group(),n=t.footer||t.wrapper.find(".k-grid-footer"),a=o.aggregate(),i=Kr(t.columns),s=Kr(Pr(t.columns)),d=r.scrollable?Kr(Vr(t.columns)):i,c=(t.virtualScroll||{}).columns?t._virtualCols(d):d,u=m(pr(s),(function(e,t){return e.groupHeaderColumnTemplate&&0!==t})),h=m(pr(c),(function(e){return e.groupHeaderColumnTemplate}));if(r.scrollable&&s.length){if(r.rowTemplate||r.altRowTemplate)throw new Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(r.rowTemplate,c,!1,!0),t.altRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,c,!0,!0),t.lockedRowTemplate=t._tmpl(r.rowTemplate,s),t.lockedAltRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,s,!0)}else t.rowTemplate=t._tmpl(r.rowTemplate,c),t.altRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,c,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(r.detailTemplate||function(){return""})),(t._group&&!C(a)||!C(a)&&!n.length||m(i,(function(e){return e.footerTemplate})).length)&&(t.footerTemplate=t._footerTmpl(i,a,"footerTemplate","k-footer-template k-table-row")),l&&m(i,(function(e){return e.groupFooterTemplate})).length&&(a=e.map(l,(function(e){return e.aggregates})),t.groupFooterTemplate=t._footerTmpl(c,a,"groupFooterTemplate","k-group-footer k-table-row",s.length),r.scrollable&&s.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(s,a,"groupFooterTemplate","k-group-footer k-table-row"))),l&&(u.length||h.length)?(a=e.map(l,(function(e){return e.aggregates})),t.groupHeaderColumnTemplate=t._groupHeaderTmpl(pr(c),a,"groupHeaderColumnTemplate","k-table-group-row k-grouping-row k-table-row",s.length,h),r.scrollable&&s.length&&(t.lockedGroupHeaderColumnTemplate=t._groupHeaderTmpl(pr(s),a,"groupHeaderColumnTemplate","k-table-group-row k-grouping-row k-table-row",0,u))):(t.groupHeaderColumnTemplate=null,t.lockedGroupHeaderColumnTemplate=null),t.options.noRecords&&(t.noRecordsTemplate=t._noRecordsTmpl())},_noRecordsTmpl:function(){var t,r,l,n,a='<div class="{0}">{1}</div>',i=this.options.scrollable&&!this.wrapper[0].style.height?" "+o.attr("style-margin")+'="0 auto" '+o.attr("style-position")+'="static"':"",s={storage:{},count:0},d=e.extend({},o.Template,this.options.templateSettings);d.paramName;if("function"===(r=typeof(t=this.options.noRecords.template?this.options.noRecords.template:o.format('<div class="k-grid-norecords-template"{1}>{0}</div>',this.options.messages.noRecords,i)))){var c=s.storage["tmpl"+s.count]=t;s.count++,n=function(e){return o.format(a,be,c(e))}}else"string"===r&&(n=this.options.noRecords.template?o.format(a,be,t):function(){return o.format(a,be,t)});return l=o.template(n,d),s.count>0&&(l=l.bind(s.storage)),l},_footerTmpl:function(e,t,r,l,n){var a,i,s,d,c,u=this,h=f({},o.Template,u.options.templateSettings),p=h.paramName,g={},m=0,b={},k=u._groups(),_=u.dataSource._emptyAggregates(t),v=o.template((function(t){var v='<tr class="'+l+'">';for(k>0&&!n&&(v+=Yt(k)),u._hasDetails()&&(v+='<td class="k-hierarchy-cell k-table-td">&nbsp;</td>'),a=0,i=e.length;a<i;a++)c=e[a],s=c[r],d=typeof s,v+=yr("<td"+Jt(c.footerAttributes)+">"),s?(d!==Je&&(b=_[c.field]?f({},h,{paramName:p+"['"+c.field+"']"}):{},s=o.template(s,b)),g["tmpl"+m]=s,v+=s(t),m++):v+="&nbsp;",v+="</td>";return v+="</tr>"}),h);return m>0?v.bind(g):v},_groupHeaderTmpl:function(e,t,r,l,n,a){var i,s,d,c,u,h,g=this,m=f({},o.Template,g.options.templateSettings),b=m.paramName,_="",v={},w=0,C={},y=g.dataSource._emptyAggregates(t),S=a.length?k(a[0],e):-1;if(!(S<0)){return _=o.template((function(t){var k='<tr class="'+l+'">';if(!n)for(var _=0;_<t.groupCells;_++)k+='<td class="k-table-td k-group-cell">&nbsp;</td>';if(g._hasDetails()&&(k+='<td class="k-table-td k-hierarchy-cell">&nbsp;</td>'),S<1&&a.length<=1&&!n)return k+=n?"":Co(e.length)(t);for(S<1?(S=n?0:1,k+=n?"":Co(S)(t)):k+=n?function(e){return'<td class="k-table-td" colspan="'+e+'"><p class="k-reset">&nbsp;</p></td>'+new Array(e).join("<td hidden group-header-spanned-hidden></td>")}(S):Co(S)(t),i=S,s=e.length;i<s;i++){if(u=e[i],d=u[r],c=typeof d,u.sticky){var x="";if((h=u.groupHeaderColumnTemplateClass||"")||(h=u.groupHeaderColumnTemplateClass="group-header-column-template-"+o.guid()),p(u.stickyStyle))x=(u.stickyStyle.left?o.attr("style-left")+'="'+u.stickyStyle.left+'"':"")+" "+(u.stickyStyle.right?o.attr("style-right")+'="'+u.stickyStyle.right+'"':"");k+='<td class="k-table-td '+xe+" "+h+'" '+x+">"}else k+="<td class='k-table-td'>";d?(c!==Je&&(C=y[u.field]?f({},m,{paramName:b+"['"+u.field+"']"}):{},d=o.template(d,C)),v["tmpl"+w]=d,k+=v["tmpl"+w](t),w++):k+="&nbsp;",k+="</td>"}return k+="</tr>"}),m),w>0?_.bind(v):_}},_detailTmpl:function(e){var t=this,r=f({},o.Template,t.options.templateSettings),l=(r.paramName,{}),n=0,a=t._groups(),i=pr(Kr(t.columns)).length,s=typeof e,d=o.template((function(t){var d='<tr role="row" class="k-detail-row k-table-row">';return a>0&&(d+=Yt(a)),d+='<td role="gridcell" class="k-hierarchy-cell k-table-td"></td><td role="gridcell" class="k-table-td k-detail-cell"'+(i?' colspan="'+i+'"':"")+">",s===Je?(l["tmpl"+n]=e,d+=e(t),n++):d+=o.template(e,r)(t),d+="</td></tr>"}),r);return n>0?d.bind(l):d},_hasDetails:function(){return null!==this.options.detailTemplate||(this._events[G]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,r=t&&typeof t.mode==Xe&&-1!=t.mode.indexOf(xt),o=this.columns,l=e.grep(o,(function(e){return!1===e.filterable}));return o.length&&l.length==o.length&&(r=!1),r},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&Pr(t.columns).length)throw new Error("Having both detail template and locked columns is not supported");t.table.on(Oe+P,".k-hierarchy-cell "+L+", .k-hierarchy-cell "+F,(function(r){var o=e(this);return t._toggleDetails(o),r.preventDefault(),!1}))},_toggleDetails:function(t,r){var l,n,a,i=this,s=t.closest("td.k-hierarchy-cell"),d=t.is(L),c=t.closest("tr.k-master-row"),u=c.attr(_t),h=i.detailTemplate,p=i._hasDetails(),f=d?st:dt,g=!!d;d?o.ui.icon(t,{icon:"caret-alt-down"}):o.ui.icon(t,{icon:"caret-alt-"+(Pt?"left":"right")}),t.attr(ft,f),s.attr(vt,g),(l=c.next()).hasClass("k-hidden")&&l.removeClass("k-hidden"),p&&!l.hasClass("k-detail-row")&&(n=i.dataItem(c),l=e(h(n)).addClass(c.hasClass("k-alt")?"k-alt":"").insertAfter(c),(u||0===u)&&l.attr(_t,Number(u)+1),i.angular("compile",(function(){return{elements:l.get(),data:[{dataItem:n}]}})),i.trigger(G,{masterRow:c,detailRow:l,data:n,detailCell:l.find(".k-detail-cell")})),i.trigger(d?te:re,{masterRow:c,detailRow:l}),r?(a=d,e(l)[0].style.display=a?"":St):l.toggle(d)},dataItem:function(t){if(!(t=e(t)[0]))return null;var r,o,l=this.tbody.children(),n=/k-grouping-row|k-detail-row|k-group-footer/,a=t.sectionRowIndex;for(o=a,r=0;r<a;r++)n.test(l[r].className)&&o--;return this._data[o]},expandRow:function(t,r){var o=e(t).find("> td "+L);o.length&&this._toggleDetails(o,r)},collapseRow:function(t,r){var o=e(t).find("> td "+F);o.length&&this._toggleDetails(o,r)},_createHeaderCells:function(r,l){var n,a,i,s,d,c,u,h=this,p="",f=h.options.columnMenu,g=h.options.sortable,m=h._hasFilterMenu(),b=h.options.messages,_=Kr(h.columns),v=h.dataSource.group();for(n=0,s=r.length;n<s;n++){a=r[n].column||r[n],i=h._headerCellText(a),d=a.title,c="";var w=k(a,_),C="";a.selectable?(C+="<th scope='col'"+Jt(a.headerAttributes),l&&!r[n].colSpan&&(C+=" rowspan='"+l+"'"),w>-1&&(C+=o.attr("index")+"='"+w+"'"),C+=">"+(i=a.headerTemplate?i:o.template(Ft)({size:o.getValidCssClass("k-checkbox-","size",h.options.size)}))+"</th>"):a.draggable?(C+="<th class='k-header k-drag-cell' scope='col'"+Jt(a.headerAttributes),l&&!r[n].colSpan&&(C+=" rowspan='"+l+"'"),w>-1&&(C+=o.attr("index")+"='"+w+"'"),C+=">"+(i=a.headerTemplate?i:"")+"</th>"):a.command?(C+="<th scope='col'"+Jt(a.headerAttributes),l&&!r[n].colSpan&&(C+=" rowspan='"+l+"'"),w>-1&&(C+=o.attr("index")+"='"+w+"'"),C+=">"+i+"</th>"):(a.field&&(c=o.attr("field")+"='"+a.field+"' "),C+="<th scope='col' "+c,f&&a.field&&!1!==a.menu?C+=" aria-haspopup='menu'":m&&!1!==a.filterable&&!a.command&&(C+=" aria-haspopup='dialog'"),l&&!r[n].colSpan&&(C+=" rowspan='"+l+"'"),r[n].colSpan>1?(C+='colspan="'+(r[n].colSpan-Ir(a.columns))+'" ',C+=o.attr("colspan")+"='"+r[n].colSpan+"'"):1===r[n].colSpan&&(C+=o.attr("colspan")+"='"+r[n].colSpan+"'"),d&&(d=d&&(h.options.encodeTitles?xo(d,!0):d),C+=o.attr("title")+'="'+d+'" '),a.groupable!==t&&(C+=o.attr("groupable")+"='"+a.groupable+"' "),u=a,!h.options.groupable||!u.groupable&&u.groupable!==t||a.headerAttributes&&a.headerAttributes.title||(C+="title='",C+=mo(v,a.field)?b.ungroupHeader:b.groupHeader,C+="' "),a.aggregates&&a.aggregates.length&&(C+=o.attr("aggregates")+"='"+a.aggregates+"'"),w>-1&&(C+=o.attr("index")+"='"+w+"'"),C+=Jt(a.headerAttributes),g&&(i=o.template(qt)({text:i})),C+=">"+i+"</th>"),p+=e(C).addClass("k-table-th")[0].outerHTML}return p},_appendLockedColumnContent:function(){var t,r,l,n,a,i=this.columns,s=this.table.find("colgroup"),d=s.find(D),c=e(),u=0,h=0;for(t=0,r=i.length;t<r;t++)if(i[t].locked)if(hr(i[t])){for(n=1,i[t].columns&&(n=Kr(i[t].columns).length-Ir(i[t].columns)),n=n||1,a=0;a<n;a++)c=c.add(d.eq(t+h+a-u));h+=n-1}else u++;l=e('<div class="k-grid-content-locked"><table class="k-grid-table k-table"><colgroup></colgroup><tbody class="k-table-tbody"></tbody></table></div>'),s.detach(),l.find("colgroup").append(c),s.insertBefore(this.table.find("tbody")),this.lockedContent=l.insertBefore(this.content),this.lockedTable=l.children("table"),this.lockedTable.addClass(o.getValidCssClass("k-table-","size",this.options.size))},_appendLockedColumnFooter:function(){var t,r,l=this,n=l.footer,a=n.find(".k-footer-template>td"),i=n.find(".k-grid-footer-wrap>table>colgroup>col"),s=e('<div class="k-grid-footer-locked"><table class="k-grid-footer-table k-table"><colgroup></colgroup><tfoot class="k-table-tfoot"><tr class="k-footer-template k-table-row"></tr></tfoot></table></div>'),d=l._groups(),c=e(),u=e();for(s.find("table").addClass(o.getValidCssClass("k-table-","size",this.options.size)),c=c.add(a.filter(".k-group-cell")),t=0,r=Kr(Pr(l.columns)).length;t<r;t++)c=c.add(a.eq(t+d));for(u=u.add(i.filter(".k-group-col")),t=0,r=pr(Kr(Br(l.columns))).length;t<r;t++)u=u.add(i.eq(t+d));c.appendTo(s.find(ht)),u.appendTo(s.find("colgroup")),l.lockedFooter=s.prependTo(n)},_appendLockedColumnHeader:function(t){var r,l,n,a,i,s,d,c,u,h=this,p=this.columns,f=[],g=0,m=e(),b=h._hasFilterRow(),k=0,_=e(),v=0,w=e();a=h.thead.prev().find(D),d=h.thead.find(ht).first().find(".k-header:not(.k-group-cell,.k-hierarchy-cell)"),c=h.thead.find(".k-filter-row").find("td:not(.k-group-cell,.k-hierarchy-cell)");var C=0;for(r=0,n=p.length;r<n;r++){if(p[r].locked){if(u=d.eq(r),v=Kr(p[r].columns||[]).length,hr(p[r])){var y=null;p[r].columns&&(y=v-Ir(p[r].columns)),y=y||1;for(var S=0;S<y;S++)m=m.add(a.eq(r+C+S-g));C+=y-1}Dr([p[r]],Jr(u),f,0,0),v=v||1;for(var x=0;x<v;x++)_=_.add(c.eq(k+x));k+=v}p[r].columns&&(g+=Ir(p[r].columns)),hr(p[r])||g++}if(f.length){for(l='<div class="k-grid-header-locked"><table class="k-grid-header-table k-table"><colgroup></colgroup><thead class="k-table-thead">',l+=new Array(f.length+1).join("<tr class='k-table-row'></tr>"),(s=e(l+=(b?'<tr class="k-filter-row k-table-row"></tr>':"")+"</thead></table></div>")).find(".k-grid-header-locked").css("width","1px"),s.find("table").addClass(o.getValidCssClass("k-table-","size",h.options.size)),(a=s.find("colgroup")).append(h.thead.prev().find("col.k-group-col").add(m)),i=s.find("thead tr:not(.k-filter-row)"),r=0,n=f.length;r<n;r++)w=mr(f[r]),i.eq(r).append(h.thead.find(ht).eq(r).find(".k-group-cell").add(w));var T=Ar(this.thead);return f.length<T&&function(e,t){for(var r,o=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),l=0;l<o.length;l++)(r=o[l].rowSpan)>1&&(o[l].rowSpan=r-t||1)}(s,T-f.length),s.find(".k-filter-row").append(h.thead.find(".k-filter-row .k-group-cell").add(_)),this.lockedHeader=s.prependTo(t),this.thead.find(".k-group-cell").remove(),!0}return!1},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);o.destroy(e),e.off(P).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,r,l,n=this,a=n.columns,i=n._hasDetails()&&a.length,s=n._hasFilterRow(),d="",c=n.table.find(">thead"),u=n.element.find("thead").first().length>0,h=n.options.messages.expandCollapseColumnHeader;if(c.length||(c=e("<thead class='k-table-thead' role='rowgroup'/>").insertBefore(n.tbody)),n.lockedHeader&&n.thead?((r=n.thead.find("tr:has(th):not(.k-filter-row)").html("")).remove(),r=e(),n._removeLockedContainers()):r=u?n.element.find("thead").first().find("tr:has(th):not(.k-filter-row)"):n.element.find("tr:has(th)").first(),r.length){for(t=0;t<a.length;t++){var p=k(a[t],Kr(a)),f=Qr(r.parent()).filter("th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(p);a[t].hidden&&p>=0&&(f[0].style.display=St)}n._updateHeadersAttr(jr(a))}else if(!(r=c.children().first()).length){var m=[{rowSpan:1,cells:[],index:0}];for(n._prepareColumns(m,a),t=0;t<m.length;t++)d+="<tr class='k-table-row'>",i&&(d+='<th class="k-hierarchy-cell k-table-th" scope="col">'+h+"</th>"),d+=n._createHeaderCells(m[t].cells,m[t].rowSpan),d+="</tr>";r=e(d),o.applyStylesFromKendoAttributes(r,["display","left","right"])}if(s){var b=e("<tr/>");b.addClass("k-filter-row k-table-row"),(i||r.find(".k-hierarchy-cell").length)&&b.prepend('<td class="k-table-td k-hierarchy-cell">&nbsp;</td>');var _=(n.thead||c).find(".k-filter-row");_.length&&(o.destroy(_),_.remove()),c.append(b)}r.children().length?i&&!r.find(".k-hierarchy-cell")[0]&&r.prepend('<th class="k-hierarchy-cell k-table-th" scope="col">'+(h||"&nbsp;")+"</th>"):(d="",i&&(d+='<th class="k-hierarchy-cell k-table-th" scope="col">&nbsp;</th>'),d+=n._createHeaderCells(a),r.html(d)),r.find("th").addClass("k-header"),n.options.scrollable||c.addClass("k-grid-header"),r.find("script").remove().end().prependTo(c),n.thead&&n._destroyColumnAttachments(),this.angular("cleanup",(function(){return{elements:c.find("th"+E).get()}})),this.angular("compile",(function(){return{elements:c.find(M).get(),data:g(a,(function(e){return{column:e}}))}})),n.thead=c,n._sortable(),n._filterable(),n._filterRow(),n._scrollable(),n._columnMenu();var v=this.options.scrollable&&Pr(this.columns).length;v&&(l=n._appendLockedColumnHeader(n.thead.closest(".k-grid-header")),n._appendLockedColumnContent(),n.lockedContent.on("DOMMouseScroll"+P+" mousewheel"+P,n._wheelScroll.bind(n)),o.support.touch&&(n._lockedContentUserEvents=new o.UserEvents(n.lockedContent,{move:function(e){n.content.scrollTop(n.content.scrollTop()+-e.y.delta),e.preventDefault()}})),n._updateLockedCols()),n._updateCols(),n._updateColumnCellIndex(),n._updateFirstColumnClass(),n._resizable(),n._draggable(),n._reorderable(),n._updateHeader(n._groups()),n._updateStickyColumns(),v&&(l&&n._syncLockedHeaderHeight(),n._applyLockedContainersWidth()),n.groupable&&n._attachGroupable()},_retrieveFirstColumn:function(t,r){var o=e();if(r.length&&t[0]){for(var l=t[0];l.columns&&l.columns.length;)l=l.columns[0],r=r.filter(":not(:first)");o=o.add(r)}return o},_updateFirstColumnClass:function(){var t=this,r=t.columns||[];if(!(t._hasDetails()&&r.length)&&!t._groups()){var o=t.thead.find(">tr:not(.k-filter-row):not(:first)");r=Vr(r);var l=t._retrieveFirstColumn(r,o);t._isLocked()&&(o=t.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),r=Pr(t.columns),l=l.add(t._retrieveFirstColumn(r,o))),l.each((function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))}},_prepareColumns:function(e,t,r,o){for(var l=o||e[e.length-1],n=e[l.index+1],a=0,i=0;i<t.length;i++){var s={column:t[i],colSpan:0};l.cells.push(s),t[i].columns&&t[i].columns.length&&(n||(n={rowSpan:0,cells:[],index:e.length},e.push(n)),s.colSpan=t[i].columns.length,this._prepareColumns(e,t[i].columns,s,n),a+=s.colSpan-1,l.rowSpan=e.length-l.index)}r&&(r.colSpan+=a)},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.content;this.virtualScroll&&this.virtualScroll.rows&&(t=this.virtualScrollable.verticalScrollbar);var r=t.scrollTop(),l=o.wheelDeltaY(e);l&&(t[0].scrollHeight>t[0].clientHeight&&(t[0].scrollTop<t[0].scrollHeight-t[0].clientHeight&&l<0||t[0].scrollTop>0&&l>0)&&e.preventDefault(),t.scrollTop(r+-l))}},_isLocked:function(){return null!=this.lockedHeader},_updateHeaderCols:function(){var e=this.thead.parent().add(this.table);this._isLocked()?to(e,Gr(Wr(this.columns)),this._hasDetails(),0):to(e,Gr(pr(this.columns)),this._hasDetails(),0)},_updateColumnSorters:function(){var e,t,r=this,o=Qr(r.thead),l=Kr(r.columns);if(r.options.sortable)for(var n=0,a=o.length;n<a;n++)!1!==(e=l[n]).sortable&&!e.command&&e.field&&(t=o.eq(n).data("kendoColumnSorter"))&&t.refresh()},_updateHeadersAttr:function(e){if(e.length){for(var t=0;t<e.length;t++){if(e[t].headerAttributes)this.element.find("[id='"+e[t].headerAttributes.id+"']").attr("headers",e[t].headerAttributes.headers)}this._updateHeadersAttr(jr(e))}},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&to(e=e||this.lockedHeader.find("table").add(this.lockedTable),Gr(Br(this.columns)),this._hasDetails(),this._groups())},_appendCols:function(e,t){t?to(e,Gr(Wr(this.columns)),this._hasDetails(),0):to(e,Gr(pr(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,r,l=this;for(t in e=e.toJSON(),r=!(l.table.find("tbody tr").length>0&&(!l.dataSource||!l.dataSource.transport)),e)l.columns.push({field:t,encoded:r,headerAttributes:{id:o.guid()}});l._thead(),l._templates()}},_setRowCachedHeight:function(t,r){var o,l=this._cachedRowsHeight[r];return l&&((o=e(t))[0].style.height=l+"px",t=o.prop("outerHTML")),t},_rowsHtml:function(e,t){var r,o,l,n=this,a="",i=t.rowTemplate,s=t.altRowTemplate,d=n._cachedRowsHeight;for(r=0,o=e.length;r<o;r++)n._skipRerenderItemsCount>0?n._skipRerenderItemsCount--:(l=r%2?s(e[r]):i(e[r]),d&&(l=n._setRowCachedHeight(l,e[r].uid)),a+=l),n._data.push(e[r]);return a},_groupData:function(e,t,r){var o=this._groupAggregatesDefaultObject||{},l=e.items,n=f({},o,e.aggregates),a=f({},{field:e.field,value:e.value,items:l,aggregates:n},e.aggregates[r?r.field:e.field]),i={};if(!t)for(var s in n)i[s]=f({},n[s],{group:{field:e.field,value:e.value,items:l}});return f({},i,a)},_removeGroupIfEmpty:function(e){for(var t,r,o=this.dataSource._group.length,l=0;l<o;l++)t=+(e=e.prev()).attr("data-group-item-count"),r=+e.attr("data-sub-group-count"),1!=t&&1!=r||e.hide()},_groupRowHtml:function(e,t,r,l,n,a,i,s){var d,c,u,h=this,p="",g=null!=h.lockedContent,b=e.field,_=m(Kr(h.columns),(function(e){return e.field==b}))[0]||{},v=pr(h.columns)[0],w=v?v.groupHeaderColumnTemplate:null,C=_.groupHeaderTemplate?_.groupHeaderTemplate:w,y=(_.title&&(h.options.encodeTitles?xo(_.title,!0):_.title)||b)+": "+oo(e.value,_.format,_.values,_.encoded),S=e.currentItems||e.items,x=h._groups(),T=n.groupFooterTemplate,H=n.groupHeaderColumnTemplate,R=h.dataSource._isGroupPaged(),I=!R||h.dataSource._groupsState[e.uid];if(h.options.editable&&e.items&&e.items[0]&&e.items[0].isNew&&e.items[0].isNew()&&(I=!0),(n.groupFooterTemplate||n.groupHeaderColumnTemplate||_.groupHeaderTemplate)&&(u=h._groupData(e,!1,!(_.groupHeaderTemplate||!pr(h.columns)[0].groupHeaderColumnTemplate)&&pr(h.columns)[0])),C&&!a&&(y=typeof C===Je?C(u):o.template(C)(u)),h._skipRerenderItemsCount?l(t,r,y,I,e.uid,R):e.excludeHeader?e.excludeHeader=!!g&&!s:p+=function(e,t,r,o,l,n,a,i,s,d){var c;c=e?e(f({},l,{groupCells:n,colspan:o,text:a})):t(r,n,a,i,s.uid,d);return c}(H,l,t,x-r,u,r,y,I,e,R),I)if(e.hasSubgroups)for(d=0,c=S.length;d<c;d++)p+=h._groupRowHtml(S[d],a?t:t-1,r+1,l,n,a,i&&d===S.length-1,s);else p+=h._rowsHtml(S,n);return T&&(i?k(e.value,h._skippedGroups)||h._skippedGroups.push(e.value):(h._skippedGroups.length&&h._skippedGroups[0]===e.value&&h._skippedGroups.shift(),h._skipRerenderItemsCount||(p+=T(u)))),p},collapseGroup:function(t){var r,l,n,a,i,s=this,d=t,c=this.options.groupable.showFooter?0:1,u=e();if(r=(t=e(t)).find(".k-group-cell").length,this.dataSource._isGroupPaged()){var h,p=t.attr("data-group-uid"),f=s.dataSource._getGroupByUid(p),g=s.dataSource._calculateGroupsTotal([f],!0);return s.dataSource._groupsState[p]=!1,h=s.dataSource._calculateGroupsTotal([f],!0),s.dataSource._serverGroupsTotal-=g-h,s._progress(!0),void s.dataSource.range(s.dataSource._currentRangeStart,s.dataSource.take(),(function(){s._progress(!1)}),"collapseGroup")}this._isLocked()&&(t.closest(pt).hasClass("k-grid-content-locked")?u=this.tbody.children(ht).eq(t.index()).nextAll(ht):(u=t.nextAll(ht),t=this.lockedTable.find(">tbody>tr").eq(t.index()))),t.find(F).length&&o.ui.icon(t.find(F),{icon:"caret-alt-"+(Pt?"left":"right")}),t.find("td[aria-expanded='true']").first().attr(vt,!1).find("a").attr(ft,dt);var m=[];for(n=0,a=(t=t.nextAll(ht)).length;n<a&&(l=(i=t.eq(n)).find(".k-group-cell").length,i.hasClass(Ie)?c++:i.hasClass("k-group-footer")&&c--,!(l<=r||i.hasClass("k-group-footer")&&c<0));n++)u.length&&m.push(u[n]),m.push(i[0]);e(m).hide(),this.options.scrollable.endless&&this.content&&(clearTimeout(s._collapseGroupsTimeOut),s._collapseGroupsTimeOut=setTimeout((function(){s.content.scroll(),s._groupToCollapse=d})))},expandGroup:function(t){t=e(t);var r,l,n,a,i,s=this,d=s.options.groupable.showFooter,c=e(),u=[],h=1;if(r=t.find(".k-group-cell").length,this.dataSource._isGroupPaged()){var p,f=t.attr("data-group-uid"),g=s.dataSource._getGroupByUid(f),m=s.dataSource._calculateGroupsTotal([g],!0);return s.dataSource._groupsState[f]=!0,g.items&&g.items.length&&(p=s.dataSource._calculateGroupsTotal([g],!0),s.dataSource._serverGroupsTotal+=p-m),s._progress(!0),void s.dataSource.range(s.dataSource._currentRangeStart,s.dataSource.take(),(function(){s._progress(!1)}),"expandGroup")}for(this._isLocked()&&(t.closest(pt).hasClass("k-grid-content-locked")?c=this.tbody.children(ht).eq(t.index()).nextAll(ht):(c=t.nextAll(ht),t=this.lockedTable.find(">tbody>tr").eq(t.index()))),t.find(L).length&&o.ui.icon(t.find(L),{icon:"caret-alt-down"}),t.find("td[aria-expanded='false']").first().attr(vt,!0).find("a").attr(ft,st),a=0,i=(t=t.nextAll(ht)).length;a<i&&!((n=(l=t.eq(a)).find(".k-group-cell").length)<=r);a++)if(n!=r+1||l.hasClass("k-detail-row")||(l.show(),c.eq(a).show(),l.hasClass(Ie)&&l.find(".k-icon,.k-svg-icon").is(F)&&s.expandGroup(l),l.hasClass("k-master-row")&&l.find(".k-icon,.k-svg-icon").is(F)&&(l.next().show(),c.eq(a+1).show())),l.hasClass(Ie)&&(d&&u.push(l.is(":visible")),h++),l.hasClass("k-group-footer")){if(d){var b=u.pop();l.toggle(b),c.eq(a).toggle(b)}1==h?(l.show(),c.eq(a).show()):h--}(0===r&&s.options.scrollable.endless&&this._isLocked()||!s.options.scrollable.endless&&this._isLocked())&&s._syncLockedContentHeight()},_updateHeader:function(t){var r=this,o=r._isLocked()?r.lockedHeader.find("thead"):r.thead,l=o.find("tr.k-filter-row").find("td.k-group-cell").length,n=o.find(ht).first().find("th.k-group-cell").length,a=o.children("tr:not(:first)").filter((function(){return!e(this).children(":visible").length}));t>n?(e(new Array(t-n+1).join('<th class="k-group-cell k-header k-table-th" scope="col">'+w(r.options.messages.expandCollapseColumnHeader)+"</th>")).prependTo(o.children("tr:not(.k-filter-row)")),r.element.is(":visible")&&a.find("th.k-group-cell").hide()):t<n&&o.find(ht).each((function(){e(this).find(".k-group-cell").eq(t).remove(),e(this).find(".k-group-cell").slice(t).remove()})),t>l&&e(new Array(t-l+1).join('<td class="k-group-cell k-table-td">&nbsp;</td>')).prependTo(o.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,r=this;r._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",r.wrapper).add(r.thead.parent()).add(r.table),r._footerWidth=uo(t.eq(0)),t.width(r._footerWidth),(t=e(">.k-grid-footer>.k-grid-footer-locked>table",r.wrapper).add(r.lockedHeader.find(">table")).add(r.lockedTable)).width(uo(t.eq(0))))},hideColumn:function(t){var r,o,l,n,a,i,s,d,u=this,h=0,f=u.footer||u.wrapper.find(".k-grid-footer"),g=u.virtualScroll||{},b=u.columns,_=u.lockedHeader?Qr(u.lockedHeader.find(">table>thead")).filter(ur).length:0,v=m(Kr(u.columns),(function(e){return e.groupHeaderColumnTemplate}));if((t="number"==typeof t?b[t]:p(t)?m(Rr(b),(function(e){return e===t}))[0]:m(Rr(b),(function(e){return e.field===t}))[0])&&hr(t)){var w=u._columnVisibilitySetter(t);if(t.columns&&t.columns.length){for(a=xr(t,b),w(t,!1),lo(tr(e(">table>thead",u.lockedHeader),u.thead,">tr:eq("+a.row+")>th"),a.cell,!1),o=0;o<t.columns.length;o++)this.hideColumn(t.columns[o]);return u._ariaAddHiddenColIndex(),void u.trigger(J,{column:t})}d=k(t,pr(Kr(b))),w(t,!1),u._setParentsVisibility(t,!1),u._templates(),u._updateCols(),u._updateLockedCols();var C=u.thead;if(i=d,u.lockedHeader&&_>d?C=u.lockedHeader.find(">table>thead"):i-=_,Qr(C).filter(ur).eq(i)[0].style.display=St,lo(tr(e(">table>thead",u.lockedHeader),u.thead,">tr.k-filter-row>td"),d,!1),f[0]&&(u._updateCols(f.find(">.k-grid-footer-wrap>table")),u._updateLockedCols(f.find(">.k-grid-footer-locked>table")),lo(f.find(".k-footer-template>td"),d,!1)),g.columns&&!t.locked)return u._updateContentWidth(),void u.trigger(J,{column:t});if(u.lockedTable&&_>d?no(u.lockedTable.find(">tbody>tr"),d):no(u.tbody.children(),d-_),u.lockedTable)u._updateTablesWidth(),u._applyLockedContainersWidth(),u._syncLockedContentHeight(),u._syncLockedHeaderHeight(),u._syncLockedFooterHeight();else{for(o=0,s=(l=u.thead.prev().find("col")).length;o<s;o+=1)if(n=l[o].style.width,l[o].className.indexOf("k-hierarchy-col")>-1)h+=c(l[o]);else if(l[o].className.indexOf("k-group-col")>-1)h+=c(l[o]);else{if(!n||-1!=n.indexOf("%")){h=0;break}h+=parseInt(n,10)}r=u.wrapper.find(">.k-grid-header table").first().add(u.wrapper.find(">.k-grid-footer table").first()).add(u.table),u._footerWidth=null,h&&(r.each((function(){this.style.width=h+ut})),u._footerWidth=h,u._setContentWidth())}u._updateFirstColumnClass(),u._updateStickyColumns(),v.length>0&&u._renderGroupRows(),u._ariaAddHiddenColIndex(),u.trigger(J,{column:t})}},_setParentsVisibility:function(t,r){var l,n,a,i,s,d=this.columns,c=[],u=this._columnVisibilitySetter(t),h=r?function(e){return pr(e.columns).length&&e.hidden}:function(e){return!pr(e.columns).length&&!e.hidden};if(nr(t,d,c)&&c.length)for(l=c.length-1;l>=0;l--)a=Cr(n=c[l],d),i=tr(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+a.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(a.cell),h(n)&&(u(n,r),i[0].style.display=r?"":St),i.filter("["+o.attr("colspan")+"]").length&&(s=parseInt(i.attr(o.attr("colspan")),10),i[0].colSpan=s-Ir(n.columns)||1)},_updateContentWidth:function(){var e=this;e.table.add(e.thead.parent()).css({width:zr(Gr(Wr(e.columns)))}),e.refresh()},showColumn:function(t){var r,o,l,n,a,i,s,d,u,h,f,g=this,b=g.columns,_=g.virtualScroll||{},v=g.footer||g.wrapper.find(".k-grid-footer"),w=g.lockedHeader?Qr(g.lockedHeader.find(">table>thead")).length:0,C=m(Kr(g.columns),(function(e){return e.groupHeaderColumnTemplate}));if("number"==typeof t?(u=t,t=b[t]):p(t)?e.each(Rr(b),(function(e,r){if(r===t)return t=r,u=e,!1})):e.each(Rr(b),(function(e,r){if(r.field===t)return t=r,u=e,!1})),t&&!hr(t)){var y=g._columnVisibilitySetter(t);if(t.columns&&t.columns.length){for(i=Cr(t,b),h=Rr(g.options.columns)[u],y(t,!0),lo(tr(e(">table>thead",g.lockedHeader),g.thead,">tr:eq("+i.row+")>th"),i.cell,!0),r=0;r<t.columns.length;r++)h.columns[r].hidden||this.showColumn(t.columns[r]);return g._ariaRemoveHiddenColIndex(),void g.trigger(X,{column:t})}f=k(t,Kr(b)),y(t,!0),g._setParentsVisibility(t,!0),g._templates(),g._updateCols(),g._updateLockedCols();var S=g.thead;if(a=f,g.lockedHeader&&w>f?S=g.lockedHeader.find(">table>thead"):a-=w,Qr(S).eq(a)[0].style.display="",lo(tr(e(">table>thead",g.lockedHeader),g.thead,">tr.k-filter-row>td"),f,!0),v[0]&&(g._updateCols(v.find(">.k-grid-footer-wrap>table")),g._updateLockedCols(v.find(">.k-grid-footer-locked>table")),lo(v.find(".k-footer-template>td"),f,!0)),_.columns&&!t.locked)return g._updateContentWidth(),void g.trigger(X,{column:t});if(g.lockedTable&&w>f?so(g.lockedTable.find(">tbody>tr"),f):so(g.tbody.children(),f-w),g.lockedTable)g._updateTablesWidth(),g._applyLockedContainersWidth(),g._syncLockedContentHeight(),g._syncLockedHeaderHeight();else if(l=g.wrapper.find(">.k-grid-header table").first().add(g.wrapper.find(">.k-grid-footer table").first()).add(g.table),t.width){for(n=0,r=0,o=(d=g.thead.prev().find("col")).length;r<o;r+=1)if(s=d[r].style.width,d[r].className.indexOf("k-hierarchy-col")>-1)n+=c(d[r]);else if(d[r].className.indexOf("k-group-col")>-1)n+=c(d[r]);else{if(s.indexOf("%")>-1){n=0;break}n+=parseInt(s,10)}g._footerWidth=null,n&&(l.each((function(){this.style.width=n+ut})),g._footerWidth=n,g._setContentWidth())}else l.width("");g._updateFirstColumnClass(),g._updateStickyColumns(),C.length>0&&g._renderGroupRows(),g._ariaRemoveHiddenColIndex(),g.trigger(X,{column:t})}},_columnVisibilitySetter:function(e){return gr((e||{}).media)?ar:sr},_buildSkeleton:function(){var e,t=this.virtualCols?this.virtualCols:Gr(this.columns),r=this.dataSource.pageSize()||this.dataSource.total(),o="",l=this._groups(),n=t.length+l;this._hasDetails()&&n++,this._hasVirtualColumns()&&(e=parseInt(this.content.find(ht).first().find("td").first().attr("colspan"),10));for(var a=0;a<r;a++){o+="<tr class='k-table-row'>";for(var i=0;i<n;i++)o+=e&&!i?"<td colspan='"+e+"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>":"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>";o+="</tr>"}return o},_progress:function(e){var t,r=this.element,l=this.options.scrollable&&this.options.scrollable.endless,n=this.options.loaderType;this.options.scrollable&&this.options.scrollable.virtual?r=this.content:this._editContainer&&"popup"===this._editMode()?r=this._editContainer:this.lockedContent||l?r=this.wrapper:this.element.is("table")?r=this.element.parent():this.content&&this.content.length&&(r=this.content),"skeleton"==n?e?(t=this._buildSkeleton(),r.find("tbody").empty().append(t)):r.find(".k-skeleton").closest("tbody").empty():l&&e?o.ui.progress(r,e,{height:this.content.height(),top:this.content.parent()[0].offsetTop,opacity:!0}):o.ui.progress(r,e)},_resize:function(e,t){this._syncLockedContentHeight(),this._syncLockedHeaderHeight(),this.content&&(this._setContentWidth(),this._setContentHeight()),this.lockedTable&&this._syncLockedScroll(),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar()),this.pager&&this.pager.element&&this.pager.resize(t),this._anyStickyColumns()&&this._updateStickyColumns(!1)},_isActiveInTable:function(){var t=s();return!!t&&(this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t)))},refresh:function(t){var r,l,n,a=this,i=a.dataSource.view(),s=a.options.navigatable,d=a.virtualScroll||{},c=e(a.current()),u=!1,h=a._groups(),p=h+Gr(pr(a.columns)).length;t&&"itemchange"===t.action&&(a.editable||a.options.scrollable.endless)&&("popup"!=this._editMode()||"popup"===this._editMode()&&!a._editableIsClosing)||(a._shouldMapHights&&(a._mapCachedRowsHeight("get","uid"),a._shouldMapHights=!1),d.columns&&a._templates(),t&&"remove"===t.action&&a.editable&&a.editable.options.model&&k(a.editable.options.model,t.items)>-1&&a.editable.options.model.unbind(Y,a._modelChangeHandler),t=t||{},a.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(t.action===ie&&a._isVirtualEditable()&&(a._destroyEditable(),a._clearEditableState()),a._angularItems("cleanup"),a._endlessFetchInProgress||(s&&(a._isActiveInTable()||a._editContainer&&a._editContainer.data("kendoWindow"))&&(r=(u=c.is("th"))?c.parent().children(":not(.k-group-cell)").index(c[0]):Math.max(a.cellIndex(c),0)),a._destroyEditable()),a.options.scrollable&&a.options.scrollable.endless&&!a._pdfInitialized?(clearTimeout(a._progressTimeOut),a._progressTimeOut=setTimeout((function(){a._endlessFetchInProgress||a._progress(!1)}),250)):a._progress(!1),a._hideResizeHandle(),a._data=[],a.columns.length||(a._autoColumns(a._firstDataItem(i[0],h)),p=h+a.columns.length),a._group=h>0||a._group,a._group&&(a._templates(),a._updateCols(),a._updateLockedCols(),a._virtualColScroll||a._updateHeader(h),a._group=h>0,a._groupRows=ao(i)),a.content&&(l=o.scrollLeft(a.content)),n=a._skipRerenderItemsCount,a._renderContent(i,p,h),a.options.scrollable&&a.options.scrollable.endless&&this.lockedContent&&(a._skipRerenderItemsCount=n),a._renderLockedContent(i,p,h),a._virtualColScroll||(a._footer(),a._renderNoRecordsContent(),a._togglePagerVisibility(),a._setContentHeight(),a._setContentWidth(a.content&&l)),a.lockedTable&&(d.rows?a.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):a.touchScroller?a.touchScroller.movable.trigger("change"):(a.wrapper.one("scroll",(function(e){e.stopPropagation()})),a.content.trigger("scroll"))),a._endlessFetchInProgress||a._rowDropping||a._restoreCurrent(r,u),a.touchScroller&&a.touchScroller.contentResized(),a.selectable&&a.selectable.resetTouchEvents(),a._muteAngularRebind((function(){a._angularItems("compile")})),a._checkBoxSelection&&a._toggleHeaderCheckState(!1),a.options.persistSelection&&(a.selectable&&!o.ui.Selectable.parseOptions(a.options.selectable).cell||a._checkBoxSelection)&&(a.items().length||a.dataSource._isGroupPaged())&&a._restoreSelection(),a.options.persistSelection||(a._selectedIds={}),a._hasReorderableRows()&&(a._draggableRows(),a._reorderableRows()),a._aria(),a.trigger(ee)))},_restoreCurrent:function(r,o){if(!(r===t||r<0)){if(this._removeCurrent(),o)this._setCurrent(this.thead.find("th:not(.k-group-cell)").eq(r));else{var l=0,n=this.virtualScroll||{};this._rowVirtualIndex?l=n.rows?this.virtualScrollable.position(this._rowVirtualIndex):this._rowVirtualIndex:r=0;var a,i=e();this.lockedTable&&(i=this.lockedTable.find(">tbody>tr").eq(l)),i=i.add(this.tbody.children().eq(l)),this._hasVirtualColumns()&&(a=parseInt(i.find("td").first().attr("colspan"),10),r=this._virtualCellIndex-(a>1?a-1:0));var s=i.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(r);if(!s.length||r<0)return;this._hasVirtualColumns()?this._setCurrent(s,!0,!0):this._setCurrent(s)}this._current&&go(this.table,!0)}},_restoreSelection:function(){var e,t=this,r=t.items(),o=v(t.dataSource.options.schema.model)?t.dataSource.options.schema.model.fn.idField:t.dataSource.options.schema.model.id;e=m(r,(function(e){var r=t.dataItem(e)[o];if(t._selectedIds[r])return e})),t.select(e)},_angularItems:function(e){o.ui.DataBoundWidget.fn._angularItems.call(this,e),"cleanup"!==e||this.dataSource&&this.dataSource.options.endless||this._cleanupDetailItems(),this._angularGroupItems(e),this._angularGroupFooterItems(e)},_cleanupDetailItems:function(){var e=this;e._hasDetails()&&(e.angular("cleanup",(function(){return{elements:e.tbody.children(".k-detail-row")}})),e.tbody.find(".k-detail-cell").empty())},_angularGroupItems:function(t){var r=this,o=r.tbody;r.lockedContent&&(o=r.lockedTable.find("tbody")),r._group&&r.angular(t,(function(){return{elements:o.children(x+Ie),data:e.map(ao(r.dataSource.view()),(function(e){return{dataItem:e}}))}}))},_angularGroupFooterItems:function(t){var r=this,o=r.tbody;r.lockedContent&&(o=r.element),r._group&&r.groupFooterTemplate&&r.angular(t,(function(){return{elements:o.find(".k-group-footer"),data:e.map(io(r.dataSource.view()),(function(e){return{dataItem:e}}))}}))},_renderContent:function(e,t,r){var l,n,a,i,s,d=this,c="",u=null!=d.lockedContent,h=d.options.scrollable,p={rowTemplate:d.rowTemplate,altRowTemplate:d.altRowTemplate,groupFooterTemplate:d.groupFooterTemplate,groupHeaderColumnTemplate:d.groupHeaderColumnTemplate};if(h&&h.endless&&!d.dataSource.options.endless&&(d._skipRerenderItemsCount=0,d.content&&(d.content[0].scrollTop=0)),a=d._skipRerenderItemsCount>0,t=u?t-Gr(Br(d.columns)).length:t,r>0)for(t=u?t-r:t,d.detailTemplate&&t++,d.groupFooterTemplate&&(d._groupAggregatesDefaultObject=d.dataSource.aggregates()),d.options.scrollable.endless&&(s=d.dataSource.flatView().length),l=0,n=e.length;l<n;l++)d._skippedGroups||(d._skippedGroups=[]),i=s&&l===e.length-1&&s!==d.dataSource.total(),c+=d._groupRowHtml(e[l],t,0,u?So:yo,p,u,i,!1);else c+=d._rowsHtml(e,p);a?(d.tbody.append(c),o.applyStylesFromKendoAttributes(d.tbody,["display","left","right"]),clearTimeout(d._endlessFetchTimeOut),d._endlessFetchTimeOut=setTimeout((function(){d._groupToCollapse&&(d.collapseGroup(d._groupToCollapse),d._groupToCollapse=null)})),d._endlessFetchInProgress=null):d.tbody=Xr(d.tbody,d.table,c,this.options.$angular,this.options.size)},_renderGroupRows:function(){var t,r,l,n,a,i,s,d,c,u,h,p,g,b,k,_,v,w=this,C=w._groupRows,y=w.wrapper.find(x+Ie),S=w._groups(),T=null!=w.lockedContent;y.each((function(y,x){b=e(x),u=b.closest("table").parent(),h=u.is(".k-grid-content-locked"),r=Gr(pr(h?Pr(w.columns):Vr(w.columns))),k=b.find(".k-group-cell").length,T?(t=h?yo:So,l=h?r.length+S-k:r.length):(t=yo,l=r.length+S-k),n=y>=C.length?C[y-C.length]:C[y],a=n.field,i=m(Kr(w.columns),(function(e){return e.field==a}))[0]||{},v=!(i.groupHeaderTemplate||!pr(w.columns)[0].groupHeaderColumnTemplate)&&pr(w.columns)[0],s=i.groupHeaderTemplate?i.groupHeaderTemplate:pr(w.columns)[0].groupHeaderColumnTemplate,d=(i.title&&(w.options.encodeTitles?xo(i.title,!0):i.title)||a)+": "+oo(n.value,i.format,i.values,i.encoded),c=w._groupData(n,!1,v),_=h?w.lockedGroupHeaderColumnTemplate:w.groupHeaderColumnTemplate,s&&(d=typeof s===Je?s(c):o.template(s)(c)),p=b.prev().length?b.prev():b.parent(),g=e(_?_(f({},c,{groupCells:k,colspan:S-k,text:d})):t(l,k,d,null,null,null,Pt)),o.applyStylesFromKendoAttributes(g,["display","left","right"]),p.is("tbody")?p.prepend(g):p.after(g),b.remove()}))},_renderLockedContent:function(e,t,r){var o,l,n,a,i="",s=null,d={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate,groupHeaderColumnTemplate:this.lockedGroupHeaderColumnTemplate};if(this.lockedContent){var c=this.lockedTable;if(s=this._skipRerenderItemsCount>0,r>0)for(t-=pr(Kr(Vr(this.columns))).length,this.options.scrollable.endless&&(a=this.dataSource.flatView().length),o=0,l=e.length;o<l;o++)n=a&&o===e.length-1&&a!==this.dataSource.total(),i+=this._groupRowHtml(e[o],t,0,yo,d,!1,n,!0);else i=this._rowsHtml(e,d);s?c.children("tbody").append(i):Xr(c.children("tbody"),c,i,this.options.$angular,this.options.size),this._syncLockedContentHeight()}},_togglePagerVisibility:function(){!1===this.options.pageable.alwaysVisible&&this.wrapper.find(".k-grid-pager").toggle(this.dataSource.total()>=this.dataSource.pageSize())},_adjustRowsHeight:function(e,t){var r,o=e[0].rows,l=o.length,n=t[0].rows,a=e.add(t),i=a.length,s=[];for(r=0;r<l&&n[r];r++)o[r].style.height&&(o[r].style.height=n[r].style.height="");for(r=0;r<l&&n[r];r++){var d=o[r].offsetHeight,c=n[r].offsetHeight,u=0;d>c?u=d:d<c&&(u=c),s.push(u)}for(r=0;r<i;r++)a[r].style.display=St;for(r=0;r<l;r++)s[r]&&(o[r].style.height=n[r].style.height=s[r]+1+ut);for(r=0;r<i;r++)a[r].style.display=""}});function po(e,t){var r,o=e.offsetHeight,l=t.offsetHeight;o>l?r=o+ut:o<l&&(r=l+ut),r&&(e.style.height=t.style.height=r)}function fo(e,t){var r,o,l;if(typeof e===Xe&&e===t)return e;if(p(e)&&e.name===t)return e;if(b(e))for(r=0,o=e.length;r<o;r++)if(typeof(l=e[r])===Xe&&l===t||l.name===t)return l;return null}function go(t,r){if(t&&0!==t.length)if(!0===r){t=e(t);var l=o.scrollLeft(t.parent());o.focusElement(t),o.scrollLeft(t.parent(),l)}else e(t).one("focusin",(function(e){e.preventDefault()})).trigger("focus")}function mo(t,r){return!!e.grep(t,(function(e){return e.field===r})).length}function bo(e,t){return!(!e.field||e.selectable)&&(!(t.editable&&!t.editable(e.field))&&!(e.editable&&!e.editable(t)))}function ko(t){return e(t).is(":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on")}function _o(t){var r=this,l=e(t.currentTarget),n=l.is("th"),a=this.table.add(this.lockedTable),i=this.thead.parent().add(e(">table",this.lockedHeader)),s=ko(t.target),d=e(t.target).is(".k-checkbox"),c=e(t.target),u=l.closest("table")[0];s&&l.find(o.roleSelector("filtercell")).length?this._setCurrent(l):u!==a[0]&&u!==a[1]&&u!==i[0]&&u!==i[1]||c.is(L+","+F)||(this.options.navigatable&&this._setCurrent(l,!1,d),!n&&s||setTimeout((function(){var t=e(o._activeElement());(!t.hasClass("k-widget")&&!t.hasClass("k-dropdownlist")||t.hasClass("k-grid-pager"))&&(!r.table||!t.is(me)&&ko(o._activeElement())&&e.contains(u,o._activeElement())||go(r.table[0],!0))})),n&&!o.support.touch&&t.preventDefault())}function vo(e,t){if(!t)return 0;var r=0;return o.support.browser.webkit&&(r=e.width()),r}function wo(t,r){var o,l;return!!t&&!!((r=e(r))[0]&&y(t[0],r[0])&&(o=r.offset().top-t.offset().top,l=r.outerHeight()/2,(o>=0||S.abs(o)<=l)&&S.floor(o+l)<=t.height()))}function Co(t){return function(r){var l=r.colspan,n=r.text;return'<td class="k-table-td" colspan="'+(l+t)+'"><p class="k-reset">'+o.ui.icon(e('<a href="\\#" tabindex="-1" '+ft+'="'+st+'"></a>'),{icon:"caret-alt-down"})+n+"</p></td>"+new Array(l+t).join("<td hidden group-header-spanned-hidden></td>")}}function yo(t,r,l,n,a,i,s){return"<tr "+(i?'data-group-uid="'+a+'"':"")+'class="k-table-group-row k-grouping-row k-table-row">'+Yt(r)+'<td class="k-table-td" colspan="'+t+'" aria-expanded="'+!!n+'"><p class="k-reset">'+o.ui.icon(e('<a href="#" tabindex="-1" '+ft+'="'+(n?st:dt)+'"></a>'),{icon:n?"caret-alt-down":"caret-alt-"+(s?"left":"right")})+l+"</p></td>"+new Array(t).join("<td hidden group-header-spanned-hidden></td>")+"</tr>"}function So(e){return'<tr class="k-table-group-row k-grouping-row k-table-row"><td class="k-table-td" colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td>'+new Array(e).join("<td hidden group-header-spanned-hidden></td>")+"</tr>"}function xo(e,t){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,(function(e){return t?"\\"+e:"&quot;"})).replace(/'/g,"&#39;")}function To(e,t){return this.dataSource.indexOf(this.dataSource.getByUid(e.uid))-this.dataSource.indexOf(this.dataSource.getByUid(t.uid))}function Ho(e){return!(!1===e.exportable||e.exportable&&!1===e.exportable.excel)}o.ExcelMixin&&o.ExcelMixin.extend(ho.prototype),o.PDFMixin&&(o.PDFMixin.extend(ho.prototype),ho.prototype._drawPDF_autoPageBreak=function(r){var l,n=this,a=new e.Deferred,i=n.dataSource,s=n.options.pdf.allPages,d=n.wrapper.find("> table > tbody, .k-grid-content > table > tbody").first(),c=e("<div>").css({position:"absolute",left:-1e4,top:-1e4});n.toggleUnexportableColumns(n.columns),(l=n.wrapper.clone().css({height:Qe,width:Qe}).appendTo(c)).find(".k-grid-content").css({height:Qe,width:Qe,overflow:"visible"}),l.find("> table, .k-grid-content > table, .k-grid-footer table").css({height:Qe,width:"100%",overflow:"visible"}),l.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove(),l.find(".k-grid-header, .k-grid-footer, .k-auto-scrollable").css({paddingRight:0}),this._initPDFProgress(r);var u=l.find("> table > tbody, .k-grid-content > table > tbody").first().empty(),h=i.page();function p(){c.appendTo(document.body);var t=e.extend({},n.options.pdf,{_destructive:!0,progress:function(e){r.notify({page:e.page,pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2,totalPages:e.totalPages})}});o.drawing.drawDOM(l,t).always((function(){c.remove()})).then((function(e){a.resolve(e),n.toggleUnexportableColumns(n.columns,!0)})).fail((function(e){a.reject(e)}))}function f(){var e=i.page(),r=s?i.totalPages():1;u.append(d.children("tr:not(.k-detail-row)")),e<r?i.page(e+1):(i.unbind("change",f),s&&h!==t?(i.one("change",p),i.page(h)):(n.refresh(),p()))}return s?(i.bind("change",f),i.page(1)):f(),a.promise()},ho.prototype.toggleUnexportableColumns=function(e,t){for(var r,o,l,n,a=e.length,i=0;i<a;i++)o=(r=e[i]).exportable,t?r._toggledDuringExport?(r._toggledDuringExport=!1,r.hidden?this.showColumn(r):this.hideColumn(r)):r.columns&&this.toggleUnexportableColumns(r.columns,t):("object"==typeof r.exportable&&(o=r.exportable.pdf),l=!r.hidden&&!1!==o,n=r.hidden&&!0===o,(o=l||n)||r.hidden?o&&r.hidden?(r._toggledDuringExport=!0,this.showColumn(r)):o&&r.columns&&this.toggleUnexportableColumns(r.columns):(r._toggledDuringExport=!0,this.hideColumn(r)))},ho.prototype._drawPDF=function(r){var l=this;if(l.options.pdf.paperSize&&l.options.pdf.paperSize!=Qe)return l._drawPDF_autoPageBreak(r);var n=new e.Deferred,a=l.dataSource,i=l.options.pdf.allPages;this._initPDFProgress(r);var s=new o.drawing.Group,d=a.page();function c(){l.toggleUnexportableColumns(l.columns),l._drawPDFShadow({width:l.wrapper.width()},{avoidLinks:l.options.pdf.avoidLinks}).done((function(e){var o=a.page(),u=i?a.totalPages():1,h={page:e,pageNumber:o,progress:o/u,totalPages:u};l.toggleUnexportableColumns(l.columns,!0),r.notify(h),s.append(h.page),o<u?a.page(o+1):i&&d!==t?(a.unbind("change",c),a.one("change",(function(){n.resolve(s)})),a.page(d)):n.resolve(s)})).fail((function(e){n.reject(e)}))}return i?(a.bind("change",c),a.page(1)):c(),n.promise()},ho.prototype._initPDFProgress=function(t){var r=e("<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>");r.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0})),this._pdfInitialized=!0,this.wrapper.append(r);var l=e("<div class='k-loading-pdf-progress'>").appendTo(r).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");t.progress((function(e){l.value(e.progress)})).always((function(){o.destroy(r),r.remove()}))}),l.plugin(ho),l.plugin($t),f(o.ui.grid,{defaultBodyContextMenu:jt,defaultHeadContextMenu:Ut,defaultGroupsContextMenu:Kt})}(window.kendo.jQuery),kendo}));
//# sourceMappingURL=kendo.grid.min.js.map
