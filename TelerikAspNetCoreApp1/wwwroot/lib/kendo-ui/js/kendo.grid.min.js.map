{"version":3,"file":"kendo.grid.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendogrid","js","this","$","undefined$1","kendo","window","ContextMenu","ui","extend","encode","htmlEncode","ACTION","GridContextMenu","init","element","options","that","fn","call","_overrideTemplates","_extendItems","bind","_onSelect","_onOpen","templates","sprite","ref","icon","spriteCssClass","iconClass","defaultItems","separator","name","create","text","command","rules","edit","destroy","select","items","softRules","copySelection","copySelectionNoHeaders","reorderRow","exportPDF","exportExcel","sortAsc","sortDesc","moveGroupPrevious","moveGroupNext","events","concat","ev","item","data","split","map","val","obj","obj$1","indexOf","key","reduce","acc","v","Object","assign","target","action","this$1$1","menu","sender","elTarget","event","isEmptyObject","closest","length","preventDefault","_toggleSeparatorVisibility","find","attr","each","i","enable","_validateSoftRules","filter","prev","next","hide","isPlainObject","keys","_append","_extendItem","messages","j","forEach","subItem","commands","uid","guid","_readState","_validateRules","tool","state","states","isFunction","append","args","trigger","grid","jQuery","Command","Class","MoveGroupCommand","exec","groupable","method","dir","_change","SortCommand","idx","dataSource","sort","field","_getCellField","multipleMode","sortable","mode","compare","splice","push","AddCommand","addRow","EditCommand","inCellMode","_editMode","editCell","editRow","DeleteCommand","removeRow","CopySelectionCommand","withHeaders","copySelectionToClipboard","SelectRowCommand","selectMode","Selectable","parseOptions","selectable","cell","SelectAllRowsCommand","rows","ClearSelectionCommand","clearSelection","ReorderRowCommand","newIndex","index","reorderRowTo","ExportPDFCommand","saveAsPDF","ExportExcelCommand","selection","exportSelectedToExcel","saveAsExcel","GridCommand","GroupsPager","DataSource","ObservableObject","tbodySupportsInnerHtml","support","tbodyInnerHtml","activeElement","_activeElement","Widget","outerWidth","_outerWidth","outerHeight","_outerHeight","grep","isArray","Array","inArray","prototype","contains","math","Math","DOT","PROGRESS","ERROR","DATA_CELL","DATA_CELL_HIDDENINCLUDED","NAVROW","NAVCELL","ITEMROW","COLGROUP","HEADERCELLS","CARET_ALT_DOWN","CARET_ALT_RIGHT","CARET_ALT_RIGHT_CACHE","NS","EDIT","BEFOREEDIT","SAVE","REMOVE","DETAILINIT","FILTERMENUINIT","COLUMNMENUINIT","FILTERMENUOPEN","COLUMNMENUOPEN","CELLCLOSE","CHANGING","CHANGE","COLUMNHIDE","COLUMNSHOW","SAVECHANGES","DATABOUND","DETAILEXPAND","DETAILCOLLAPSE","ITEM_CHANGE","PAGE","PAGING","SCROLL","SYNC","LOAD_START","LOAD_END","FOCUSED","HOVER","ACTIVE","FOCUSABLE","SELECTED","CHECKBOX","CHECKBOXINPUT","NORECORDSCLASS","LINK_CLASS","ICON_CLASS","SVG_ICON_CLASS","ORDER_CLASS","SORTED_CLASS","HEADER_COLUMN_MENU_CLASS","FILTER_MENU_CLASS","STICKY_CELL_CLASS","STICKY_HEADER_CLASS","STICKY_FOOTER_CLASS","STICKY_HEADER_NO_BORDER_CLASS","GROUPING_ROW","RESIZE","ROWRESIZE","COLUMNRESIZE","COLUMNREORDER","COLUMNLOCK","COLUMNUNLOCK","COLUMNSTICK","COLUMNUNSTICK","ROWREORDER","NAVIGATE","CLICK","MOUSEDOWN","MOUSEUP","MOUSEENTER","MOUSELEAVE","MOUSEMOVE","DUBLECLICK","HEIGHT","WIDTH","AUTO","TABINDEX","FUNCTION","STRING","BOTTOM","CONTAINER_FOR","FIELD","INPUT","INCELL","INLINE","OVERFLOW","SORT","GROUP_SORT","COLLAPSE","EXPAND","ID","PX","TR","DIV","ARIA_LABEL","ARIA_OWNS","ARIA_ROWCOUNT","ARIA_COLCOUNT","ARIA_COLINDEX","ARIA_ROWINDEX","ARIA_EXPANDED","ARIA_CHECKED","ARIA_ACTIVEDESCENDANT","ROLE","NONE","ROW","ROWGROUP","COLUMNHEADER","GRIDCELL","formatRegExp","whitespaceRegExp","nonDataCellsRegExp","RegExp","filterRowRegExp","COMMANDBUTTONTMPL","className","SELECTCOLUMNTMPL","size","SELECTCOLUMNHEADERTMPL","DRAGHANDLECOLUMNTMPL","SORTHEADERTMPL","isRtl","browser","isIE11","msie","version","isMac","test","navigator","userAgent","classNames","defaultBodyContextMenu","defaultHeadContextMenu","defaultGroupsContextMenu","Pager","useRanges","_omitPrefetch","totalPages","ceil","_collapsedTotal","pageSize","groupsTotal","VirtualScrollable","_refreshHandler","refresh","setDataSource","wrap","unbind","virtual","itemHeight","noop","prefetch","maxScrollHeight","wrapper","add","verticalScrollbar","off","clearTimeout","_timeout","_scrollingTimeout","drag","scrollbar","css","width","overflow","content","children","first","parent","on","_wheelScroll","_wrapper","kineticScrollNeeded","touch","UserEvents","allowSelection","start","e","capture","move","scrollTop","y","delta","scrollLeft","x","appendTo","_scroll","ctrlKey","wheelDeltaY","clientHeight","scrollHeight","delayLoading","currentTarget","rowHeight","skip","_rangeStart","height","innerHeight","isScrollingUp","_scrollbarTop","firstItemIndex","max","floor","lastItemOffset","lastItemIndex","_preventScroll","_prevScrollTop","_scrollTop","_scrolling","_fetch","setTimeout","_page","take","scrollToTop","_scrollTo","scrollToBottom","_scrollWrapperToTop","_scrollWrapperToBottom","_scrollWrapperOnColumnResize","initialScrollTop","scrollWidth","clientWidth","_wrapperScrolled","_isScrolledToBottom","_isWrapperScrolledToBottom","_isScrolledToTop","parseInt","itemIndex","rowIndex","position","result","rangeStart","scrollIntoView","row","container","containerHeight","containerScroll","elementOffset","offsetTop","elementHeight","offsetHeight","scrollingUp","currentSkip","fetching","webkitCorrection","webkit","total","_isGroupPaged","min","_fetching","callback","isGroupPaged","_groupRangeExists","inRange","range","repaintScrollbar","shouldScrollWrapper","totalHeight","maxHeight","wrapperElement","wasScrolledToBottom","addScrollBarHeight","offsetWidth","divElements","join","empty","cancel","page","attrEquals","attrName","attrValue","groupCells","count","stringifyAttributes","attributes","defaultCommands","save","themeColor","update","canceledit","excel","pdf","search","cursor","context","value","document","body","reorder","selector","source","dest","before","sourceIndex","eq","elements","lockedContent","attachCustomCommandEvent","commandName","click","replace","normalizeColumns","columns","encoded","locked","parentIds","column","hidden","Function","_attributesFunction","isVisible","addHiddenStyle","footerAttributes","headerAttributes","headers","id","columnParent","parents","columnParents","inserted","setColumnVisibility","visible","setVisibility","show","removeHiddenStyle","setColumnMediaVisibility","setColumnMatchesMedia","_hideByMedia","matchesMedia","columnMatchesMedia","isUndefined","media","isCellVisible","style","display","visibleColumns","columnsWithMedia","minScreenWidth","Error","toJQuery","toArray","findColumnByField","moveCellsBetweenContainers","sources","leafs","destination","groups","sourcesDepth","depth","targetDepth","insertAfter","last","cells","rowSpan","addRowSpanValue","moveCells","updateCellIndex","thead","offset","allColumns","leafColumns","el","hasClass","columnPosition","temp","sourcePosition","columnVisiblePosition","ths","t","cellCounts","decorateCellWithClass","html","classes","match","cssClasses","pop","findReorderTarget","masterColumns","parentColumns","rtl","targetLocked","findParentColumnWithChildren","targetIndex","flatColumnsInDomOrder","flatColumns","lockedColumns","nonLockedColumns","targetParentContainerIndex","hiddenLeafColumnsCount","counter","sumWidths","cols","columnsWidth","colWidth","removeEmptyRows","emptyRowsCount","remove","mapColumnToCellRows","setLeftAndRightStyles","left","right","createColumnAttribute","attribute","property","addColumnAttribute","removeColumnAttribute","removeAttributeProperty","stickyColumns","sticky","visibleNonLockedColumns","visibleLockedColumns","visibleLeafColumns","visibleLeafExportColumns","values","title","childColumns","visibleChildColumns","editField","format","editor","editorOptions","label","leafDataCells","indexAttr","a","b","indexA","indexB","parentColumnsCells","headerRows","level","parentCellsWithChildren","prevCells","prevAll","colSpan","parentCell","getAttribute","childColumnsCells","colSpanAttr","child","appendContent","tbody","table","placeholder","tmp","$html","applyStylesFromKendoAttributes","createElement","innerHTML","addClass","getValidCssClass","firstChild","replaceChild","kendoStyleAttrObject","normalizeCols","hasDetails","colgroup","is","prepend","convertToObject","array","formatGroupValue","columnValues","groupValue","setCellVisibility","pad","hideColumnCells","columnIndex","groupRows","hasSubgroups","groupFooters","aggregates","showColumnCells","updateColspan","toAdd","toRemove","num","tableWidth","Grid","DataBoundWidget","_events","_element","_ariaId","_columns","_foreignKeyPromises","when","apply","then","_continueInit","_dataSource","_stickyColumns","_tbody","_thead","_rowResizing","_groupable","_toolbar","_pageable","_setContentHeight","_templates","_navigatable","_selectable","_clipboard","_details","_editable","_attachCustomCommandsEvent","_adaptiveColumns","_minScreenSupport","autoBind","fetch","_group","_groups","_footer","contextMenu","_initContextMenu","_resizeHandler","resize","notify","_showWatermarkOverlay","scrollableContent","scrollable","leftMostPosition","virtualScrollable","navigatable","toolbar","filterable","allowCopy","pageable","persistSelection","editable","encodeTitles","rowTemplate","altRowTemplate","noRecords","resizable","reorderable","columnMenu","detailTemplate","columnResizeHandleWidth","mobile","loaderType","cancelDelete","confirmation","confirmDelete","selectRow","selectAllRows","reorderRowUp","reorderRowDown","reorderRowTop","reorderRowBottom","exportPdf","exportToExcelAll","exportToExcelSelection","exportToExcelSelectionNoHeaders","expandCollapseColumnHeader","groupHeader","ungroupHeader","itemsSelected","dragHandleLabel","toolbarLabel","groupingHeaderLabel","filterCellTitle","reorderableInstance","_angularItems","_destroyColumnAttachments","_navigatableTables","_headertables","pager","timer","_progressTimeOut","_collapseGroupsTimeOut","_endlessFetchTimeOut","_destroyGroupable","clearArea","_selectedIds","copyHandler","updateClipBoardState","clearAreaHandler","_resizeUserEvents","_resizeHandleDocumentClickHandler","_destroyRowResizing","_destroyVirtualScrollable","editableUserEvents","_lockedContentUserEvents","_destroyEditable","_progressHandler","_errorHandler","_clearSortClasses","_sortHandler","lockedHeader","_removeLockedContainers","pane","_isMobile","minScreenResizeHandler","_detachColumnMediaResizeHandler","_draggableInstance","_draggableRowsInstance","tbodyContextMenu","theadContextMenu","lockedRowTemplate","lockedAltRowTemplate","footerTemplate","groupFooterTemplate","lockedGroupFooterTemplate","noRecordsTemplate","scrollables","footer","lockedTable","lockedFooter","_groupableClickHandler","_groupRows","_setContentWidthHandler","getOptions","deepExtend","initialData","_data","group","aggregate","transport","$angular","setOptions","currentOptions","mobileWrapper","roleSelector","after","removeClass","_setEvents","_items","includeGroupRows","tr","dataItems","n","resizeHandle","angular","get","th","filterMenu","_aria","tbodyId","headerGroupId","footerGroupId","tableOwned","rowsCount","gridRole","_hasDetails","groupingHeader","gridId","tableTabindex","numberOfFixedRows","trailingColumns","_trailingColumns","virtualScroll","_ariaRowIndex","_ariaColumnIndex","role","_ariaHeaderFooter","_ariaLockedContent","_ariaGroupTitles","previousIndex","dataIndex","cellsIndex","dataVirtual","not","lockedHeaderRows","firstIndex","Number","MAX_VALUE","lastIndex","lockedLastIndex","previousVirtual","nextVirtual","eachHeaderCell","current","currentIndex","lockedParent","setAttribute","type","rowGroup","groupId","_ariaLocked","_cellId","lockedRows","ownedCells","_cellsIds","tableRows","_ariaAddHiddenColIndex","leafColsCount","_ariaRemoveHiddenColIndex","removeAttr","currentRow","numberOfHeaderRows","bodyRows","footerRows","totalNumberOfItems","previousItems","previousMaster","prefix","_createResizeHandle","headerWrap","ieCorrection","leftMargin","leftBorderWidth","top","indicatorWidth","halfResizeHandle","rtlCorrection","mozilla","parseFloat","_autoFitLeafColumn","_positionColumnResizeHandle","lockedHead","button","buttons","which","hasAttribute","_resizeHandleDocumentClick","_resetResizeHandleHeader","_hideResizeHandle","_positionColumnResizeHandleTouch","threshold","minHold","hold","resizeColumn","columnWidth","col","isLocked","isHidden","mobileOS","contentTable","header","columnMinWidth","minResizableWidth","gridWidth","constrain","totalWidth","_footerWidth","_scrollVirtualWrapperOnColumnResize","_applyLockedContainersWidth","_syncLockedContentHeight","_syncLockedHeaderHeight","_updateStickyColumns","_resizable","columnStart","isMobile","Resizable","handle","hint","location","rtlMultiplier","currentWidth","resizeend","newWidth","oldWidth","_addLockedRowResizing","_getMinRowHeight","minHeight","currentMinHeight","_cacheRowHeight","_cachedRowsHeight","_clearCachedRowsHeight","_mapCachedRowsHeight","input","ds","output","_rowResizerDblClick","newHeight","resizer","rowResizer","oldHeight","rowPair","pairMinHeight","_setupRowResizer","_attachRowResizerEvents","isIn","_getResizerTop","inner","paddingTop","getComputedStyle","_getResizerContainer","_createRowResizer","targetHeight","positionIntarget","offsetY","previousRow","_detachRowResizerEvents","_mapResizedRows","multiSelectionLocked","pairNew","pairMin","r","rowStart","rowResizing","_draggable","kendoDraggable","autoScroll","dragstart","dragend","_reorderable","kendoReorderable","draggable","dropFilter","dragOverContainers","lockable","inSameContainer","change","oldIndex","reorderColumn","_reorderHeader","destPosition","sourceLockedColumnsCount","lockedColumnDepth","nonLockedColumnDepth","sourceLockedColumns","targetLockedColumns","_reorderContent","headerCol","footerCol","beforeVisibleColumn","visibleSources","destIndex","colSourceIndex","colDest","lockedCount","columnsArray","_findClosestVisibleColumnIndex","slice","_hasFilterRow","_hasVirtualColumns","reverse","closestVisibleColumn","leafIndex","autoFitColumn","_hasReorderableRows","_hasDragHandleColumn","_draggableRows","_checkBoxSelection","clickMoveClick","holdToDrag","showHintOnHold","preventOsHoldFeatures","clone","elm","innerText","cursorOffset","_reorderableRows","smartPosition","allowIcon","orientation","reorderDropCue","positionDropCue","dropTarget","firstCellLeft","getOffset","transform","externalDraggable","_triggerRowRorder","reorderRows","dataItem","pushMove","rowsLength","targetItem","_rowDropping","autoFitColumns","headerTable","leafCols","minWidth","contentDiv","thWidth","visibleLocked","notGroupOrHierarchyCol","notGroupOrHierarchyVisibleCell","footerTable","tables","safari","oldColumnWidth","newColumnWidth","lockChanged","destColumn","groupHeaderColumnTemplateColumns","groupHeaderColumnTemplate","sourceColumns","_updateLockedCols","_updateCols","_updateColumnCellIndex","_updateColumnSorters","_renderGroupRows","_updateTablesWidth","_updateFirstColumnClass","lockColumn","unstickColumn","unlockColumn","stickColumn","_removeStickyAttributes","_removeStickyStyles","_anyStickyColumns","_updateStickyFilterCells","cellIndex","td","lockedColumnOffset","_modelForContainer","getByUid","_calculateColumnIndex","virtualOffset","useDoubleTapEditing","editContainer","_editContainer","_mousedownOnEditCell","supportDoubleTap","fastTap","isLockedCell","has","end","closeCell","_scrollVirtualWrapper","shouldCloseCell","_virtualColScroll","_belongsToGrid","_isVirtualInlineEditable","stopPropagation","_confirmation","model","isColumnEditable","_attachModelChange","_shouldClearEditableState","_clearEditableState","kendoEditable","fields","skipFocus","_isVirtualIncellEditable","_editableState","adjustRowHeight","_relatedRow","_syncLockedScroll","_adjustLockedHorizontalScrollBar","touchScroller","_adjustRowsHeight","table1","table2","diff","lockedHeigth","tableHeigth","syncTableHeight","_syncLockedFooterHeight","editView","_editCancelClickHandler","_editUpdateClickHandler","_detachModelChange","_destroyEditView","_editableIsClosing","close","_confirmDialog","purge","navigate","_modelChangeHandler","_modelChange","isCancel","_displayCell","ns","storage","settings","Template","templateSettings","tmpl","template","_cellTmpl","_removeRow","schema","cancelRow","_removeGroupIfEmpty","idField","sync","_createPopupEditor","_createInlineEditor","_editCancelClick","_editUpdateClick","saveRow","_setCurrent","focusTable","_editFields","updateText","cancelText","updateIconClass","cancelIconClass","tempCommand","buttonsHTML","editMenuGuid","unescape","getCommand","_createButton","kendoWindow","modal","userTriggered","clearContainer","Form","buttonsTemplate","formData","_openPopUpEditor","windowEditor","windowOptions","_editAnimation","center","open","Editable","cancelChanges","_displayRow","valid","deferred","Deferred","reject","promise","resolve","related","newRow","nextRow","isSelected","isAlt","replaceWith","angularElements","angularData","_showMessage","Confirm","preventScroll","closable","okText","done","fail","confirmDialog","confirm","_shouldMapHights","_isVirtualEditable","_virtualPageToTop","saveChanges","createAt","view","createAtBottom","toLowerCase","virtualEditable","serverPaging","_removeCurrent","_virtualAddRow","insert","_editModel","_firstEditableColumnIndex","_virtualAddRowAtBottom","_virtualAddRowAtTop","at","_virtualPageToBottom","_virtualPage","_clickAdd","_clickCancel","_clickExcel","_clickPdf","_pdfInitialized","_clickSave","_searchInput","_searchTimeOut","searchFields","expression","filters","logic","getColumnsFields","endless","_endlessPageSize","_pushExpression","isServerFiltering","serverFiltering","defaultOperators","string","number","date","enums","boolean","operator","modelInfo","reader","fieldInfo","parseFn","parse","_createClickHandler","_addClickHandler","_cancelClickHandler","_saveClickHandler","_excelClickHandler","_pdfClickHandler","_serachHandler","_attachToolbarClicks","prependTo","_processItems","kendoToolBar","navigateOnTab","tools","searchText","_processAttr","keyValue","replaceAll","attributeClassMatch","renderButton","_hasFooters","groupRow","collapseGroup","expandGroup","_isLocked","_attachGroupable","draggables","enabled","chrome","Groupable","groupContainer","draggableElements","allowDrag","enableContextMenu","removeGroup","_showUngroupedColumn","_hideGroupedColumns","_resetEndless","_addGroupableOptionsToHeader","colID","hideOnGroup","showColumn","hideColumn","_skip","_pageSize","_take","headerCell","columnOptions","columnFieldMap","headerCells","_headerCells","kendoGroupable","_removeGroupableOptionsFromHeader","removeData","_continuousItems","lockedItems","nonLockedItems","multi","notString","multiple","aria","toggleable","dragToSelect","changing","originalEvent","selectedValues","_persistSelectedRows","_uncheckCheckBoxes","_checkRows","_toggleHeaderCheckState","useAllItems","relatedTarget","continuousItems","ignoreOverlapped","addIdToRanges","triggerChange","lastSelection","eventObject","keyCode","SPACEBAR","shiftKey","_deselectCheckRows","clear","_lastActive","LEFT","RIGHT","UP","DOWN","selectRange","_firstSelectee","toCompare","compareElements","stopImmediatePropagation","tableClick","areaClipBoard","getTSV","includeHeaders","_createAreaClipBoard","execCommand","Event","metaKey","getSelection","toString","createRange","opacity","selected","delimeter","hasLockedCols","cellsOffset","lockedCols","inLockedArea","cellText","rowsOffset","getTitle","headerIndex","findIndex","_anyColumnHasMediaQuery","_setColumnsMediaVisibility","_attachColumnMediaResizeHandler","_columnsWithMediaQuery","_columnMediaResizeHandler","_onColumnMediaResize","_setContentMediaWidth","_setColumnMediaVisibility","_showColumnByMedia","_hideColumnByMedia","initiallyHidden","headerColumns","headerColgroup","headerColumnsCount","visibleHeaderColumnsCount","hiddenHeaderColumnsCount","totalHeaderWidth","currentHeaderWidth","colgroupChild","columnStyleWidth","hideMinScreenCols","screenWidth","innerWidth","screen","_iterateMinScreenCols","any","_setStickyColumns","filterCells","stickyStyle","updateStyles","visibleStickyColumns","stickyWidths","_calculateStickyWidths","_setStickyClassAttributes","_setStickyStyleAttributes","_setStickyStyles","initialLeftWidth","initialRightWidth","nextColumnLeft","nextColumnRight","fill","_sumColumnWidth","masterIndex","stickyLeft","stickyRight","childCols","childStickyWidths","cellClassRegExp","headerClassRegExp","footerClassRegExp","headerClassNoBorderRegExp","leafsCols","_getColumnHeader","groupHeaderColumnTemplateClass","_sumCurrentWidths","getSelectedData","selectedRanges","selectedRangeNames","selectedSingleItems","_mapSelectionToData","ooxml","exporter","ExcelExporter","book","sheets","autoWidth","freezePane","exportData","sortHandler","exportDataSort","isExcelExportableColumn","_addRangeSelectionRows","_addSingleSelectionRows","workbook","Workbook","skipCustomHeight","toDataURLAsync","dataURI","saveAs","fileName","proxyURL","forceProxy","_setExporterColumns","_createExportRows","_rows","_dataRows","_prepareColumn","columnsFilter","curr","isRowSelection","nodeName","columnMapHandler","fieldAttr","_relatedCell","checked","prop","rangeSelectedAttr","modelId","allRows","selectedViewIds","selectedKeyNames","ids","_updateCurrentAttr","nextId","descId","headerId","_current","_scrollCurrent","tableContainer","isInLockedContainer","isInContent","scrollableContainer","addBack","_rowVirtualIndex","preventTrigger","_filterFocusable","siblings","colspan","_virtualCellIndex","_lastCellIndex","_updateSelctCheckbox","nextCheckbox","focus","elementToLowercase","tagName","isHorizontal","elementOffsetDir","containerOffsetDir","abs","offsetLeft","bottomDistance","firefoxCorrection","edge","dataTables","headerTables","_tableFocus","_tableBlur","_tableKeyDown","_filterFocus","_findCellIndex","startIndex","reversed","_scrollToColumn","HOME","END","requestInProgress","canHandle","isDefaultPrevented","altKey","handled","F10","_focusToolbar","_moveUp","_moveDown","_moveRight","_moveLeft","PAGEDOWN","_handlePageDown","PAGEUP","_handlePageUp","_handleHome","_handleEnd","_handleSpaceKey","ENTER","F2","_handleEnterKey","ESC","_handleEscKey","TAB","_handleTabKey","focusable","currentTable","collapseRow","_moveColumn","_prevHorizontalCell","_tabNext","_horizontalContainer","expandRow","_nextHorizontalCell","nextAll","_prevVerticalCell","_verticalContainer","_nextVerticalCell","_findVisibleCell","isLeft","ctrl","rowContainer","isInLockedTable","isInBody","filterFocusable","_handleEditing","active","isInCell","blur","_toggleCurrent","descriptors","_canDrag","link","originalIndex","cellToFocus","_currentDataIndex","lockedColumnsCount","$cell","$newFocus","hiddenCount","prevUntil","offset$1","nextCell","originalRow","up","step","back","switchRow","isEdited","isIE","_initMobile","groupsContextMenu","head","mainOptions","_action","_buildStates","showOn","isEditable","isSelectable","isSortable","isRowReorderable","isGroupable","hasSelection","isSorted","canMoveGroupPrev","canMoveGroupNext","commandOptions","_createPane","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","_scrollable","asLowerString","parseVirtualSettings","insertBefore","_createVirtualScrollable","_scrollLeft","isScrollingLeft","originalPageSize","_endlessFetchInProgress","_skipRerenderItemsCount","_cacheEditableState","_restoreEditableState","movable","one","_averageRowHeight","scroll","_focusEditable","loadStart","_progress","loadEnd","_onVirtualPaging","_isVirtualPopupEditable","editableState","editedModel","inlineMode","incellMode","virtualColumns","_getByUid","editedField","_canFocusEditable","isElementVisibleInWrapper","widget","widgetInstance","_renderNoRecordsContent","noRecordsElement","_setContentWidth","expander","hiddenDivClass","hiddenDiv","isNaN","footerWrap","contentWidth","nonLockedCols","nonLockedColsWidth","initialHeight","scrollableHeight","itemsCount","_rowHeight","_sum","_measures","currentRowHeight","_requestStart","_error","relatedRow","selectableRow","childCells","originalCells","pagerWrap","_groupPaging","_togglePagerVisibility","_wrapFooter","_appendLockedColumnFooter","footerRow","_appendCols","_columnMenu","menuOptions","hasMultiColumnHeaders","hasLockableColumns","hasStickableColumns","stickable","initCallback","openCallback","closeCallback","stickCallback","unstickCallback","filterHandler","forceUnique","checkSource","owner","stick","unstick","filtering","autoSize","componentType","kendoColumnMenu","_hasFilterMenu","_filterable","filterInit","filterOpen","columnFilterable","kendoFilterMultiCheck","kendoFilterMenu","_filterRow","rowheader","_updateHeader","suggestDataSource","operators","customDataSource","cellOptions","delay","inputWidth","suggestionOperator","minLength","dataTextField","showOperators","kendoFilterCell","_sortable","sorterInstance","kendoColumnSorter","draggableColumns","initialColumns","len","normalizeHeaderCells","_updateColumnIDs","_checkboxClick","_headerCheckboxClick","_foreignKeyBindings","_fetchForeignKeyValues","_hasBoundForeignKey","dataValueField","checkBox","isSelecting","_tmpl","alt","skipGroupCells","classAttribute","compiledAttributes","rowTemplateFunc","paramName","getter","rowTemplateResult","dirtyCellTemplate","_dirtyCellTemplate","columnAttributes","colSpanAttributes","dirty","dirtyFields","charAt","_headerCellText","headerTemplate","_dirtyIndicatorTemplate","f","useWithBlock","fieldValue","_virtualCols","considerNext","widths","c","sumOfWidths","colsToRender","firstColspan","lastColspan","hiddenColumns","widthOfHiddenColumns","virtualCols","columnLeafs","columnsLocked","groupHeaderColumnTemplateLockedColumns","groupHeaderColumnTemplateNonLockedColumns","_detailTmpl","_footerTmpl","g","_groupHeaderTmpl","lockedGroupHeaderColumnTemplate","_noRecordsTmpl","resultTemplate","scrollableNoGridHeightStyles","currentCustomTemplate","templateName","rowClass","scope","fieldsMap","_emptyAggregates","headerTemplateIndex","resultHtml","groupCellBuilder","groupCellLockedContentBuilder","stickyAttributes","templateFunctionStorage","templateFunctionCount","hasFiltering","columnsWithoutFiltering","_toggleDetails","omitAnimation","detailRow","expanding","masterRow","masterRowIndex","ariaLabelText","ariaExpandText","detailCell","toggle","correctIdx","classesRegEx","sectionRowIndex","_createHeaderCells","currentTh","isGroupedBy","outerHTML","_appendLockedColumnContent","spanIdx","skipHiddenCount","colOffset","detach","lockedCells","_appendLockedColumnHeader","filtercellCells","hasFilterRow","filterCellOffset","leafColumnsCount","removeRowSpanValue","syncHeight","hasTHead","headerContent","_updateHeadersAttr","_prepareColumns","filterRow","existingFilterRow","hasLockedColumns","_retrieveFirstColumn","parentRow","childRow","totalColSpan","_updateHeaderCols","_autoColumns","toJSON","_setRowCachedHeight","$row","cachedHeight","_rowsHtml","cachedHeights","_groupData","skipFooter","firstColumn","footerDefaults","_groupAggregatesDefaultObject","groupItems","headerData","footerData","subgroupsCount","_groupRowHtml","groupHeaderBuilder","skipColspan","skipLastGroup","isLockedTable","groupData","firstVisibleColumnGroupHeaderTemplate","groupHeaderTemplate","currentItems","expanded","_groupsState","isNew","excludeHeader","templateColspan","groupHtmlBuilder","_skippedGroups","shift","groupToCollapse","footerCount","showFooter","relatedGroup","groupCountAfterCollapse","groupUid","groupObject","_getGroupByUid","currentGroupCount","_calculateGroupsTotal","_serverGroupsTotal","_currentRangeStart","toHide","_groupToCollapse","footersVisibility","groupsCount","groupCountAfterExpand","groupCount","toggleVisibility","_firstDataItem","grouped","headerCellIndex","_columnVisibilitySetter","_setParentsVisibility","_updateContentWidth","predicate","p","originalColumn","columnLeafIndex","_buildSkeleton","loaderHTML","columnsCount","skeleton","progress","_resize","force","_isActiveInTable","contentScrollLeft","cachedItemsToSkip","isCurrentInHeader","_renderContent","_renderLockedContent","_restoreCurrent","contentResized","resetTouchEvents","_muteAngularRebind","_restoreSelection","selectedRows","dataItemKey","cmd","_cleanupDetailItems","_angularGroupItems","_angularGroupFooterItems","endlessAppend","flatViewLength","flatView","groupRowLockedContentBuilder","groupRowBuilder","groupRowBuilderFunc","groupHeaderData","prevElement","newGroupRowElement","firstColumnGroupData","alwaysVisible","rows2","containers","containersLength","heights","offsetHeight1","offsetHeight2","row1","row2","direct","focusElement","isInputElement","isHeader","isInput","activeEl","halfHeight","includeAdditionalData","backslashEscapeQuotes","exportable","ExcelMixin","PDFMixin","_drawPDF_autoPageBreak","allPages","origBody","cont","toggleUnexportableColumns","paddingRight","_initPDFProgress","startingPage","draw","_destructive","pageNumber","pageNum","drawing","drawDOM","always","err","renderPage","restore","visibleInExport","visibleInExportOnly","_toggledDuringExport","_drawPDF","paperSize","doc","Group","exportPage","_drawPDFShadow","avoidLinks","loading","pb","kendoProgressBar","chunkCount","plugin"],"sources":["kendo.grid.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.data.js'), require('kendo.columnsorter.js'), require('kendo.editable.js'), require('kendo.window.js'), require('kendo.filtermenu.js'), require('kendo.filtercell.js'), require('kendo.columnmenu.js'), require('kendo.groupable.js'), require('kendo.pager.js'), require('kendo.selectable.js'), require('kendo.sortable.js'), require('kendo.reorderable.js'), require('kendo.resizable.js'), require('kendo.ooxml.js'), require('kendo.excel.js'), require('kendo.pane.js'), require('kendo.progressbar.js'), require('kendo.pdf.js'), require('kendo.dialog.js'), require('kendo.switch.js'), require('kendo.html.button.js'), require('kendo.textbox.js'), require('kendo.form.js'), require('kendo.toolbar.js'), require('kendo.icons.js'), require('kendo.menu.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.data', 'kendo.columnsorter', 'kendo.editable', 'kendo.window', 'kendo.filtermenu', 'kendo.filtercell', 'kendo.columnmenu', 'kendo.groupable', 'kendo.pager', 'kendo.selectable', 'kendo.sortable', 'kendo.reorderable', 'kendo.resizable', 'kendo.ooxml', 'kendo.excel', 'kendo.pane', 'kendo.progressbar', 'kendo.pdf', 'kendo.dialog', 'kendo.switch', 'kendo.html.button', 'kendo.textbox', 'kendo.form', 'kendo.toolbar', 'kendo.icons', 'kendo.menu'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendogrid = global.kendogrid || {}, global.kendogrid.js = factory()));\n})(this, (function () {\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            ContextMenu = ui.ContextMenu,\n            extend = $.extend,\n            encode = kendo.htmlEncode;\n\n        var ACTION = \"action\";\n\n        var GridContextMenu = ContextMenu.extend({\n            init: function(element, options) {\n                var that = this;\n\n                ContextMenu.fn.init.call(that, element, options);\n\n                that._overrideTemplates();\n                that._extendItems();\n\n                that.bind(\"select\", that._onSelect.bind(that));\n                that.bind(\"open\", that._onOpen.bind(that));\n            },\n\n            _overrideTemplates: function() {\n                this.templates.sprite = function (ref) {\n                    var icon = ref.icon;\n                    var spriteCssClass = ref.spriteCssClass;\n\n                    return (\"\" + ((icon || spriteCssClass) ? kendo.ui.icon({ icon: encode(icon || \"\"), iconClass: encode(spriteCssClass || \"\") }) : ''));\n                };\n            },\n\n            defaultItems: {\n                \"separator\": { name: \"separator\", separator: true },\n                \"create\": { name: \"create\", text: \"Add\", icon: \"plus\", command: \"AddCommand\", rules: \"isEditable\" },\n                \"edit\": { name: \"edit\", text: \"Edit\", icon: \"pencil\", command: \"EditCommand\", rules: \"isEditable\" },\n                \"destroy\": { name: \"destroy\", text: \"Delete\", icon: \"trash\", command: \"DeleteCommand\", rules: \"isEditable\" },\n                \"select\": { name: \"select\", text: \"Select\", icon: \"table-body\", rules: \"isSelectable\", items: [\n                    { name: \"selectRow\", text: \"Row\", icon: \"table-row-groups\", command: \"SelectRowCommand\" },\n                    { name: \"selectAllRows\", text: \"All rows\", icon: \"grid\", command: \"SelectAllRowsCommand\" },\n                    { name: \"clearSelection\", text: \"Clear selection\", icon: \"table-unmerge\", softRules: \"hasSelection\", command: \"ClearSelectionCommand\" } ] },\n                \"copySelection\": { name: \"copySelection\", text: \"Copy selection\", icon: \"page-header-section\", rules: \"isSelectable\", softRules: \"hasSelection\", command: \"CopySelectionCommand\", options: \"withHeaders\" },\n                \"copySelectionNoHeaders\": { name: \"copySelectionNoHeaders\", text: \"Copy selection (No Headers)\", icon: \"file-txt\", rules: \"isSelectable\", softRules: \"hasSelection\", command: \"CopySelectionCommand\" },\n                \"reorderRow\": { name: \"reorderRow\", text: \"Reorder row\", icon: \"caret-alt-expand\", rules: \"isRowReorderable\", softRules: \"isSorted\", items: [\n                    { name: \"reorderRowUp\", text: \"Up\", icon: \"caret-alt-up\", command: \"ReorderRowCommand\", options: \"dir:up\" },\n                    { name: \"reorderRowDown\", text: \"Down\", icon: \"caret-alt-down\", command: \"ReorderRowCommand\", options: \"dir:down\" },\n                    { name: \"reorderRowTop\", text: \"Top\", icon: \"caret-alt-to-top\", command: \"ReorderRowCommand\", options: \"dir:top\" },\n                    { name: \"reorderRowBottom\", text: \"Bottom\", icon: \"caret-alt-to-bottom\", command: \"ReorderRowCommand\", options: \"dir:bottom\" }\n                ] },\n                \"exportPDF\": { name: \"exportPDF\", text: \"Export to PDF\", icon: \"file-pdf\", command: \"ExportPDFCommand\" },\n                \"exportExcel\": { name: \"exportExcel\", text: \"Export to Excel\", icon: \"file-excel\", items: [\n                    { name: \"exportToExcelAll\", text: \"All\", command: \"ExportExcelCommand\" },\n                    { name: \"exportToExcelSelection\", text: \"Selection\", command: \"ExportExcelCommand\", softRules: \"hasSelection\", options: \"selection,withHeaders\" },\n                    { name: \"exportToExcelSelectionNoHeaders\", text: \"Selection (No Headers)\", softRules: \"hasSelection\", command: \"ExportExcelCommand\", options: \"selection\" }\n                ] },\n                \"sortAsc\": { name: \"sortAsc\", text: \"Sort Ascending\", icon: \"sort-asc-small\", rules: \"isSortable\", command: \"SortCommand\", options: \"dir:asc\" },\n                \"sortDesc\": { name: \"sortDesc\", text: \"Sort Descending\", icon: \"sort-desc-small\", rules: \"isSortable\", command: \"SortCommand\", options: \"dir:desc\" },\n                \"moveGroupPrevious\": { name: \"moveGroupPrevious\", text: \"Move previous\", icon: \"arrow-left\", rules: \"isGroupable\", softRules: \"canMoveGroupPrev\", command: \"MoveGroupCommand\", options: \"dir:prev\" },\n                \"moveGroupNext\": { name: \"moveGroupNext\", text: \"Move next\", icon: \"arrow-right\", rules: \"isGroupable\", softRules: \"canMoveGroupNext\", command: \"MoveGroupCommand\", options: \"dir:next\" }\n                // \"filter\": { name: \"filter\", text: \"Filter\", icon: \"filter\", attr: { [kendo.attr(\"is-filter\")]: true }, items: [\n                //     { content: '<div class=\"k-columnmenu-item-wrapper\"><div class=\"k-columnmenu-item-content k-column-menu-filter\"><div class=\"k-filterable\"></div></div></div>' }\n                // ] },\n            },\n\n            events: ContextMenu.fn.events.concat([\n                ACTION\n            ]),\n\n            _onSelect: function(ev) {\n                var command = $(ev.item).data(\"command\");\n                var options = $(ev.item).data(\"options\");\n                    options = options ? options.split(\",\")\n                    .map(function (val) {\n                        var obj, obj$1;\n\n                        if (val.indexOf(\":\") > -1) {\n                            var ref = val.split(\":\");\n                            var key = ref[0];\n                            var val = ref[1];\n                            return ( obj = {}, obj[key || \"_\"] = val, obj );\n                        }\n\n                        return ( obj$1 = {}, obj$1[val] = true, obj$1 );\n                    })\n                    .reduce(function (acc, v) { return Object.assign(acc, v); }, {}) : {};\n\n                var target = $(ev.target);\n\n                if (!command) {\n                    return;\n                }\n\n                this.action({\n                    command: command,\n                    options: Object.assign(options, { target: target })\n                });\n            },\n\n            _onOpen: function(ev) {\n                var this$1$1 = this;\n\n                var menu = ev.sender,\n                    items = menu.options.items,\n                    elTarget = $(ev.event ? ev.event.target : null);\n\n                if ((!items && $.isEmptyObject(this.defaultItems)) || elTarget.closest(\".k-grid-column-menu\").length) {\n                    ev.preventDefault();\n                    return;\n                }\n\n                this._toggleSeparatorVisibility();\n\n                menu.element.find((\"[\" + (kendo.attr('soft-rules')) + \"]\")).each(function (i, item) {\n                    var rules = $(item).attr(kendo.attr('soft-rules')).split(\";\");\n                    menu.enable(item, this$1$1._validateSoftRules(rules, elTarget));\n                });\n            },\n\n            _toggleSeparatorVisibility: function() {\n                var that = this,\n                    items = that.element.find(\".k-item.k-separator\").filter(function (i, item) {\n                        var prev = $(item).prev(\".k-item:not(.k-separator)\");\n                        var next = $(item).next(\".k-item:not(.k-separator)\");\n\n                        return !(prev.length && next.length);\n                    });\n\n                items.hide();\n            },\n\n            _extendItems: function() {\n                var that = this,\n                    items = that.options.items,\n                    item, isBuiltInTool;\n\n                if (items && items.length) {\n                    for (var i = 0; i < items.length; i++) {\n                        item = items[i];\n                        isBuiltInTool = $.isPlainObject(item) && Object.keys(item).length === 1 && item.name;\n\n                        if (isBuiltInTool) {\n                            item = item.name;\n                        }\n\n                        if ($.isPlainObject(item)) {\n                            that._append(item);\n                        } else if (that.defaultItems[item]) {\n                            item = that.defaultItems[item];\n                            that._append(item);\n                        } else if (typeof(item) === \"string\") {\n                            item = { name: item, text: item, spriteCssClass: item, command: item + \"Command\" };\n                            that._append(item);\n                        }\n                    }\n                } else {\n                    for (var key in that.defaultItems) {\n                        item = that.defaultItems[key];\n                        that._append(item);\n                    }\n                }\n            },\n\n            _extendItem: function(item) {\n                var that = this,\n                    messages = that.options.messages,\n                    attr = item.attr || {};\n\n                if (item.command) {\n                    attr[kendo.attr(\"command\")] = item.command;\n                }\n\n                if (item.options) {\n                    attr[kendo.attr(\"options\")] = item.options;\n                }\n\n                if (item.softRules) {\n                    attr[kendo.attr(\"soft-rules\")] = item.softRules;\n                }\n\n                if (item.items) {\n                    for (var j = 0; j < item.items.length; j++) {\n                        item.items.forEach(function (subItem) {\n                            that._extendItem(subItem);\n                        });\n                    }\n                }\n\n                extend(item, {\n                    text: messages.commands[item.name],\n                    icon: item.icon || \"\",\n                    spriteCssClass: item.spriteCssClass || \"\",\n                    attr: attr,\n                    uid: kendo.guid()\n                });\n            },\n\n            _validateSoftRules: function(rules, target) {\n                var that = this;\n\n                if (!rules || !(rules && rules.length)) {\n                    return true;\n                }\n\n                for (var i = 0; i < rules.length; i++) {\n                    if (!this._readState(rules[i], target)) {\n                        return false;\n                    }\n                }\n\n                return true;\n            },\n\n            _validateRules: function(tool) {\n                var that = this,\n                    rules = tool.rules ? tool.rules.split(\";\") : [];\n\n                if (!rules.length) {\n                    return true;\n                }\n\n                for (var i = 0; i < rules.length; i++) {\n                    if (!this._readState(rules[i])) {\n                        return false;\n                    }\n                }\n\n                return true;\n            },\n\n            _readState: function(state, target) {\n                var that = this,\n                    states = that.options.states;\n\n                if (kendo.isFunction(states[state])) {\n                    return states[state](target);\n                } else {\n                    return states[state];\n                }\n            },\n\n            _append: function(item) {\n                var that = this;\n\n                that._extendItem(item);\n\n                if (that._validateRules(item)) {\n                    that.append(item);\n                }\n            },\n\n            action: function(args) {\n                this.trigger(ACTION, args);\n            }\n        });\n\n        kendo.ui.grid = kendo.ui.grid || {};\n\n        extend(kendo.ui.grid, {\n            ContextMenu: GridContextMenu\n        });\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            extend = $.extend,\n            Class = kendo.Class;\n\n        var Command = Class.extend({\n            init: function(options) {\n                this.options = options;\n                this.grid = options.grid;\n            }\n        });\n\n        var MoveGroupCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    groupable = grid.groupable,\n                    options = that.options,\n                    target = options.target.closest(\".k-chip\"),\n                    method = options.dir === \"next\" ? \"after\" : \"before\",\n                    position = options.dir === \"next\" ? target.next() : target.prev();\n\n                position[method](target);\n                groupable._change();\n            },\n        });\n\n        var SortCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    dataSource = grid.dataSource,\n                    sort = dataSource.sort() || [],\n                    options = that.options,\n                    dir = options.dir,\n                    field = grid._getCellField(options.target),\n                    multipleMode = grid.options.sortable.mode && grid.options.sortable.mode === \"multiple\",\n                    compare = grid.options.compare,\n                    length, idx;\n\n                if (multipleMode) {\n                    for (idx = 0, length = sort.length; idx < length; idx++) {\n                        if (sort[idx].field === field) {\n                            sort.splice(idx, 1);\n                            break;\n                        }\n                    }\n                    sort.push({ field: field, dir: dir, compare: compare });\n                } else {\n                    sort = [{ field: field, dir: dir, compare: compare }];\n                }\n\n                dataSource.sort(sort);\n            },\n        });\n\n        var AddCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid;\n\n                grid.addRow();\n            }\n        });\n\n        var EditCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    inCellMode = grid._editMode() === \"incell\",\n                    target = inCellMode ? that.options.target : that.options.target.closest(\"tr\");\n\n                if (inCellMode) {\n                    grid.editCell(target);\n                } else {\n                    grid.editRow(target);\n                }\n            }\n        });\n\n        var DeleteCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    target = that.options.target.closest(\"tr\");\n\n                grid.removeRow(target);\n            }\n        });\n\n        var CopySelectionCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    withHeaders = that.options.withHeaders;\n\n                grid.copySelectionToClipboard(withHeaders);\n            }\n        });\n\n        var SelectRowCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    selectMode = kendo.ui.Selectable.parseOptions(grid.options.selectable),\n                    target = that.options.target.closest(\"tr\");\n\n                grid.select(selectMode.cell ? target.find('td') : target);\n            }\n        });\n\n        var SelectAllRowsCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    selectMode = kendo.ui.Selectable.parseOptions(grid.options.selectable),\n                    rows = grid.items();\n\n                grid.select(selectMode.cell ? rows.find('td') : rows);\n            }\n        });\n\n        var ClearSelectionCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid;\n\n                grid.clearSelection();\n            }\n        });\n\n        var ReorderRowCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    dir = that.options.dir,\n                    target = that.options.target.closest(\"tr\"),\n                    index = target.index(),\n                    newIndex;\n\n                switch (dir) {\n                    case \"up\":\n                        newIndex = index - 1;\n                        break;\n                    case \"down\":\n                        newIndex = index + 2;\n                        break;\n                    case \"top\":\n                        newIndex = 0;\n                        break;\n                    case \"bottom\":\n                        newIndex = grid.items().length;\n                        break;\n                }\n\n                grid.reorderRowTo(target, newIndex);\n            }\n        });\n\n        var ExportPDFCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid;\n\n                grid.saveAsPDF();\n            }\n        });\n\n        var ExportExcelCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    selection = that.options.selection,\n                    withHeaders = that.options.withHeaders,\n                    grid = that.grid;\n\n                if (selection) {\n                    grid.exportSelectedToExcel(withHeaders);\n                } else {\n                    grid.saveAsExcel();\n                }\n            }\n        });\n\n        kendo.ui.grid = kendo.ui.grid || {};\n\n        extend(kendo.ui.grid, {\n            GridCommand: Command,\n            commands: {\n                SortCommand: SortCommand,\n                AddCommand: AddCommand,\n                EditCommand: EditCommand,\n                DeleteCommand: DeleteCommand,\n                CopySelectionCommand: CopySelectionCommand,\n                SelectRowCommand: SelectRowCommand,\n                SelectAllRowsCommand: SelectAllRowsCommand,\n                ClearSelectionCommand: ClearSelectionCommand,\n                ReorderRowCommand: ReorderRowCommand,\n                ExportPDFCommand: ExportPDFCommand,\n                ExportExcelCommand: ExportExcelCommand,\n                MoveGroupCommand: MoveGroupCommand\n            }\n        });\n    })(window.kendo.jQuery);\n\n    var __meta__ = {\n        id: \"grid\",\n        name: \"Grid\",\n        category: \"web\",\n        description: \"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.\",\n        depends: [ \"data\", \"columnsorter\", \"sortable\", \"toolbar\", \"html.button\", \"icons\", \"menu\" ],\n        features: [ {\n            id: \"grid-editing\",\n            name: \"Editing\",\n            description: \"Support for record editing\",\n            depends: [ \"editable\", \"window\", \"textbox\", \"form\" ]\n        }, {\n            id: \"grid-filtering\",\n            name: \"Filtering\",\n            description: \"Support for record filtering\",\n            depends: [ \"filtermenu\" ]\n        }, {\n            id: \"grid-columnmenu\",\n            name: \"Column menu\",\n            description: \"Support for header column menu\",\n            depends: [ \"columnmenu\" ]\n        }, {\n            id: \"grid-grouping\",\n            name: \"Grouping\",\n            description: \"Support for grid grouping\",\n            depends: [ \"groupable\" ]\n        }, {\n            id: \"grid-filtercell\",\n            name: \"Row filter\",\n            description: \"Support for grid header filtering\",\n            depends: [ \"filtercell\" ]\n        }, {\n            id: \"grid-paging\",\n            name: \"Paging\",\n            description: \"Support for grid paging\",\n            depends: [ \"pager\" ]\n        }, {\n            id: \"grid-selection\",\n            name: \"Selection\",\n            description: \"Support for row selection\",\n            depends: [ \"selectable\" ]\n        }, {\n            id: \"grid-column-reorder\",\n            name: \"Column reordering\",\n            description: \"Support for column reordering\",\n            depends: [ \"reorderable\" ]\n        }, {\n            id: \"grid-column-resize\",\n            name: \"Column resizing\",\n            description: \"Support for column resizing\",\n            depends: [ \"resizable\" ]\n        }, {\n            id: \"grid-mobile\",\n            name: \"Grid adaptive rendering\",\n            description: \"Support for adaptive rendering\",\n            depends: [ \"dialog\", \"pane\", \"switch\" ]\n        }, {\n            id: \"grid-excel-export\",\n            name: \"Excel export\",\n            description: \"Export grid data as Excel spreadsheet\",\n            depends: [ \"excel\" ]\n        }, {\n            id: \"grid-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export grid data as PDF\",\n            depends: [ \"pdf\", \"drawing\", \"progressbar\" ]\n        } ]\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            DataSource = kendo.data.DataSource,\n            ObservableObject = kendo.data.ObservableObject,\n            tbodySupportsInnerHtml = kendo.support.tbodyInnerHtml,\n            activeElement = kendo._activeElement,\n            Widget = ui.Widget,\n            outerWidth = kendo._outerWidth,\n            outerHeight = kendo._outerHeight,\n            keys = kendo.keys,\n\n            isPlainObject = $.isPlainObject,\n            extend = $.extend,\n            map = $.map,\n            grep = $.grep,\n            isArray = Array.isArray,\n            inArray = $.inArray,\n            push = Array.prototype.push,\n            isFunction = kendo.isFunction,\n            encode = kendo.htmlEncode,\n            isEmptyObject = $.isEmptyObject,\n            contains = $.contains,\n            math = Math,\n\n            DOT = \".\",\n            PROGRESS = \"progress\",\n            ERROR = \"error\",\n            HIERARCHY_CELL_CLASS = \"k-hierarchy-cell\",\n            DATA_CELL = \":not(.k-group-cell):not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left))):visible\",\n            DATA_CELL_HIDDENINCLUDED = \":not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left)))\",\n            SELECTION_CELL_SELECTOR = \"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)\",\n            NAVROW = \"tr:not(.k-footer-template):visible\",\n            NAVCELL = \":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible\",\n            ITEMROW = \"tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible\",\n            COLGROUP = \"col:not(.k-group-col, .k-hierarchy-col)\",\n            HEADERCELLS = \"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)\",\n            CARET_ALT_DOWN = \"a[class*='-i-caret-alt-down']\",\n            CARET_ALT_RIGHT = \"a[class*='-i-caret-alt-right']\",\n            CARET_ALT_RIGHT_CACHE = CARET_ALT_RIGHT,\n            CARET_ALT_LEFT = \"a[class*='-i-caret-alt-left']\",\n            WRAPPER = \".k-grid\",\n            NS = \".kendoGrid\",\n            CONTENTRLOCKEDCONTAINER = \"k-grid-content-locked\",\n            GROUPCELLCLASS = \"k-group-cell\",\n\n            EDIT = \"edit\",\n            BEFOREEDIT = \"beforeEdit\",\n            SAVE = \"save\",\n            REMOVE = \"remove\",\n            DETAILINIT = \"detailInit\",\n            FILTERMENUINIT = \"filterMenuInit\",\n            COLUMNMENUINIT = \"columnMenuInit\",\n            FILTERMENUOPEN = \"filterMenuOpen\",\n            COLUMNMENUOPEN = \"columnMenuOpen\",\n            CELLCLOSE = \"cellClose\",\n            CHANGING = \"changing\",\n            CHANGE = \"change\",\n            COLUMNHIDE = \"columnHide\",\n            COLUMNSHOW = \"columnShow\",\n            SAVECHANGES = \"saveChanges\",\n            DATABOUND = \"dataBound\",\n            DETAILEXPAND = \"detailExpand\",\n            DETAILCOLLAPSE = \"detailCollapse\",\n            ITEM_CHANGE = \"itemchange\",\n            PAGE = \"page\",\n            PAGING = \"paging\",\n            SCROLL = \"scroll\",\n            SYNC = \"sync\",\n            LOAD_START = \"loadStart\",\n            LOAD_END = \"loadEnd\",\n\n            FOCUSED = \"k-focus\",\n            HOVER = \"k-hover\",\n            ACTIVE = \"k-active\",\n            FOCUSABLE = \":kendoFocusable\",\n            SELECTED = \"k-selected\",\n            CHECKBOX = \"k-checkbox\",\n            CHECKBOXINPUT = \"input[data-role='checkbox'].k-select-checkbox.\" + CHECKBOX,\n            NORECORDSCLASS = \"k-grid-norecords\",\n            LINK_CLASS = \"k-link\",\n            ICON_CLASS = \"k-icon\",\n            SVG_ICON_CLASS = \"k-svg-icon\",\n            ORDER_CLASS = \"k-sort-order\",\n            SORTED_CLASS = \"k-sorted\",\n            HEADER_COLUMN_MENU_CLASS = \"k-grid-column-menu\",\n            FILTER_MENU_CLASS = \"k-grid-filter-menu\",\n            STICKY_CELL_CLASS = \"k-grid-content-sticky k-table-td\",\n            STICKY_HEADER_CLASS = \"k-grid-header-sticky k-header\",\n            STICKY_FOOTER_CLASS = \"k-grid-footer-sticky k-table-td\",\n            STICKY_HEADER_NO_BORDER_CLASS = \"k-grid-no-left-border\",\n            ROW_RESIZER = \"k-row-resizer\",\n            ROW_RESIZER_WRAP = \"k-resizer-wrap\",\n            GROUPING_ROW = \"k-grouping-row\",\n            RESIZE = \"resize\",\n            ROWRESIZE = \"rowResize\",\n            COLUMNRESIZE = \"columnResize\",\n            COLUMNREORDER = \"columnReorder\",\n            COLUMNLOCK = \"columnLock\",\n            COLUMNUNLOCK = \"columnUnlock\",\n            COLUMNSTICK = \"columnStick\",\n            COLUMNUNSTICK = \"columnUnstick\",\n            ROWREORDER = \"rowReorder\",\n            NAVIGATE = \"navigate\",\n            CLICK = \"click\",\n            MOUSEDOWN = \"mousedown\",\n            MOUSEUP = \"mouseup\",\n            MOUSEENTER = \"mouseenter\",\n            MOUSELEAVE = \"mouseleave\",\n            MOUSEMOVE = \"mousemove\",\n            DUBLECLICK = \"dblclick\",\n            HEIGHT = \"height\",\n            WIDTH = \"width\",\n            AUTO = \"auto\",\n            TABINDEX = \"tabIndex\",\n            FUNCTION = \"function\",\n            STRING = \"string\",\n            BOTTOM = \"bottom\",\n            CONTAINER_FOR = \"container-for\",\n            FIELD = \"field\",\n            INPUT = \"input\",\n            INCELL = \"incell\",\n            INLINE = \"inline\",\n            UNIQUE_ID = \"uid\",\n            MINCOLSPANVALUE = 1,\n            COLSPAN = \"colSpan\",\n            OVERFLOW = \"overflow\",\n            HIDDEN = \"hidden\",\n            SORT = \"sort\",\n            GROUP_SORT = \"group-sort\",\n            DELETECONFIRM = \"Are you sure you want to delete this record?\",\n            NORECORDS = \"No records available.\",\n            CONFIRMDELETE = \"Delete\",\n            CANCELDELETE = \"Cancel\",\n            COLLAPSE = \"Collapse\",\n            EXPAND = \"Expand\",\n            ID = \"id\",\n            PX = \"px\",\n            TR = \"tr\",\n            DIV = \"div\",\n\n            ARIA_LABEL = \"aria-label\",\n            ARIA_OWNS = \"aria-owns\",\n            ARIA_ROWCOUNT = \"aria-rowcount\",\n            ARIA_COLCOUNT = \"aria-colcount\",\n            ARIA_CONTROLS = \"aria-controls\",\n            ARIA_COLINDEX = \"aria-colindex\",\n            ARIA_ROWINDEX = \"aria-rowindex\",\n            ARIA_EXPANDED = \"aria-expanded\",\n            ARIA_CHECKED = \"aria-checked\",\n            ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n            ROLE = \"role\",\n            NONE = \"none\",\n            ROW = \"row\",\n            ROWGROUP = \"rowgroup\",\n            COLUMNHEADER = \"columnheader\",\n            GRIDCELL = \"gridcell\",\n\n            formatRegExp = /(\\}|\\#)/ig,\n            templateHashRegExp = /#/ig,\n            whitespaceRegExp = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n            leftRegExp = new RegExp(\"(\\\\s*left\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n            rightRegExp = new RegExp(\"(\\\\s*right\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n            nonDataCellsRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-group-cell|k-hierarchy-cell)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n            filterRowRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-filter-row)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n            COMMANDBUTTONTMPL = function (ref) {\n               var className = ref.className;\n               var attr = ref.attr;\n               var text = ref.text;\n\n               return (\"<button type=\\\"button\\\" class=\\\"\" + className + \"\\\" \" + attr + \">\" + text + \"</button>\");\n        },\n            SELECTCOLUMNTMPL = function (ref) {\n               var size = ref.size;\n\n               return \"<input tabindex=\\\"-1\\\" class=\\\"k-select-checkbox \" + CHECKBOX + \" \" + size + \" k-rounded-md\\\" data-role=\\\"checkbox\\\" aria-label=\\\"Select row\\\" aria-checked=\\\"false\\\" type=\\\"checkbox\\\">\";\n        },\n            SELECTCOLUMNHEADERTMPL = function (ref) {\n               var size = ref.size;\n\n               return \"<input tabindex=\\\"-1\\\" class=\\\"k-select-checkbox \" + CHECKBOX + \" \" + size + \" k-rounded-md\\\" data-role=\\\"checkbox\\\" aria-label=\\\"Select all rows\\\" aria-checked=\\\"false\\\" type=\\\"checkbox\\\">\";\n        },\n            DRAGHANDLECOLUMNTMPL = function () { return kendo.ui.icon(\"reorder\"); },\n            SORTHEADERTMPL = function (ref) {\n               var text = ref.text;\n\n               return (\"<span class=\\\"k-cell-inner\\\"><span class=\\\"k-link\\\"><span class=\\\"k-column-title\\\">\" + text + \"</span></span></span>\");\n        },\n            isRtl = false,\n            browser = kendo.support.browser;\n\n        var isIE11 = browser.msie && browser.version === 11;\n        var isMac = /Mac OS/.test(navigator.userAgent);\n        var classNames = {\n            content: \"k-content\",\n            scrollContainer: \"k-scroll-container\",\n            headerCellInner: \"k-cell-inner\"\n        };\n        var GroupsPager;\n\n        var defaultBodyContextMenu = [\n            \"copySelection\",\n            \"copySelectionNoHeaders\",\n            \"separator\",\n            \"create\",\n            \"edit\",\n            \"destroy\",\n            \"select\",\n            \"separator\",\n            \"reorderRow\",\n            \"exportPDF\",\n            \"exportExcel\",\n            \"separator\"\n        ];\n\n        var defaultHeadContextMenu = [\n            \"sortAsc\",\n            \"sortDesc\",\n            \"separator\"\n        ];\n\n        var defaultGroupsContextMenu = [\n            \"moveGroupPrevious\",\n            \"moveGroupNext\",\n            \"separator\"\n        ];\n\n        if (ui.Pager) {\n            GroupsPager = ui.Pager.extend({\n                init: function(element, options) {\n                    ui.Pager.fn.init.call(this, element, extend(true, {}, options));\n                    this.dataSource.options.useRanges = true;\n                    this.dataSource._omitPrefetch = true;\n                },\n                options: {\n                    name: \"GroupsPager\"\n                },\n\n                totalPages: function() {\n                    var that = this;\n\n                    return Math.ceil((that._collapsedTotal() || 0) / (that.pageSize() || 1));\n                },\n                _collapsedTotal: function() {\n                    var dataSource = this.dataSource;\n                    return dataSource ? (dataSource.groupsTotal(true) || 0) : 0;\n                }\n            });\n        }\n\n        var VirtualScrollable = Widget.extend({\n            init: function(element, options) {\n                var that = this;\n\n                Widget.fn.init.call(that, element, options);\n                that._refreshHandler = that.refresh.bind(that);\n                that.setDataSource(options.dataSource);\n                that.wrap();\n            },\n\n            setDataSource: function(dataSource) {\n                var that = this;\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler);\n                }\n                that.dataSource = dataSource;\n                that.dataSource.bind(CHANGE, that._refreshHandler);\n                that.dataSource.options.useRanges = true;\n                that.dataSource.options.virtual = true;\n            },\n\n            options: {\n                name: \"VirtualScrollable\",\n                itemHeight: $.noop,\n                prefetch: true,\n                maxScrollHeight: 250000\n            },\n\n            events: [\n                PAGING,\n                PAGE,\n                SCROLL,\n                LOAD_START,\n                LOAD_END\n            ],\n\n            destroy: function() {\n                var that = this;\n\n                Widget.fn.destroy.call(that);\n\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n                that.wrapper.add(that.verticalScrollbar).off(NS);\n\n                clearTimeout(that._timeout);\n                if (that._scrollingTimeout) {\n                    clearTimeout(that._scrollingTimeout);\n                }\n\n                if (that.drag) {\n                    that.drag.destroy();\n                    that.drag = null;\n                }\n                that.wrapper = that.element = that.verticalScrollbar = null;\n                that._refreshHandler = null;\n            },\n\n            wrap: function() {\n                var that = this,\n                    // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                    scrollbar = kendo.support.scrollbar() + 1,\n                    element = that.element,\n                    wrapper;\n\n                element.css( {\n                    width: AUTO,\n                    overflow: \"hidden\"\n                }).css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar);\n                that.content = element.children().first();\n                wrapper = that.wrapper = that.content.wrap('<div class=\"k-virtual-scrollable-wrap\"/>')\n                                    .parent()\n                                    .on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n                that._wrapper();\n\n                if (kendo.support.kineticScrollNeeded || kendo.support.touch) {\n                    that.wrapper.css(\"touch-action\", NONE);\n                    that.drag = new kendo.UserEvents(that.wrapper, {\n                        global: true,\n                        allowSelection: true,\n                        start: function(e) {\n                            e.sender.capture();\n                        },\n                        move: function(e) {\n                            that.verticalScrollbar.scrollTop(that.verticalScrollbar.scrollTop() - e.y.delta);\n                            kendo.scrollLeft(wrapper, kendo.scrollLeft(wrapper) - e.x.delta);\n                            e.preventDefault();\n                        }\n                    });\n                }\n\n                that.verticalScrollbar = $('<div class=\"k-scrollbar k-scrollbar-vertical\" />')\n                                            .css({\n                                                width: scrollbar\n                                            }).appendTo(element)\n                                            .on(\"scroll\" + NS, that._scroll.bind(that));\n            },\n\n            _wrapper: function() {\n                var that = this;\n\n                if (isIE11) {\n                    //scrolling the virtual scrollbar to the bottom and then\n                    //scrolling the horizontal content scrollbar does not fire the \"scroll\" event\n                    //seems like a problem in IE 11 only (after version 11.0.9600.18860)\n                    //https://github.com/telerik/kendo-ui-core/issues/3779\n                    that.wrapper.css({\n                        \"overflow-y\": SCROLL\n                    });\n\n                    //hide the wrapper behind the virtual scrollbar\n                    that.element.css((isRtl ? \"padding-left\" : \"padding-right\"), 0);\n                }\n            },\n\n            _wheelScroll: function(e) {\n                if (e.ctrlKey) {\n                    return;\n                }\n\n                var scrollbar = this.verticalScrollbar,\n                    scrollTop = scrollbar.scrollTop(),\n                    delta = kendo.wheelDeltaY(e);\n\n                if (delta && !(delta > 0 && scrollTop === 0) && !(delta < 0 && scrollTop + scrollbar[0].clientHeight == scrollbar[0].scrollHeight)) {\n                    e.preventDefault();\n                    this.verticalScrollbar.scrollTop(scrollTop + (-delta));\n                }\n            },\n\n            _scroll: function(e) {\n                var that = this,\n                    delayLoading = !that.options.prefetch,\n                    scrollTop = e.currentTarget.scrollTop,\n                    dataSource = that.dataSource,\n                    rowHeight = that.itemHeight,\n                    skip = dataSource.skip() || 0,\n                    start = that._rangeStart || skip,\n                    height = that.element.innerHeight(),\n                    isScrollingUp = !!(that._scrollbarTop && that._scrollbarTop > scrollTop),\n                    firstItemIndex = math.max(math.floor(scrollTop / rowHeight), 0),\n                    lastItemOffset = isScrollingUp ? math.ceil(height / rowHeight) : math.floor(height / rowHeight),\n                    lastItemIndex = math.max(firstItemIndex + lastItemOffset, 0);\n\n                if (that._preventScroll) {\n                    that._preventScroll = false;\n                    return;\n                }\n                that._prevScrollTop = that._scrollTop;\n                that._scrollTop = scrollTop - (start * rowHeight);\n                that._scrollbarTop = scrollTop;\n\n                that._scrolling = delayLoading;\n\n                if (!that._fetch(firstItemIndex, lastItemIndex, isScrollingUp)) {\n                    that.wrapper[0].scrollTop = that._scrollTop;\n                }\n\n                that.trigger(SCROLL);\n\n                if (delayLoading) {\n                    if (that._scrollingTimeout) {\n                        clearTimeout(that._scrollingTimeout);\n                    }\n\n                    that._scrollingTimeout = setTimeout(function() {\n                        that._scrolling = false;\n                        that._page(that._rangeStart, that.dataSource.take());\n                    }, 100);\n                }\n            },\n\n            scrollToTop: function() {\n                this._scrollTo(0);\n            },\n\n            scrollToBottom: function() {\n                var scrollbar = this.verticalScrollbar;\n                this._scrollTo(scrollbar[0].scrollHeight - scrollbar.height());\n            },\n\n            _scrollWrapperToTop: function() {\n                this.wrapper.scrollTop(0);\n            },\n\n            _scrollWrapperToBottom: function() {\n                this.wrapper.scrollTop(this.wrapper[0].scrollHeight);\n            },\n\n            _scrollWrapperOnColumnResize: function() {\n                var that = this;\n                var wrapper = this.wrapper;\n                var initialScrollTop = wrapper.scrollTop();\n\n                if (wrapper[0].scrollWidth > wrapper[0].clientWidth) {\n                    if ((!that._wrapperScrolled && initialScrollTop) || that._isScrolledToBottom()) {\n                        wrapper.scrollTop(initialScrollTop + kendo.support.scrollbar());\n                        that._scrollTop = wrapper.scrollTop();\n                        that._wrapperScrolled = true;\n                    }\n                } else if (that._wrapperScrolled) {\n                    if (!that._isWrapperScrolledToBottom()) {\n                        wrapper.scrollTop(initialScrollTop - kendo.support.scrollbar());\n                        that._scrollTop = wrapper.scrollTop();\n                    }\n\n                    that._wrapperScrolled = false;\n                }\n            },\n\n            _scrollTo: function(scrollTop) {\n                var that = this;\n                var scrollbar = that.verticalScrollbar;\n\n                if (scrollbar.scrollTop() !== scrollTop) {\n                    that._preventScroll = true;\n                }\n\n                that.wrapper.scrollTop(scrollTop);\n                that._scrollTop = that.wrapper.scrollTop();\n\n                scrollbar.scrollTop(scrollTop);\n                that._scrollbarTop = scrollbar.scrollTop();\n            },\n\n            _isScrolledToTop: function() {\n                return this.verticalScrollbar.scrollTop() === 0;\n            },\n\n            _isScrolledToBottom: function() {\n                var scrollbar = this.verticalScrollbar;\n                var scrollTop = scrollbar.scrollTop();\n\n                return (scrollTop > 0 && scrollTop >= parseInt(scrollbar[0].scrollHeight - scrollbar.height(), 10));\n            },\n\n            _isWrapperScrolledToBottom: function() {\n                var wrapper = this.wrapper;\n\n                return (wrapper.scrollTop() >= parseInt(wrapper[0].scrollHeight - wrapper.height(), 10));\n            },\n\n            itemIndex: function(rowIndex) {\n                var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n\n                return rangeStart + rowIndex;\n            },\n\n            position: function(index) {\n                var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n                var pageSize = this.dataSource.pageSize();\n                var result;\n\n                if (index > rangeStart) {\n                    result = index - rangeStart;\n                } else {\n                    result = rangeStart - index - 1;\n                }\n\n                return result > pageSize ? pageSize : result;\n            },\n\n            scrollIntoView: function(row) {\n                var container = this.wrapper[0];\n                var containerHeight = container.clientHeight;\n                var containerScroll = !this._isScrolledToBottom() ? (this._scrollTop || container.scrollTop) : container.scrollTop;\n                var elementOffset = row[0].offsetTop;\n                var elementHeight = row[0].offsetHeight;\n\n                if (containerScroll > elementOffset) {\n                    this.verticalScrollbar[0].scrollTop -= containerHeight / 2;\n                } else if (elementOffset + elementHeight >= containerScroll + containerHeight) {\n                    this.verticalScrollbar[0].scrollTop += containerHeight / 2;\n                }\n            },\n\n            _fetch: function(firstItemIndex, lastItemIndex, scrollingUp) {\n                var that = this,\n                    dataSource = that.dataSource,\n                    itemHeight = that.itemHeight,\n                    take = dataSource.take(),\n                    rangeStart = that._rangeStart || dataSource.skip() || 0,\n                    currentSkip = math.floor(firstItemIndex / take) * take,\n                    fetching = false,\n                    prefetchAt = 0.33;\n                var scrollbar = that.verticalScrollbar;\n                var webkitCorrection = browser.webkit ? 1 : 0;\n                var total = dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total();\n\n                if (firstItemIndex < rangeStart) {\n\n                    fetching = true;\n                    rangeStart = math.max(0, lastItemIndex - take);\n                    that._scrollTop = scrollbar.scrollTop() - (rangeStart * itemHeight);\n                    that._page(rangeStart, take);\n\n                } else if (lastItemIndex >= rangeStart + take && !scrollingUp) {\n\n                    fetching = true;\n                    rangeStart = math.min(firstItemIndex, total - take);\n\n                    //ensure the scrollbar can be scrolled to bottom with mouse drag\n                    if (scrollbar.scrollTop() >= scrollbar[0].scrollHeight - scrollbar[0].offsetHeight - webkitCorrection) {\n                        that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight;\n                    } else if (that.dataSource._isGroupPaged() && firstItemIndex >= total - take) {\n                        that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight - (that._scrollTop - that._prevScrollTop);\n                    } else {\n                        that._scrollTop = itemHeight;\n                    }\n\n                    that._page(rangeStart, take);\n\n                } else if (!that._fetching && that.options.prefetch) {\n\n                    if (firstItemIndex < (currentSkip + take) - take * prefetchAt && firstItemIndex > take) {\n                        dataSource.prefetch(currentSkip - take, take, $.noop);\n                    }\n                    if (lastItemIndex > currentSkip + take * prefetchAt) {\n                        dataSource.prefetch(currentSkip + take, take, $.noop);\n                    }\n\n                }\n                return fetching;\n            },\n\n            fetching: function() {\n                return this._fetching;\n            },\n\n            _page: function(skip, take, callback) {\n                var that = this,\n                    delayLoading = !that.options.prefetch,\n                    dataSource = that.dataSource,\n                    isGroupPaged = dataSource._isGroupPaged();\n                callback = isFunction(callback) ? callback : $.noop;\n\n                if (that.trigger(PAGING, { skip: skip, take: take })) {\n                    return;\n                }\n\n                clearTimeout(that._timeout);\n                that._fetching = true;\n                that._rangeStart = skip;\n\n                if ((isGroupPaged && dataSource._groupRangeExists(skip, skip + take)) || (!isGroupPaged && dataSource.inRange(skip, take))) {\n                    that.trigger(LOAD_START);\n\n                    dataSource.range(skip, take, function() {\n                        that.trigger(LOAD_END);\n                        callback();\n                        that.trigger(PAGE);\n                    }, \"page\");\n                } else {\n                    if (!delayLoading) {\n                        that.trigger(LOAD_START);\n                    }\n\n                    that._timeout = setTimeout(function() {\n                        if (!that._scrolling) {\n\n                            if (delayLoading) {\n                                that.trigger(LOAD_START);\n                            }\n\n                            dataSource.range(skip, take, function() {\n                                that.trigger(LOAD_END);\n                                callback();\n                                that.trigger(PAGE);\n                            });\n                        }\n                    }, 100);\n                }\n            },\n\n            repaintScrollbar: function(shouldScrollWrapper) {\n                var that = this,\n                    maxHeight = that.options.maxScrollHeight,\n                    dataSource = that.dataSource,\n                    scrollbar = !kendo.support.kineticScrollNeeded ? kendo.support.scrollbar() : 0,\n                    wrapperElement = that.wrapper[0],\n                    totalHeight,\n                    idx,\n                    itemHeight;\n                var wasScrolledToBottom = that._isScrolledToBottom();\n\n                itemHeight = that.itemHeight = that.options.itemHeight() || 0;\n\n                var addScrollBarHeight = (wrapperElement.scrollWidth > wrapperElement.offsetWidth) ? scrollbar : 0;\n\n                totalHeight = (dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total()) * itemHeight + addScrollBarHeight;\n\n                var divElements = $(new Array(math.floor(totalHeight / maxHeight) + 1).join('<div></div>'))\n                    .css({\n                        width: \"1px\",\n                        height: (maxHeight + \"px\")\n                    });\n\n                if (totalHeight % maxHeight) {\n                    divElements = divElements.add($(\"<div></div>\").css({\n                        width: \"1px\",\n                        height: (((totalHeight % maxHeight)) + \"px\")\n                    }));\n                }\n\n                that.verticalScrollbar.empty().append(divElements);\n\n                if (wasScrolledToBottom && !that._isScrolledToBottom() && !that.dataSource._isGroupPaged()) {\n                    that.scrollToBottom();\n                }\n\n                if (typeof(that._scrollTop) !== \"undefined\" && !!shouldScrollWrapper) {\n                    wrapperElement.scrollTop = that._scrollTop;\n                    that._scrollWrapperOnColumnResize();\n                }\n            },\n\n            refresh: function(e) {\n                var that = this,\n                    dataSource = that.dataSource,\n                    rangeStart = that._rangeStart;\n                var action = (e || {}).action;\n                var shouldScrollWrapper = that._isScrolledToBottom() || !action || (action !== ITEM_CHANGE && action !== REMOVE && action !== SYNC);\n\n                that.trigger(LOAD_END);\n                clearTimeout(that._timeout);\n\n                that.repaintScrollbar(shouldScrollWrapper);\n\n                if (that.drag) {\n                    that.drag.cancel();\n                }\n\n                if (typeof(rangeStart) !== \"undefined\" && !that._fetching) { // we are rebound from outside local range should be reset\n                    if (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\")) {\n                        that._rangeStart = dataSource.skip();\n                    }\n\n                    if (dataSource.page() === 1 && (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\" && action !== \"collapseGroup\"))) {\n                        // reset the scrollbar position if datasource is filtered\n                        that.verticalScrollbar[0].scrollTop = 0;\n                    }\n                }\n\n                that._fetching = false;\n            }\n        });\n\n        function attrEquals(attrName, attrValue) {\n            return \"[\" + kendo.attr(attrName) + \"=\" + attrValue + \"]\";\n        }\n\n        function groupCells(count) {\n            return new Array(count + 1).join('<td class=\"k-table-td k-group-cell\">&nbsp;</td>');\n        }\n\n        function stringifyAttributes(attributes) {\n            var attr,\n                result = \" \";\n\n            if (attributes) {\n                if (typeof attributes === STRING) {\n                    return attributes;\n                }\n\n                for (attr in attributes) {\n                    if (attributes[attr] !== '') {\n                        result += attr + '=\"' + attributes[attr] + '\"';\n                    }\n                }\n            }\n            return result;\n        }\n\n        var defaultCommands = {\n            create: {\n                text: \"Add new record\",\n                className: \"k-grid-add\",\n                iconClass: \"k-i-plus\"\n            },\n            cancel: {\n                text: \"Cancel changes\",\n                className: \"k-grid-cancel-changes\",\n                iconClass: \"k-i-cancel\"\n            },\n            save: {\n                text: \"Save changes\",\n                className: \"k-grid-save-changes\",\n                iconClass: \"k-i-check\"\n            },\n            destroy: {\n                text: \"Delete\",\n                className: \"k-grid-remove-command\",\n                iconClass: \"k-i-x\"\n            },\n            edit: {\n                text: \"Edit\",\n                className: \"k-grid-edit-command\",\n                iconClass: \"k-i-pencil\",\n                themeColor: \"primary\"\n            },\n            update: {\n                text: \"Save\",\n                className: \"k-grid-save-command\",\n                iconClass: \"k-i-save\",\n                themeColor: \"primary\"\n            },\n            canceledit: {\n                text: \"Cancel\",\n                className: \"k-grid-cancel-command\",\n                iconClass: \"k-i-cancel-outline\"\n            },\n            excel: {\n                text: \"Export to Excel\",\n                className: \"k-grid-excel\",\n                iconClass: \"k-i-file-excel\"\n            },\n            pdf: {\n                text: \"Export to PDF\",\n                className: \"k-grid-pdf\",\n                iconClass: \"k-i-file-pdf\"\n            },\n            search: {\n                text: \"Search...\",\n                className: \"k-grid-search\"\n            }\n        };\n\n        function cursor(context, value) {\n            $('th, th .k-grid-filter-menu, th .k-link', context)\n                .add(document.body)\n                .css('cursor', value);\n        }\n\n        function reorder(selector, source, dest, before, count) {\n            var sourceIndex = source;\n            source = $();\n            count = count || 1;\n            for (var idx = 0; idx < count; idx++) {\n                source = source.add(selector.eq(sourceIndex + idx));\n            }\n\n            if (typeof dest == \"number\") {\n                source[before ? \"insertBefore\" : \"insertAfter\"](selector.eq(dest));\n            } else {\n                source.appendTo(dest);\n            }\n        }\n\n        function elements(lockedContent, content, filter) {\n            return $(lockedContent).add(content).find(filter);\n        }\n\n        function attachCustomCommandEvent(context, container, commands) {\n            var idx,\n                length,\n                command,\n                commandName;\n\n            commands = !isArray(commands) ? [commands] : commands;\n\n            for (idx = 0, length = commands.length; idx < length; idx++) {\n                command = commands[idx];\n\n                if (isPlainObject(command) && command.click) {\n                    commandName = command.name || command.text;\n                    container.on(CLICK + NS, \".k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"), { commandName: commandName }, command.click.bind(context));\n                }\n            }\n        }\n\n        function normalizeColumns(columns, encoded, hide, locked, parentIds) {\n            return map(columns, function(column) {\n                column = typeof column === STRING ? { field: column } : column;\n\n                var hidden;\n                column.parentIds = parentIds;\n\n                if (column.attributes instanceof Function) {\n                    column._attributesFunction = column.attributes;\n                }\n\n                if (!isVisible(column) || hide) {\n                    column.attributes = addHiddenStyle(column.attributes);\n                    column.footerAttributes = addHiddenStyle(column.footerAttributes);\n                    column.headerAttributes = addHiddenStyle(column.headerAttributes);\n                    hidden = true;\n                }\n\n                var uid = kendo.guid();\n                if (locked && !column.locked) {\n                    column.locked = locked;\n                }\n\n                column.headerAttributes = extend({ headers: parentIds }, column.headerAttributes);\n                if (!column.headerAttributes.id) {\n                    column.headerAttributes = extend({ id: uid }, column.headerAttributes);\n                    column.uid = uid;\n                } else {\n                    column.uid = uid = column.headerAttributes.id;\n                }\n\n                if (column.columns) {\n                    column.columns = normalizeColumns(column.columns, encoded, hidden, column.locked, parentIds ? (parentIds + \" \" + uid) : uid);\n                }\n                return extend({ encoded: encoded, hidden: hidden, locked: locked }, column);\n            });\n        }\n\n        function columnParent(column, columns) {\n            var parents = [];\n            columnParents(column, columns, parents);\n            return parents[parents.length - 1];\n        }\n\n        function columnParents(column, columns, parents) {\n            parents = parents || [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (column === columns[idx]) {\n                    return true;\n                } else if (columns[idx].columns) {\n                    var inserted = parents.length;\n                    parents.push(columns[idx]);\n                    if (!columnParents(column, columns[idx].columns, parents)) {\n                        parents.splice(inserted, parents.length - inserted);\n                    } else {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        }\n\n        function setColumnVisibility(column, visible) {\n            setVisibility(column, visible, visible);\n        }\n\n        function setVisibility(column, visible, show) {\n            var method = show ? removeHiddenStyle : addHiddenStyle;\n            column.hidden = !visible;\n            column.attributes = method(column.attributes);\n            column.footerAttributes = method(column.footerAttributes);\n            column.headerAttributes = method(column.headerAttributes);\n        }\n\n\n        function setColumnMediaVisibility(column, visible) {\n            setColumnMatchesMedia(column);\n            var hideByMedia = column._hideByMedia;\n            setVisibility(column, visible, hideByMedia ? column.matchesMedia : visible);\n        }\n\n        function setColumnMatchesMedia(column) {\n            column.matchesMedia = columnMatchesMedia(column);\n        }\n\n        function columnMatchesMedia(column) {\n            return column && (isUndefined(column.media) || (!isUndefined(column.media) && kendo.matchesMedia(column.media)));\n        }\n\n        function isCellVisible() {\n            return this.style.display !== NONE;\n        }\n\n        function isElementVisible(element) {\n            return $(element)[0].style.display !== NONE;\n        }\n\n        function isVisible(column) {\n            return visibleColumns([column]).length > 0;\n        }\n\n        function visibleColumns(columns) {\n            return grep(columns, function(column) {\n                var result = !column.hidden && column.matchesMedia !== false;\n\n                if (result && column.columns) {\n                    result = visibleColumns(column.columns).length > 0;\n                }\n                return result;\n            });\n        }\n\n        function columnsWithMedia(columns) {\n            var result = [];\n            var column;\n\n            for (var i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (!isUndefined(column.media)) {\n                    if (!isUndefined(column.minScreenWidth)) {\n                        throw new Error(\"Using 'media' and 'minScreenWidth' options at the same time is not supported.\");\n                    }\n\n                    result.push(column);\n                }\n\n                if (column.columns) {\n                    result = result.concat(columnsWithMedia(column.columns));\n                }\n            }\n\n            return result;\n        }\n\n        function isUndefined(value) {\n            return typeof value === \"undefined\";\n        }\n\n        function toJQuery(elements) {\n            return $(elements).map(function() { return this.toArray(); });\n        }\n\n        function updateCellRowSpan(cell, columns, sourceLockedColumnsCount) {\n            var lockedColumnDepth = depth(lockedColumns(columns));\n            var nonLockedColumnDepth = depth(nonLockedColumns(columns));\n\n            var rowSpan = cell.rowSpan;\n            if (sourceLockedColumnsCount) {\n                if (lockedColumnDepth > nonLockedColumnDepth) {\n                    cell.rowSpan = (rowSpan - (lockedColumnDepth - nonLockedColumnDepth)) || 1;\n                } else {\n                    cell.rowSpan = rowSpan + (nonLockedColumnDepth - lockedColumnDepth);\n                }\n            } else {\n                if (lockedColumnDepth > nonLockedColumnDepth) {\n                    cell.rowSpan = rowSpan + (lockedColumnDepth - nonLockedColumnDepth);\n                } else {\n                    cell.rowSpan = (rowSpan - (nonLockedColumnDepth - lockedColumnDepth)) || 1;\n                }\n            }\n        }\n\n        function findColumnByField(columns, field) {\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].field == field) {\n                    return columns[i];\n                }\n            }\n        }\n\n        function moveCellsBetweenContainers(sources, target, leafs, columns, container, destination, groups, action) {\n            var sourcesDepth = depth(sources);\n            var targetDepth = depth([target]);\n\n            if (sourcesDepth > targetDepth) {\n                var groupCells = new Array(groups + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">&nbsp;</th>');\n                var rows = destination.children(\":not(.k-filter-row)\");\n                $(new Array((sourcesDepth - targetDepth) + 1).join(\"<tr class='k-table-row'>\" + groupCells + \"</tr>\")).insertAfter(rows.last());\n            }\n\n            addRowSpanValue(destination, sourcesDepth - targetDepth);\n\n            moveCells(leafs, columns, container, destination, action);\n        }\n\n        function updateCellIndex(thead, columns, offset) {\n            offset = offset || 0;\n\n            var position;\n            var cell;\n            var allColumns = columns;\n            columns = leafColumns(columns);\n\n            var cells = {};\n            var rows = thead.find(\">tr:not(.k-filter-row)\");\n\n            var filter = function() {\n                var el = $(this);\n                return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n            };\n\n            for (var idx = 0, length = columns.length; idx < length; idx++) {\n                position = columnPosition(columns[idx], allColumns);\n\n                if (!cells[position.row]) {\n                    cells[position.row] = rows.eq(position.row)\n                        .find(\".k-header\")\n                        .filter(filter);\n                }\n\n                cell = cells[position.row].eq(position.cell);\n                cell.attr(kendo.attr(\"index\"), offset + idx);\n            }\n\n\n            return columns.length;\n        }\n\n        function depth(columns) {\n            var result = 1;\n            var max = 0;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].columns) {\n                    var temp = depth(columns[idx].columns);\n                    if (temp > max) {\n                        max = temp;\n                    }\n                }\n            }\n            return result + max;\n        }\n\n        function moveCells(leafs, columns, container, destination, action) {\n            var sourcePosition = columnVisiblePosition(leafs[0], columns);\n\n            var ths = container.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row).children(\"th.k-header\");\n\n            var t = $();\n            var sourceIndex = sourcePosition.cell;\n            var idx;\n\n            for (idx = 0; idx < leafs.length; idx++) {\n                t = t.add(ths.eq(sourceIndex + idx));\n            }\n\n            destination.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row)[action](t);\n\n            var children = [];\n            for (idx = 0; idx < leafs.length; idx++) {\n                if (leafs[idx].columns) {\n                    children = children.concat(leafs[idx].columns);\n                }\n            }\n\n            if (children.length) {\n                moveCells(children, columns, container, destination, action);\n            }\n        }\n\n        function columnPosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n\n            for (idx = 0; idx < columns.length; idx++) {\n               if (columns[idx] == column) {\n                    result = { cell: cellCounts[row], row: row };\n                    break;\n               } else if (columns[idx].columns) {\n                   result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n                   if (result) {\n                        break;\n                   }\n               }\n\n               cellCounts[row]++;\n            }\n            return result;\n        }\n        function findParentColumnWithChildren(columns, index, source, rtl) {\n            var target;\n            var locked = !!source.locked;\n            var targetLocked;\n\n            do {\n                target = columns[index];\n                index += rtl ? 1 : -1;\n                targetLocked = !!target.locked;\n            } while (target && index > -1 && index < columns.length && target != source && !target.columns && targetLocked === locked);\n\n            return target;\n        }\n\n        function decorateCellWithClass(html) {\n            var element = html;\n            var classes = element.match(/class=[\"][^\"]+/g);\n            if (classes) {\n                var cssClasses = classes[0].split('\\\"').pop();\n                element = element.replace(cssClasses, cssClasses + \" k-table-td\");\n            } else {\n                element = element.replace(\"<td\",\"<td class='k-table-td'\");\n            }\n\n            return element;\n        }\n\n        function findReorderTarget(columns, target, source, before, masterColumns) {\n            if (target.columns) {\n                target = target.columns;\n                return target[before ? 0 : target.length - 1];\n            } else {\n                var parent = columnParent(target, columns);\n                var parentColumns;\n\n                if (parent) {\n                    parentColumns = parent.columns;\n                } else {\n                    parentColumns = columns;\n                }\n\n                var index = inArray(target, parentColumns);\n                if (index === 0 && before) {\n                    index++;\n                } else if ((index == parentColumns.length - 1 && !before) || (!source.locked && !target.columns && !before)) {\n                    index--;\n                } else if (index > 0 || (index === 0 && !before)) {\n                    index++;\n                }\n\n                var sourceIndex = inArray(source, parentColumns);\n                target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n                var targetIndex = inArray(target, masterColumns);\n                if (target.columns && (!targetIndex || targetIndex === parentColumns.length - 1)) {\n                    return null;\n                }\n\n                if (target && target != source && target.columns) {\n                    return findReorderTarget(columns, target, source, before, masterColumns);\n                }\n            }\n            return null;\n        }\n\n        function columnVisiblePosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n\n            for (idx = 0; idx < columns.length; idx++) {\n               if (columns[idx] == column) {\n                    result = { cell: cellCounts[row], row: row };\n                    break;\n               } else if (columns[idx].columns) {\n                   result = columnVisiblePosition(column, columns[idx].columns, row + 1, cellCounts);\n                   if (result) {\n                        break;\n                   }\n               }\n\n               if (!columns[idx].hidden) {\n                   cellCounts[row]++;\n               }\n            }\n            return result;\n        }\n\n        function flatColumnsInDomOrder(columns) {\n            var result = flatColumns(lockedColumns(columns));\n            return result.concat(flatColumns(nonLockedColumns(columns)));\n        }\n\n        function targetParentContainerIndex(flatColumns, columns, sourceIndex, targetIndex) {\n            var column = flatColumns[sourceIndex];\n            var target = flatColumns[targetIndex];\n\n            var parent = columnParent(column, columns);\n            columns = parent ? parent.columns : columns;\n\n            return inArray(target, columns);\n        }\n\n        function flatColumns(columns) {\n            var result = [];\n            var children = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                result.push(columns[idx]);\n                if (columns[idx].columns) {\n                    children = children.concat(columns[idx].columns);\n                }\n\n            }\n            if (children.length) {\n                result = result.concat(flatColumns(children));\n            }\n            return result;\n        }\n\n        function hiddenLeafColumnsCount(columns) {\n            var counter = 0;\n            var column;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                column = columns[idx];\n\n                if (column.columns) {\n                    counter += hiddenLeafColumnsCount(column.columns);\n                } else if (column.hidden) {\n                    counter++;\n                }\n            }\n            return counter;\n        }\n\n        function sumWidths(cols) {\n            var width = 0;\n\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n                if (!cols[idx].hidden) {\n                    width += parseInt(cols[idx].width, 10);\n                }\n            }\n\n            return width;\n        }\n\n        function columnsWidth(cols) {\n            var colWidth, width = 0;\n\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n                colWidth = cols[idx].style.width;\n                if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                    width += parseInt(colWidth, 10);\n                }\n            }\n\n            return width;\n        }\n\n        function removeRowSpanValue(container, count) {\n            var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var rowSpan;\n            for (var idx = 0; idx < cells.length; idx++) {\n                rowSpan = cells[idx].rowSpan;\n                if (rowSpan > 1) {\n                    cells[idx].rowSpan = (rowSpan - count) || 1;\n                }\n            }\n        }\n\n        function addRowSpanValue(container, count) {\n            var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            for (var idx = 0; idx < cells.length; idx++) {\n                cells[idx].rowSpan += count;\n            }\n        }\n\n        function removeEmptyRows(container) {\n            var rows = container.find(\"tr:not(.k-filter-row)\");\n\n            var emptyRowsCount = rows.filter(function() {\n                return !$(this).children().length;\n            }).remove().length;\n\n            var cells = rows.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            for (var idx = 0; idx < cells.length; idx++) {\n                if (cells[idx].rowSpan > 1) {\n                    cells[idx].rowSpan -= emptyRowsCount;\n                }\n            }\n            return rows.length - emptyRowsCount;\n        }\n\n        function mapColumnToCellRows(columns, cells, rows, rowIndex, offset) {\n            var idx, row, length, children = [];\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                row = rows[rowIndex] || [];\n                row.push(cells.eq(offset + idx));\n                rows[rowIndex] = row;\n\n                if (columns[idx].columns) {\n                    children = children.concat(columns[idx].columns);\n                }\n            }\n\n            if (children.length) {\n                mapColumnToCellRows(children, cells, rows, rowIndex + 1, offset + columns.length);\n            }\n        }\n\n        function setLeftAndRightStyles(element, left, right) {\n            element.css({\n                \"left\": left,\n                \"right\": right\n            });\n        }\n\n        function createColumnAttribute(column, attribute, property) {\n            column[attribute] = column[attribute] || {};\n            column[attribute][property] = column[attribute][property] || \"\";\n        }\n\n        function addColumnAttribute(column, attribute, property, value) {\n            createColumnAttribute(column, attribute, property);\n\n            if (column[attribute][property] !== \"\") {\n                column[attribute][property] += \" \" + value;\n            } else {\n                column[attribute][property] = value;\n            }\n        }\n\n        function removeColumnAttribute(column, attribute, property, value, removeAttributeProperty) {\n            createColumnAttribute(column, attribute, property);\n            if (removeAttributeProperty) {\n                delete column[attribute][property];\n            } else {\n                column[attribute][property] = column[attribute][property].replace(value, \"\");\n            }\n        }\n\n        function lockedColumns(columns) {\n            return grep(columns, function(column) {\n                return column.locked;\n            });\n        }\n\n        function nonLockedColumns(columns) {\n            return grep(columns, function(column) {\n                return !column.locked;\n            });\n        }\n\n        function stickyColumns(columns) {\n            return grep(columns, function(column) {\n                return column.sticky && !column.locked;\n            });\n        }\n\n        function visibleStickyColumns(columns) {\n            return grep(columns, function(column) {\n                return column.sticky && !column.locked && isVisible(column);\n            });\n        }\n\n        function visibleNonLockedColumns(columns) {\n            return grep(columns, function(column) {\n                return !column.locked && isVisible(column);\n            });\n        }\n\n        function visibleLockedColumns(columns) {\n            return grep(columns, function(column) {\n                return column.locked && isVisible(column);\n            });\n        }\n\n        function visibleLeafColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].hidden) {\n                    continue;\n                }\n\n                if (columns[idx].columns) {\n                    result = result.concat(visibleLeafColumns(columns[idx].columns));\n                } else {\n                    result.push(columns[idx]);\n                }\n            }\n\n            return result;\n        }\n\n        function visibleLeafExportColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].hidden) {\n                    continue;\n                }\n\n                if (columns[idx].columns) {\n                    result = result.concat(visibleLeafColumns(columns[idx].columns));\n                } else {\n                    result.push({\n                        field: columns[idx].field,\n                        width: columns[idx].width,\n                        values: columns[idx].values,\n                        title: columns[idx].title\n                    });\n                }\n            }\n\n            return result;\n        }\n\n        function childColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].columns) {\n                    result = result.concat(columns[idx].columns);\n                }\n            }\n\n            return result;\n        }\n\n        function visibleChildColumns(columns) {\n            var result = childColumns(columns);\n\n            result = result.filter(function(e) {\n                return !e.hidden;\n            });\n\n            return result;\n        }\n\n        function leafColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (!columns[idx].columns) {\n                    result.push(columns[idx]);\n                    continue;\n                }\n                result = result.concat(leafColumns(columns[idx].columns));\n            }\n\n            return result;\n        }\n\n        function getColumnsFields(columns) {\n            var result = [];\n            columns = leafColumns(columns);\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (typeof columns[idx] === \"string\") {\n                    result.push(columns[idx]);\n                } else if (columns[idx].field) {\n                    result.push(columns[idx].field);\n                }\n            }\n            return result;\n        }\n\n        function editField(column) {\n            return {\n                field: column.field,\n                title: column.title,\n                format: column.format,\n                editor: column.editor,\n                values: column.values,\n                editorOptions: extend(true, { format: column.format }, column.editorOptions),\n                label: column.title || column.field || \"\"\n            };\n        }\n\n        function leafDataCells(container) {\n            var rows = container.find(\">tr:not(.k-filter-row)\");\n\n            var filter = function() {\n                var el = $(this);\n                return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n            };\n\n            var cells = $();\n            if (rows.length > 1) {\n                cells = rows.find(\"th\")\n                    .filter(filter)\n                    .filter(function() { return this.rowSpan > 1; });\n            }\n\n            cells = cells.add(rows.last().find(\"th\").filter(filter));\n\n            var indexAttr = kendo.attr(\"index\");\n            cells.sort(function(a, b) {\n                a = $(a);\n                b = $(b);\n\n                var indexA = a.attr(indexAttr);\n                var indexB = b.attr(indexAttr);\n\n                if (indexA === undefined$1) {\n                    indexA = $(a).index();\n                }\n                if (indexB === undefined$1) {\n                    indexB = $(b).index();\n                }\n\n                indexA = parseInt(indexA, 10);\n                indexB = parseInt(indexB, 10);\n                return indexA > indexB ? 1 : (indexA < indexB ? -1 : 0);\n            });\n\n            return cells;\n        }\n\n        function parentColumnsCells(cell) {\n            var container = cell.closest(\"table\");\n            var result = $().add(cell);\n\n            var row = cell.closest(TR);\n            var headerRows = container.find(\"tr:not(.k-filter-row)\");\n            var level = headerRows.index(row);\n            if (level > 0) {\n                var parent = headerRows.eq(level - 1);\n                var parentCellsWithChildren = parent.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                    return !$(this).attr(\"rowspan\");\n                });\n\n                var offset = 0;\n                var index = row.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").index(cell);\n\n                var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                    return this.colSpan > 1;\n                });\n\n                for (var idx = 0; idx < prevCells.length; idx++) {\n                    offset += prevCells[idx].colSpan || 1;\n                }\n\n                index += Math.max(offset - 1, 0);\n\n                offset = 0;\n                for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                    var parentCell = parentCellsWithChildren.eq(idx);\n                    if (parentCell.attr(\"data-colspan\")) {\n                        offset += parentCell[0].getAttribute(\"data-colspan\");\n                    } else {\n                        offset += 1;\n                    }\n                    if (index >= idx && index < offset) {\n                        result = parentColumnsCells(parentCell).add(result);\n                        break;\n                    }\n                }\n            }\n            return result;\n        }\n\n        function childColumnsCells(cell) {\n            var container = cell.closest(\"thead\");\n            var result = $().add(cell);\n\n            var row = cell.closest(TR);\n            var headerRows = container.find(\"tr:not(.k-filter-row)\");\n            var level = headerRows.index(row) + cell[0].rowSpan;\n            var colSpanAttr = kendo.attr(\"colspan\");\n\n            if (level <= headerRows.length - 1) {\n                var child = row.next();\n                var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n                var idx;\n\n                prevCells = prevCells.filter(function() {\n                    return !this.rowSpan || this.rowSpan === 1;\n                });\n\n                var offset = 0;\n\n                for (idx = 0; idx < prevCells.length; idx++) {\n                    offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n                }\n\n                var cells = child.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n                var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n\n                idx = 0;\n\n                while (idx < colSpan) {\n                    child = cells.eq(idx + offset);\n                    result = result.add(childColumnsCells(child));\n                    var value = parseInt(child.attr(colSpanAttr), 10);\n                    if (value > 1) {\n                        colSpan -= value - 1;\n                    }\n                    idx++;\n                }\n            }\n\n            return result;\n        }\n\n        function appendContent(tbody, table, html, empty, size) {\n            var placeholder,\n                tmp = tbody;\n\n            // necessary for AngularJS to cleanup its guts.\n            if (empty) {\n                tbody.empty();\n            }\n\n            if (tbodySupportsInnerHtml) {\n                var $html = $(html);\n                kendo.applyStylesFromKendoAttributes($html, [\"display\", \"left\", \"right\"]);\n                tbody.empty().append($html);\n            } else {\n                placeholder = document.createElement(DIV);\n                placeholder.innerHTML = \"<table class='k-grid-table k-table'><tbody class='k-table-tbody'>\" + html + \"</tbody></table>\";\n                $(placeholder).find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", size));\n                tbody = placeholder.firstChild.firstChild;\n                table[0].replaceChild(tbody, tmp[0]);\n                tbody = $(tbody);\n            }\n            return tbody;\n        }\n\n        function addHiddenStyle(attr) {\n            attr = attr || {};\n            var kendoStyleAttrObject = {};\n            kendoStyleAttrObject[kendo.attr(\"style-display\")] = \"none\";\n\n            return extend({}, attr, kendoStyleAttrObject);\n        }\n\n        function hasHiddenStyle(attr) {\n            attr = attr || {};\n\n            return !!attr[kendo.attr(\"style-display\")];\n        }\n\n        function removeHiddenStyle(attr) {\n            attr = attr || {};\n            delete attr[kendo.attr(\"style-display\")];\n\n            return attr;\n        }\n\n        function normalizeCols(table, visibleColumns, hasDetails, groups) {\n            var colgroup = table.find(\">colgroup\"),\n                width,\n                cols = map(visibleColumns, function(column) {\n                        width = column.width;\n                        if (width && parseInt(width, 10) !== 0) {\n                            return kendo.format((\"<col \" + (kendo.attr('style-width')) + \"=\\\"{0}\\\"/>\"), typeof width === STRING ? width : width + PX);\n                        }\n\n                        return \"<col />\";\n                    });\n\n            if (hasDetails || colgroup.find(\".k-hierarchy-col\").length) {\n                cols.splice(0, 0, '<col class=\"k-hierarchy-col\" />');\n            }\n\n            if (colgroup.length) {\n                colgroup.remove();\n            }\n\n            colgroup = $(new Array(groups + 1).join('<col class=\"k-group-col\">') + cols.join(\"\"));\n            kendo.applyStylesFromKendoAttributes(colgroup, [\"width\"]);\n\n            if (!colgroup.is(\"colgroup\")) {\n                colgroup = $(\"<colgroup/>\").append(colgroup);\n            }\n\n            table.prepend(colgroup);\n        }\n\n        function normalizeHeaderCells(container, columns) {\n            var lastIndex = 0;\n            var idx , len;\n            var th = container.find(\"th:not(.k-group-cell)\");\n\n            for (idx = 0, len = columns.length; idx < len; idx ++) {\n                if (columns[idx].locked) {\n                    th.eq(idx).insertBefore(th.eq(lastIndex));\n                    th = container.find(\"th:not(.k-group-cell)\");\n                    lastIndex ++;\n                }\n            }\n        }\n\n        function convertToObject(array) {\n            var result = {},\n                item,\n                idx,\n                length;\n\n            for (idx = 0, length = array.length; idx < length; idx++) {\n                item = array[idx];\n                result[item.value] = item.text;\n            }\n\n            return result;\n        }\n\n        function formatGroupValue(value, format, columnValues, encoded) {\n            var isForeignKey = columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0],\n                groupValue = isForeignKey ? convertToObject(columnValues)[value] : value;\n\n            groupValue = groupValue != null ? groupValue : \"\";\n\n            return format ? kendo.format(format, groupValue) : (encoded === false ? groupValue : kendo.htmlEncode(groupValue));\n        }\n\n        function setCellVisibility(cells, index, visible) {\n            var pad = 0,\n                state,\n                cell = cells[pad];\n\n            while (cell) {\n                state = visible ? true : cell.style.display !== NONE;\n\n                if (state && !nonDataCellsRegExp.test(cell.className) && --index < 0) {\n                    cell.style.display = visible ? \"\" : NONE;\n                    break;\n                }\n\n                cell = cells[++pad];\n            }\n        }\n\n        function hideColumnCells(rows, columnIndex) {\n            var idx = 0,\n                length = rows.length,\n                cell, row;\n\n            for ( ; idx < length; idx += 1) {\n                row = rows.eq(idx);\n                if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                    cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n                } else {\n                    if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                        cell = $(cell);\n                        cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n                        cell.find(\"col\").eq(columnIndex).remove();\n                        row = cell.find(TR).first();\n                    }\n\n                    setCellVisibility(row[0].cells, columnIndex, false);\n                }\n            }\n        }\n\n        function groupRows(data) {\n            var result = [];\n            var item;\n\n            for (var idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                    break;\n                }\n\n                result.push(item);\n\n                if (item.hasSubgroups) {\n                    result = result.concat(groupRows(item.items));\n                }\n            }\n\n            return result;\n        }\n\n        function groupFooters(data) {\n            var result = [];\n            var item;\n\n            for (var idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                    break;\n                }\n\n                if (item.hasSubgroups) {\n                    result = result.concat(groupFooters(item.items));\n                }\n\n                result.push(item.aggregates);\n            }\n\n            return result;\n        }\n\n        function showColumnCells(rows, columnIndex) {\n            var idx = 0,\n                length = rows.length,\n                cell, row, columns;\n\n            for ( ; idx < length; idx += 1) {\n                row = rows.eq(idx);\n                if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                    cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n                } else {\n                    if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                        cell = $(cell);\n                        cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n                        normalizeCols(cell.find(\">form>table\"), visibleColumns(columns), false, 0);\n                        row = cell.find(TR).first();\n                    }\n\n                    setCellVisibility(row[0].cells, columnIndex, true);\n                }\n            }\n        }\n\n        function updateColspan(toAdd, toRemove, num) {\n            num = num || 1;\n\n            var item, idx, length;\n            for (idx = 0, length = toAdd.length; idx < length; idx++) {\n                item = toAdd.eq(idx).children(\":not([hidden])\").last();\n                item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) + num);\n\n                item = toRemove.eq(idx).children(\":not([hidden])\").last();\n                item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) - num);\n            }\n        }\n\n        function tableWidth(table) {\n            var idx, length, width = 0;\n            var cols = table.find(\">colgroup>col\");\n\n            for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                width += parseInt(cols[idx].style.width, 10);\n            }\n\n            return width;\n        }\n        var Grid = kendo.ui.DataBoundWidget.extend({\n            init: function(element, options, events) {\n                var that = this;\n\n                options = isArray(options) ? { dataSource: options } : options;\n\n                Widget.fn.init.call(that, element, options);\n\n                if (events) {\n                    that._events = events;\n                }\n\n                isRtl = kendo.support.isRtl(element);\n                CARET_ALT_RIGHT = isRtl ? CARET_ALT_LEFT : CARET_ALT_RIGHT_CACHE;\n\n                that._element();\n\n                that._ariaId();\n\n                that._columns($.extend(true, [], that.options.columns));\n\n                if (that._foreignKeyPromises) {\n                    $.when.apply(null, that._foreignKeyPromises)\n                        .then(function() {\n                            that._foreignKeyPromises = null;\n                            that._continueInit();\n                        });\n                } else {\n                    that._continueInit();\n                }\n            },\n\n            _continueInit: function() {\n                var that = this;\n\n                that._dataSource();\n\n                that._stickyColumns();\n\n                that._tbody();\n\n                that._thead();\n\n                that._rowResizing();\n\n                that._groupable();\n\n                that._toolbar();\n\n                that._pageable();\n\n                that._setContentHeight();\n\n                that._templates();\n\n                that._navigatable();\n\n                that._selectable();\n\n                that._clipboard();\n\n                that._details();\n\n                that._editable();\n\n                that._attachCustomCommandsEvent();\n\n                that._adaptiveColumns();\n\n                that._minScreenSupport();\n\n                if (that.options.autoBind) {\n                    that.dataSource.fetch();\n                } else {\n                    that._group = that._groups() > 0;\n                    that._footer();\n                }\n\n                if (that.options.contextMenu) {\n                    that._initContextMenu();\n                }\n\n                if (that.lockedContent) {\n                    that.wrapper.addClass(\"k-grid-lockedcolumns\");\n                    that._resizeHandler = function() {\n                        that.resize();\n                    };\n                    $(window).on(\"resize\" + NS, that._resizeHandler);\n                }\n\n                kendo.notify(that);\n\n                if (that._showWatermarkOverlay) {\n                    that._showWatermarkOverlay(that.wrapper[0]);\n                }\n            },\n\n            events: [\n               CHANGE,\n               CHANGING,\n               \"dataBinding\",\n               \"cancel\",\n               DATABOUND,\n               DETAILEXPAND,\n               DETAILCOLLAPSE,\n               DETAILINIT,\n               FILTERMENUINIT,\n               FILTERMENUOPEN,\n               COLUMNMENUINIT,\n               COLUMNMENUOPEN,\n               EDIT,\n               BEFOREEDIT,\n               SAVE,\n               REMOVE,\n               SAVECHANGES,\n               CELLCLOSE,\n               ROWRESIZE,\n               COLUMNRESIZE,\n               COLUMNREORDER,\n               COLUMNSHOW,\n               COLUMNHIDE,\n               COLUMNLOCK,\n               COLUMNUNLOCK,\n               COLUMNSTICK,\n               COLUMNUNSTICK,\n               ROWREORDER,\n               NAVIGATE,\n               \"page\",\n               \"sort\",\n               \"filter\",\n               \"group\",\n               \"groupExpand\",\n               \"groupCollapse\",\n               \"kendoKeydown\"\n            ],\n\n            setDataSource: function(dataSource) {\n                var that = this;\n                var scrollable = that.options.scrollable;\n                var scrollableContent;\n\n                that.options.dataSource = dataSource;\n\n                that._dataSource();\n\n                that._pageable();\n\n                that._thead();\n\n                that._rowResizing();\n\n                if (scrollable) {\n                    if (scrollable.virtual) {\n                        scrollableContent = that.content.find(\">.k-virtual-scrollable-wrap\");\n                        kendo.scrollLeft(scrollableContent, leftMostPosition(scrollableContent, isRtl));\n                    } else {\n                        scrollableContent = that.tbody;\n                        kendo.scrollLeft(that.content, leftMostPosition(scrollableContent, isRtl));\n                    }\n                }\n\n                if (that.options.groupable) {\n                    that._groupable();\n                }\n\n                if (that.virtualScrollable) {\n                    that.virtualScrollable.setDataSource(that.options.dataSource);\n                }\n\n                if (that.options.navigatable) {\n                    that._navigatable();\n                }\n\n                if (that.options.selectable) {\n                    that._selectable();\n                }\n\n                if (that.options.autoBind) {\n                    that.dataSource.fetch();\n                } else {\n                    that._footer();\n                }\n            },\n\n            options: {\n                name: \"Grid\",\n                columns: [],\n                toolbar: null,\n                autoBind: true,\n                filterable: false,\n                scrollable: true,\n                sortable: false,\n                selectable: false,\n                allowCopy: false,\n                navigatable: false,\n                pageable: false,\n                persistSelection: false,\n                editable: false,\n                encodeTitles: false,\n                groupable: false,\n                rowTemplate: \"\",\n                altRowTemplate: \"\",\n                search: false,\n                noRecords: false,\n                dataSource: {},\n                height: null,\n                resizable: false,\n                reorderable: false,\n                columnMenu: false,\n                detailTemplate: null,\n                contextMenu: false,\n                columnResizeHandleWidth: 3,\n                size: \"medium\",\n                mobile: \"\",\n                loaderType: \"loadingPanel\",\n                messages: {\n                    editable: {\n                        cancelDelete: CANCELDELETE,\n                        confirmation: DELETECONFIRM,\n                        confirmDelete: CONFIRMDELETE\n                    },\n                    commands: {\n                        create: defaultCommands.create.text,\n                        cancel: defaultCommands.cancel.text,\n                        save: defaultCommands.save.text,\n                        destroy: defaultCommands.destroy.text,\n                        edit: defaultCommands.edit.text,\n                        update: defaultCommands.update.text,\n                        canceledit: defaultCommands.canceledit.text,\n                        excel: defaultCommands.excel.text,\n                        pdf: defaultCommands.pdf.text,\n                        search: defaultCommands.search.text,\n                        select: \"Select\",\n                        selectRow: \"Select Row\",\n                        selectAllRows: \"All rows\",\n                        clearSelection: \"Clear selection\",\n                        copySelection: \"Copy selection\",\n                        copySelectionNoHeaders: \"Copy selection (No Headers)\",\n                        reorderRow: \"Reorder row\",\n                        reorderRowUp: \"Up\",\n                        reorderRowDown: \"Down\",\n                        reorderRowTop: \"Top\",\n                        reorderRowBottom: \"Bottom\",\n                        exportPdf: \"Export to PDF\",\n                        exportExcel: \"Export to Excel\",\n                        exportToExcelAll: \"All\",\n                        exportToExcelSelection: \"Selection\",\n                        exportToExcelSelectionNoHeaders: \"Selection (No Headers)\",\n                        sortAsc: \"Sort Ascending\",\n                        sortDesc: \"Sort Descending\",\n                        moveGroupPrevious: \"Move previous\",\n                        moveGroupNext: \"Move next\",\n                    },\n                    noRecords: NORECORDS,\n                    expandCollapseColumnHeader: \"\",\n                    groupHeader: \"Press ctrl + space to group\",\n                    ungroupHeader: \"Press ctrl + space to ungroup\",\n                    itemsSelected: \"items selected\",\n                    dragHandleLabel: \"Drag row\",\n                    toolbarLabel: \"grid toolbar\",\n                    groupingHeaderLabel: \"grid grouping header\",\n                    filterCellTitle: \"filter cell\"\n                },\n                width: null\n            },\n\n            destroy: function() {\n                var that = this,\n                    element,\n                    reorderableInstance;\n\n                that._angularItems(\"cleanup\");\n                that._destroyColumnAttachments();\n\n                Widget.fn.destroy.call(that);\n\n                if (this._navigatableTables) {\n                    this._navigatableTables.off(NS);\n                    this._navigatableTables = null;\n                    this._headertables = null;\n                }\n\n                if (that._resizeHandler) {\n                    $(window).off(\"resize\" + NS, that._resizeHandler);\n                }\n\n                if (that.pager && that.pager.element) {\n                    that.pager.destroy();\n                }\n\n                if (that.timer) {\n                    clearTimeout(that.timer);\n                }\n\n                if (that._progressTimeOut) {\n                    clearTimeout(that._progressTimeOut);\n                }\n\n                if (that._collapseGroupsTimeOut) {\n                    clearTimeout(that._collapseGroupsTimeOut);\n                }\n\n                if (that._endlessFetchTimeOut) {\n                    clearTimeout(that._endlessFetchTimeOut);\n                }\n\n                that.pager = null;\n\n                that._destroyGroupable();\n\n                reorderableInstance = that.wrapper.data(\"kendoReorderable\");\n                if (reorderableInstance) {\n                    reorderableInstance.destroy();\n                }\n\n                reorderableInstance = that.tbody ? that.tbody.data(\"kendoReorderable\") : null;\n                if (reorderableInstance) {\n                    reorderableInstance.destroy();\n                }\n\n                if (that.selectable && that.selectable.element) {\n                    that.selectable.destroy();\n\n                    that.clearArea();\n                    that._selectedIds = null;\n\n                    if (that.copyHandler) {\n                        that.wrapper.off(\"keydown\", that.copyHandler);\n                        that.unbind(that.copyHandler);\n                    }\n                    if (that.updateClipBoardState) {\n                        that.unbind(that.updateClipBoardState);\n                        that.updateClipBoardState = null;\n                    }\n                    if (that.clearAreaHandler) {\n                        that.wrapper.off(\"keyup\", that.clearAreaHandler);\n                    }\n                }\n\n                that.selectable = null;\n\n                if (that.resizable) {\n                    that.resizable.destroy();\n\n                    if (that._resizeUserEvents) {\n                        if (that._resizeHandleDocumentClickHandler) {\n                            $(document).off(\"click\", that._resizeHandleDocumentClickHandler);\n                        }\n                        that._resizeUserEvents.destroy();\n                        that._resizeUserEvents = null;\n                    }\n                    that.resizable = null;\n                }\n\n                that._destroyRowResizing();\n\n                that._destroyVirtualScrollable();\n\n                if (that.editableUserEvents) {\n                    that.editableUserEvents.destroy();\n                    that.editableUserEvents = null;\n                }\n\n                if (that._lockedContentUserEvents) {\n                    that._lockedContentUserEvents.destroy();\n                    that._lockedContentUserEvents = null;\n                }\n\n                that._destroyEditable();\n\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler)\n                               .unbind(PROGRESS, that._progressHandler)\n                               .unbind(ERROR, that._errorHandler)\n                               .unbind(SORT, that._clearSortClasses);\n\n                    that._refreshHandler = that._progressHandler = that._errorHandler = that._sortHandler = null;\n                }\n\n                element = that.element\n                    .add(that.wrapper)\n                    .add(that.table)\n                    .add(that.thead)\n                    .add(that.wrapper.find(\">.k-grid-toolbar\"));\n\n                if (that.content) {\n                    element = element\n                            .add(that.content)\n                            .add(that.content.find(\">.k-virtual-scrollable-wrap\"));\n                }\n\n                if (that.lockedHeader) {\n                    that._removeLockedContainers();\n                }\n\n                if (that.pane) {\n                    that.pane.destroy();\n                }\n\n                if (that._isMobile) {\n                    that.wrapper.off(\"transitionend\" + NS);\n                    that.wrapper.off(\"contextmenu\" + NS);\n                }\n\n                if (that.minScreenResizeHandler) {\n                    $(window).off(\"resize\", that.minScreenResizeHandler);\n                }\n\n                that._detachColumnMediaResizeHandler();\n\n                if (that._draggableInstance && that._draggableInstance.element) {\n                    that._draggableInstance.destroy();\n                }\n\n                that._draggableInstance = null;\n\n                if (that._draggableRowsInstance && that._draggableRowsInstance.element) {\n                    that._draggableRowsInstance.destroy();\n                }\n\n                if (that.tbodyContextMenu) {\n                    that.tbodyContextMenu.destroy();\n                }\n\n                if (that.theadContextMenu) {\n                    that.theadContextMenu.destroy();\n                }\n\n                that._draggableRowsInstance = null;\n\n                element.off(NS);\n\n                kendo.destroy(that.wrapper);\n\n                that.rowTemplate =\n                that.altRowTemplate =\n                that.lockedRowTemplate =\n                that.lockedAltRowTemplate =\n                that.detailTemplate =\n                that.footerTemplate =\n                that.groupFooterTemplate =\n                that.lockedGroupFooterTemplate =\n                that.noRecordsTemplate = null;\n\n                that.scrollables =\n                that.thead =\n                that.tbody =\n                that.element =\n                that.table =\n                that.content =\n                that.footer =\n                that.wrapper =\n                that.lockedTable =\n                that.lockedContent =\n                that.lockedHeader =\n                that.lockedFooter =\n                that._groupableClickHandler =\n                that._groupRows =\n                that._setContentWidthHandler = null;\n            },\n\n            getOptions: function() {\n                var options = this.options;\n                options.dataSource = null;\n\n                var result = extend(true, {}, this.options);\n                result.columns = kendo.deepExtend([], this.columns);\n\n                var dataSource = this.dataSource;\n\n                var initialData = dataSource.options.data && dataSource._data;\n                dataSource.options.data = null;\n\n                result.dataSource = $.extend(true, {}, dataSource.options);\n\n                dataSource.options.data = initialData;\n\n                result.dataSource.data = initialData;\n                result.dataSource.page = dataSource.page();\n                result.dataSource.filter = $.extend(true, {}, dataSource.filter());\n                result.dataSource.pageSize = dataSource.pageSize();\n                result.dataSource.sort = dataSource.sort();\n                result.dataSource.group = dataSource.group();\n                result.dataSource.aggregate = dataSource.aggregate();\n\n                if (result.dataSource.transport) {\n                    result.dataSource.transport.dataSource = null;\n                }\n\n                if (result.pageable && result.pageable.pageSize) {\n                    result.pageable.pageSize = dataSource.pageSize();\n                }\n\n                result.$angular = undefined$1;\n\n                return result;\n            },\n\n            setOptions: function(options) {\n                var currentOptions = this.getOptions();\n                kendo.deepExtend(currentOptions, options);\n                if (!options.dataSource) {\n                    currentOptions.dataSource = this.dataSource;\n                } else {\n                  if (options.dataSource.filter) {\n                      currentOptions.dataSource.filter = options.dataSource.filter;\n                  }\n                }\n                var wrapper = this.wrapper;\n                var events = this._events;\n                var element = this.element;\n\n                this.destroy();\n                this.options = null;\n                if (this._isMobile) {\n                    var mobileWrapper = wrapper.closest(kendo.roleSelector(\"pane\")).parent();\n                    mobileWrapper.after(wrapper);\n                    mobileWrapper.remove();\n                    wrapper.removeClass(\"k-grid-mobile\");\n                }\n                if (wrapper[0] !== element[0]) {\n                    wrapper.before(element);\n                    wrapper.remove();\n                }\n                element.empty();\n\n                this.init(element, currentOptions, events);\n                this._setEvents(currentOptions);\n            },\n\n            items: function() {\n                if (this.lockedContent) {\n                    return this._items(this.tbody).add(this._items(this.lockedTable.children(\"tbody\")));\n                } else {\n                    return this._items(this.tbody);\n                }\n            },\n\n            _items: function(container, includeGroupRows) {\n                return container.children().filter(function() {\n                    var tr = $(this);\n                    return (includeGroupRows ? !tr.hasClass(\"k-detail-row\") : !tr.hasClass(GROUPING_ROW)) && !tr.hasClass(\"k-detail-row\") && !tr.hasClass(\"k-group-footer\");\n                });\n            },\n\n            dataItems: function() {\n                var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n                if (this.lockedContent) {\n                    var n = dataItems.length, tmp = new Array(2 * n);\n                    for (var i = n; --i >= 0;) {\n                        tmp[i] = tmp[i + n] = dataItems[i];\n                    }\n                    dataItems = tmp;\n                }\n\n                return dataItems;\n            },\n\n            _destroyColumnAttachments: function() {\n                var that = this;\n\n                that.resizeHandle = null;\n\n                if (!that.thead) {\n                    return;\n                }\n\n                this.angular(\"cleanup\", function() {\n                    return { elements: that.thead.get() };\n                });\n\n                that.thead.add(that.lockedHeader).find(\"th\").each(function() {\n                    var th = $(this),\n                        filterMenu = th.data(\"kendoFilterMenu\"),\n                        sortable = th.data(\"kendoColumnSorter\"),\n                        columnMenu = th.data(\"kendoColumnMenu\");\n\n                    if (filterMenu) {\n                        filterMenu.destroy();\n                    }\n\n                    if (sortable) {\n                        sortable.destroy();\n                    }\n\n                    if (columnMenu) {\n                        columnMenu.destroy();\n                    }\n                });\n            },\n\n            _attachCustomCommandsEvent: function() {\n                var that = this,\n                    columns = leafColumns(that.columns || []),\n                    command,\n                    idx,\n                    length;\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    command = columns[idx].command;\n\n                    if (command) {\n                        attachCustomCommandEvent(that, that.wrapper, command);\n                    }\n                }\n            },\n\n            _aria: function() {\n                var wrapper = this.wrapper,\n                    gridRole = this._hasDetails() ? \"treegrid\" : this.options.navigatable ? \"grid\" : null,\n                    table = this.table,\n                    toolbar = wrapper.find(\".k-grid-toolbar\"),\n                    groupingHeader = wrapper.find(\".k-grouping-header\"),\n                    gridId = table.attr(ID),\n                    tableTabindex = table.attr(TABINDEX),\n                    tbodyId, headerGroupId, footerGroupId, tableOwned,\n                    numberOfFixedRows = this.thead.find(TR).length + this.wrapper.find(\".k-grid-footer-wrap table tr\").length,\n                    trailingColumns = this._trailingColumns(),\n                    virtual = this.virtualScroll,\n                    pageable = this.options.pageable,\n                    rowsCount;\n\n                table.attr(TABINDEX, tableTabindex >= 0 ? tableTabindex : 0);\n\n                if (gridRole) {\n                    table.attr(ROLE, gridRole);\n                }\n\n                table.find(\"tbody, thead, tfoot\").attr(ROLE, ROWGROUP);\n                table.find(TR).attr(ROLE, ROW);\n                table.find(\"th\").attr(ROLE, COLUMNHEADER);\n                table.find(\"td\").attr(ROLE, GRIDCELL);\n\n                if ((pageable && this.dataSource.totalPages() > 1) || (virtual && virtual.rows)) {\n                    if (this._groups() > 0) {\n                        rowsCount = -1;\n                    } else if (this._hasDetails()) {\n                        rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                    } else {\n                        rowsCount = numberOfFixedRows + this.dataSource.total();\n                    }\n\n                    table.attr(ARIA_ROWCOUNT, rowsCount);\n                } else if (this._hasDetails()) {\n                    if (this._groups() > 0) {\n                        rowsCount = -1;\n                    } else {\n                        rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                    }\n\n                    table.attr(ARIA_ROWCOUNT, rowsCount);\n                }\n\n                if (rowsCount && rowsCount > 0) {\n                    this._ariaRowIndex();\n                }\n\n                if ((virtual && virtual.columns) ||\n                    (!table.attr(ARIA_COLCOUNT) &&\n                        (table.find(\"td:not([group-header-spanned-hidden]):hidden\").length > 0 ||\n                        wrapper.find(\".k-grid-content-locked td:not([group-header-spanned-hidden]):hidden\").length > 0))) {\n                            table.attr(ARIA_COLCOUNT, trailingColumns + leafColumns(this.columns).length);\n                            this._ariaColumnIndex();\n                }\n\n                if (!gridId) {\n                    gridId = kendo.guid();\n                    table.attr(ID, gridId);\n                }\n\n                if (this.pager) {\n                    this.pager.element.attr(ARIA_CONTROLS, gridId);\n                }\n\n                toolbar.attr({\n                    role: \"toolbar\",\n                    \"aria-label\": this.options.messages.toolbarLabel,\n                    \"aria-controls\": gridId\n                });\n\n                groupingHeader.attr({\n                    role: \"toolbar\",\n                    \"aria-label\": this.options.messages.groupingHeaderLabel,\n                    \"aria-controls\": gridId\n                });\n\n                headerGroupId = this._ariaHeaderFooter(\"header\", \"thead\", \"th, td\", COLUMNHEADER);\n                footerGroupId = this._ariaHeaderFooter(\"footer\", \"tfoot\", \"td\", GRIDCELL);\n\n                if (wrapper.find(\".k-grid-content-locked\").length > 0) {\n                    this._ariaLockedContent();\n                }\n\n                if (!!headerGroupId || !!footerGroupId) {\n                    tbodyId = this.tbody.attr(ID) || kendo.guid();\n                    tableOwned = [headerGroupId, tbodyId, footerGroupId].join(\" \");\n\n                    this.tbody.attr(ID, tbodyId);\n                    table.attr(ARIA_OWNS, tableOwned);\n                }\n\n                if (this.options.groupable) {\n                    this._ariaGroupTitles();\n                }\n            },\n\n            _ariaColumnIndex: function() {\n                var trailingColumns = this._trailingColumns(),\n                    dataVirtual = this.tbody.find(\">tr\").last().find(\"> td[data-virtual]\"),\n                    headerRows = this.thead.find(\">tr\").not(\".k-filter-row\"),\n                    lockedHeaderRows = this.wrapper.find(\".k-grid-header-locked thead > tr\").not(\".k-filter-row\"),\n                    firstIndex = Number.MAX_VALUE,\n                    lastIndex = 0,\n                    lockedLastIndex = 0,\n                    previousVirtual = 0,\n                    nextVirtual = 0,\n                    previousIndex, i, cells, dataIndex, cellsIndex,\n                    eachHeaderCell = function(j, cell) {\n                        var current = cell.getAttribute(\"data-index\"),\n                            currentIndex = Number(current),\n                            lockedParent = $(cell).closest(\".k-grid-header-locked\");\n\n                        if (lockedParent.length === 0 && currentIndex < firstIndex) {\n                            firstIndex = currentIndex;\n                        }\n\n                        if (lockedParent.length > 0 && lockedLastIndex < currentIndex) {\n                            lockedLastIndex = currentIndex;\n                        }\n\n                        if (lockedParent.length === 0 && lastIndex < currentIndex) {\n                            lastIndex = currentIndex;\n                        }\n\n                        if (current !== null) {\n                            cell.setAttribute(ARIA_COLINDEX, Number(currentIndex) + 1);\n                            previousIndex = Number(currentIndex) + 1 + cell.getAttribute(\"colspan\");\n                        } else {\n                            cell.setAttribute(ARIA_COLINDEX, previousIndex + 1);\n                            previousIndex = previousIndex + cell.getAttribute(\"colspan\");\n                        }\n                    };\n\n                if (dataVirtual.length === 2) {\n                    previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                    nextVirtual = Number(dataVirtual[1].getAttribute(\"colspan\"));\n                } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 0) {\n                    previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 1) {\n                    nextVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                }\n\n                for (i = 0; i < lockedHeaderRows.length; i++) {\n                    previousIndex = 0;\n                    lockedHeaderRows.eq(i).find(\"th\").each(eachHeaderCell);\n                }\n\n                for (i = 0; i < headerRows.length; i++) {\n                    previousIndex = 0;\n                    headerRows.eq(i).find(\"th\").each(eachHeaderCell);\n                }\n\n                for (i = 0; i <= lockedLastIndex; i++) {\n                    dataIndex = i + trailingColumns;\n                    cells = this.wrapper.find(\".k-grid-content-locked tbody > tr > td:nth-child(\" + (i + 1) + \")\");\n                    cells.attr(ARIA_COLINDEX, dataIndex + 1);\n                }\n\n                for (i = previousVirtual; i <= lastIndex - firstIndex - nextVirtual; i++) {\n                    if (previousVirtual === 0 ) {\n                        cellsIndex = i + 1;\n                    } else {\n                        cellsIndex = i - previousVirtual + 2;\n                    }\n\n                    dataIndex = firstIndex + i + trailingColumns;\n\n                    cells = this.tbody.find(\"> tr > td:nth-child(\" + cellsIndex + \")\");\n                    cells.attr(ARIA_COLINDEX, dataIndex + 1);\n                }\n            },\n\n            _ariaGroupTitles: function() {\n                var that = this,\n                    groups = that.dataSource.group(),\n                    ths = that.wrapper.find(\".k-grid-header th\");\n\n                ths.each(function(i, el) {\n                    if (el.getAttribute(\"title\") === that.options.messages.ungroupHeader) {\n                            el.setAttribute(\"title\", that.options.messages.groupHeader);\n                    }\n                });\n\n                if (groups && groups.length > 0) {\n                    groups.forEach(function(group) {\n                        var field = group.field,\n                            el = ths.filter(\"[\" + kendo.attr(\"field\") + \"='\" + field + \"']\");\n\n                        if (el.attr(\"title\") === that.options.messages.groupHeader) {\n                            el.attr(\"title\", that.options.messages.ungroupHeader);\n                        }\n                    });\n                }\n            },\n\n            _ariaHeaderFooter: function(type, group, el, role) {\n                var that = this,\n                    wrapper = that.wrapper,\n                    table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                    lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                    groupId = \"\",\n                    rowGroup;\n\n                if (table.length > 0) {\n                    rowGroup = table.find(group + \", tbody\");\n                    groupId = rowGroup.attr(ID) || kendo.guid();\n\n                    table.attr(ROLE, NONE);\n                    table.find(TR).attr(ROLE, ROW);\n                    table.find(el).attr(ROLE, role);\n                    rowGroup.attr({\n                        role: ROWGROUP,\n                        id: groupId\n                    });\n                }\n\n                if (lockedTable.length > 0) {\n                    that._ariaLocked(type, group, el, role);\n                }\n\n                lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n                table.find(\"td\").attr(ROLE, GRIDCELL);\n\n                return groupId;\n            },\n\n            _ariaId: function() {\n                var id = this.element.attr(ID) || \"aria\";\n\n                if (id) {\n                    this._cellId = id + \"_active_cell\";\n                }\n            },\n\n            _ariaLocked: function(type, group, el, role) {\n                var that = this,\n                    wrapper = that.wrapper,\n                    table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                    lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                    rows = table.find(TR),\n                    lockedRows = lockedTable.find(TR);\n\n                lockedTable.attr(ROLE, NONE);\n                lockedTable.find(group + \", tbody\").attr(ROLE, NONE);\n                lockedRows.attr(ROLE, NONE);\n\n                lockedTable.find(el).attr(ROLE, role);\n\n                rows.each(function(i, row) {\n                    var ownedCells = [];\n\n                    ownedCells = that._cellsIds(lockedRows.eq(i).find(el), \"locked_\" + type, i);\n                    ownedCells = ownedCells.concat(that._cellsIds($(row).find(el), type, i));\n\n                    row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n                });\n            },\n\n            _ariaLockedContent: function() {\n                var that = this,\n                    table = that.table,\n                    tableRows = table.find(TR),\n                    lockedTable = that.wrapper.find(\".k-grid-content-locked table\"),\n                    lockedRows = lockedTable.find(TR);\n\n                lockedTable.attr(ROLE, NONE);\n                lockedTable.find(\"tbody\").attr(ROLE, NONE);\n                lockedRows.attr(ROLE, NONE);\n                lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n\n                tableRows.each(function(i, row) {\n                    var ownedCells = [];\n\n                    ownedCells = that._cellsIds(lockedRows.eq(i).find(\"td\"), \"locked_datacell\", i);\n                    ownedCells = ownedCells.concat(that._cellsIds($(row).find(\"td\"), \"datacell\", i));\n\n                    row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n                });\n            },\n\n            _ariaAddHiddenColIndex: function() {\n                var virtualScroll = this.virtualScroll || {},\n                    columns = this.columns,\n                    table = this.table,\n                    leafColsCount = leafColumns(columns).length;\n\n                if (!virtualScroll.columns && !table.attr(ARIA_COLCOUNT)) {\n                    this._ariaColumnIndex();\n\n                    table.attr(ARIA_COLCOUNT, leafColsCount);\n                }\n            },\n\n            _ariaRemoveHiddenColIndex: function() {\n                var virtualScroll = this.virtualScroll || {},\n                    columns = this.columns,\n                    leafColsCount = leafColumns(columns).length;\n\n                if (!virtualScroll.columns && (leafColsCount === visibleLeafColumns(this.columns).length)) {\n                    this.wrapper.find(\"td, th\").removeAttr(ARIA_COLINDEX);\n\n                    this.table.removeAttr(ARIA_COLCOUNT);\n                }\n            },\n\n            _ariaRowIndex: function() {\n                var headerRows = this.thead.find(\">tr\"),\n                    numberOfHeaderRows = headerRows.length,\n                    bodyRows = this.tbody.find(\">tr\"),\n                    footerRows = this.wrapper.find(\".k-grid-footer-wrap tfoot > tr\"),\n                    totalNumberOfItems = this.dataSource.total(),\n                    previousItems = this.dataSource.skip() || 0,\n                    currentIndex = 1,\n                    previousMaster = false,\n                    i, currentRow;\n\n                if (this._hasDetails()) {\n                    totalNumberOfItems = totalNumberOfItems * 2;\n                    previousItems = previousItems * 2;\n                }\n\n                for (i = 0; i < numberOfHeaderRows; i++) {\n                    headerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n                }\n\n                currentIndex = numberOfHeaderRows + previousItems;\n\n                for (i = 0; i < bodyRows.length; i++) {\n                    currentRow = bodyRows.eq(i);\n\n                    if (this._hasDetails() && currentRow.hasClass(\"k-master-row\")) {\n                        if (previousMaster) {\n                            currentIndex = currentIndex + 2;\n                        } else {\n                            currentIndex = currentIndex + 1;\n                        }\n\n                        previousMaster = true;\n                    } else {\n                        currentIndex = currentIndex + 1;\n                        previousMaster = false;\n                    }\n\n                    currentRow.attr(ARIA_ROWINDEX, currentIndex);\n                }\n\n                currentIndex = numberOfHeaderRows + totalNumberOfItems + 1;\n\n                for (i = 0; i < footerRows.length; i++) {\n                    footerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n                }\n            },\n\n            _cellsIds: function(elements, prefix, i) {\n                var ownedCells = [];\n\n                elements.each(function(j, cell) {\n                    var id = cell.getAttribute(ID) || prefix + \"_\" + i + \"_\" + j;\n\n                    cell.setAttribute(ID, id);\n\n                    ownedCells.push(id);\n                });\n\n                return ownedCells;\n            },\n\n            _trailingColumns: function() {\n                return this._groups() + (this._hasDetails() ? 1 : 0);\n            },\n\n            _element: function() {\n                var that = this,\n                    table = that.element;\n\n                if (!table.is(\"table\")) {\n                    if (that.options.scrollable) {\n                        table = that.element.find(\"> .k-grid-content > table\");\n                    } else {\n                        table = that.element.children(\"table\");\n                    }\n\n                    if (!table.length) {\n                        table = $(\"<table />\").appendTo(that.element);\n                    }\n                }\n\n                table.addClass(\"k-grid-table k-table\");\n                table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                that.table = table;\n\n                that._wrapper();\n            },\n\n            _createResizeHandle: function(container, th) {\n                var that = this;\n                var indicatorWidth = that.options.columnResizeHandleWidth;\n                var scrollable = that.options.scrollable;\n                var resizeHandle = that.resizeHandle;\n                var halfResizeHandle = (indicatorWidth * 3) / 2;\n                var rtlCorrection = 0;\n                var headerWrap;\n                var ieCorrection;\n                var webkitCorrection;\n                var firefoxCorrection;\n                var leftMargin;\n                var invisibleSpace;\n                var leftBorderWidth;\n                var scrollLeft;\n                var left;\n                var top;\n\n                if (resizeHandle && that.lockedContent && resizeHandle.data(\"th\")[0] !== th[0]) {\n                    resizeHandle.off(NS).remove();\n                    resizeHandle = null;\n                }\n\n                if (!resizeHandle) {\n                    resizeHandle = that.resizeHandle = $('<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\"></div></div>');\n                    container.append(resizeHandle);\n                }\n\n                scrollLeft = kendo.scrollLeft(container);\n\n                if (isRtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeft = scrollLeft * -1;\n                }\n\n                leftBorderWidth = parseFloat(container.css(\"borderLeftWidth\"));\n\n                left = th.offset().left + scrollLeft - parseFloat(th.css(\"marginLeft\")) - (container.offset().left + leftBorderWidth);\n\n                if (!isRtl) {\n                    left += th[0].offsetWidth;\n               } else {\n                    if (scrollable) {\n                        rtlCorrection = (left <= scrollLeft ? halfResizeHandle : 0);// when shown on first column headers are misaligned due to the width of the resize handler\n                        headerWrap = th.closest(\".k-grid-header-wrap, .k-grid-header-locked\");\n                        invisibleSpace = headerWrap[0].scrollWidth - headerWrap[0].offsetWidth; // the difference between the entire width and the visible area\n                        leftMargin = parseFloat(headerWrap.css(\"marginLeft\"));\n                        ieCorrection = browser.msie ? 2 * kendo.scrollLeft(headerWrap) + leftBorderWidth - leftMargin - rtlCorrection : 0;\n                        webkitCorrection = -rtlCorrection;\n                        firefoxCorrection = browser.mozilla ? leftBorderWidth - leftMargin - rtlCorrection : 0;\n\n                        left -= webkitCorrection + firefoxCorrection + ieCorrection;\n                    }\n                }\n\n                top = th.offset().top - parseFloat(th.css(\"marginTop\")) - (container.offset().top + parseFloat(container.css(\"borderTopWidth\")));\n\n                resizeHandle.css({\n                    top: top, //scrollable ? 0 : heightAboveHeader(that.wrapper),\n                    left: left - halfResizeHandle,\n                    height: outerHeight(th),\n                    width: indicatorWidth * 3 - rtlCorrection\n                })\n                .data(\"th\", th)\n                .show();\n\n                resizeHandle.off(DUBLECLICK + NS).on(DUBLECLICK + NS, function() {\n                    that._autoFitLeafColumn(parseInt(th.attr(kendo.attr(\"index\")), 10));\n                });\n            },\n\n            _positionColumnResizeHandle: function() {\n                var that = this,\n                    lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n                that.thead.add(lockedHead).on(MOUSEMOVE + NS, \"tr:not(.k-filter-row) > th\", function(e) {\n                    var button = typeof e.buttons !== \"undefined\" ? e.buttons : (e.which || e.button);\n\n                    var th = $(this);\n                    if (th.hasClass(\"k-group-cell\") || th.hasClass(\"k-hierarchy-cell\")) {\n                        return;\n                    }\n\n                    if (typeof button !== \"undefined\" && button !== 0) {\n                        //do not create a new resize handle if a mouse button is still pressed\n                        //this happens during resizing or before UserEvents trigger \"start\"\n                        return;\n                    }\n\n                    if (th[0].hasAttribute(kendo.attr(COLSPAN))) {\n                        // resizing multi-column headers is not supported\n                        return;\n                    }\n\n                    that._createResizeHandle(th.closest(DIV), th);\n                });\n            },\n\n            _resizeHandleDocumentClick: function(e) {\n                if ($(e.target).closest(\".k-column-active\").length) {\n                    return;\n                }\n\n                $(document).off(e);\n\n                this._resetResizeHandleHeader();\n                this._hideResizeHandle();\n            },\n\n            _resetResizeHandleHeader: function() {\n                var th;\n\n                if (!this.resizeHandle) {\n                    return;\n                }\n\n                th = $(this.resizeHandle).data(\"th\");\n\n                if (th) {\n                    th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).show();\n                    th.find(DOT + ORDER_CLASS).show();\n                    th.find(DOT + HEADER_COLUMN_MENU_CLASS).show();\n                    th.find(DOT + FILTER_MENU_CLASS).show();\n                }\n            },\n\n            _hideResizeHandle: function() {\n                if (this.resizeHandle) {\n                    this.resizeHandle.data(\"th\")\n                        .removeClass(\"k-column-active\");\n\n                    if (this.lockedContent && !this._isMobile) {\n                        this.resizeHandle.off(NS).remove();\n                        this.resizeHandle = null;\n                    } else {\n                        this.resizeHandle.hide();\n                    }\n                }\n            },\n\n            _positionColumnResizeHandleTouch: function() {\n                var that = this,\n                    lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n                that._resizeUserEvents = new kendo.UserEvents(lockedHead.add(that.thead), {\n                    filter: \"th:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                    threshold: 10,\n                    minHold: 500,\n                    hold: function(e) {\n                        var th = $(e.target);\n\n                        e.preventDefault();\n\n                        if (that.resizeHandle) {\n                            that.resizeHandle.data(\"th\")\n                                .removeClass(\"k-column-active\");\n                            that._resetResizeHandleHeader();\n                        }\n\n                        th.addClass(\"k-column-active\");\n\n                        th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).hide();\n                        th.find(DOT + ORDER_CLASS).hide();\n                        th.find(DOT + HEADER_COLUMN_MENU_CLASS).hide();\n                        th.find(DOT + FILTER_MENU_CLASS).hide();\n\n                        that._createResizeHandle(th.closest(DIV), th);\n\n                        if (!that._resizeHandleDocumentClickHandler) {\n                            that._resizeHandleDocumentClickHandler = that._resizeHandleDocumentClick.bind(that);\n                        }\n\n                        $(document).on(\"click\", that._resizeHandleDocumentClickHandler);\n                    }\n                });\n            },\n\n            resizeColumn: function(column, columnWidth) {\n                var that = this;\n                var isLocked = !!column.locked;\n                var isHidden = !!column.hidden;\n                var options = this.options;\n                var scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n                var index = isLocked ? inArray(column, visibleLockedColumns(visibleLeafColumns(that.columns))) : inArray(column, visibleNonLockedColumns(visibleLeafColumns(that.columns)));\n                var contentTable = isLocked ? that.lockedTable : that.table;\n                var footer = that.footer || $();\n                var header = isLocked ? that.lockedHeader.find(\"table\") : that.thead.closest(\"table\");\n                var columnMinWidth = column.minResizableWidth || 10;\n                var gridWidth = isLocked ? outerWidth(contentTable.find(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n                var col;\n\n                if (isHidden) {\n                    column.width = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n                    return;\n                }\n\n                if (that.footer && that.lockedContent) {\n                    footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                }\n\n                if (options.scrollable) {\n\n                    col = header.find(\"col:not(.k-group-col,.k-hierarchy-col)\").eq(index)\n                        .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                        .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n                } else {\n                    col = contentTable.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n                }\n\n                if (options.scrollable) {\n                    var constrain = false;\n                    var totalWidth = that.wrapper.width() - scrollbar;\n                    var width = columnWidth = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n\n                    if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                        width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                        if (width < 0) {\n                            width = columnWidth;\n                        }\n                        constrain = true;\n                    }\n\n                    if (width > 10 && width >= columnMinWidth) {\n                        col.css('width', width);\n\n                        if (gridWidth) {\n                            if (constrain) {\n                                width = totalWidth - scrollbar * 2;\n                            } else {\n                                width = gridWidth + (columnWidth - column.width);\n                            }\n\n                            contentTable\n                                .add(header)\n                                .add(footer)\n                                .css('width', width);\n\n                            if (!isLocked) {\n                                that._footerWidth = width;\n                            }\n                        }\n                    }\n\n                that._scrollVirtualWrapperOnColumnResize();\n                } else if (columnWidth > 10 && columnWidth >= columnMinWidth) {\n                    col.css('width', columnWidth);\n                }\n\n                column.width = columnWidth;\n\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n                that._updateStickyColumns();\n            },\n\n            _resizable: function() {\n                var that = this,\n                    options = that.options,\n                    container,\n                    columnStart,\n                    columnWidth,\n                    columnMinWidth,\n                    gridWidth,\n                    isMobile = this._isMobile,\n                    scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0,\n                    isLocked,\n                    col, th;\n\n                if (options.resizable === true || (options.resizable && options.resizable.columns === true)) {\n                    container = options.scrollable ? that.wrapper.find(\".k-grid-header-wrap\").first() : that.wrapper;\n\n                    if (isMobile) {\n                        that._positionColumnResizeHandleTouch(container);\n                    } else {\n                        that._positionColumnResizeHandle(container);\n                    }\n\n                    if (that.resizable) {\n                        that.resizable.destroy();\n                    }\n\n                    that.resizable = new ui.Resizable(container.add(that.lockedHeader), {\n                        handle: (!!options.scrollable ? \"\" : \">\") + \".k-resize-handle\",\n                        hint: function(handle) {\n                            return $('<div class=\"k-grid-resize-indicator\" />').css({\n                                height: outerHeight(handle.data(\"th\")) + that.tbody.attr(\"clientHeight\")\n                            });\n                        },\n                        start: function(e) {\n                            th = $(e.currentTarget).data(\"th\");\n\n                            if (isMobile) {\n                                that._hideResizeHandle();\n                            }\n\n                            var header = th.closest(\"table\"),\n                                index = $.inArray(th[0], leafDataCells(th.closest(\"thead\")).filter(\":visible\"));\n\n                            isLocked = header.parent().hasClass(\"k-grid-header-locked\");\n\n                            var contentTable = isLocked ? that.lockedTable : that.table,\n                                footer = that.footer || $();\n\n                            if (that.footer && that.lockedContent) {\n                                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                            }\n\n                            cursor(that.wrapper, 'col-resize');\n\n                            if (options.scrollable) {\n                                col = header.find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index)\n                                    .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                                    .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n                            } else {\n                                col = contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n                            }\n\n                            var columns = $.map(that.columns, function(a) {\n                                return !a.hidden && ((isLocked && a.locked) || ((!isLocked && !a.locked))) ? a : null;\n                            });\n\n                            columnStart = e.x.location;\n                            columnWidth = outerWidth(th);\n                            columnMinWidth = leafColumns(columns)[index].minResizableWidth || 10;\n                            gridWidth = isLocked ? outerWidth(contentTable.children(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n\n                            // fix broken UI in Chrome38+\n                            if (browser.webkit) {\n                                that.wrapper.addClass(\"k-grid-column-resizing\");\n                            }\n                        },\n                        resize: function(e) {\n                            var rtlMultiplier = isRtl ? -1 : 1,\n                                currentWidth = columnWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n\n                            if (options.scrollable) {\n                                var footer;\n                                if (isLocked && that.lockedFooter) {\n                                    footer = that.lockedFooter.children(\"table\");\n                                } else if (that.footer) {\n                                    footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                                }\n                                if (!footer || !footer[0]) {\n                                    footer = $();\n                                }\n                                var header = th.closest(\"table\");\n                                var contentTable = isLocked ? that.lockedTable : that.table;\n                                var constrain = false;\n                                var totalWidth = that.wrapper.width() - scrollbar;\n                                var width = currentWidth;\n\n                                if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                                    width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                                    if (width < 0) {\n                                        width = currentWidth;\n                                    }\n                                    constrain = true;\n                                }\n\n                                if (width > 10 && width >= columnMinWidth) {\n                                    col.css('width', width);\n\n                                    if (gridWidth) {\n                                        if (constrain) {\n                                            width = totalWidth - scrollbar * 2;\n                                        } else {\n                                            width = gridWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n                                        }\n\n                                        contentTable\n                                            .add(header)\n                                            .add(footer)\n                                            .css('width', width);\n\n                                        if (!isLocked) {\n                                            that._footerWidth = width;\n                                        }\n                                    }\n                                }\n\n                                that._scrollVirtualWrapperOnColumnResize();\n                            } else if (currentWidth > 10 && currentWidth >= columnMinWidth) {\n                                col.css('width', currentWidth);\n                            }\n                        },\n                        resizeend: function() {\n                            var newWidth = outerWidth(th),\n                                column,\n                                header;\n\n                            cursor(that.wrapper, \"\");\n\n                            if (browser.webkit) {\n                                that.wrapper.removeClass(\"k-grid-column-resizing\");\n                            }\n\n                            if (th && columnWidth != newWidth) {\n                                header = that.lockedHeader ? that.lockedHeader.find(\"thead\").first().find(TR).first().add(that.thead.find(TR).first()) : th.parent();\n\n                                var index = th.attr(kendo.attr(\"index\"));\n                                if (!index) {\n                                    index = header.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").index(th);\n                                }\n                                column = leafColumns(that.columns)[index];\n\n                                column.width = newWidth;\n\n                                that.trigger(COLUMNRESIZE, {\n                                    column: column,\n                                    oldWidth: columnWidth,\n                                    newWidth: newWidth\n                                });\n\n                                that._applyLockedContainersWidth();\n                                that._syncLockedContentHeight();\n                                that._syncLockedHeaderHeight();\n                                that._updateStickyColumns();\n                            }\n\n                            that._resetResizeHandleHeader();\n                            that._hideResizeHandle();\n                            th = null;\n                        }\n                    });\n\n                }\n            },\n\n            // Row resizing functionality below\n            _addLockedRowResizing: function(tr) {\n                var index = tr.index();\n\n                return this.lockedTable.find(TR).eq(index)\n                    .add(this.tbody.find(TR).eq(index));\n            },\n\n            _getMinRowHeight: function(row) {\n                var minHeight = 0;\n\n                row.each(function (i, el) {\n                    var currentMinHeight;\n\n                    el.style.height = '';\n                    currentMinHeight = outerHeight(el);\n\n                    if (currentMinHeight > minHeight) {\n                        minHeight = currentMinHeight;\n                    }\n                });\n\n                return minHeight;\n            },\n\n            _cacheRowHeight: function(rows, height) {\n                var that = this;\n\n                if (!that._cachedRowsHeight) {\n                    that._cachedRowsHeight = {};\n                }\n\n                rows.each(function (i, el) {\n                    var uid = el.getAttribute(\"data-uid\");\n\n                    that._cachedRowsHeight[uid] = height;\n                });\n            },\n\n            _clearCachedRowsHeight: function(rows) {\n                var that = this;\n\n                if (rows && that._cachedRowsHeight) {\n                    rows.each(function (i, el) {\n                        var uid = el.getAttribute(\"data-uid\");\n\n                        delete that._cachedRowsHeight[uid];\n                    });\n                } else {\n                    that._cachedRowsHeight = null;\n                }\n            },\n\n            _mapCachedRowsHeight: function(method, target) {\n                var input = this._cachedRowsHeight,\n                    ds = this.dataSource,\n                    output = {};\n\n                Object.keys(input).forEach(function (key) {\n                    var item = ds[method](key);\n\n                    output[item[target]] = input[key];\n                });\n\n                this._cachedRowsHeight = output;\n            },\n\n            _rowResizerDblClick: function() {\n                var that = this,\n                    resizer = that.rowResizer,\n                    row = resizer.data(TR),\n                    oldHeight = outerHeight(row),\n                    newHeight, rows;\n\n                if (row.hasClass(SELECTED)) {\n                    rows = that.select();\n                } else {\n                    rows = row;\n                }\n\n                if (that.lockedTable) {\n                    row = that._addLockedRowResizing(row);\n\n                    if (row.hasClass(SELECTED)) {\n                        rows = that.lockedTable.find(DOT + SELECTED);\n                    } else {\n                        rows = that.lockedTable.find(TR).eq(row.index());\n                    }\n\n                    rows.each(function (i, el) {\n                        var rowIndex = el.rowIndex,\n                            rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex)),\n                            pairMinHeight = that._getMinRowHeight(rowPair);\n\n                        rowPair.css(HEIGHT, pairMinHeight);\n                    });\n                } else {\n                    rows.css(HEIGHT, AUTO);\n                }\n\n                that._clearCachedRowsHeight(rows);\n\n                resizer.removeClass(HOVER);\n                resizer.removeClass(ACTIVE);\n\n                newHeight = outerHeight(row);\n\n                if (oldHeight != newHeight) {\n                    that.trigger(ROWRESIZE, {\n                        row: row,\n                        rows: rows,\n                        oldHeight: oldHeight,\n                        newHeight: newHeight\n                    });\n                }\n            },\n\n            _setupRowResizer: function _setupRowResizer(resizer, row, top) {\n                resizer\n                    .data(TR, row)\n                    .css({\n                        top: top\n                    });\n            },\n\n            _attachRowResizerEvents: function() {\n                var rowResizer = this.rowResizer,\n                    delay = 200,\n                    isIn = false;\n\n                rowResizer\n                    .on(MOUSEDOWN + NS, function (e) {\n                        if (e.button === 0) {\n                            rowResizer.removeClass(HOVER);\n                            rowResizer.addClass(ACTIVE);\n                        }\n                    })\n                    .on(MOUSEUP + NS, function (e) {\n                        if (e.button === 0) {\n                            rowResizer.removeClass(ACTIVE);\n                            rowResizer.addClass(HOVER);\n                        }\n                    })\n                    .on(MOUSEENTER + NS, function () {\n                        isIn = true;\n\n                        setTimeout(function () {\n                            if (isIn) {\n                                rowResizer.addClass(HOVER);\n                            }\n                        }, delay);\n                    })\n                    .on(MOUSELEAVE + NS, function () {\n                        isIn = false;\n                        rowResizer.removeClass(HOVER);\n                    });\n            },\n\n            _getResizerTop: function(tr, container) {\n                var resizer = this.rowResizer,\n                    inner = resizer.find(DOT + ROW_RESIZER)[0],\n                    paddingTop = parseInt(getComputedStyle(resizer[0]).paddingTop);\n\n                return tr.offset().top -\n                    parseFloat(tr.css(\"marginTop\")) -\n                    (container.offset().top + parseFloat(container.css(\"borderTopWidth\"))) -\n                    inner.clientHeight -\n                    paddingTop +\n                    container.scrollTop();\n            },\n\n            _getResizerContainer: function() {\n                var container = this.tbody.closest(DIV);\n\n                if (this.lockedTable) {\n                    container = container.closest(DOT + \"k-grid-container\");\n                }\n\n                return container;\n            },\n\n            _createRowResizer: function(e) {\n                var that = this,\n                    tr = $(e.currentTarget),\n                    targetHeight = e.currentTarget.clientHeight,\n                    positionIntarget = e.offsetY,\n                    rowResizer = that.rowResizer,\n                    previousRow = tr.prev(TR + \":visible\"),\n                    container = that._getResizerContainer(),\n                    top;\n\n                if (!rowResizer) {\n                    rowResizer = that.rowResizer = $('<div class=\"k-resizer-wrap\"><div class=\"k-row-resizer\"></div></div>');\n                    container.append(rowResizer);\n                    that._attachRowResizerEvents();\n\n                    rowResizer.off(DUBLECLICK + NS).on(DUBLECLICK + NS, that._rowResizerDblClick.bind(that));\n                }\n\n                top = that._getResizerTop(tr, container);\n\n                if (previousRow.length !== 0 && targetHeight / 2 > positionIntarget) {\n                    if (!previousRow.hasClass(GROUPING_ROW)) {\n                        that._setupRowResizer(rowResizer, previousRow, top);\n                    }\n                } else {\n                    if (!tr.hasClass(GROUPING_ROW)) {\n                        that._setupRowResizer(rowResizer, tr, top + targetHeight);\n                    }\n                }\n            },\n\n            _detachRowResizerEvents: function() {\n                var rowResizer = this.rowResizer;\n\n                rowResizer\n                    .off(MOUSEDOWN + NS)\n                    .off(MOUSEUP + NS)\n                    .off(MOUSEENTER + NS)\n                    .off(MOUSELEAVE + NS);\n            },\n\n            _mapResizedRows: function(rows, multiSelectionLocked, newHeight) {\n                var that = this;\n\n                rows.each(function (i, el) {\n                    var minHeight;\n\n                    if (multiSelectionLocked) {\n                        var rowIndex = el.rowIndex,\n                            pairNew = newHeight,\n                            pairMin = 0,\n                            rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex));\n\n                        rowPair.each(function (i, r) {\n                            var currentMinHeight;\n\n                            r.style.height = '';\n                            currentMinHeight = outerHeight(r);\n\n                            if (currentMinHeight > pairMin) {\n                                pairMin = currentMinHeight;\n                            }\n                        });\n\n                        if (pairNew < pairMin) {\n                            pairNew = pairMin;\n\n                            that._clearCachedRowsHeight(rowPair.eq(0));\n                        } else {\n                            that._cacheRowHeight(rowPair.eq(0), pairNew);\n                        }\n\n                        rowPair.css(HEIGHT, pairNew);\n                    } else {\n                        el.style.height = '';\n                        minHeight = outerHeight(el);\n\n                        if (newHeight > minHeight) {\n                            el.style.height = newHeight + PX;\n\n                            that._cacheRowHeight($(el), newHeight);\n                        } else {\n                            that._clearCachedRowsHeight($(el));\n                        }\n                    }\n                });\n            },\n\n            _rowResizing: function() {\n                var that = this,\n                    options = that.options,\n                    container, rowStart, rowHeight, tr;\n\n                if (options.resizable && options.resizable.rows === true) {\n                    that.tbody\n                        .parent()\n                        .add(that.lockedTable)\n                        .on(MOUSEMOVE + NS, \".k-grid-footer tr, .k-table-tbody tr\", that._createRowResizer.bind(that));\n\n                    if (that.rowResizing) {\n                        that.rowResizing.destroy();\n                    }\n\n                    container = that._getResizerContainer();\n\n                    that.rowResizing = new ui.Resizable(container, {\n                        handle: DOT + ROW_RESIZER_WRAP,\n                        start: function(e) {\n                            tr = $(e.currentTarget).data(TR);\n\n                            if (that.lockedTable) {\n                                tr = that._addLockedRowResizing(tr);\n                            }\n\n                            tr.addClass(HOVER);\n\n                            that._detachRowResizerEvents();\n\n                            rowStart = e.y.location;\n                            rowHeight = outerHeight(tr);\n                        },\n                        resize: function(e) {\n                            var newHeight = rowHeight + e.y.location - rowStart,\n                                minHeight = 0;\n\n                            if (tr.length > 1) {\n                                minHeight = that._getMinRowHeight(tr);\n                            }\n\n                            if (newHeight < minHeight) {\n                                newHeight = minHeight;\n                            }\n\n                            tr.css('height', newHeight);\n\n                            that._setupRowResizer(that.rowResizer, tr, that._getResizerTop(tr, container) + newHeight);\n                        },\n                        resizeend: function() {\n                            var newHeight = outerHeight(tr),\n                                multiSelectionLocked = false,\n                                rows;\n\n                            if (tr.hasClass(SELECTED)) {\n                                rows = that.select();\n\n                                if (tr.length > 1 && rows.length > tr.length) {\n                                    rows = that.lockedTable.find(DOT + SELECTED).not(tr);\n                                    multiSelectionLocked = true;\n                                }\n                            } else {\n                                rows = tr;\n                            }\n\n                            that._mapResizedRows(rows, multiSelectionLocked, newHeight);\n\n                            tr.removeClass(HOVER);\n\n                            that.rowResizer.removeClass(ACTIVE);\n                            that.rowResizer.addClass(HOVER);\n                            that._attachRowResizerEvents();\n\n                            if (multiSelectionLocked) {\n                                rows = that.select();\n                            }\n\n                            if (rowHeight != newHeight) {\n                                that.trigger(ROWRESIZE, {\n                                    row: tr,\n                                    rows: rows,\n                                    oldHeight: rowHeight,\n                                    newHeight: newHeight\n                                });\n                            }\n\n                            tr = null;\n                        }\n                    });\n                }\n            },\n\n            _draggable: function() {\n                var that = this,\n                    reorderable = that.options.reorderable;\n\n                if (reorderable === true || (reorderable && reorderable.columns)) {\n\n                    if (that._draggableInstance) {\n                        that._draggableInstance.destroy();\n                    }\n\n                    var header = that.wrapper.children(\".k-grid-header\");\n\n                    that._draggableInstance = that.wrapper.kendoDraggable({\n                        group: kendo.guid(),\n                        autoScroll: true,\n                        filter: that.content ? \".k-grid-header:first \" + HEADERCELLS : \"table:first>.k-grid-header \" + HEADERCELLS,\n                        dragstart: function() {\n                            header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\").on(\"scroll\" + NS + \"scrolling\", function(e) {\n                                if (that.virtualScrollable) {\n                                    kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\"), this.scrollLeft);\n                                } else {\n                                    kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                                }\n                            });\n                        },\n                        dragend: function() {\n                            that._resetResizeHandleHeader();\n                            header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\");\n                        },\n                        drag: function() {\n                            that._hideResizeHandle();\n                        },\n                        hint: function(target) {\n                            var title = target.attr(kendo.attr(\"title\"));\n                            if (title) {\n                                title = kendo.htmlEncode(title);\n                            }\n                            return $('<div class=\"k-reorder-clue k-drag-clue\" />')\n                                .html(title || target.attr(kendo.attr(\"field\")) || target.text())\n                                .prepend(kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }));\n                        }\n                    }).data(\"kendoDraggable\");\n                }\n            },\n\n            _reorderable: function() {\n                var that = this,\n                    reorderable = that.options.reorderable;\n\n                if (reorderable === true || (reorderable && reorderable.columns)) {\n                    if (that.wrapper.data(\"kendoReorderable\")) {\n                        that.wrapper.data(\"kendoReorderable\").destroy();\n                    }\n\n                    that.wrapper.kendoReorderable({\n                        draggable: that._draggableInstance,\n                        dropFilter: HEADERCELLS,\n                        dragOverContainers: function(sourceIndex, targetIndex) {\n                            var columns = flatColumnsInDomOrder(that.columns);\n                            return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, that.columns, sourceIndex, targetIndex) > -1;\n                        },\n                        inSameContainer: function(e) {\n                            return $(e.source).parent()[0] === $(e.target).parent()[0] && targetParentContainerIndex(flatColumnsInDomOrder(that.columns), that.columns, e.sourceIndex, e.targetIndex) > -1;\n                        },\n                        change: function(e) {\n                            var columns = flatColumnsInDomOrder(that.columns);\n                            var column = columns[e.oldIndex];\n                            var newIndex = targetParentContainerIndex(columns, that.columns, e.oldIndex, e.newIndex);\n\n                            that.trigger(COLUMNREORDER, {\n                                newIndex: newIndex,\n                                oldIndex: inArray(column, columns),\n                                column: column\n                            });\n\n                            that.reorderColumn(newIndex, column, e.position === \"before\");\n                        }\n                    });\n                }\n            },\n\n            _reorderHeader: function(sources, target, before, container) {\n                var that = this;\n                var sourcePosition = columnPosition(sources[0], that.columns);\n                var destPosition = columnPosition(target, that.columns);\n                var action;\n                var ths;\n\n                var leafs = [];\n                for (var idx = 0; idx < sources.length; idx++) {\n                    if (sources[idx].columns) {\n                        leafs = leafs.concat(sources[idx].columns);\n                    }\n                }\n                if (container) {\n                    ths = elements(container, container, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n                } else {\n                    ths = elements(that.lockedHeader, that.thead, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n                }\n\n                var sourceLockedColumns = lockedColumns(sources).length;\n                var targetLockedColumns = lockedColumns([target]).length;\n\n                if (leafs.length) {\n                    if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                        action = \"prepend\";\n                        moveCellsBetweenContainers(sources, target, leafs, that.columns, that.lockedHeader.find(\"thead\"), that.thead, this._groups(), action);\n                    } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                        action = destPosition.cell === 0 && sources[0].columns && !target.columns && !that._group ? \"prepend\" : \"append\";\n                        moveCellsBetweenContainers(sources, target, leafs, nonLockedColumns(that.columns), that.thead, that.lockedHeader.find(\"thead\"), this._groups(), action);\n                    }\n\n                    if (target.columns || sourcePosition.cell - destPosition.cell > 1 || destPosition.cell - sourcePosition.cell > 1) {\n                        target = findReorderTarget(that.columns, target, sources[0], before, that.columns);\n                        if (target) {\n                            if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                                that._reorderHeader(leafs, target, before, that.thead);\n                            } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                                that._reorderHeader(leafs, target, before, that.lockedHead);\n                            } else {\n                                that._reorderHeader(leafs, target, before);\n                            }\n                        }\n                    }\n                } else if (sourceLockedColumns !== targetLockedColumns) { // move between containers\n                    updateCellRowSpan(ths[sourcePosition.cell], that.columns, sourceLockedColumns);\n                }\n\n                reorder(ths, sourcePosition.cell, destPosition.cell, before, sources.length);\n            },\n\n            _reorderContent: function(sources, destination, before) {\n                var that = this;\n                var lockedRows = $();\n                var source = sources[0];\n                var visibleSources = visibleColumns(sources);\n                var sourceIndex = inArray(source, leafColumns(that.columns));\n                var destIndex = inArray(destination, leafColumns(that.columns));\n\n                var colSourceIndex = inArray(visibleSources[0], visibleLeafColumns(that.columns));\n                var colDest = inArray(destination, visibleLeafColumns(that.columns));\n                var lockedCount = lockedColumns(that.columns).length;\n                var isLocked = !!destination.locked;\n                var footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n                var headerCol, footerCol, beforeVisibleColumn;\n                headerCol = footerCol = colDest;\n\n                if (destination.hidden) {\n                    var columnsArray = isLocked ? lockedColumns(that.columns) : nonLockedColumns(that.columns);\n\n                    if (visibleColumns(columnsArray).length > 0) {\n                        headerCol = footerCol = colDest = this._findClosestVisibleColumnIndex(columnsArray, destIndex);\n                        beforeVisibleColumn = visibleColumns(columnsArray.slice(destIndex)).length > 0;\n                    }\n                    else {\n                        if (isLocked) {\n                            colDest = that.lockedTable.find(\"colgroup\");\n                            headerCol = that.lockedHeader.find(\"colgroup\");\n                            footerCol = $(that.lockedFooter).find(\">table>colgroup\");\n                        } else {\n                            colDest = that.tbody.prev();\n                            headerCol = that.thead.prev();\n                            footerCol = footer.find(\".k-grid-footer-wrap\").find(\">table>colgroup\");\n                        }\n                    }\n                }\n\n                if (that._hasFilterRow()) {\n                    reorder(that.wrapper.find(\".k-filter-row td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n                }\n\n                if (colSourceIndex >= 0) {\n                    reorder(elements(that.lockedHeader, that.thead.prev(), COLGROUP), colSourceIndex, headerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n\n                if (that.options.scrollable) {\n                    if (colSourceIndex >= 0 && !that._hasVirtualColumns()) {\n                        reorder(elements(that.lockedTable, that.tbody.prev(), COLGROUP), colSourceIndex, colDest, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                    }\n                }\n\n                if (footer && footer.length) {\n                    if (colSourceIndex >= 0) {\n                        reorder(elements(that.lockedFooter, footer.find(\".k-grid-footer-wrap\"), \">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)\"), colSourceIndex, footerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                    }\n                    reorder(footer.find(\".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n                }\n\n                var rows = that.tbody.children(\":not(.k-grouping-row,.k-detail-row)\");\n                if (that.lockedTable) {\n                    if (lockedCount > destIndex) {\n                        if (lockedCount <= sourceIndex) {\n                            updateColspan(\n                                that.lockedTable.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                                that.table.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                                sources.length\n                            );\n                        }\n                    } else if (lockedCount > sourceIndex) {\n                        updateColspan(\n                            that.table.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                            that.lockedTable.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                            sources.length\n                        );\n                    }\n\n                    lockedRows = that.lockedTable.find(\">tbody>tr:not(.k-grouping-row,.k-detail-row)\");\n                }\n\n                for (var idx = 0, length = rows.length; idx < length; idx += 1) {\n                    reorder(elements(lockedRows[idx], rows[idx], \">td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n                }\n            },\n\n            _findClosestVisibleColumnIndex: function(columns, columnIndex) {\n                var columnsArray = visibleColumns(columns.slice(columnIndex)).length > 0 ? columns.slice(columnIndex) : columns.slice(0, columnIndex + 1).reverse(),\n                    closestVisibleColumn = visibleColumns(columnsArray)[0];\n\n                return inArray(closestVisibleColumn, visibleColumns(this.columns));\n            },\n\n            _autoFitLeafColumn: function(leafIndex) {\n                this.autoFitColumn(leafColumns(this.columns)[leafIndex]);\n            },\n\n            _hasReorderableRows: function() {\n                return this._hasDragHandleColumn || (this.options.reorderable && this.options.reorderable.rows);\n            },\n\n            _draggableRows: function() {\n                var that = this,\n                    selectable = that._checkBoxSelection ||\n                        (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell),\n                    clickMoveClick = false,\n                    isMobile = !!(that._isMobile || kendo.support.mobileOS);\n\n                if (that._draggableRowsInstance) {\n                    that._draggableRowsInstance.destroy();\n                }\n\n                if (this.options.reorderable.rows.clickMoveClick !== false && this._hasDragHandleColumn) {\n                    clickMoveClick = true;\n                }\n\n                that._draggableRowsInstance = that.tbody.kendoDraggable({\n                    holdToDrag: isMobile,\n                    showHintOnHold: isMobile,\n                    preventOsHoldFeatures: isMobile,\n                    group: \"row-draggable\",\n                    autoScroll: true,\n                    filter: (selectable ? \" > .k-selected\" : \" > \" + ITEMROW) + (that._hasDragHandleColumn ? \" > .k-drag-cell\" : \"\"),\n                    hint: function(target) {\n                        var hint = $('<div class=\"k-reorder-clue k-drag-clue\">' + kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }) + '</div>');\n\n                        if (selectable && that.select().length > 1) {\n                            hint.append(\"<span>\" + that.select().length + \" \" + encode(that.options.messages.itemsSelected) + \"</span>\");\n                        } else {\n                            var clone = target.closest(ITEMROW).clone();\n                            clone.find(\"td.k-command-cell\").remove();\n                            clone.find(\"td\").each(function(index, elm) {\n                                hint.append(\"<span>\" + elm.innerText + \"&nbsp;</span>\");\n                            });\n                        }\n\n                        return hint;\n                    },\n                    clickMoveClick: clickMoveClick,\n                    cursorOffset: { top: 0, left: 0 }\n                }).data(\"kendoDraggable\");\n            },\n\n            _reorderableRows: function() {\n                var that = this,\n                    selectable = that._checkBoxSelection ||\n                                (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n                if (that.tbody.data(\"kendoReorderable\")) {\n                    that.tbody.data(\"kendoReorderable\").destroy();\n                }\n\n                that.tbody.kendoReorderable({\n                    smartPosition: false,\n                    draggable: that._draggableRowsInstance,\n                    dragOverContainers: function(sourceIndex, targetIndex) {\n                        var result = true,\n                            target = $(ITEMROW, that.content).eq(targetIndex);\n\n                        if (selectable) {\n                            result = !target.is(\".k-selected\");\n                        }\n\n                        return result;\n                    },\n                    inSameContainer: function(e) {\n                        if (selectable) {\n                            return !$(e.target).is(\".k-selected\");\n                        }\n\n                        return true;\n                    },\n                    dropFilter: \"> \" + ITEMROW,\n                    allowIcon: \"insert-middle\",\n                    orientation: \"vertical\",\n                    reorderDropCue: $('<div class=\"k-drop-hint k-drop-hint-h\"><div class=\"k-drop-hint-start\"></div><div class=\"k-drop-hint-line\"></div></div>'),\n                    positionDropCue: function(reorderDropCue, dropTarget) {\n                        var firstCellLeft = kendo.getOffset(dropTarget.children(DATA_CELL).eq(0)).left;\n                        reorderDropCue.css({\n                            transform: \"translate(0,-50%)\",\n                            left: firstCellLeft\n                        });\n                    },\n                    externalDraggable: function(e) {\n                        var draggable = e.draggable;\n\n                        if (draggable) {\n                            return draggable;\n                        }\n                    },\n                    change: function(e) {\n                        that._triggerRowRorder(e);\n                    }\n                });\n            },\n\n            _triggerRowRorder: function(e) {\n                var that = this,\n                    args = {\n                        newIndex: e.position === \"after\" ? e.newIndex + 1 : e.newIndex,\n                        oldIndex: e.oldIndex\n                    },\n                    row = e.element,\n                    selectable = that._checkBoxSelection ||\n                    (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n                if (selectable && that.select().length > 1) {\n                    args = extend(args, {\n                        rows: that.select()\n                    });\n                } else {\n                    args = extend(args, {\n                        row: row\n                    });\n                }\n\n                if (!that.trigger(ROWREORDER, args)) {\n                    that.reorderRows(selectable ? that.select() : row, args.newIndex);\n                }\n            },\n\n            reorderRowTo: function(row, index) {\n                var that = this,\n                    item = that.dataItem(row),\n                    oldIndex = row.index();\n\n                if (index < 0 || index === oldIndex) {\n                    return;\n                }\n\n                if (!that.trigger(ROWREORDER, {\n                    row: row,\n                    oldIndex: row.index(),\n                    newIndex: index\n                })) {\n                    that.dataSource.pushMove(index, [item]);\n                }\n            },\n\n            reorderRows: function(rows, index) {\n                var that = this,\n                    dataSource = that.dataSource,\n                    rowsLength = that.tbody.children(ITEMROW).length,\n                    targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(index)),\n                    items = rows.toArray().map(function(row) {\n                        return that.dataItem(row);\n                    });\n\n                if (!targetItem) {\n                    // If index is after last row dataItem wouldn't exist\n                    targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(rowsLength - 1));\n                    index = dataSource.indexOf(targetItem) + 1;\n                } else {\n                    index = dataSource.indexOf(targetItem);\n                }\n\n                if (index >= 0) {\n                    that._rowDropping = true;\n                    dataSource.pushMove(index, items);\n                    that._rowDropping = false;\n                }\n            },\n\n            autoFitColumns: function(columns) {\n                var that = this;\n\n                columns = columns || that.columns;\n\n                for (var i = 0; i < columns.length; i++) {\n                    var column = columns[i];\n\n                    if (column.columns) {\n                        that.autoFitColumns(column.columns);\n                    } else {\n                        that.autoFitColumn(column);\n                    }\n                }\n            },\n\n            autoFitColumn: function(column) {\n                var that = this,\n                    options = that.options,\n                    columns = that.columns,\n                    index,\n                    th,\n                    headerTable,\n                    leafCols,\n                    isLocked,\n                    visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                    col,\n                    minWidth,\n                    contentDiv, scrollLeft,\n                    notGroupOrHierarchyCol = \"col:not(.k-group-col):not(.k-hierarchy-col)\",\n                    notGroupOrHierarchyVisibleCell = \"td:visible:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                    menu,\n                    thWidth;\n\n                //  retrieve the column object, depending on the method argument\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(flatColumns(columns), function(item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(flatColumns(columns), function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || !isVisible(column)) {\n                    return;\n                }\n\n                leafCols = leafColumns(columns);\n                minWidth = column.minResizableWidth;\n                index = inArray(column, leafCols);\n                isLocked = column.locked;\n\n                if (isLocked) {\n                    headerTable = that.lockedHeader.children(\"table\");\n                } else {\n                    headerTable = that.thead.parent();\n                }\n\n                th = headerTable.find(\"[data-index='\" + index + \"']\");\n                menu = th.find('a.k-grid-column-menu, a.k-grid-filter-menu');\n\n                var contentTable = isLocked ? that.lockedTable : that.table,\n                    footer = that.footer || $();\n\n                if (that.footer && that.lockedContent) {\n                    footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                }\n\n                var footerTable = footer.find(\"table\").first();\n\n                if (that.lockedHeader && !isLocked) {\n                    index -= visibleLocked;\n                }\n\n                // adjust column index, depending on previous hidden columns\n                for (var j = 0; j < leafCols.length; j++) {\n                    if (leafCols[j] === column) {\n                        break;\n                    } else {\n                        if (leafCols[j].hidden) {\n                            index--;\n                        }\n                    }\n                }\n\n                // get col elements\n                if (options.scrollable) {\n                    col = headerTable.find(notGroupOrHierarchyCol).eq(index)\n                        .add(contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index))\n                        .add(footerTable.find(\"colgroup\").find(notGroupOrHierarchyCol).eq(index));\n\n                    if (!isLocked) {\n                        contentDiv = contentTable.parent();\n                        scrollLeft = kendo.scrollLeft(contentDiv);\n                    }\n                } else {\n                    col = contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index);\n                }\n\n                var tables = headerTable.add(contentTable).add(footerTable);\n\n                if (browser.safari) {\n                    th.css(\"white-space\", \"initial\");\n                }\n\n                var oldColumnWidth = outerWidth(th);\n\n                // reset the table and autofitted column widths\n                // if scrolling is disabled, we need some additional repainting of the table\n                col.width(\"\");\n                tables.css(\"table-layout\", \"fixed\");\n                col.width(AUTO);\n                tables.addClass(\"k-autofitting\");\n                tables.css(\"table-layout\", \"\");\n\n                thWidth = menu.length ? outerWidth(menu) + outerWidth(th) : outerWidth(th);\n\n                // +1 is required by IE, regardless of the border widths, otherwise unexpected wrapping may occur with hyphenated text\n                var newColumnWidth = Math.ceil(Math.max(\n                    thWidth,\n                    outerWidth(contentTable.find(\"tr:not(.k-grouping-row)\").eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)),\n                    outerWidth(footerTable.find(TR).eq(0).children(notGroupOrHierarchyVisibleCell).eq(index))\n                )) + 1;\n\n                if (minWidth && minWidth > newColumnWidth) {\n                    newColumnWidth = minWidth;\n                }\n\n                col.width(newColumnWidth);\n                column.width = newColumnWidth;\n\n                if (browser.safari) {\n                    th.css(\"white-space\", \"\");\n                }\n\n                // if all visible columns have widths, the table needs a pixel width as well\n                if (options.scrollable) {\n                    var cols = headerTable.find(\"col\"),\n                        colWidth,\n                        totalWidth = 0;\n                    for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n                        if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                            totalWidth += parseInt(colWidth, 10);\n                        } else if (cols.eq(idx).hasClass(\"k-group-col\")) {\n                            totalWidth += parseInt(cols.eq(idx).width(), 10);\n                        } else {\n                            totalWidth = 0;\n                            break;\n                        }\n                    }\n\n                    if (totalWidth) {\n                        tables.each(function() {\n                            this.style.width = totalWidth + PX;\n                        });\n                    }\n                }\n\n                tables.removeClass(\"k-autofitting\");\n\n                if (scrollLeft) {\n                    kendo.scrollLeft(contentDiv, scrollLeft);\n                }\n\n                that.trigger(COLUMNRESIZE, {\n                    column: column,\n                    oldWidth: oldColumnWidth,\n                    newWidth: newColumnWidth\n                });\n\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n                that._updateStickyColumns();\n            },\n\n            reorderColumn: function(destIndex, column, before) {\n                var that = this,\n                    parent = columnParent(column, that.columns),\n                    columns = parent ? parent.columns : that.columns,\n                    sourceIndex = inArray(column, columns),\n                    destColumn = columns[destIndex],\n                    virtualScroll = that.virtualScroll || {},\n                    lockChanged,\n                    isLocked = !!destColumn.locked,\n                    lockedCount = lockedColumns(that.columns).length,\n                    groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (sourceIndex === destIndex) {\n                    return;\n                }\n\n                if (!column.locked && isLocked && nonLockedColumns(that.columns).length == 1) {\n                    return;\n                }\n\n                if (column.locked && !isLocked && lockedCount == 1) {\n                    return;\n                }\n\n                that._hideResizeHandle();\n\n                if (before === undefined$1) {\n                    before = destIndex < sourceIndex;\n                }\n\n                var sourceColumns = [column];\n\n                that._reorderHeader(sourceColumns, destColumn, before);\n\n                if (that.lockedHeader) {\n                    removeEmptyRows(that.thead);\n                    removeEmptyRows(that.lockedHeader);\n                }\n\n                if (destColumn.columns) {\n                    destColumn = leafColumns(destColumn.columns);\n                    destColumn = destColumn[before ? 0 : destColumn.length - 1];\n                }\n\n                if (column.columns) {\n                    sourceColumns = leafColumns(column.columns);\n                }\n\n                that._reorderContent(sourceColumns, destColumn, before);\n\n                lockChanged = !!column.locked;\n                lockChanged = lockChanged != isLocked;\n                column.locked = isLocked;\n\n                columns.splice(before ? destIndex : destIndex + 1, 0, column);\n                columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n\n                that._updateLockedCols();\n                that._updateCols();\n                that._templates();\n\n                that._updateColumnCellIndex();\n                that._updateColumnSorters();\n\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedHeaderHeight();\n                that._syncLockedContentHeight();\n                that._updateFirstColumnClass();\n                that._updateStickyColumns();\n\n                if (virtualScroll.columns) {\n                    that.refresh();\n                }\n\n                if (!lockChanged) {\n                    return;\n                }\n\n                if (isLocked) {\n                    that.trigger(COLUMNLOCK, {\n                        column: column\n                    });\n                } else {\n                    that.trigger(COLUMNUNLOCK, {\n                        column: column\n                    });\n                }\n            },\n\n            _updateColumnCellIndex: function() {\n                var header;\n                var offset = 0;\n\n                if (this.lockedHeader) {\n                    header = this.lockedHeader.find(\"thead\");\n                    offset = updateCellIndex(header, lockedColumns(this.columns));\n                }\n                updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n            },\n\n            lockColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || column.locked || column.hidden) {\n                    return;\n                }\n\n                if (column.sticky) {\n                    this.unstickColumn(columns.indexOf(column));\n                }\n\n                var index = lockedColumns(columns).length - 1;\n                this.reorderColumn(index, column, false);\n            },\n\n            unlockColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || !column.locked || column.hidden) {\n                    return;\n                }\n\n                var index = lockedColumns(columns).length;\n                this.reorderColumn(index, column, true);\n            },\n\n            stickColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || column.sticky || column.hidden) {\n                    return;\n                }\n\n                if (column.locked) {\n                    this.unlockColumn(columns.indexOf(column));\n\n                    if (column.locked) {\n                        return;\n                    }\n                }\n\n                column.sticky = true;\n                this._updateStickyColumns();\n            },\n\n            unstickColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || !column.sticky || column.locked || column.hidden) {\n                    return;\n                }\n\n                this._removeStickyAttributes([column]);\n                this._removeStickyStyles(stickyColumns(columns));\n\n                column.sticky = false;\n                this._updateStickyColumns();\n\n                if (this._anyStickyColumns() === 0) {\n                    this._templates();\n                    if (this._hasFilterRow()) {\n                        this._updateStickyFilterCells();\n                    }\n                }\n            },\n\n            cellIndex: function(td) {\n                var lockedColumnOffset = 0;\n\n                if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                    lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n                }\n\n                return $(td).parent().children('td:not(.k-group-cell,.k-hierarchy-cell)').index(td) + lockedColumnOffset;\n            },\n\n            _modelForContainer: function(container) {\n                container = $(container);\n\n                if (!container.is(TR) && this._editMode() !== \"popup\") {\n                    container = container.closest(TR);\n                }\n\n                var id = container.attr(kendo.attr(\"uid\")) || container.find(\".k-popup-edit-form\").attr(kendo.attr(\"uid\"));\n\n                return this.dataSource.getByUid(id);\n            },\n\n            _calculateColumnIndex: function(cell) {\n                var cellIndex = this.cellIndex(cell);\n                var virtualOffset = 0;\n\n                if (this._hasVirtualColumns()) {\n                    virtualOffset = parseInt($(cell).closest(TR).find(\"td\").first().attr(\"colspan\"), 10);\n                    virtualOffset = (virtualOffset > 1 ? virtualOffset - 1 : 0);\n                }\n\n                return cellIndex + virtualOffset;\n            },\n\n            _editable: function() {\n                var obj;\n\n                var that = this,\n                    editable = that.options.editable,\n                    handler = function() {\n                        var target = activeElement(),\n                            cell = that._editContainer;\n\n                        if (cell && cell[0] && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest(\".k-animation-container\").length) {\n                            if (that.editable.end()) {\n                                that.closeCell();\n                            } else {\n                                that._scrollVirtualWrapper();\n                            }\n                        }\n                    },\n                    useDoubleTapEditing = !!(that._isMobile || kendo.support.mobileOS);\n\n                if (editable) {\n                    this.wrapper.addClass(\"k-editable\");\n\n                    var mode = that._editMode();\n                    if (mode === \"incell\") {\n                        that.table.add(that.lockedTable)\n                            .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, function(e) {\n                                var target = $(e.target);\n                                if (that._editMode() === \"incell\" && target.hasClass(\"k-checkbox\") && target.prev().attr(kendo.attr(\"bind\"))) {\n                                    e.preventDefault();\n                                }\n                            });\n\n                        if (editable.update !== false) {\n                            if (isMac) {\n                                that.wrapper\n                                    .on(CLICK + NS, \".k-edit-cell > input[type='checkbox']\", function(e) {\n                                        // checking /unchecking a checkbox does not change the document.activeElement to be the checkbox\n                                        // this is necessary for the \"focusout\" event to be fired\n                                        $(e.target).trigger(\"focus\");\n                                    })\n                                    .on(CLICK + NS, \".k-edit-cell\", function(e) {\n                                        if (!$(e.target).is(\"input\")) {\n                                            $(e.currentTarget).find(\"input[type='checkbox']\").trigger(\"focus\");\n                                        }\n                                    })\n                                    .on(MOUSEDOWN + NS, \"tr:not(.k-grouping-row) > td\", function(e) {\n                                        var editContainer = that._editContainer;\n\n                                        if (editContainer && editContainer[0] && ($.contains(editContainer[0], e.target) || editContainer[0] === e.target)) {\n                                            that._mousedownOnEditCell = true;\n                                        } else {\n                                            that._mousedownOnEditCell = false;\n                                        }\n                                    });\n                            }\n\n                            that.editableUserEvents = new kendo.UserEvents(that.wrapper, ( obj = {\n                                filter: \"tr:not(.k-grouping-row) > td\",\n                                allowSelection: true,\n                                supportDoubleTap: useDoubleTapEditing,\n                                fastTap: useDoubleTapEditing\n                            }, obj[useDoubleTapEditing ? 'doubleTap' : 'tap'] = function(e) {\n                                    var td = $(e.target),\n                                    isLockedCell = that.lockedTable && td.closest(\"table\")[0] === that.lockedTable[0];\n\n                                    that._mousedownOnEditCell = false;\n\n                                    if (td.hasClass(\"k-hierarchy-cell\") ||\n                                        td.hasClass(\"k-detail-cell\") ||\n                                        td.hasClass(\"k-group-cell\") ||\n                                        td.hasClass(\"k-edit-cell\") ||\n                                        td.has(\".k-grid-remove-command\").length ||\n                                        (td.closest(\"tbody\")[0] !== that.tbody[0] && !isLockedCell) ||\n                                        $(e.target).is(\":input\")) {\n                                        return;\n                                    }\n\n                                    if (that.editable) {\n                                        if (that.editable.end()) {\n                                            $(activeElement()).trigger(\"blur\");\n                                            that.closeCell();\n                                            that.editCell(td);\n                                        } else {\n                                            that._scrollVirtualWrapper();\n                                        }\n                                    } else {\n                                        that.editCell(td);\n                                    }\n                                }, obj ));\n\n                            that.wrapper.on(\"focusin\" + NS, function() {\n                                // fix focus issue in IE\n                                if (!$.contains(this, activeElement())) {\n                                    clearTimeout(that.timer);\n                                    that.timer = null;\n                                }\n                            })\n                            .on(\"focusout\" + NS, function(e) {\n                                var shouldCloseCell = true;\n\n                                if ((isMac && that._mousedownOnEditCell) || that._virtualColScroll) {\n                                    shouldCloseCell = false;\n                                }\n\n                                that._mousedownOnEditCell = false;\n\n                                if (shouldCloseCell) {\n                                    that.timer = setTimeout(function() {\n                                        handler(e);\n                                    }, 1);\n                                }\n                            });\n                        }\n                    } else {\n                        if (editable.update !== false) {\n                            that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command\", function(e) {\n                                var element = $(this);\n                                if (!that._belongsToGrid(element)) {\n                                    return;\n                                }\n                                e.preventDefault();\n                                that.editRow(element.closest(TR));\n                            });\n\n                            if (that._isVirtualInlineEditable()) {\n                                that.wrapper.on(\"focusout\" + NS, \"tr:not(.k-grouping-row) > td\", function() {\n                                    if (that.editable && !that.editable.end()) {\n                                        that._scrollVirtualWrapper();\n                                    }\n                                });\n                            }\n                        }\n                    }\n\n                    if (editable.destroy !== false) {\n                        that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", function(e) {\n                            var element = $(this);\n                            if (!that._belongsToGrid(element)) {\n                                return;\n                            }\n                            e.preventDefault();\n                            e.stopPropagation();\n                            that.removeRow(element.closest(TR));\n                        });\n                    } else {\n                        //Required for the MVC server wrapper delete button\n                        that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", function(e) {\n                            if (!that._belongsToGrid($(this))) {\n                                return;\n                            }\n                            e.stopPropagation();\n\n                            if (!that._confirmation()) {\n                                e.preventDefault();\n                            }\n                        });\n                    }\n                }\n            },\n\n            editCell: function(cell) {\n                cell = $(cell);\n\n                var that = this,\n                column = leafColumns(that.columns)[that._calculateColumnIndex(cell)],\n                    model = that._modelForContainer(cell);\n\n                that.closeCell();\n\n                if (model && isColumnEditable(column, model) && !column.command) {\n                    if (that.trigger(BEFOREEDIT, { model: model })) {\n                        return;\n                    }\n\n                    that._attachModelChange(model);\n\n                    that._editContainer = cell;\n\n                    if (that._shouldClearEditableState) {\n                        that._clearEditableState();\n                    }\n                    that.editable = cell.addClass(\"k-edit-cell\")\n                        .kendoEditable({\n                            fields: editField(column),\n                            model: model,\n                            size: that.options.size,\n                            target: that,\n                            change: function(e) {\n                                if (that.trigger(SAVE, { values: e.values, container: cell, model: model } )) {\n                                    e.preventDefault();\n                                }\n                            },\n                            skipFocus: (that._isVirtualIncellEditable() || that._hasVirtualColumns()) && that._editableState ? true : false\n\n                        }).data(\"kendoEditable\");\n\n                    var tr = cell.parent().addClass(\"k-grid-edit-row\");\n\n                    if (that.lockedContent) {\n                        adjustRowHeight(tr[0], that._relatedRow(tr).addClass(\"k-grid-edit-row\")[0]);\n                        that._syncLockedScroll();\n                    }\n\n                    that.trigger(EDIT, { container: cell, model: model });\n                }\n            },\n\n            _adjustLockedHorizontalScrollBar: function() {\n                var table = this.table,\n                    content = table.parent();\n\n                var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n                this.lockedContent.height(content[0].offsetHeight - scrollbar);\n            },\n\n            _syncLockedScroll: function() {\n                this.lockedContent[0].scrollTop = this.content[0].scrollTop;\n                if (this.virtualScrollable) {\n                    this.lockedContent[0].scrollTop = this.wrapper.find(\".k-virtual-scrollable-wrap\")[0].scrollTop;\n                }\n            },\n\n            _syncLockedContentHeight: function() {\n                if (this.lockedTable) {\n                    if (!this.touchScroller) {\n                        this._adjustLockedHorizontalScrollBar();\n                    }\n                    this._adjustRowsHeight(this.table, this.lockedTable);\n                }\n            },\n\n            _syncLockedHeaderHeight: function() {\n                if (this.lockedHeader) {\n                    var lockedTable = this.lockedHeader.children(\"table\");\n                    var table = this.thead.parent();\n\n                    this._adjustRowsHeight(lockedTable, table);\n\n                    syncTableHeight(lockedTable, table);\n                }\n            },\n\n            _syncLockedFooterHeight: function() {\n                if (this.lockedFooter && this.footer && this.footer.length) {\n                    this._adjustRowsHeight(this.lockedFooter.children(\"table\"), this.footer.find(\".k-grid-footer-wrap > table\"));\n                }\n            },\n\n            _destroyEditable: function() {\n                var that = this;\n\n                var destroy = function() {\n                    if (that.editable) {\n\n                        var container = that.editView ? that.editView.element : that._editContainer;\n                        var window = that._editContainer.data(\"kendoWindow\");\n\n                        if (container) {\n                            container.off(CLICK + NS, \".k-grid-cancel-command\", that._editCancelClickHandler);\n                            container.off(CLICK + NS, \".k-grid-save-command\", that._editUpdateClickHandler);\n                        }\n\n                        that._detachModelChange();\n                        that.editable.destroy();\n                        that.editable = null;\n                        if (window) {\n                            window.destroy();\n                        }\n                        that._editContainer = null;\n                        that._destroyEditView();\n                        that._editableIsClosing = null;\n                    }\n                };\n\n                if (that.editable) {\n                    if (that._editMode() === \"popup\" && !that._isMobile) {\n                        if (that._editableIsClosing) {\n                            that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy);\n                        }\n                        else {\n                            that._editableIsClosing = true;\n                            that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                        }\n                    } else {\n                        destroy();\n                    }\n                }\n                if (that._confirmDialog) {\n                    that._confirmDialog.close();\n                    that._confirmDialog.destroy();\n                    that._confirmDialog = null;\n                }\n            },\n\n            _destroyEditView: function() {\n                if (this.editView) {\n                    this.editView.purge();\n                    this.editView = null;\n                    this.pane.navigate(\"\");\n                }\n            },\n\n            _attachModelChange: function(model) {\n                var that = this;\n\n                that._modelChangeHandler = function(e) {\n                    that._modelChange({ field: e.field, model: this });\n                };\n\n                model.bind(\"change\", that._modelChangeHandler);\n            },\n\n            _detachModelChange: function() {\n                var that = this,\n                    container = that._editContainer,\n                    model = that._modelForContainer(container);\n\n                if (model) {\n                    model.unbind(CHANGE, that._modelChangeHandler);\n                }\n            },\n\n            closeCell: function(isCancel) {\n                var that = this,\n                    cell = that._editContainer,\n                    column,\n                    tr,\n                    model;\n\n                if (!cell) {\n                    return;\n                }\n\n                model = that._modelForContainer(cell);\n\n                if (isCancel && that.trigger(\"cancel\", { container: cell, model: model })) {\n                    return;\n                }\n\n                that.trigger(CELLCLOSE, { type: isCancel ? \"cancel\" : \"save\", model: model, container: cell });\n\n                cell.removeClass(\"k-edit-cell\");\n                column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                tr = cell.parent().removeClass(\"k-grid-edit-row\");\n\n                if (that.lockedContent) {\n                    that._relatedRow(tr).removeClass(\"k-grid-edit-row\");\n                }\n\n                that._destroyEditable(); // editable should be destroyed before content of the container is changed\n\n                that._displayCell(cell, column, model);\n\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n\n                that.trigger(\"itemChange\", { item: tr, data: model, ns: ui });\n\n                if (that.lockedContent) {\n                    adjustRowHeight(tr.css(HEIGHT, \"\")[0], that._relatedRow(tr).css(HEIGHT, \"\")[0]);\n                }\n            },\n\n            _displayCell: function(cell, column, dataItem) {\n                var that = this,\n                    state = { storage: {}, count: 0 },\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n                if (state.count > 0) {\n                    tmpl = tmpl.bind(state.storage);\n                }\n\n                cell.empty().html(tmpl(dataItem));\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: cell,\n                        data: [ { dataItem: dataItem } ]\n                    };\n                });\n            },\n\n            removeRow: function(row) {\n                if (!this._confirmation(row)) {\n                    return;\n                }\n\n                this._removeRow(row);\n            },\n\n            _removeRow: function(row) {\n                var that = this,\n                    model,\n                    modelId,\n                    key,\n                    schema,\n                    mode = that._editMode();\n\n                if (mode !== \"incell\") {\n                    that.cancelRow();\n                }\n\n                row = $(row);\n\n                if (that.lockedContent) {\n                    row = row.add(that._relatedRow(row));\n                }\n\n                row = row.hide();\n                if (that.dataSource._isGroupPaged()) {\n                    that._removeGroupIfEmpty(row);\n                }\n\n                model = that._modelForContainer(row);\n\n                if (model && !that.trigger(REMOVE, { row: row, model: model })) {\n                    schema = that.dataSource.options.schema;\n                    if (that._selectedIds && schema && schema.model) {\n                        modelId = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n                        key = model[modelId];\n                        delete that._selectedIds[key];\n                    }\n\n                    that.dataSource.remove(model);\n\n                    if (mode === \"inline\" || mode === \"popup\") {\n                        that.dataSource.sync();\n                    }\n                } else if (mode === \"incell\") {\n                    that._destroyEditable();\n                }\n            },\n\n            _editMode: function() {\n                var mode = \"incell\",\n                    editable = this.options.editable;\n\n                if (editable !== true) {\n                    if (typeof editable == \"string\") {\n                        mode = editable;\n                    } else {\n                        mode = editable.mode || mode;\n                    }\n                }\n\n                return mode;\n            },\n\n            editRow: function(row) {\n                var model;\n                var that = this;\n\n                if (row instanceof ObservableObject) {\n                    model = row;\n                } else {\n                    row = $(row);\n                    model = that._modelForContainer(row);\n                }\n\n                var mode = that._editMode();\n                var container;\n\n                that.cancelRow();\n\n                if (model) {\n                    row = that.tbody.children(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\");\n                    that._attachModelChange(model);\n\n                    if (mode === \"popup\") {\n                        that._createPopupEditor(model);\n                    } else if (mode === \"inline\") {\n                        that._createInlineEditor(row, model);\n                    } else if (mode === \"incell\") {\n                        $(row).children(DATA_CELL).each(function() {\n                            var cell = $(this);\n                            var column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                            model = that._modelForContainer(cell);\n\n                            if (model && (!model.editable || model.editable(column.field)) && column.field && !column.selectable) {\n                                that.editCell(cell);\n                                return false;\n                            }\n                        });\n                    }\n\n\n                    container = that.editView ? that.editView.element : that._editContainer;\n\n                    if (container) {\n                        if (!this._editCancelClickHandler) {\n                            this._editCancelClickHandler = this._editCancelClick.bind(this);\n                        }\n\n                        container.on(CLICK + NS, \".k-grid-cancel-command\", this._editCancelClickHandler);\n\n                        if (!this._editUpdateClickHandler) {\n                            this._editUpdateClickHandler = this._editUpdateClick.bind(this);\n                        }\n\n                        container.on(CLICK + NS, \".k-grid-save-command\", this._editUpdateClickHandler);\n                    }\n                }\n            },\n\n            _editUpdateClick: function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                this.saveRow();\n            },\n\n            _editCancelClick: function(e) {\n                var that = this;\n                var navigatable = that.options.navigatable;\n                var model = that.editable.options.model;\n                var container = that.editView ? that.editView.element : that._editContainer;\n\n                e.preventDefault();\n                e.stopPropagation();\n\n                if (that.trigger(\"cancel\", { container: container, model: model })) {\n                    return;\n                }\n\n                var currentIndex = that.items().index($(that.current()).parent());\n\n                that.cancelRow();\n\n                if (navigatable) {\n                    that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                    focusTable(that.table, true);\n                }\n            },\n\n            _editFields: function(columns, model) {\n                var fields = [];\n                var column;\n\n                for (var idx = 0; idx < columns.length; idx++) {\n                    column = columns[idx];\n                    if (column.selectable || column.command) {\n                        continue;\n                    }\n                    if (isColumnEditable(column, model)) {\n                        fields.push(editField(column));\n                    }\n                }\n                return fields;\n            },\n\n            _createPopupEditor: function(model) {\n                var that = this;\n                var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form\"><' + (that._isMobile ? 'ul class=\"k-edit-form-container k-listgroup k-listgroup-flush\">' : 'div class=\"k-edit-form-container\">');\n                var column;\n                var command;\n                var idx;\n                var length;\n                var tmpl;\n                var updateText;\n                var cancelText;\n                var updateIconClass;\n                var cancelIconClass;\n                var tempCommand;\n                var columns = leafColumns(that.columns);\n                var attr;\n                var editMenuGuid = kendo.guid();\n                var editable = that.options.editable;\n                var template = editable.template;\n                var options = isPlainObject(editable) ? editable.window : {};\n                var settings = extend({}, kendo.Template, that.options.templateSettings);\n                var state;\n                var container;\n                var buttonsHTML;\n\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n\n                options = options || {};\n\n                if (template) {\n                    if (typeof template === STRING) {\n                        template = kendo.unescape(template);\n                    }\n\n                    html += (kendo.template(template, settings))(model);\n\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        if (column.command) {\n                            tempCommand = getCommand(column.command, \"edit\");\n                            if (tempCommand) {\n                                command = tempCommand;\n                            }\n                        }\n                    }\n                } else {\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        if (column.selectable) {\n                            continue;\n                        }\n                        if (!column.command) {\n                            if (that._isMobile) {\n                                html += '<li class=\"k-item k-listgroup-item\">';\n\n                                if (isColumnEditable(column, model)) {\n                                    html += '<label class=\"k-label k-listgroup-form-row\">';\n                                    html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                    html += '<div class=\"k-listgroup-form-field-wrapper\" id=\"' + column.field + '_' + editMenuGuid + '\" ' + kendo.attr(\"container-for\") + '=\"' + column.field + '\"></div>';\n                                    html += '</label>';\n                                } else {\n                                    state = { storage: {}, count: 0 };\n\n                                    tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n                                    if (state.count > 0) {\n                                        tmpl = tmpl.bind(state.storage);\n                                    }\n\n                                    html += '<label class=\"k-label k-listgroup-form-row k-no-click\">';\n                                    html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                    html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n                                    html += '</label>';\n                                }\n\n                                html += \"</li>\";\n                            }\n                        } else if (column.command) {\n                            tempCommand = getCommand(column.command, \"edit\");\n                            if (tempCommand) {\n                                command = tempCommand;\n                            }\n                        }\n                    }\n                }\n\n                if (command) {\n                    if (isPlainObject(command)) {\n                        if (isPlainObject(command.text)) {\n                            updateText = command.text.update;\n                            cancelText = command.text.cancel;\n                        }\n                        if (isPlainObject(command.iconClass)) {\n                            updateIconClass = command.iconClass.update;\n                            cancelIconClass = command.iconClass.cancel;\n                        }\n\n                       if (command.attr) {\n                           attr = command.attr;\n                       }\n                    }\n                }\n\n                if (!that._isMobile) {\n                    buttonsHTML = '<div class=\"k-edit-buttons k-actions-start\">';\n                    buttonsHTML += that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass, size: \"medium\" }) + that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass, size: \"medium\" });\n                    buttonsHTML += '</div>';\n\n                    html += template ? buttonsHTML + '</div>' : '</div>';\n\n                    container = that._editContainer = $(html)\n                    .appendTo(that.wrapper).eq(0)\n                    .kendoWindow(extend({\n                        modal: true,\n                        resizable: false,\n                        draggable: true,\n                        title: that.options.messages.commands.edit || \"Edit\",\n                        visible: false,\n                        close: function(e) {\n                            if (e.userTriggered) {\n                                //The bellow line is required due to: draggable window in IE, change event will be triggered while the window is closing\n                                e.sender.element.trigger(\"focus\");\n                                if (that.trigger(\"cancel\", { container: container, model: model })) {\n                                    e.preventDefault();\n                                    return;\n                                }\n\n                                var currentIndex = that.items().index($(that.current()).parent());\n\n                                that._editableIsClosing = true;\n                                that.cancelRow();\n                                if (that.options.navigatable) {\n                                    that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                                    focusTable(that.table, true);\n                                }\n                            }\n                        }\n                    }, options));\n                } else {\n                    html += \"</ul></div>\";\n                    that.editView = that.pane.append(\n                        '<div data-' + kendo.ns + 'role=\"view\" class=\"k-grid-edit-form\">' +\n                            '<div data-' + kendo.ns + 'role=\"header\" class=\"k-header\">' +\n                                '<a href=\"\\\\#\" class=\"k-header-cancel k-link k-grid-cancel-command\" title=\"#=messages.cancel#\" ' +\n                                'aria-label=\"#=messages.cancel#\">' + kendo.ui.icon(\"chevron-left\") + '</a>' +\n                                encode(that.options.messages.commands.edit || \"Edit\") +\n                                '<a href=\"\\\\#\" class=\"k-header-done k-link k-grid-save-command\" title=\"#=messages.done#\" ' +\n                                'aria-label=\"#=messages.done#\">' + kendo.ui.icon(\"check\") + '</a>' +\n                            '</div>' +\n                            '<div data-' + kendo.ns + 'role=\"content\" class=\"' + classNames.content + '\">' +\n                                html +\n                            '</div>' +\n                        '</div>');\n                    container = that._editContainer = that.editView.element.find(\".k-popup-edit-form\");\n                }\n\n                if (!template && !that._isMobile) {\n                    that.editable = new ui.Form(that._editContainer.find(\".k-edit-form-container\"), {\n                        items: that._editFields(columns, model),\n                        buttonsTemplate: function () { return ''; },\n                        formData: model\n                    }).editable;\n                    that._editContainer.append(buttonsHTML);\n                } else {\n                    that.editable = that._editContainer\n                    .kendoEditable({\n                        fields: that._isMobile ? that._editFields(columns, model) : null,\n                        model: model,\n                        clearContainer: false,\n                        target: that,\n                        skipFocus: true\n                    }).data(\"kendoEditable\");\n                }\n\n                that._openPopUpEditor();\n\n                that.trigger(EDIT, { container: container, model: model });\n            },\n\n            _openPopUpEditor: function() {\n                var that = this;\n                var windowEditor = that._editContainer ? that._editContainer.data(\"kendoWindow\") : null;\n                var windowOptions = (that.options.editable || {}).window || {};\n\n                if (!this._isMobile) {\n                    if (windowEditor) {\n                        if (!windowOptions.position) {\n                            windowEditor.center();\n                        }\n\n                        windowEditor.open();\n                    }\n                } else {\n                    this.pane.navigate(this.editView, this._editAnimation);\n                }\n            },\n\n            _createInlineEditor: function(row, model) {\n                var that = this;\n                var column;\n                var cell;\n                var command;\n                var fields = [];\n\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n\n                if (that.lockedContent) {\n                    row = row.add(that._relatedRow(row));\n                }\n\n                row.children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                    cell = $(this);\n                    column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                    if (!column.command && isColumnEditable(column, model)) {\n                        fields.push(editField(column));\n                        cell.attr(kendo.attr(\"container-for\"), column.field);\n                        cell.empty();\n                    } else if (column.command) {\n                        command = getCommand(column.command, \"edit\");\n                        if (command) {\n                            cell.empty();\n\n                            var updateText,\n                                cancelText,\n                                updateIconClass,\n                                cancelIconClass,\n                                attr;\n\n                            if (isPlainObject(command)) {\n                                    if (isPlainObject(command.text)) {\n                                        updateText = command.text.update;\n                                        cancelText = command.text.cancel;\n                                    }\n                                    if (isPlainObject(command.iconClass)) {\n                                        updateIconClass = command.iconClass.update;\n                                        cancelIconClass = command.iconClass.cancel;\n                                    }\n\n                                if (command.attr) {\n                                    attr = command.attr;\n                                }\n                            }\n\n                            $(that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass }) +\n                                that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass })).appendTo(cell);\n                        }\n                    }\n                });\n\n                that._editContainer = row;\n                that._editContainer.addClass(\"k-grid-edit-row\");\n\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n\n                that.editable = new kendo.ui.Editable(that._editContainer, {\n                    target: that,\n                    fields: fields,\n                    size: that.options.size,\n                    model: model,\n                    skipFocus: (that._isVirtualInlineEditable() && that._editableState && (that._editableState.field ? true : false)) || that._hasVirtualColumns(),\n                    clearContainer: false\n                });\n\n                if (row.length > 1) {\n\n                    adjustRowHeight(row[0], row[1]);\n                    that._applyLockedContainersWidth();\n                }\n\n                that.trigger(EDIT, { container: row, model: model });\n            },\n\n            cancelRow: function(notify) {\n                var that = this,\n                    container = that._editContainer,\n                    model;\n\n                if (container) {\n                    model = that._modelForContainer(container);\n\n                    if (!model || (notify && that.trigger(\"cancel\", { container: container, model: model }))) {\n                        return;\n                    }\n\n                    that._destroyEditable();\n\n                    that.dataSource.cancelChanges(model);\n\n                    that._clearEditableState();\n\n                    if (that._editMode() !== \"popup\") {\n                        that._displayRow(container);\n                    } else {\n                        that._displayRow(that.tbody.find(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"));\n                    }\n                }\n            },\n\n            saveRow: function() {\n                var that = this;\n                var container = this._editContainer;\n                var model = this._modelForContainer(container);\n                var deferred = $.Deferred();\n                var valid;\n\n                if (!container || !this.editable) {\n                    return deferred.resolve().promise();\n                }\n\n                valid = that.editable && that.editable.end();\n\n                if (!valid || this.trigger(SAVE, { container: container, model: model })) {\n                    if (!valid) {\n                        that._scrollVirtualWrapper();\n                    }\n\n                    return deferred.reject().promise();\n                }\n\n                that._clearEditableState();\n\n                return this.dataSource.sync();\n            },\n\n            _displayRow: function(row) {\n                var that = this,\n                    model = that._modelForContainer(row),\n                    related,\n                    newRow,\n                    nextRow,\n                    isSelected = row.hasClass(SELECTED),\n                    isAlt = row.hasClass(\"k-alt\");\n\n                if (model) {\n\n                    if (that.lockedContent) {\n                        related = $((isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model));\n                        that._relatedRow(row.last()).replaceWith(related);\n                    }\n\n                    that.angular(\"cleanup\", function() { return { elements: row.get() }; });\n\n                    newRow = $((isAlt ? that.altRowTemplate : that.rowTemplate)(model));\n                    if (!row.is(\":visible\")) {\n                        newRow.hide();\n                    }\n                    row.replaceWith(newRow);\n\n                    that.trigger(\"itemChange\", { item: newRow, data: model, ns: ui });\n\n                    if (related && related.length) {\n                        that.trigger(\"itemChange\", { item: related, data: model, ns: ui });\n                    }\n\n                    var angularElements = newRow;\n                    var angularData = [{ dataItem: model }];\n\n                    if (related && related.length) {\n                        angularElements = newRow.add(related);\n                        angularData.push({ dataItem: model });\n                    }\n\n                    that.angular(\"compile\", function() {\n                        return {\n                            elements: angularElements.get(),\n                            data: angularData\n                        };\n                    });\n\n\n                    if (isSelected && (that.options.selectable || that._checkBoxSelection)) {\n                        that.select(newRow.add(related));\n                    }\n\n                    if (related) {\n                        adjustRowHeight(newRow[0], related[0]);\n                    }\n\n                    nextRow = newRow.next();\n                    if (nextRow.hasClass(\"k-detail-row\") && nextRow.is(\":visible\")) {\n                        kendo.ui.icon(newRow.find(\".k-hierarchy-cell .k-icon,.k-hierarchy-cell .k-svg-icon\"), { icon: \"caret-alt-down\" });\n                    }\n                }\n            },\n\n            _showMessage: function(messages, row) {\n                var that = this;\n\n                if (!that._isMobile) {\n                    // eslint-disable-next-line no-alert\n                    return window.confirm(messages.title);\n                }\n\n                var confirmDialog = that._confirmDialog = new kendo.ui.Confirm($(\"<div />\").appendTo(document.body), {\n                    modal: {\n                        preventScroll: true\n                    },\n                    closable: false,\n                    title: false,\n                    content: messages.title,\n                    messages: {\n                        okText: messages.confirmDelete,\n                        cancel: messages.cancelDelete\n                    },\n                    open: function() {\n                        if (that.content) {\n                            that.content.data(OVERFLOW, that.content.css(OVERFLOW));\n                            that.content.css(OVERFLOW, HIDDEN);\n                        }\n                    },\n                    close: function() {\n                        if (that.content) {\n                            that.content.css(OVERFLOW, that.content.data(OVERFLOW));\n                        }\n                    }\n                });\n\n                confirmDialog.result\n                    .done(function() {\n                        that._removeRow(row);\n                    })\n                    .fail(function() {\n                        var confirmDialog = that._confirmDialog;\n\n                        if (confirmDialog) {\n                            confirmDialog.close();\n                            confirmDialog.destroy();\n                        }\n                    });\n\n                return false;\n            },\n\n            _confirmation: function(row) {\n                var that = this,\n                    editable = that.options.editable,\n                    confirmation = (editable === true || typeof editable === STRING) ? that.options.messages.editable.confirmation : editable.confirmation;\n\n                if (isPlainObject(editable) && typeof editable.mode === STRING && typeof confirmation !== FUNCTION && typeof confirmation !== STRING && confirmation !== false) {\n                    confirmation = that.options.messages.editable.confirmation;\n                }\n\n                if (confirmation !== false && confirmation != null) {\n\n                    if (typeof confirmation === FUNCTION) {\n                        confirmation = confirmation(that._modelForContainer(row));\n                    }\n\n                    return that._showMessage({\n                            confirmDelete: editable.confirmDelete || that.options.messages.editable.confirmDelete,\n                            cancelDelete: editable.cancelDelete || that.options.messages.editable.cancelDelete,\n                            title: confirmation === true ? that.options.messages.editable.confirmation : confirmation\n                        }, row);\n                }\n\n                return true;\n            },\n\n            cancelChanges: function() {\n                var that = this;\n\n                if (that._cachedRowsHeight) {\n                    that._mapCachedRowsHeight(\"getByUid\", \"id\");\n                    that._shouldMapHights = true;\n                }\n\n                that.dataSource.cancelChanges();\n\n                if (that._isVirtualEditable()) {\n                    that._virtualPageToTop(function() {\n                        that.virtualScrollable.scrollToTop();\n                    });\n                }\n            },\n\n            saveChanges: function() {\n                var that = this;\n                var valid = that.editable && that.editable.end();\n\n                if ((valid || !that.editable) && !that.trigger(SAVECHANGES)) {\n                    that.dataSource.sync();\n                } else if (!valid) {\n                    that._scrollVirtualWrapper();\n                }\n            },\n\n            addRow: function() {\n                var that = this,\n                    index,\n                    dataSource = that.dataSource,\n                    mode = that._editMode(),\n                    createAt = that.options.editable.createAt || \"\",\n                    pageSize = dataSource.pageSize(),\n                    view = dataSource.view() || [];\n                var createAtBottom = createAt.toLowerCase() === BOTTOM;\n                var model;\n                var virtualEditable = that._isVirtualEditable();\n\n                if ((that.editable && that.editable.end()) || !that.editable) {\n                    if (mode != \"incell\") {\n                        that.cancelRow();\n                    }\n\n                    index = dataSource.indexOf(view[0]);\n\n                    if (createAtBottom) {\n                        index += view.length;\n\n                        if (pageSize && !dataSource.options.serverPaging && pageSize <= view.length) {\n                            index -= 1;\n                        }\n                    }\n\n                    if (index < 0) {\n                        if (dataSource.page() > dataSource.totalPages()) {\n                            index = (dataSource.page() - 1) * pageSize;\n                        } else {\n                            index = 0;\n                        }\n                    }\n\n                    if (that.options.navigatable && mode == \"incell\") {\n                        that._removeCurrent();\n                    }\n\n                    if (virtualEditable) {\n                        that._virtualAddRow();\n                    } else {\n                        model = dataSource.insert(index, {});\n                        that._editModel(model);\n                    }\n                } else {\n                    that._scrollVirtualWrapper();\n                }\n            },\n\n            _editModel: function(model) {\n                var that = this;\n                var createAt = that.options.editable.createAt || \"\";\n                var mode = that._editMode();\n\n                if (model) {\n                    var id = model.uid,\n                        table = that.lockedContent ? that.lockedTable : that.table,\n                        row = table.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + id + \"]\"),\n                        cell = row.children(\"td:not(.k-group-cell,.k-hierarchy-cell)\").eq(that._firstEditableColumnIndex(row));\n\n                    if (mode === \"inline\" && row.length) {\n                        that.editRow(row);\n                    } else if (mode === \"popup\") {\n                        that.editRow(model);\n                    } else if (cell.length) {\n                        that.editCell(cell);\n                    }\n\n                    if (createAt.toLowerCase() == \"bottom\" && that.lockedContent) {\n                        //scroll the containers to the bottom\n                        that.lockedContent[0].scrollTop = that.content[0].scrollTop = that.table[0].offsetHeight;\n                    }\n                }\n            },\n\n            _virtualAddRow: function() {\n                var that = this;\n                var createAtBottom = (that.options.editable.createAt || \"\").toLowerCase() === BOTTOM;\n\n                that._clearEditableState();\n\n                if (createAtBottom) {\n                    that._virtualAddRowAtBottom();\n                } else {\n                    that._virtualAddRowAtTop();\n                }\n            },\n\n            _virtualAddRowAtTop: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n                var virtualScrollable = that.virtualScrollable;\n                var model;\n\n                if (dataSource.page() === 1) {\n                    model = dataSource.insert(0, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToTop();\n                } else {\n                    that._virtualPageToTop(function() {\n                        model = dataSource.insert(0, {});\n                        that._editModel(model);\n                        virtualScrollable.scrollToTop();\n                    });\n                }\n            },\n\n            _virtualAddRowAtBottom: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n                var virtualScrollable = that.virtualScrollable;\n                var index = dataSource.total();\n                var model;\n\n                if (dataSource.at(index - 1) instanceof ObservableObject) {\n                    model = dataSource.insert(index, {});\n\n                    that._virtualPageToBottom(function() {\n                        that._editModel(model);\n                        virtualScrollable.scrollToBottom();\n                    });\n                } else {\n                    that._virtualPageToBottom(function() {\n                        model = dataSource.insert(index, {});\n                        that._editModel(model);\n                        virtualScrollable.scrollToBottom();\n                    });\n                }\n            },\n\n            _virtualPageToTop: function(callback) {\n                var that = this;\n\n                that._virtualPage(0, that.dataSource.take(), function() {\n                    callback();\n                });\n            },\n\n            _virtualPageToBottom: function(callback) {\n                var that = this;\n                var dataSource = that.dataSource;\n                var take = dataSource.take();\n                var total = dataSource.total();\n                var skip = total > take ? (total - take) : 0;\n\n                that._virtualPage(skip, take, function() {\n                    callback();\n                });\n            },\n\n            _virtualPage: function(skip, take, callback) {\n                var that = this;\n\n                if (that._isVirtualEditable()) {\n                    that.virtualScrollable._preventScroll = true;\n                    that.virtualScrollable._page(skip, take, callback);\n                }\n            },\n\n            _firstEditableColumnIndex: function(container) {\n                var that = this,\n                    column,\n                    columns = leafColumns(that.columns),\n                    idx,\n                    length,\n                    model = that._modelForContainer(container);\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (model && (!model.editable || model.editable(column.field)) && !column.command && column.field && column.hidden !== true) {\n                        return idx;\n                    }\n                }\n                return -1;\n            },\n\n            _clickAdd: function(e) {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                this.addRow();\n            },\n\n            _clickCancel: function(e) {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                this.cancelChanges();\n            },\n\n            _clickExcel: function(e) {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                this.saveAsExcel();\n            },\n\n            _clickPdf: function(e) {\n                var that = this;\n\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                var promise = that.saveAsPDF();\n\n                if (promise) {\n                    promise.done(function() {\n                        that._pdfInitialized = false;\n                    });\n                }\n            },\n\n            _clickSave: function(e) {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                this.saveChanges();\n            },\n\n            _searchInput: function(e) {\n                var that = this,\n                    input = e.currentTarget;\n\n                clearTimeout(that._searchTimeOut);\n\n                that._searchTimeOut = setTimeout(function() {\n                    that._searchTimeOut = null;\n\n                    var options = that.options;\n                    var searchFields = options.search ? options.search.fields : null;\n                    var expression = { filters: [], logic: \"or\" };\n                    var value = input.value;\n\n                    if (!searchFields) {\n                        searchFields = getColumnsFields(options.columns);\n                    }\n\n                    if (that.dataSource.options.endless) {\n                        that.dataSource.options.endless = null;\n                        that._endlessPageSize = that.dataSource.options.pageSize;\n                    }\n\n                    if (value) {\n                        for (var i = 0; i < searchFields.length; i++) {\n                            that._pushExpression(expression.filters, searchFields[i], value);\n                        }\n                    } else {\n                        expression = {};\n                    }\n\n                    that.dataSource.filter(expression);\n                }, 300);\n            },\n\n            _pushExpression: function(filters, field, value) {\n                var that = this,\n                    isServerFiltering = that.dataSource.options.serverFiltering,\n                    defaultOperators = {\n                        string: \"contains\",\n                        number: \"gte\",\n                        date: \"gte\",\n                        enums: \"eq\",\n                        boolean: \"eq\"\n                    },\n                    name = field.name || field,\n                    operator = field.operator,\n                    modelInfo = that.dataSource.reader.model && that.dataSource.reader.model.fields,\n                    fieldInfo = modelInfo && modelInfo[name],\n                    parseFn = fieldInfo && fieldInfo.parse,\n                    expression = {\n                        field: name,\n                        operator: operator || defaultOperators.string,\n                        value: value\n                    };\n\n                if ((operator || isServerFiltering) && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) !== null) {\n                    extend(expression, {\n                        operator: operator || defaultOperators[fieldInfo.type],\n                        value: parseFn(value)\n                    });\n                }\n\n                if (isServerFiltering && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) === null) {\n                    return;\n                }\n\n                filters.push(expression);\n            },\n\n            _toolbar: function() {\n                var that = this,\n                    wrapper = that.wrapper,\n                    toolbar = that.options.toolbar,\n\n                    container, items;\n\n                if (toolbar) {\n                    that._createClickHandler = that._addClickHandler = that._clickAdd.bind(that);\n                    that._cancelClickHandler = that._clickCancel.bind(that);\n                    that._saveClickHandler = that._clickSave.bind(that);\n                    that._excelClickHandler = that._clickExcel.bind(that);\n                    that._pdfClickHandler = that._clickPdf.bind(that);\n                    that._serachHandler = that._searchInput.bind(that);\n\n                    container = that.wrapper.find(\".k-grid-toolbar\");\n\n                    if (!container.length) {\n                        container = $('<div class=\"k-grid-toolbar k-toolbar\" />')\n                            .prependTo(wrapper);\n\n                        if (typeof toolbar === STRING || isFunction(toolbar)) {\n                            if (typeof toolbar === STRING) {\n                                toolbar = kendo.template(toolbar).bind(that);\n                            }\n\n                            container.html(toolbar({ grid: that }));\n                            that._attachToolbarClicks();\n                        } else if (isArray(toolbar)) {\n                            items = that._processItems(toolbar);\n\n                            container.kendoToolBar({\n                                navigateOnTab: !that.options.navigatable,\n                                size: that.options.size,\n                                items: items\n                            });\n                        }\n\n                        that.angular(\"compile\", function() {\n                            return { elements: container.get() };\n                        });\n                    } else {\n                        that._attachToolbarClicks();\n                    }\n\n                    container.on(INPUT + NS, \".k-grid-search input\", this._serachHandler);\n                }\n            },\n\n            _attachToolbarClicks: function() {\n                var editable = this.options.editable,\n                    container = this.wrapper.find(\".k-grid-toolbar\");\n\n                if (editable && editable.create !== false) {\n                    container.on(CLICK + NS, \".k-grid-add\", this._createClickHandler)\n                        .on(CLICK + NS, \".k-grid-cancel-changes\", this._cancelClickHandler)\n                        .on(CLICK + NS, \".k-grid-save-changes\", this._saveClickHandler);\n                }\n\n                container.on(CLICK + NS, \".k-grid-excel\", this._excelClickHandler);\n                container.on(CLICK + NS, \".k-grid-pdf\", this._pdfClickHandler);\n            },\n\n            _processItems: function(tools) {\n                var that = this,\n                    items = [],\n                    messages = this.options.messages.commands;\n\n                tools.map(function (t) {\n                    var command, searchText, icon, className, inputSize, template = \"\";\n\n                    if (typeof t === 'string') {\n                        command = t.toLowerCase();\n                        t = {};\n                        t.text = messages[command] || command;\n                    } else {\n                        command = (t.name || t.text || \"\").toLowerCase();\n                        t.text = t.text || messages[command] || command;\n                    }\n\n                    if (command === \"search\") {\n                        items.push({\n                            type: \"spacer\"\n                        });\n\n                        searchText = t.text || messages.search;\n                        icon = t.icon || t.iconClass || \"search\";\n\n                        inputSize = kendo.getValidCssClass(\"k-input-\", \"size\", that.options.size);\n                        template += \"<span class='k-searchbox k-input \" + inputSize + \" k-rounded-md k-input-solid k-grid-search'>\";\n                        template += kendo.ui.icon({ icon: icon, iconClass: \"k-input-icon\" });\n                        template += \"<input autocomplete='off' placeholder='\" + searchText + \"' title='\" + searchText + \"' aria-label='\" + searchText + \"' class='k-input-inner' />\";\n                        template += \"</span>\";\n\n                        items.push({\n                            name: \"search\",\n                            overflow: \"never\",\n                            template: template\n                        });\n                    } else {\n                        if (!command && !(isPlainObject(t) && t.template)) {\n                            throw new Error(\"Custom commands should have name specified\");\n                        }\n\n                        t = extend({ type: \"button\" }, defaultCommands[command], t);\n                        className = t.className || \"k-grid-\" + (command || \"\").replace(/\\s/g, \"\");\n                        t.spriteCssClass = t.icon ? null : t.iconClass;\n\n                        t.attributes = that._processAttr(t.attr);\n                        delete t.attr;\n\n                        if (!!className) {\n                            if (t.attributes[\"class\"] === undefined$1) {\n                                t.attributes[\"class\"] = \"\";\n                            }\n\n                            t.attributes[\"class\"] += (\" \" + className);\n                        }\n\n                        if (t.template) {\n                            delete t.type;\n                        }\n\n                        if (!!that[\"_\" + command + \"ClickHandler\"]) {\n                            t.click = that[\"_\" + command + \"ClickHandler\"];\n                        }\n\n                        items.push(t);\n                    }\n                });\n\n                return items;\n            },\n\n            _processAttr: function(attr) {\n                var attributes = {},\n                    attrArray;\n\n                if (typeof attr === STRING && attr.length > 0) {\n                    attrArray = attr.split(\" \");\n                    attrArray.map(function (a) {\n                        var keyValue = a.split(\"=\");\n\n                        if (keyValue.length === 2) {\n                            attributes[keyValue[0]] = keyValue[1].replaceAll('\"', \"\").replaceAll(\"'\", \"\");\n                        }\n                    });\n                } else if (isPlainObject(attr)) {\n                    attributes = attr;\n                }\n\n                return attributes;\n            },\n\n            _createButton: function(command) {\n                var button,\n                    template = command.template || COMMANDBUTTONTMPL,\n                    commandName = typeof command === STRING ? command : command.name || command.text,\n                    className = defaultCommands[commandName] ? defaultCommands[commandName].className : \"k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"),\n                    options = { className: className, text: commandName, attr: \"\", iconClass: \"\", size: command.size || this.options.size },\n                    messages = this.options.messages.commands,\n                    attributeClassMatch;\n\n                if (!commandName && !(isPlainObject(command) && command.template)) {\n                    throw new Error(\"Custom commands should have name specified\");\n                }\n\n                if (isPlainObject(command)) {\n                    command = extend(true, {}, command);\n\n                    if (command.className && inArray(options.className, command.className.split(\" \")) < 0) {\n                        command.className += \" \" + options.className;\n                    } else if (command.className === undefined$1) {\n                        command.className = options.className;\n                    }\n\n                    if (command.className.indexOf(\"k-primary\") > -1) {\n                        command.className = command.className.replace(\"k-primary\", \"\");\n                        command.themeColor = \"primary\";\n                    }\n\n                    if (commandName === \"edit\") {\n                        command = extend(true, {}, command);\n                        command.text = isPlainObject(command.text) ? command.text.edit : command.text;\n                        command.iconClass = isPlainObject(command.iconClass) ? command.iconClass.edit : command.iconClass;\n                    }\n\n                    if (command.attr) {\n                        if (isPlainObject(command.attr)) {\n                            command.attr = stringifyAttributes(command.attr);\n                        }\n\n                        if (typeof command.attr === STRING) {\n                            attributeClassMatch = command.attr.match(/class=\"(.+?)\"/);\n\n                            if (attributeClassMatch && inArray(attributeClassMatch[1], command.className.split(\" \")) < 0) {\n                                command.className += \" \" + attributeClassMatch[1];\n                            }\n                        }\n                    }\n\n                    options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] }, command);\n                } else {\n                    options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] });\n                }\n\n                button = kendo.template(template)(options);\n\n                if (!command.template) {\n                    return kendo.html.renderButton($(button), options);\n                } else {\n                    return button;\n                }\n            },\n\n            _hasFooters: function() {\n                return !!this.footerTemplate ||\n                    !!this.groupFooterTemplate ||\n                    (this.footer && this.footer.length > 0) ||\n                    this.wrapper.find(\".k-grid-footer\").length > 0;\n            },\n\n            _groupable: function() {\n                var that = this;\n\n                if (that._groupableClickHandler) {\n                    that.table.add(that.lockedTable).off(CLICK + NS, that._groupableClickHandler);\n                } else {\n                    that._groupableClickHandler = function(e) {\n                        var element = $(this),\n                        groupRow = element.closest(TR);\n\n                        var group = that._groupRows ? that._groupRows[that.wrapper.find(DOT + GROUPING_ROW).index(groupRow)] : { };\n\n                        if (element.is(CARET_ALT_DOWN)) {\n                            if (!that.trigger(\"groupCollapse\", { group: group, element: groupRow })) {\n                                that.collapseGroup(groupRow);\n                            }\n                        } else {\n                            if (!that.trigger(\"groupExpand\", { group: group, element: groupRow })) {\n                                that.expandGroup(groupRow);\n                            }\n                        }\n                        e.preventDefault();\n                        e.stopPropagation();\n                    };\n                }\n\n                if (that._isLocked()) {\n                    that.lockedTable.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n                } else {\n                    that.table.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n                }\n\n                that._attachGroupable();\n            },\n\n            _attachGroupable: function() {\n                var that = this,\n                    wrapper = that.wrapper,\n                    groupable = that.options.groupable,\n                    draggables = HEADERCELLS + \"[\" + kendo.attr(\"field\") + \"]\",\n                    filter = that.content ? \".k-grid-header:first \" + draggables : \"table:first>.k-grid-header \" + draggables;\n\n                if (groupable && groupable.enabled !== false) {\n                    if (!wrapper.has(\"div.k-grouping-header\")[0]) {\n                        $(\"<div/>\").addClass(\"k-grouping-header\").prependTo(wrapper);\n                    }\n\n                    if (that.groupable) {\n                        that._destroyGroupable();\n                    }\n\n                    if (browser.chrome) {\n                        wrapper.find(\"div.k-grouping-header\").css(\"touch-action\", NONE);\n                        wrapper.find(filter).css(\"touch-action\", NONE);\n                    }\n\n                    that.groupable = new ui.Groupable(wrapper, extend({}, groupable, {\n                        draggable: that._draggableInstance,\n                        groupContainer: \">div.k-grouping-header\",\n                        dataSource: that.dataSource,\n                        draggableElements: filter,\n                        filter: filter,\n                        size: that.options.size,\n                        allowDrag: that.options.reorderable,\n                        enableContextMenu: !!that.options.contextMenu,\n                        removeGroup: function(e) {\n                            that._showUngroupedColumn(e);\n                        },\n                        change: function(e) {\n                            if (that.trigger(\"group\", { groups: e.groups })) {\n                                e.preventDefault();\n                            } else {\n                                that._clearEditableState();\n                                that._hideGroupedColumns(e.groups);\n                                if (that.dataSource.options.endless) {\n                                    that._resetEndless();\n                                }\n                            }\n                        }\n                    }));\n\n                    that._addGroupableOptionsToHeader();\n                }\n            },\n\n            _showUngroupedColumn: function(group) {\n                var columns = leafColumns(this.columns);\n                var i;\n\n                for (i = 0; i < columns.length; i++) {\n                    if (columns[i].uid == group.colID && columns[i].hideOnGroup) {\n                        this.showColumn(columns[i]);\n                    }\n                }\n            },\n\n            _hideGroupedColumns: function(groups) {\n                if (!groups) {\n                    return;\n                }\n                var columns = leafColumns(this.columns);\n                var fields = [];\n                var i;\n\n                for (i = 0; i < groups.length; i++) {\n                    if (groups[i].colID) {\n                        fields.push(groups[i].colID);\n                    }\n                }\n\n                for (i = 0; i < columns.length; i++) {\n                    if (fields.indexOf(columns[i].uid) >= 0 && columns[i].hideOnGroup) {\n                        this.hideColumn(columns[i]);\n                    }\n                }\n            },\n\n            _resetEndless: function() {\n                var that = this;\n                that.dataSource.options.endless = null;\n                that._endlessPageSize = that.dataSource.options.pageSize;\n                that.dataSource._skip = 0;\n                that.dataSource._pageSize = that.dataSource._take = that._endlessPageSize;\n                that.dataSource._page = 1;\n            },\n\n            _addGroupableOptionsToHeader: function() {\n                var that = this;\n                var columns = flatColumns(that.columns);\n                var columnFieldMap = {};\n                var field = \"\";\n                var headerCells = that._headerCells();\n                var cellFieldAttr = \"\";\n                var headerCell;\n                var columnOptions;\n                var i;\n\n                for (i = 0; i < columns.length; i++) {\n                    field = columns[i].field;\n                    columnFieldMap[columns[i].field] = columns[i];\n                }\n\n                for (i = 0; i < headerCells.length; i++) {\n                    headerCell = headerCells.eq(i);\n                    cellFieldAttr = headerCell.attr(kendo.attr(FIELD));\n                    columnOptions = columnFieldMap[cellFieldAttr];\n\n                    if (columnOptions && columnOptions.groupable && columnOptions.groupable.sort) {\n                        headerCell.data(GROUP_SORT, columnOptions.groupable.sort);\n                    }\n                }\n            },\n\n            _destroyGroupable: function() {\n                var that = this;\n\n                if (that.groupable && that.groupable.element) {\n                    that.groupable.element.kendoGroupable(\"destroy\");\n                }\n\n                that.groupable = null;\n\n                that._removeGroupableOptionsFromHeader();\n            },\n\n            _removeGroupableOptionsFromHeader: function() {\n                var that = this;\n                var headerCells = that._headerCells();\n\n                for (var i = 0; i < headerCells.length; i++) {\n                    headerCells.eq(i).removeData(GROUP_SORT);\n                }\n            },\n\n            _continuousItems: function(filter, cell) {\n                if (!this.lockedContent) {\n                    return;\n                }\n\n                var that = this;\n\n                var elements = that.table.add(that.lockedTable);\n\n                var lockedItems = $(filter, elements[0]);\n                var nonLockedItems = $(filter, elements[1]);\n                var columns = cell ? lockedColumns(leafColumns(that.columns)).length : 1;\n                var nonLockedColumns = cell ? leafColumns(that.columns).length - columns : 1;\n                var result = [];\n\n                for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                    push.apply(result, lockedItems.slice(idx, idx + columns));\n                    push.apply(result, nonLockedItems.splice(0, nonLockedColumns));\n                }\n\n                return result;\n            },\n\n            _selectable: function() {\n                var that = this,\n                    multi,\n                    cell,\n                    notString = [],\n                    isLocked = that._isLocked(),\n                    selectable = that.options.selectable;\n\n                if (selectable) {\n\n                    if (that.selectable) {\n                        that.selectable.destroy();\n                    }\n\n                    that._selectedIds = {};\n\n                    selectable = kendo.ui.Selectable.parseOptions(selectable);\n\n                    multi = selectable.multiple;\n                    cell = selectable.cell;\n\n                    if (that._hasDetails()) {\n                        notString[notString.length] = \".k-detail-row\";\n                    }\n                    if (that.options.groupable || that._hasFooters() || that._groups()) {\n                        notString[notString.length] = \".k-grouping-row,.k-group-footer\";\n                    }\n\n                    notString = notString.join(\",\");\n\n                    if (notString !== \"\") {\n                        notString = \":not(\" + notString + \")\";\n                    }\n\n                    var elements = that.table;\n                    if (isLocked) {\n                        elements = elements.add(that.lockedTable);\n                    }\n\n                    var filter = \">\" + (cell ? SELECTION_CELL_SELECTOR : \"tbody>tr\" + notString);\n                    that.selectable = new kendo.ui.Selectable(elements, {\n                        filter: filter,\n                        aria: true,\n                        multiple: multi,\n                        holdToDrag: !!(that._isMobile || kendo.support.mobileOS),\n                        toggleable: !!(that._isMobile || kendo.support.mobileOS),\n                        dragToSelect: that.options.selectable && that.options.selectable.dragToSelect,\n                        changing: function(e) {\n                            if (that.trigger(CHANGING, { target: e.target, originalEvent: e.originalEvent })) {\n                                e.preventDefault();\n                            }\n                        },\n                        change: function(e) {\n                            var selectedValues;\n                            if (!cell) {\n                                that._persistSelectedRows();\n                            }\n\n                            if (that._checkBoxSelection) {\n                                selectedValues = that.selectable.value();\n                                that._uncheckCheckBoxes();\n                                that._checkRows(selectedValues);\n                                if (selectedValues.length && selectedValues.length === that.items().length) {\n                                    that._toggleHeaderCheckState(true);\n                                } else {\n                                    that._toggleHeaderCheckState(false);\n                                }\n                            }\n\n                            if (e.event) {\n                                that.trigger(CHANGE);\n                            }\n                        },\n                        useAllItems: isLocked && multi && cell,\n                        relatedTarget: function(items) {\n                            if (cell || !isLocked) {\n                                return;\n                            }\n\n                            var related;\n                            var result = $();\n                            for (var idx = 0, length = items.length; idx < length; idx ++) {\n                                related = that._relatedRow(items[idx]);\n\n                                if (inArray(related[0], items) < 0) {\n                                    result = result.add(related);\n                                }\n                            }\n\n                            return result;\n                        },\n                        continuousItems: function() {\n                            return that._continuousItems(filter, cell);\n                        },\n                        ignoreOverlapped: that.options.selectable && that.options.selectable.ignoreOverlapped,\n                        addIdToRanges: true\n                    });\n\n                    if (that.options.navigatable) {\n                        elements.on(\"keydown\" + NS, function(e) {\n                            var current = that.current();\n                            var target = e.target;\n                            var eventObject = { event: e };\n                            var triggerChange;\n                            var triggerChanging;\n                            var lastSelection;\n                            if (!current) {\n                                return;\n                            }\n                            if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, elements) > -1 &&\n                                !current.is(\".k-edit-cell,.k-header\") &&\n                                current.parent().is(\":not(.k-grouping-row,.k-detail-row,.k-group-footer)\")) {\n                                    e.preventDefault();\n                                    e.stopPropagation();\n                                    current = cell ? current : current.parent();\n                                    triggerChange = !current.hasClass(SELECTED) || that.selectable.value().length > 1;\n                                    triggerChanging = triggerChange || (multi && current.hasClass(SELECTED) && e.ctrlKey);\n\n                                    if (triggerChanging && that.trigger(CHANGING, { target: current, originalEvent: e })) {\n                                        return;\n                                    }\n\n                                    if (isLocked && !cell) {\n                                        current = current.add(that._relatedRow(current));\n                                    }\n\n                                    if (multi) {\n                                        if (!e.ctrlKey) {\n                                            that.selectable.clear();\n                                        } else {\n                                            if (current.hasClass(SELECTED)) {\n                                                that._deselectCheckRows(current);\n                                                that.trigger(CHANGE);\n                                                return;\n                                            }\n                                        }\n                                    } else {\n                                        that.selectable.clear();\n                                    }\n                                    if (!cell) {\n                                        that.selectable._lastActive = current;\n                                    }\n                                    that.selectable.value(current);\n                                    if (triggerChange) {\n                                        that.trigger(CHANGE);\n                                    }\n                            } else if (!cell &&\n                                ($(target).is(\"td\") || ($(target).is(\"table\") && inArray(target, this._navigatableTables))) &&\n                              ((e.shiftKey && e.keyCode == keys.LEFT) ||\n                               (e.shiftKey && e.keyCode == keys.RIGHT) ||\n                               (e.shiftKey && e.keyCode == keys.UP) ||\n                               (e.shiftKey && e.keyCode == keys.DOWN) ||\n                               (e.keyCode === keys.SPACEBAR && e.shiftKey))) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = current.parent();\n\n                                if (that.trigger(CHANGING, { target: current, originalEvent: e })) {\n                                    return;\n                                }\n\n                                lastSelection = that.selectable.value();\n\n                                if (isLocked) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n\n                                if (multi) {\n                                    if (!that.selectable._lastActive) {\n                                        that.selectable._lastActive = current;\n                                    }\n                                    that.selectable.selectRange(that.selectable._firstSelectee(), current);\n\n                                    if (!compareElements(lastSelection, that.selectable.value())) {\n                                        that.trigger(CHANGE, eventObject);\n                                    }\n                                } else if (!current.hasClass(SELECTED)) {\n                                    that.selectable.clear();\n                                    that.selectable.value(current);\n                                    that.trigger(CHANGE);\n                                }\n                            }\n                        });\n                    }\n                }\n            },\n\n            _clipboard: function() {\n                var options = this.options;\n                var selectable = options.selectable;\n\n                if (selectable && options.allowCopy) {\n                    var grid = this;\n                    if (!options.navigatable) {\n                        grid.table.attr(TABINDEX, 0);\n\n                        grid.table.add(grid.lockedTable)\n                            .on(MOUSEDOWN + NS + \" keydown\" + NS, \".k-detail-cell\", function(e) {\n                                if (e.target !== e.currentTarget) {\n                                    e.stopImmediatePropagation();\n                                }\n                            })\n                            .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, tableClick.bind(grid));\n                    }\n                    grid.copyHandler = grid.copySelection.bind(grid);\n                    grid.updateClipBoardState = function() {\n                        if (grid.areaClipBoard) {\n                            grid.areaClipBoard.val(grid.getTSV()).trigger(\"focus\").select();\n                        }\n                    };\n                    grid.bind(\"change\",grid.updateClipBoardState);\n                    grid.wrapper.on(\"keydown\", grid.copyHandler);\n                    grid.clearAreaHandler = grid.clearArea.bind(grid);\n                    grid.wrapper.on(\"keyup\", grid.clearAreaHandler);\n                }\n            },\n\n            copySelectionToClipboard: function(includeHeaders) {\n                this._createAreaClipBoard();\n                this.areaClipBoard.val(this.getTSV(includeHeaders)).trigger(\"focus\").select();\n                document.execCommand('copy');\n            },\n\n            copySelection: function(e) {\n                if ((e instanceof jQuery.Event && !(e.ctrlKey || e.metaKey)) ||\n                    $(e.target).is(\"input:visible,textarea:visible\") ||\n                    (window.getSelection && window.getSelection().toString()) ||\n                    (document.selection && document.selection.createRange().text) ) {\n                    return;\n                }\n\n                this._createAreaClipBoard();\n                this.areaClipBoard.val(this.getTSV()).trigger(\"focus\").select();\n\n            },\n\n            _createAreaClipBoard: function() {\n                if (!this.areaClipBoard) {\n                    this.areaClipBoard =\n                        $(\"<textarea />\")\n                        .css({\n                            position: \"fixed\",\n                            top: \"50%\",\n                            left: \"50%\",\n                            opacity: 0,\n                            width: 0,\n                            height: 0\n                        })\n                        .appendTo(this.wrapper);\n                }\n            },\n\n            getTSV: function(includeHeaders) {\n                var grid = this;\n                var selected = grid.select();\n                var delimeter = \"\\t\";\n                var allowCopy = grid.options.allowCopy;\n                var onlyVisible = true;\n                var hasLockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n\n                if ($.isPlainObject(allowCopy) && allowCopy.delimeter) {\n                    delimeter = allowCopy.delimeter;\n                }\n                var text = \"\";\n                if (selected.length) {\n                    if (selected.eq(0).is(TR)) {\n                        selected = selected.find(\"td:not(.k-group-cell)\");\n                    }\n                    if (onlyVisible) {\n                        selected.filter(\":visible\");\n                    }\n\n                    var result = [];\n                    var cellsOffset = this.columns.length;\n                    var lockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n                    var inLockedArea = true;\n                    var fields = [];\n                    var field;\n                    var columns = visibleLeafColumns(this.columns);\n\n                    $.each(selected, function(idx, cell) {\n                        cell = $(cell);\n                        field = grid._getCellField(cell, hasLockedCols);\n\n                        var tr = cell.closest(TR);\n                        var rowIndex = tr.index();\n                        var cellIndex = cell.index();\n                        if (onlyVisible) {\n                            cellIndex -= cell.prevAll(\":hidden\").length;\n                        }\n                        if (lockedCols && inLockedArea) {\n                            inLockedArea = $.contains(grid.lockedTable[0], cell[0]);\n                        }\n                        if (grid._groups() && inLockedArea) {\n                            cellIndex -= grid._groups();\n                        }\n                        cellIndex = inLockedArea ? cellIndex : (cellIndex + lockedCols );\n                        if (field) {\n                            fields[cellIndex] = field;\n                        }\n                        if (cellsOffset > cellIndex) {\n                            cellsOffset = cellIndex;\n                        }\n                        var cellText = cell.text();\n                        if (!result[rowIndex]) {\n                            result[rowIndex] = [];\n                        }\n                        result[rowIndex][cellIndex] = cellText;\n                    });\n\n                    var rowsOffset = result.length;\n                    result = $.each(result, function(idx, val) {\n                        if (val) {\n                            result[idx] = val.slice(cellsOffset);\n                            if (rowsOffset > idx) {\n                                rowsOffset = idx;\n                            }\n                        }\n                    });\n\n                    if (includeHeaders && fields.length) {\n                        result.splice(rowsOffset, 0, fields.map(function(field) {\n                            return getTitle(field, columns);\n                        }));\n\n                        var headerIndex = result.findIndex(function(el) {\n                            return el !== undefined$1;\n                        });\n\n                        result[headerIndex] = result[headerIndex].slice(cellsOffset);\n                    }\n\n                    $.each(result.slice(rowsOffset), function(idx, val) {\n                        if (val) {\n                            text += val.join(delimeter) + \"\\r\\n\";\n                        } else {\n                            text += \"\\r\\n\";\n                        }\n                    });\n                }\n                return text;\n            },\n\n            clearArea: function(e) {\n                if (this.areaClipBoard && e && e.target === this.areaClipBoard[0]) {\n                    focusTable(this.table, true);\n                }\n\n                if (this.areaClipBoard) {\n                    this.areaClipBoard.remove();\n                    this.areaClipBoard = null;\n                }\n            },\n\n            _adaptiveColumns: function() {\n                var that = this;\n\n                if (that._anyColumnHasMediaQuery()) {\n                    that._setColumnsMediaVisibility(that.columns);\n                    that._attachColumnMediaResizeHandler();\n                }\n            },\n\n            _anyColumnHasMediaQuery: function() {\n                return this._columnsWithMediaQuery().length;\n            },\n\n            _columnsWithMediaQuery: function() {\n                return columnsWithMedia(this.columns);\n            },\n\n            _attachColumnMediaResizeHandler: function() {\n                var that = this;\n\n                that._detachColumnMediaResizeHandler();\n                that._columnMediaResizeHandler = that._onColumnMediaResize.bind(that);\n                $(window).on(RESIZE + NS, that._columnMediaResizeHandler);\n            },\n\n            _detachColumnMediaResizeHandler: function() {\n                var that = this;\n\n                if (that._columnMediaResizeHandler) {\n                    $(window).off(RESIZE + NS, that._columnMediaResizeHandler);\n                }\n            },\n\n            _onColumnMediaResize: function() {\n                var that = this;\n                that._setColumnsMediaVisibility(that.columns);\n                that._setContentMediaWidth();\n            },\n\n            _setColumnsMediaVisibility: function(columns) {\n                var cols = columns || [];\n\n                for (var i = 0; i < cols.length; i++) {\n                    this._setColumnMediaVisibility(cols[i]);\n                }\n            },\n\n            _setColumnMediaVisibility: function(column) {\n                var that = this;\n\n                if (isUndefined(column.media)) {\n                    that._setColumnsMediaVisibility(column.columns);\n                } else {\n                    if (columnMatchesMedia(column)) {\n                        that._showColumnByMedia(column);\n\n                        if (!column.hidden) {\n                            that._setColumnsMediaVisibility(column.columns);\n                        }\n                    } else {\n                        that._hideColumnByMedia(column);\n                    }\n                }\n            },\n\n            _showColumnByMedia: function(column) {\n                if (!column.hidden) {\n                    // \"hidden\" has a priority over \"matchesMedia\"\n                    this.showColumn(column);\n                }\n\n                setColumnMatchesMedia(column);\n            },\n\n            _hideColumnByMedia: function(column) {\n                var initiallyHidden = column.hidden;\n\n                if (!initiallyHidden) {\n                    column._hideByMedia = true;\n                    this.hideColumn(column);\n                    column._hideByMedia = false;\n\n                    // hiding is tracked in \"matchesMedia\" instead of \"hidden\" flag\n                    column.hidden = initiallyHidden;\n                }\n\n                setColumnMatchesMedia(column);\n            },\n\n            _setContentMediaWidth: function() {\n                var that = this;\n                var options = that.options;\n                var isLocked = that._isLocked();\n                var footer;\n\n                if (options.scrollable && (options.resizable === true || (options.resizable && options.resizable.columns === true))) {\n                    if (isLocked && that.lockedFooter) {\n                        footer = that.lockedFooter.children(\"table\");\n                    } else if (that.footer) {\n                        footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                    }\n\n                    if (!footer || !footer[0]) {\n                        footer = $();\n                    }\n\n                    var header = isLocked ? that.wrapper.find(\".k-grid-header-locked\").find(\"table\") : that.wrapper.find(\".k-grid-header\").find(\"table\");\n                    var contentTable = isLocked ? that.lockedTable : that.table;\n\n                    var headerColumns = header.find(\"th\");\n                    var headerColgroup = header.find(\"colgroup\");\n\n                    var headerColumnsCount = headerColumns.length;\n                    var visibleHeaderColumnsCount = headerColumns.filter(isCellVisible).length;\n                    var hiddenHeaderColumnsCount = headerColumns.length - visibleHeaderColumnsCount;\n\n                    var totalHeaderWidth = 0;\n\n                    if (header[0].style.width !== \"\" && parseFloat(header[0].style.width) !== totalHeaderWidth) {\n                        var currentHeaderWidth = header.css(WIDTH);\n\n                        for (var i = 0; i < headerColumnsCount; i++) {\n                            if (isElementVisible(headerColumns[i])) {\n                                var columnWidth;\n                                var cellIndex = Math.max(i, (i - hiddenHeaderColumnsCount));\n                                var colgroupChild = headerColgroup.children()[cellIndex];\n                                var columnStyleWidth = colgroupChild ? colgroupChild.style.width : \"\";\n\n                                if (columnStyleWidth !== \"\") {\n                                    columnWidth = parseFloat(columnStyleWidth);\n                                } else {\n                                    // remove the header width to calculate the height of a column without fixed width\n                                    header.css(WIDTH, AUTO);\n                                    columnWidth = outerWidth(headerColumns.eq(i));\n                                    header.css(WIDTH, currentHeaderWidth);\n                                }\n\n                                totalHeaderWidth += columnWidth;\n                            }\n                        }\n\n                        contentTable.css('width', totalHeaderWidth - 1); // subtract 1 to remove the horizontal scroll\n                        header.css('width', totalHeaderWidth);\n                        footer.css('width', totalHeaderWidth);\n                        that._updateStickyColumns();\n                    }\n                }\n            },\n\n            _minScreenSupport: function() {\n                var any = this.hideMinScreenCols();\n\n                if (any) {\n                    this.minScreenResizeHandler = this.hideMinScreenCols.bind(this);\n                    $(window).on(\"resize\", this.minScreenResizeHandler);\n                }\n            },\n\n            hideMinScreenCols: function() {\n                var cols = this.columns,\n                    screenWidth = (window.innerWidth > 0) ? window.innerWidth : screen.width;\n\n                return this._iterateMinScreenCols(cols, screenWidth);\n            },\n\n            _iterateMinScreenCols: function(cols, screenWidth) {\n                var any = false;\n\n                for (var i = 0; i < cols.length; i++) {\n                    var col = cols[i];\n                    var minWidth = col.minScreenWidth;\n                    if (minWidth !== undefined$1 && minWidth !== null) {\n                        any = true;\n                        if (minWidth > screenWidth) {\n                            this.hideColumn(col);\n                        } else {\n                            this.showColumn(col);\n                        }\n                    }\n                    if (!col.hidden && col.columns) {\n                        any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                    }\n                }\n                return any;\n            },\n\n            _stickyColumns: function() {\n                var that = this;\n\n                if (that._anyStickyColumns()) {\n                    that._setStickyColumns(false);\n                }\n            },\n\n            _updateStickyColumns: function() {\n                var that = this;\n                var groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (that._anyStickyColumns()) {\n                    that._setStickyColumns(true);\n                    that._templates();\n\n                    if (groupHeaderColumnTemplateColumns.length > 0) {\n                        that._renderGroupRows();\n                    }\n\n                    if (that._hasFilterRow()) {\n                        that._updateStickyFilterCells();\n                    }\n                }\n            },\n\n            _updateStickyFilterCells: function() {\n                var that = this;\n                var filterCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n                if (filterCells.length) {\n                    filterCells.each(function() {\n                        var th = $(this);\n                        var column = th.data(\"column\");\n\n                        if (column.sticky) {\n                            if (isPlainObject(column.stickyStyle)) {\n                                th.css({\n                                    left: column.stickyStyle.left || \"\",\n                                    right: column.stickyStyle.right || \"\"\n                                });\n                            }\n\n                            th.addClass(STICKY_HEADER_CLASS);\n                        } else {\n                            th.css({\n                                left: \"\",\n                                right: \"\"\n                            });\n\n                            th.removeClass(STICKY_HEADER_CLASS);\n                        }\n                    });\n                }\n            },\n\n            _anyStickyColumns: function() {\n                var that = this;\n\n                return stickyColumns(that.columns).length;\n            },\n\n            _setStickyColumns: function(updateStyles) {\n                var that = this;\n                var columns = stickyColumns(that.columns);\n                var visibleColumns = visibleStickyColumns(that.columns);\n                var stickyWidths = that._calculateStickyWidths(visibleColumns);\n\n                that._removeStickyAttributes(columns);\n                that._setStickyClassAttributes(columns);\n                that._setStickyStyleAttributes(visibleColumns, stickyWidths, updateStyles);\n\n                if (updateStyles) {\n                    that._setStickyStyles(visibleColumns, stickyWidths);\n                }\n            },\n\n            _calculateStickyWidths: function(columns, initialLeftWidth, initialRightWidth) {\n                var that = this;\n                var i;\n                var column;\n                var columnWidth;\n                var nextColumnLeft;\n                var nextColumnRight;\n                var left = isRtl ? \"right\" : \"left\";\n                var right = isRtl ? \"left\" : \"right\";\n                var stickyWidths = {\n                    left: new Array(columns.length).fill(initialLeftWidth ? initialLeftWidth : 0),\n                    right: new Array(columns.length).fill(initialRightWidth ? initialRightWidth : 0)\n                };\n\n                for (i = 0; i < columns.length - 1; i++) {\n                    column = columns[i];\n                    columnWidth = that._sumColumnWidth(column);\n                    nextColumnLeft = columnWidth + stickyWidths[left][i];\n\n                    stickyWidths[left][i + 1] = nextColumnLeft;\n                }\n\n                for (i = columns.length - 1; i > 0; i--) {\n                    column = columns[i];\n                    columnWidth = that._sumColumnWidth(column);\n                    nextColumnRight = columnWidth + stickyWidths[right][i];\n\n                    stickyWidths[right][i - 1] = nextColumnRight;\n                }\n\n                return stickyWidths;\n            },\n\n            _setStickyClassAttributes: function(columns, masterIndex) {\n                var that = this;\n                var i;\n                var column;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n\n                    if (column.columns) {\n                        if (!masterIndex && i) {\n                            masterIndex = i;\n                        }\n\n                        that._setStickyClassAttributes(childColumns([column]), masterIndex);\n                    }\n\n                    if (masterIndex) {\n                        addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_NO_BORDER_CLASS);\n                    }\n                    addColumnAttribute(column, \"attributes\", \"class\", STICKY_CELL_CLASS);\n                    addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_CLASS);\n                    addColumnAttribute(column, \"footerAttributes\", \"class\", STICKY_FOOTER_CLASS);\n                }\n            },\n\n            _setStickyStyleAttributes: function(columns, stickyWidths, updateStyles) {\n                var that = this;\n                var i;\n                var column;\n                var stickyLeft;\n                var stickyRight;\n                var stickyStyle;\n                var childCols;\n                var childStickyWidths;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    stickyLeft = stickyWidths.left[i];\n                    stickyRight = stickyWidths.right[i];\n                    stickyStyle = { left: stickyLeft + \"px\", right: stickyRight + \"px\" };\n\n                    if (column.columns) {\n                        childCols = visibleChildColumns([column]);\n                        childStickyWidths = that._calculateStickyWidths(childCols, stickyLeft, stickyRight);\n\n                        that._setStickyStyleAttributes(childCols, childStickyWidths, updateStyles);\n\n                        if (updateStyles) {\n                            that._setStickyStyles(childCols, childStickyWidths);\n                        }\n                    }\n\n                    addColumnAttribute(column, \"attributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                    addColumnAttribute(column, \"attributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n                    addColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                    addColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n                    addColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                    addColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n\n                    column.stickyStyle = stickyStyle;\n                }\n            },\n\n            _removeStickyAttributes: function(columns) {\n                var that = this;\n                var i;\n                var cellClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_CELL_CLASS + \")*\", \"ig\");\n                var headerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_CLASS + \")*\", \"ig\");\n                var footerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_FOOTER_CLASS + \")*\", \"ig\");\n                var headerClassNoBorderRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_NO_BORDER_CLASS + \")*\", \"ig\");\n                var column;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n\n                    if (column.columns) {\n                        that._removeStickyAttributes(childColumns([column]));\n                    }\n\n                    removeColumnAttribute(column, \"attributes\", \"class\", cellClassRegExp);\n                    removeColumnAttribute(column, \"attributes\", kendo.attr(\"style-left\"), '', true);\n                    removeColumnAttribute(column, \"attributes\", kendo.attr(\"style-right\"), '', true);\n\n                    removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassRegExp);\n                    removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassNoBorderRegExp);\n                    removeColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-left\"), '', true);\n                    removeColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-right\"), '', true);\n\n                    removeColumnAttribute(column, \"footerAttributes\", \"class\", footerClassRegExp);\n                    removeColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-left\"), '', true);\n                    removeColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-right\"), '', true);\n                }\n            },\n\n            _setStickyStyles: function(columns, stickyWidths) {\n                var that = this;\n                var i;\n                var j;\n                var leafsCols = leafColumns(nonLockedColumns(that.columns));\n                var rows = that.tbody.children(\":not(.k-detail-row)\");\n                var row;\n                var column;\n                var columnIndex;\n                var left;\n                var right;\n                var header;\n                var footer;\n                var groupHeader;\n                var cell;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    left = stickyWidths.left[i];\n                    right = stickyWidths.right[i];\n                    columnIndex = leafsCols.indexOf(column);\n                    header = that._getColumnHeader(column);\n\n                    header.addClass(STICKY_HEADER_CLASS);\n                    if (column.headerAttributes[\"class\"] && column.headerAttributes[\"class\"].indexOf(STICKY_HEADER_NO_BORDER_CLASS) !== -1) {\n                        header.addClass(STICKY_HEADER_NO_BORDER_CLASS);\n                    }\n                    setLeftAndRightStyles(header, left, right);\n\n                    if (column.columns) {\n                        continue;\n                    }\n\n                    if (that.footer) {\n                        footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        footer.addClass(STICKY_FOOTER_CLASS);\n                        setLeftAndRightStyles(footer, left, right);\n                    }\n\n                    for (j = 0; j < rows.length; j++) {\n                        row = $(rows[j]);\n\n                        if (row.hasClass(GROUPING_ROW)) {\n                            groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                            groupHeader.addClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(groupHeader, left, right);\n                        } else {\n                            cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                            cell.addClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(cell, left, right);\n                        }\n                    }\n                }\n            },\n\n            _removeStickyStyles: function(columns) {\n                var that = this;\n                var i;\n                var j;\n                var leafsCols = leafColumns(nonLockedColumns(that.columns));\n                var rows = that.tbody.children(\":not(.k-detail-row)\");\n                var row;\n                var column;\n                var columnIndex;\n                var header;\n                var footer;\n                var groupHeader;\n                var cell;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    columnIndex = leafsCols.indexOf(column);\n                    header = that._getColumnHeader(column);\n\n                    header.removeClass(STICKY_HEADER_CLASS);\n                    header.removeClass(STICKY_HEADER_NO_BORDER_CLASS);\n                    setLeftAndRightStyles(header, \"\", \"\");\n\n                    if (column.columns) {\n                        that._removeStickyStyles(column.columns);\n                        continue;\n                    }\n\n                    if (column.footerTemplate && that.footer) {\n                        footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        footer.removeClass(STICKY_FOOTER_CLASS);\n                        setLeftAndRightStyles(footer, \"\", \"\");\n                    }\n\n                    for (j = 0; j < rows.length; j++) {\n                        row = $(rows[j]);\n\n                        if (row.hasClass(GROUPING_ROW)) {\n                            groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                            groupHeader.removeClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(groupHeader, \"\", \"\");\n                        } else {\n                            cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                            cell.removeClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(cell, \"\", \"\");\n                        }\n                    }\n                }\n            },\n\n            _getColumnHeader: function(column) {\n                var that = this;\n                var header = $(\"#\" + column.headerAttributes.id).length ? $(\"#\" + column.headerAttributes.id) : $(\"#\" + that._cellId);\n\n                return header;\n            },\n\n            _sumColumnWidth: function(column) {\n                var that = this;\n                var width = 0;\n\n                if (column.columns) {\n                    width = that._sumCurrentWidths(leafColumns([column]));\n                } else {\n                    width = that._sumCurrentWidths([column]);\n                }\n\n                return width;\n            },\n\n            _sumCurrentWidths: function(cols) {\n                var that = this;\n                var width = 0;\n                var colWidth = 0;\n                var col;\n                var header;\n                var i;\n                var length = cols.length;\n\n                for (i = 0; i < length; i++) {\n                    col = cols[i];\n                    header = that._getColumnHeader(col);\n\n                    if (!col.hidden && columnMatchesMedia(col)) {\n                        colWidth = header.is(\":visible\") ? header.outerWidth() : col.width;\n\n                        width += colWidth ? parseInt(colWidth, 10) : 0;\n                    }\n                }\n\n                return width;\n            },\n\n            _belongsToGrid: function(element) {\n                return this.wrapper[0] === element.closest(WRAPPER)[0];\n            },\n\n            getSelectedData: function() {\n                var that = this;\n                var selectedRanges = that.selectable.selectedRanges();\n                var selectedRangeNames = Object.keys(selectedRanges);\n                var selectedSingleItems = that.selectable.selectedSingleItems();\n                var result = [];\n                var visibleColumns = visibleLeafColumns(that.columns);\n\n                for (var idx = 0; idx < selectedRangeNames.length; idx++) {\n                    result = result.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns));\n                }\n\n                if (selectedSingleItems.length) {\n                    result = result.concat(that._mapSelectionToData(selectedSingleItems, visibleColumns));\n                }\n\n                return result;\n            },\n\n            exportSelectedToExcel: function(includeHeaders) {\n                if (!kendo.excel || !kendo.ooxml) {\n                    throw new Error(\"The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.\");\n                }\n\n                var that = this;\n                var excel = this.options.excel || {};\n                var visibleColumns = visibleLeafColumns(that.columns);\n                var exporter = new kendo.excel.ExcelExporter({});\n                var columnHandler = function() {return { autoWidth: true };};\n                var book = {\n                    sheets: [{\n                        columns: Array.apply(0, Array(visibleColumns.length)).map(columnHandler),\n                        rows: [],\n                        freezePane: {},\n                        filter: false\n                    }]\n                };\n                var selectedRanges = that.selectable.selectedRanges();\n                var selectedRangeNames = Object.keys(selectedRanges);\n                var selectedSingleItems = that.selectable.selectedSingleItems();\n                var idx;\n                var exportData = [];\n                var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n                var sortHandler = exportDataSort.bind(that);\n\n                for (idx = 0; idx < selectedRangeNames.length; idx++) {\n                    exportData = exportData.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns, isExcelExportableColumn));\n                }\n\n                if (exportData.length) {\n                    that._addRangeSelectionRows(book, exporter, exportData, includeHeaders);\n\n                }\n                exportData = selectedSingleItems.length ? that._mapSelectionToData(selectedSingleItems, visibleColumns, isExcelExportableColumn) : [];\n\n                if (exportData.length) {\n                    if (hasLockedCols) {\n                        exportData = exportData.sort(sortHandler);\n                    }\n                    that._addSingleSelectionRows(book, exporter, exportData, includeHeaders);\n                }\n\n                if (book.sheets[0].rows.length) {\n                    var workbook = new kendo.ooxml.Workbook(book);\n\n                    if (!workbook.options) {\n                        workbook.options = {};\n                    }\n                    workbook.options.skipCustomHeight = true;\n\n                    workbook.toDataURLAsync().then(function(dataURI) {\n                        kendo.saveAs({\n                            dataURI: dataURI,\n                            fileName: book.fileName || excel.fileName,\n                            proxyURL: excel.proxyURL,\n                            forceProxy: excel.forceProxy\n                        });\n                    });\n                }\n            },\n\n            _addSingleSelectionRows: function(book, exporter, data, includeHeaders) {\n                var idx = 0;\n                var visibleColumns = visibleLeafExportColumns(this.columns);\n                var item;\n\n                for (idx = 0; idx < data.length; idx++) {\n                    item = data[idx];\n                    exporter.data = [item];\n                    this._setExporterColumns(exporter, visibleColumns, item);\n                    this._createExportRows(book, exporter, includeHeaders);\n                }\n            },\n\n            _addRangeSelectionRows: function(book, exporter, data, includeHeaders) {\n                var visibleColumns = visibleLeafExportColumns(this.columns);\n\n                exporter.data = data;\n                this._setExporterColumns(exporter, visibleColumns, data[0]);\n                this._createExportRows(book, exporter, includeHeaders);\n            },\n\n            _createExportRows: function(book, exporter, includeHeaders) {\n                book.sheets[0].rows = book.sheets[0].rows.concat(includeHeaders ? exporter._rows() : exporter._dataRows(exporter.data, 0));\n            },\n\n            _setExporterColumns: function(exporter, columns, item) {\n                exporter.columns = exporter.options.columns = $.map(columns.filter(function(col) {\n                    return Object.keys(item).indexOf(col.field) >= 0;\n                }), exporter._prepareColumn);\n            },\n\n            _mapSelectionToData: function(elements, visibleColumns, columnsFilter) {\n                var that = this;\n                var elementType = elements[0][0].nodeName;\n                var isRowSelection = elementType === 'TR';\n                var dataItem;\n                var result = {};\n                var element;\n                var curr;\n                var field;\n                var columnMapHandler = function(col) {\n                    var result = {};\n\n                    if (!col.field || (columnsFilter && !columnsFilter(col))) {\n                        return;\n                    }\n\n                    result[col.field] = dataItem[col.field];\n                    return result;\n                };\n                var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n                var column;\n\n                for (var i = 0; i < elements.length; i++) {\n                    element = elements[i];\n                    dataItem = that.dataItem(isRowSelection ? element : element.parent());\n\n                    if (isRowSelection) {\n                        result[dataItem.uid] = $.extend.apply(null, visibleColumns.map(columnMapHandler));\n                    } else {\n                        field = that._getCellField(element, hasLockedCols);\n\n                        if (!field) {\n                            continue;\n                        }\n\n                        curr = result[dataItem.uid];\n\n                        if (!curr) {\n                            curr = result[dataItem.uid] = {};\n                        }\n\n                        column = findColumnByField(visibleColumns, field);\n\n                        if (!column || (columnsFilter && !columnsFilter(column))) {\n                            continue;\n                        }\n\n                        curr[field] = dataItem[field];\n                    }\n                }\n\n                return Object.keys(result).map(function(id) {\n                    result[id].uid = id;\n                    return result[id];\n                });\n            },\n\n            _getCellField: function(cell, hasLockedCols) {\n                var grid = this;\n                var inLockedArea = hasLockedCols && $.contains(grid.lockedTable[0], cell[0]);\n                var fieldAttr = kendo.attr('field');\n                var index = kendo.attr('index');\n\n                if (hasLockedCols) {\n                    return grid.element.find(\".k-grid-header-\" + (inLockedArea ? \"locked\" : \"wrap\") + \" th[\" + index + \"='\" + cell.index() + \"']\").attr(fieldAttr);\n                } else {\n                    return grid.thead.find(\"th[\" + index + \"='\" + cell.index() + \"']\").attr(fieldAttr);\n                }\n            },\n\n            _relatedRow: function(row) {\n                var lockedTable = this.lockedTable;\n                row = $(row);\n\n                if (!lockedTable) {\n                    return row;\n                }\n\n                var table = row.closest(this.table.add(this.lockedTable));\n                var index = table.find(\">tbody>tr\").index(row);\n\n                table = table[0] === this.table[0] ? lockedTable : this.table;\n\n                return table.find(\">tbody>tr\").eq(index);\n            },\n\n            _relatedCell: function(cell) {\n                var lockedTable = this.lockedTable;\n\n                cell = $(cell);\n\n                if (!lockedTable) {\n                    return cell;\n                }\n\n                var table = cell.closest(this.table.add(this.lockedTable));\n                var index = table.find(\">tbody>tr>td\").index(cell);\n\n                table = table[0] === this.table[0] ? lockedTable : this.table;\n\n                return table.find(\">tbody>tr>td\").index(index);\n            },\n\n            clearSelection: function() {\n                var that = this;\n\n                if (that.selectable && !that._checkBoxSelection) {\n                    that.selectable.clear();\n                }\n\n                if (that._checkBoxSelection) {\n                    that._deselectCheckRows(that.select());\n                    return;\n                }\n\n                if (that.options.persistSelection) {\n                    that._persistSelectedRows();\n                } else {\n                    that._selectedIds = {};\n                }\n            },\n\n            select: function(items) {\n                var that = this,\n                    selectable = that.selectable,\n                    selectableoptions = kendo.ui.Selectable.parseOptions(this.options.selectable),\n                    cell = selectableoptions.cell;\n\n                items = that.table.add(that.lockedTable).find(items);\n                if (items.length) {\n                    if (selectable && !selectable.options.multiple) {\n                        selectable.clear();\n                        items = items.first();\n                    }\n\n                    if (that._isLocked()) {\n                        items = items.add(items.map(function() {\n                            if (cell) {\n                                return that._relatedCell(this);\n                            }\n                            else {\n                                return that._relatedRow(this);\n                            }\n                        }));\n                    }\n\n                    if (selectable && !that._checkBoxSelection) {\n                        selectable.value(items);\n                    } else {\n                        that._checkRows(items);\n                        if (that.select().length === that.items().length) {\n                            that._toggleHeaderCheckState(true);\n                        }\n                    }\n\n                    if (!cell) {\n                        that._persistSelectedRows();\n                    }\n\n                    return;\n                }\n\n                return selectable ? selectable.value() : that.items().filter(\".\" + SELECTED);\n            },\n\n            _toggleHeaderCheckState: function(checked) {\n                var that = this;\n                if (checked) {\n                    that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                        .prop(\"checked\", true).attr(ARIA_CHECKED, true)\n                        .attr(ARIA_LABEL, \"Deselect all rows\");\n                } else {\n                    that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                        .prop(\"checked\", false).attr(ARIA_CHECKED, false)\n                        .attr(ARIA_LABEL, \"Select all rows\");\n                }\n            },\n\n            _uncheckCheckBoxes: function() {\n                var that = this;\n                var tables = that.table.add(that.lockedTable);\n\n                tables.find(\"tbody \" + CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                    .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n\n            },\n\n            _deselectCheckRows: function(items) {\n                var that = this,\n                rangeSelectedAttr = kendo.attr(\"range-selected\");\n                items = that.table.add(that.lockedTable).find(items);\n\n                if (that._isLocked()) {\n                    items = items.add(items.map(function() {\n                        return that._relatedRow(this);\n                    }));\n                }\n\n                items.each(function() {\n                    $(this).removeClass(SELECTED).removeAttr(rangeSelectedAttr).find(CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                        .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n                });\n                that._toggleHeaderCheckState(false);\n\n                that._persistSelectedRows();\n\n            },\n\n            _checkRows: function(items) {\n                items.each(function() {\n                    $(this).addClass(SELECTED).find(CHECKBOXINPUT)\n                        .prop(\"checked\", true)\n                        .attr(ARIA_LABEL, \"Deselect row\")\n                        .attr(ARIA_CHECKED, true);\n                });\n            },\n\n            _persistSelectedRows: function() {\n                var that = this,\n                    key,\n                    dataItem,\n                    allRows = that.items(),\n                    dataSourceOptions = that.dataSource.options,\n                    schema = dataSourceOptions.schema,\n                    modelId,\n                    selectedViewIds = {};\n\n                if (!schema || !schema.model || !that._data) {\n                    return;\n                }\n\n                modelId = isFunction(schema.model) ? schema.model.fn.idField : schema.model.id;\n\n                if (!modelId) {\n                    return;\n                }\n\n                if (!kendo.ui.Selectable.parseOptions(that.options.selectable).multiple && !that._checkBoxSelection) {\n                    that._selectedIds = {};\n                }\n\n                that.select().each(function() {\n                    dataItem = that.dataItem(this);\n                    selectedViewIds[dataItem[modelId]] = true;\n                });\n\n                for (var i = 0; i < allRows.length; i ++) {\n                    dataItem = that.dataItem(allRows[i]);\n                    key = dataItem[modelId];\n                    if (selectedViewIds[key]) {\n                        that._selectedIds[key] = true;\n                    } else {\n                        delete that._selectedIds[key];\n                    }\n                }\n            },\n\n            selectedKeyNames: function() {\n                var that = this,\n                    ids = [];\n                for (var property in that._selectedIds) {\n                    ids.push(property);\n                }\n                ids.sort();\n                return ids;\n            },\n\n            _updateCurrentAttr: function(current, next) {\n                var headerId = $(current).data(\"headerId\");\n                var nextId;\n                var descId;\n\n                $(current).removeClass(FOCUSED);\n                this.table.removeAttr(ARIA_ACTIVEDESCENDANT);\n\n                if (headerId) {\n                    headerId = headerId.replace(this._cellId, \"\");\n                    $(current).attr(ID, headerId);\n                } else {\n                    $(current).removeAttr(ID);\n                }\n\n                nextId = next.attr(ID);\n\n                if (nextId != this._cellId) {\n                    next.data(\"headerId\", nextId);\n                }\n\n                if (!!nextId) {\n                    descId = nextId;\n                } else {\n                    next.attr(ID, this._cellId);\n                }\n\n                next.addClass(FOCUSED);\n                this.table.attr(ARIA_ACTIVEDESCENDANT, descId || this._cellId);\n\n                this._current = next;\n            },\n\n            _scrollCurrent: function() {\n                var current = this._current;\n                var scrollable = this.options.scrollable;\n\n                if (!current || !scrollable) {\n                    return;\n                }\n\n                var row = current.parent();\n                var tableContainer = row.closest(\"table\").parent();\n\n                var isInLockedContainer = tableContainer.is(\".k-grid-content-locked,.k-grid-header-locked\");\n                var isInContent = tableContainer.is(\".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap\");\n\n                var scrollableContainer = $(this.content).find(\">.k-virtual-scrollable-wrap\").addBack().last()[0];\n\n                //adjust scroll vertically\n                if (isInContent) {\n                    if (this.virtualScroll) {\n                        var rowIndex = Math.max(inArray(row[0], this._items(row.parent())), 0);\n                        if (this.virtualScroll.rows) {\n                            this._rowVirtualIndex = this.virtualScrollable.itemIndex(rowIndex);\n                            this.virtualScrollable.scrollIntoView(row);\n                        } else {\n                            this._rowVirtualIndex = rowIndex;\n                            this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                        }\n                    } else {\n                        this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                    }\n                }\n\n                if (this.lockedContent) {\n                    //sync locked and non-locked content scrollTop\n                    this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n                }\n\n                //adjust scroll horizontally, if not inside locked tables\n                if (!isInLockedContainer) {\n                    this._scrollTo(current[0], scrollableContainer);\n                }\n            },\n\n            current: function(next) {\n                return this._setCurrent(next, true);\n            },\n\n            _setCurrent: function(next, preventTrigger, preventScroll) {\n                var current = this._current;\n\n                next = $(next);\n\n                if (current && next && current.length && next.length && current.closest(\".k-filter-row\").length > 0 && next.closest(\".k-filter-row\").length === 0) {\n                    this._filterFocusable().attr(TABINDEX, -1);\n                }\n\n                if (next.length) {\n                    if (!current || current[0] !== next[0]) {\n                        var parent = next.parent();\n                        var siblings = parent.children(DATA_CELL);\n                        var colspan = parseInt(parent.children().first().attr(\"colspan\"), 10);\n\n                        if (this._hasVirtualColumns()) {\n                            this._virtualCellIndex = (colspan > 1 ? colspan : 0) + siblings.index(next);\n                        }\n                        this._updateCurrentAttr(current, next);\n\n                        if (!preventScroll) {\n                            this._scrollCurrent();\n                        }\n\n                        if (!preventTrigger) {\n                            this.trigger(NAVIGATE, {\n                                element: next\n                            });\n                        }\n                    }\n                }\n\n                if (next && next.length) {\n                    this._lastCellIndex = next.parent().children(\".k-group-cell,\" + DATA_CELL_HIDDENINCLUDED).index(next);\n                }\n\n                this._updateSelctCheckbox(current, next);\n\n                return this._current;\n            },\n\n            _removeCurrent: function() {\n                if (this._current) {\n                    this._current.removeClass(FOCUSED);\n                    this._current = null;\n                }\n            },\n\n            _updateSelctCheckbox: function(current, next) {\n                var nextCheckbox;\n\n                if (next && next.length) {\n                    nextCheckbox = next.find(\".k-select-checkbox\");\n\n                    if (nextCheckbox.length > 0) {\n                        nextCheckbox.focus();\n                    } else if (current && current.find(\".k-select-checkbox\").length > 0) {\n                        focusTable(this.table, true);\n                    }\n                }\n            },\n\n            _scrollTo: function(element, container) {\n                var elementToLowercase = element.tagName.toLowerCase();\n                var isHorizontal = elementToLowercase === \"td\" || elementToLowercase === \"th\";\n                var table = $(element).closest(\"table\")[0];\n                var elementOffsetDir = element[isHorizontal ? \"offsetWidth\" : \"offsetHeight\"];\n                var containerScroll = container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"];\n                var containerOffsetDir = container[isHorizontal ? \"clientWidth\" : \"clientHeight\"];\n                var elementOffset = $(element).css(\"position\") === \"relative\" && isRtl && isHorizontal ? Math.abs(table.offsetLeft - element.offsetLeft) : element[isHorizontal ? \"offsetLeft\" : \"offsetTop\"];\n                var bottomDistance = elementOffset + elementOffsetDir;\n                var result = 0;\n                var ieCorrection = 0;\n                var firefoxCorrection = 0;\n\n                if (isRtl && isHorizontal) {\n                    if (browser.msie || browser.edge) {\n                        ieCorrection = table.offsetLeft;\n                    } else if (browser.mozilla || (browser.webkit && (browser.version > 85))) {\n                        firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                    }\n                }\n\n                containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n\n                if (containerScroll > elementOffset) {\n                    result = elementOffset;\n                } else if (bottomDistance > (containerScroll + containerOffsetDir)) {\n                    if (elementOffsetDir <= containerOffsetDir) {\n                        result = (bottomDistance - containerOffsetDir);\n                    } else {\n                        result = elementOffset;\n                    }\n                } else {\n                    result = containerScroll;\n                }\n\n                result = Math.abs(result + ieCorrection) + firefoxCorrection;\n\n                container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"] = result;\n            },\n\n            _navigatable: function() {\n                var that = this;\n\n                if (!that.options.navigatable) {\n                    return;\n                }\n\n                //data tables - locked and non-locked\n                var dataTables = that.table.add(that.lockedTable);\n                //header tables - locked and non-locked\n                var headerTables = that.thead.parent().add($(\">table\", that.lockedHeader));\n\n                //the over wich keys will be handled\n                var tables = dataTables;\n\n                if (that.options.scrollable) {\n                    //add the header table when the widget is scrollable\n                    tables = tables.add(headerTables);\n                }\n\n                this._navigatableTables = tables;\n                this._headertables = headerTables;\n\n                //dettach all previous events\n                tables.off(MOUSEDOWN + NS + \" focus\" + NS + \" focusout\" + NS + \" keydown\" + NS);\n\n                headerTables\n                    .find(\"a.k-link\").attr(\"tabIndex\", -1);\n\n                //prevent propagation when clicked inside detail grid\n                dataTables\n                    .on(\"keydown\" + NS, \".k-detail-cell\", function(e) {\n                        if (e.target !== e.currentTarget) {\n                            e.stopImmediatePropagation();\n                        }\n                    });\n\n                tables\n                    //handle click on tables, will attempt to focus the table\n                    .on((kendo.support.touch ? \"touchstart\" + NS : MOUSEDOWN + NS), NAVROW + \">\" + NAVCELL, tableClick.bind(that))\n                    .on(\"focus\" + NS, that._tableFocus.bind(that))\n                    .on(\"focusout\" + NS, that._tableBlur.bind(that))\n                    .on(\"keydown\" + NS, that, that._tableKeyDown.bind(that));\n\n                that._filterFocusable().on(\"focus\", that._filterFocus.bind(that));\n            },\n\n            _filterFocus: function(e) {\n                var header = e.target.closest(\"th\");\n\n                this._filterFocusable().attr(TABINDEX, 0);\n                this._setCurrent(header);\n                $(header).removeClass(FOCUSED);\n            },\n\n            _tableFocus: function() {\n                var current = this.current();\n                var table = this.lockedTable ? this.lockedTable : this.table;\n\n                //if there is already current, highlighted it\n                //otherwise highlight the first possible cell\n                if (current && current.is(\":visible\")) {\n                    current.addClass(FOCUSED);\n                } else {\n                    if (this._virtualColScroll) {\n                        this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first(), true, true);\n                    } else {\n                        this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first());\n                    }\n                }\n\n                this.table.attr(TABINDEX, 0);\n            },\n\n            _tableBlur: function() {\n                var current = this.current();\n\n                if (current) {\n                    current.removeClass(FOCUSED);\n                }\n            },\n\n            _findCellIndex: function(columns, startIndex, reversed) {\n                var cellIndex;\n                var i;\n\n                if (reversed) {\n                    for (i = startIndex; i >= 0; i--) {\n                        cellIndex = i;\n                        if (!columns[i].hidden) {\n                            break;\n                        }\n                    }\n                } else {\n                    for (i = startIndex; i < columns.length; i++) {\n                        cellIndex = i;\n                        if (!columns[i].hidden) {\n                            break;\n                        }\n                    }\n                }\n\n                return cellIndex;\n            },\n\n            _scrollToColumn: function(key, e) {\n                if (this._virtualCellIndex === undefined$1) {\n                    return false;\n                }\n\n                var that = this;\n                var cellIndex = that._virtualCellIndex;\n                var leafsCols = leafColumns(nonLockedColumns(that.columns));\n                var scrollWidth = 0;\n\n                if (key == (isRtl ? keys.LEFT : keys.RIGHT) && (cellIndex !== leafsCols.length - 1)) {\n                    cellIndex = that._findCellIndex(leafsCols, cellIndex + 1);\n                } else if (key == (isRtl ? keys.RIGHT : keys.LEFT) && cellIndex) {\n                    cellIndex = that._findCellIndex(leafsCols,cellIndex - 1, true);\n                } else if (key == keys.HOME) {\n                    cellIndex = that._findCellIndex(leafsCols, 0);\n                } else if (key == keys.END) {\n                    cellIndex = that._findCellIndex(leafsCols, leafsCols.length - 1, true);\n                }\n\n                for (var i = 0; i < cellIndex; i++) {\n                    scrollWidth += leafsCols[i].width;\n                }\n\n                that._virtualCellIndex = cellIndex;\n                if (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n                kendo.scrollLeft(that.content, scrollWidth);\n                return true;\n            },\n\n            _tableKeyDown: function(e) {\n                var current = this.current();\n                var virtualScroll = this.virtualScroll || {};\n                var requestInProgress = this.virtualScrollable && this.virtualScrollable.fetching();\n                var target = $(e.target);\n                var canHandle = !e.isDefaultPrevented() && !target.is(\":button,a,:input:not(.k-select-checkbox),a>.k-icon,a>.k-svg-icon\");\n\n                if (e.altKey && e.keyCode == keys.DOWN) {\n                    this.current().find(\".k-grid-filter-menu, .k-grid-column-menu\").click();\n                    e.stopImmediatePropagation();\n                    return;\n                }\n\n                // do not handle key down if request in progress\n                // or there isn't current set\n                if (requestInProgress) {\n                    // swallow key events while in progress\n                    e.preventDefault();\n                    return;\n                }\n\n                if (virtualScroll.columns && (!current || !document.body.contains(current[0])) && (this._scrollToColumn(e.keyCode, e))) {\n                    return;\n                }\n\n                if (!current) {\n                    current = $(this.lockedTable).add(this.options.scrollable ? this.table : this.tbody).find(NAVROW).first().children(NAVCELL).first();\n                }\n\n                if (!current.length) {\n                    return;\n                }\n\n                var handled = false;\n\n                if (!e.isDefaultPrevented() && e.keyCode === keys.F10) {\n                    handled = this._focusToolbar();\n                }\n\n                if (canHandle && e.keyCode == keys.UP) {\n                    handled = this._moveUp(current, e.shiftKey, e.ctrlKey);\n                }\n\n                if (canHandle && e.keyCode == keys.DOWN) {\n                    handled = this._moveDown(current, e.shiftKey, e.ctrlKey);\n                }\n\n                if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                    handled = this._moveRight(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n                }\n\n                if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                    handled = this._moveLeft(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n                }\n\n                if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                    handled = this._handlePageDown();\n                }\n\n                if (canHandle && e.keyCode == keys.PAGEUP) {\n                    handled = this._handlePageUp();\n                }\n\n                if (canHandle && e.keyCode == keys.HOME) {\n                    handled = this._handleHome(current, e.ctrlKey);\n                }\n\n                if (canHandle && e.keyCode == keys.END) {\n                    handled = this._handleEnd(current, e.ctrlKey);\n                }\n\n                if (canHandle && e.keyCode == keys.SPACEBAR) {\n                    handled = this._handleSpaceKey(current, e.ctrlKey);\n                }\n\n                if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                    handled = this._handleEnterKey(current, e.currentTarget, target);\n                }\n\n                if (e.keyCode == keys.ESC) {\n                    handled = this._handleEscKey(current, e.currentTarget);\n                }\n\n                if (e.keyCode == keys.TAB) {\n                    handled = this._handleTabKey(current, e.currentTarget, e.shiftKey, target);\n                }\n\n                if (handled) {\n                    //prevent scrolling while pressing the keys\n                    e.preventDefault();\n                    //required in hierarchy\n                    e.stopPropagation();\n                }\n            },\n\n            _focusToolbar: function() {\n                var focusable = this.wrapper.find(\".k-grid-toolbar [tabindex=0]\");\n\n                if (focusable.length > 0) {\n                    focusable.first().addClass(\".k-focus\").trigger(\"focus\");\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            _moveLeft: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n                var next, index;\n                var row = current.parent();\n                //thead or tbody\n                var container = row.parent();\n\n                if (altKey) {\n                    if (row.hasClass(GROUPING_ROW)) {\n                        this.collapseGroup(row);\n                    } else {\n                        this.collapseRow(row);\n                    }\n                } else if (ctrlKey && current.is(\".k-header\") && this.options.reorderable) {\n                   this._moveColumn(current, true);\n                } else {\n                    index = container.find(NAVROW).index(row);\n                    next = this._prevHorizontalCell(container, current, index);\n\n                    if (!next[0]) {\n                        if (shiftKey) {\n                            if (this.lockedTable) {\n                                next = this._relatedRow(row);\n                                if ($.contains(this.lockedTable[0], row[0])) {\n                                    next = next.prevAll(ITEMROW).first();\n                                }\n                                next = next.children(DATA_CELL).last();\n                            } else {\n                                next = this._tabNext(current, currentTable, true);\n                            }\n                        } else {\n                            container = this._horizontalContainer(container);\n\n                            next = this._prevHorizontalCell(container, current, index);\n\n                            if (next[0] !== current[0]) {\n                                focusTable(this.table, true);\n                            }\n                        }\n                    }\n\n                    this._setCurrent(next);\n                }\n\n                return true;\n            },\n\n            _moveRight: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n                var next, index;\n                var row = current.parent();\n                //thead or tbody\n                var container = row.parent();\n\n                if (altKey) {\n                    if (row.hasClass(GROUPING_ROW)) {\n                        this.expandGroup(row);\n                    } else {\n                        this.expandRow(row);\n                    }\n                 } else if (ctrlKey && current.is(\".k-header\") && this.options.reorderable) {\n                    this._moveColumn(current, false);\n                } else {\n                    index = container.find(NAVROW).index(row);\n                    next = this._nextHorizontalCell(container, current, index);\n\n                    if (!next[0]) {\n                        if (shiftKey) {\n                           if (this.lockedTable) {\n                                next = this._relatedRow(row);\n                                if ($.contains(this.table[0], row[0])) {\n                                    next = next.nextAll(ITEMROW).first();\n                                }\n                                next = next.children(DATA_CELL).first();\n                            } else {\n                                next = this._tabNext(current, currentTable, false);\n                            }\n                        } else {\n                            container = this._horizontalContainer(container, true);\n\n                            next = this._nextHorizontalCell(container, current, index);\n\n                            if (next[0] !== current[0]) {\n                                focusTable(this.table, true);\n                            }\n                        }\n                    }\n\n                    this._setCurrent(next);\n                }\n\n                return true;\n            },\n\n            _moveUp: function(current, shiftKey, ctrlKey) {\n                //thead or tbody\n                var container = current.parent().parent();\n                var next, cellIndex, index, oldIndex;\n\n                if (shiftKey) {\n                   next = current.parent();\n                   next = next.prevAll(ITEMROW).first();\n                   next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).last();\n                } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                    cellIndex = current.index();\n                    next = current.parent();\n                    next = next.prevAll(ITEMROW).first();\n                    index = this.tbody.children(ITEMROW).index(next);\n                    oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                    if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                        this.reorderRows(current.parent(), index);\n                        next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                    }\n                } else {\n                   next = this._prevVerticalCell(container, current);\n                   if (!next[0]) {\n                      this._lastCellIndex = 0;\n                      container = this._verticalContainer(container, true);\n\n                      next = this._prevVerticalCell(container, current);\n\n                      if (next[0]) {\n                          focusTable(this.table, true);\n                      }\n                   }\n                }\n\n                var tmp = this._lastCellIndex || 0;\n                this._setCurrent(next);\n                this._lastCellIndex = tmp;\n\n                return true;\n            },\n\n            _moveDown: function(current, shiftKey, ctrlKey) {\n                //thead or tbody\n                var container = current.parent().parent();\n                var next, cellIndex, index, oldIndex;\n\n                if (shiftKey) {\n                    next = current.parent();\n                    next = next.nextAll(ITEMROW).first();\n                    next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).first();\n                } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                    cellIndex = current.index();\n                    next = current.parent();\n                    next = next.nextAll(ITEMROW).first();\n                    index = this.tbody.children(ITEMROW).index(next);\n                    oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                    if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                        this.reorderRows(current.parent(), index + 1);\n                        next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                    }\n                } else {\n                    next = this._nextVerticalCell(container, current);\n                    if (!next[0]) {\n                        this._lastCellIndex = 0;\n                        container = this._verticalContainer(container);\n\n                        next = this._nextVerticalCell(container, current);\n                        if (next[0]) {\n                            focusTable(this.table, true);\n                        }\n                    }\n                }\n                var tmp = this._lastCellIndex || 0;\n                this._setCurrent(this._findVisibleCell(next));\n                this._lastCellIndex = tmp;\n                return true;\n            },\n\n            _moveColumn: function(current, isLeft) {\n                var elements = this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter + \":visible\");\n\n                var columns = visibleColumns(flatColumnsInDomOrder(this.columns));\n                var oldIndex = elements.index($(current));\n                var offset = isLeft ? - 1 : 1;\n                var column = columns[oldIndex];\n                var newIndex = targetParentContainerIndex(columns, this.columns, oldIndex, oldIndex + offset);\n                if (newIndex >= 0) {\n                    this.reorderColumn(newIndex, column, isLeft);\n                    this.trigger(COLUMNREORDER, {\n                        newIndex: newIndex,\n                        oldIndex: oldIndex,\n                        column: column\n                    });\n                }\n            },\n\n            _handleHome: function(current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var prev;\n\n                if (this._hasVirtualColumns()) {\n                    this._scrollToColumn(keys.HOME);\n                    return true;\n                }\n\n                if (ctrl) {\n                    if (this.lockedTable) {\n                        prev = this.lockedTable.find(ITEMROW).first().children(NAVCELL).first();\n                    } else {\n                        prev = this.table.find(ITEMROW).first().children(NAVCELL).first();\n                    }\n                } else if (isInBody || isInLockedTable) {\n                    if (isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    prev = row.children(DATA_CELL).first();\n                }\n\n                if (prev && prev.length) {\n                    this._setCurrent(prev);\n                    return true;\n                }\n            },\n\n            _handleEnd: function(current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var next;\n\n                if (this._hasVirtualColumns()) {\n                    this._scrollToColumn(keys.END);\n                    return true;\n                }\n\n                if (ctrl) {\n                    next = this.table.find(ITEMROW).last().children(NAVCELL).last();\n                } else if (isInBody || isInLockedTable) {\n                    if (!isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    next = row.children(DATA_CELL).last();\n                }\n\n                if (next && next.length) {\n                    this._setCurrent(next);\n                    return true;\n                }\n            },\n\n            _handlePageDown: function() {\n                if (!this.options.pageable) {\n                    return false;\n                }\n\n                this.dataSource.page(this.dataSource.page() + 1);\n\n                return true;\n            },\n\n            _handlePageUp: function() {\n                if (!this.options.pageable) {\n                    return false;\n                }\n\n                this.dataSource.page(this.dataSource.page() - 1);\n\n                return true;\n            },\n\n            _handleTabKey: function(current, currentTable, shiftKey, target) {\n                var isInCell = this.options.editable && this._editMode() == \"incell\";\n                var cell, filterFocusable;\n\n                if (!isInCell ||\n                    current.is(\"th\") ||\n                    (this.options.scrollable ? this._headertables.filter(currentTable).length : this.thead.filter(target).length)) {\n                        if (current.parent().hasClass(\"k-filter-row\")) {\n                            filterFocusable = this._filterFocusable();\n\n                            if (!shiftKey && filterFocusable[filterFocusable.length - 1] === document.activeElement) {\n                                filterFocusable.first().trigger(\"focus\");\n\n                                return true;\n                            } else if (shiftKey && filterFocusable[0] === document.activeElement) {\n                                filterFocusable.last().trigger(\"focus\");\n\n                                return true;\n                            }\n                        }\n\n                        return false;\n                }\n\n                cell = $(activeElement()).closest(\".k-edit-cell\");\n\n                if (cell[0] && cell[0] !== current[0]) {\n                    current = cell;\n                }\n\n                cell = this._tabNext(current, currentTable, shiftKey);\n\n                if (cell[0] === current[0]) {\n                    return false;\n                }\n\n                if (cell.length) {\n                    this._handleEditing(current, cell, cell.closest(\"table\"));\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            _handleEscKey: function(current) {\n                var active = activeElement();\n                var isInCell = this._editMode() == \"incell\";\n\n                if (!isInEdit(current)) {\n                    if (current.has(active).length) {\n                        // return focus back to the table\n                        focusTable(this.table, true);\n\n                        return true;\n                    }\n\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        this._filterFocusable().attr(TABINDEX, -1);\n                        focusTable(this.table, true);\n\n                        return true;\n                    }\n\n                    return false;\n                }\n\n                if (isInCell) {\n                    this.closeCell(true);\n                } else {\n                    var currentIndex = $(current).parent().index();\n                    if (active) {\n                        active.blur();\n                    }\n                    this.cancelRow(true);\n                    if (currentIndex >= 0) {\n                        this._setCurrent(this.items().eq(currentIndex).children(NAVCELL).first());\n                    }\n                }\n\n                focusTable(this.table, true);\n\n                return true;\n            },\n\n            _toggleCurrent: function(current, editable, hasDetails) {\n                var row = current.parent();\n\n                if (current.is(\".k-command-cell\")) {\n                    return false;\n                }\n\n                if (row.is(\".k-filter-row\")) {\n                    return false;\n                }\n\n                if (row.is(DOT + GROUPING_ROW)) {\n                    row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                    return true;\n                }\n\n                if (!editable && hasDetails) {\n                    row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            _handleSpaceKey: function(current, ctrlKey) {\n                var that = this;\n\n                if (!ctrlKey || !that.groupable || !current.hasClass(\"k-header\")) {\n                    return;\n                }\n\n                var descriptors = that.groupable.descriptors();\n                var field = current.attr(kendo.attr(\"field\"));\n                var aggregates = that.groupable.aggregates();\n\n                if (that.groupable._canDrag(current)) {\n                    descriptors.push({\n                        field: field,\n                        dir: \"asc\",\n                        aggregates: aggregates || []\n                    });\n                } else {\n                    descriptors = $.grep(descriptors, function(item)\n                    {\n                        return item.field !== field;\n                    });\n                }\n\n                that.dataSource.group(descriptors);\n\n                return true;\n            },\n\n            _handleEnterKey: function(current, currentTable, target) {\n                var editable = this.options.editable && this.options.editable.update !== false;\n                var container = target.closest(\"td\");\n                var hasDetails = this._hasDetails();\n                var link, filterFocusable;\n\n                if (!target.is(\"table\") && !$.contains(current[0], target[0])) {\n                    current = container;\n                }\n\n                if (current.is(\"th\")) {\n                    // sort the column, if possible\n                    link = current.find(\".k-link\");\n\n                    if (current.has($(activeElement())).length > 0) {\n                        return false;\n                    } else if (link.length) {\n                        link.click();\n                    } else if (current.parent().hasClass(\"k-filter-row\")) {\n                        filterFocusable = this._filterFocusable();\n                        filterFocusable.attr(TABINDEX, 0);\n                        current.find(\":kendoFocusable\").first().focus();\n                    } else {\n                        current.find(CHECKBOXINPUT).trigger(\"focus\");\n                    }\n\n                    return true;\n                }\n                if (this._toggleCurrent(current, editable, hasDetails)) {\n                    return true;\n                }\n\n                var focusable = current.find(\":kendoFocusable\").first();\n                if (focusable[0] && !current.hasClass(\"k-edit-cell\") && current.hasClass(\"k-focus\")) {\n                    focusable.trigger(\"focus\");\n\n                    return true;\n                }\n\n                if (editable && !target.is(\":button,.k-button,textarea\")) {\n                    if (!container[0]) {\n                        container = current;\n                    }\n\n                    this._handleEditing(container, false, currentTable);\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            _nextHorizontalCell: function(table, current, originalIndex) {\n                var cells = current.nextAll(DATA_CELL);\n\n                if (!cells.length) {\n                    var rows = table.find(NAVROW);\n                    var rowIndex = rows.index(current.parent());\n\n                    //no sibling cells are found and we've changed the table\n                    if (rowIndex == -1) {\n                        if (current.hasClass(\"k-header\")) {\n                            var headerRows = [];\n                            mapColumnToCellRows([lockedColumns(this.columns)[0]], childColumnsCells(rows.eq(0).children(\":visible\").first()), headerRows, 0, 0);\n\n                            if (headerRows[originalIndex]) {\n                                return headerRows[originalIndex][0];\n                            }\n\n                            return current;\n                        }\n\n                        //current is in filter row\n                        if (current.parent().hasClass(\"k-filter-row\")) {\n                            return rows.last().children(DATA_CELL).first();\n                        }\n\n                        //get the same row index in the new table\n                        return this._findVisibleCell(rows.eq(originalIndex).children(DATA_CELL_HIDDENINCLUDED).first());\n                    }\n                }\n\n                return this._findVisibleCell(current.nextAll(DATA_CELL + \",[hidden]\").eq(0));\n            },\n\n            _prevHorizontalCell: function(table, current, originalIndex) {\n                var cells = current.prevAll(DATA_CELL);\n\n                if (!cells.length) {\n                    var rows = table.find(NAVROW);\n                    var rowIndex = rows.index(current.parent());\n\n                    //no sibling cells are found and we've changed the table\n                    if (rowIndex == -1) {\n                        if (current.hasClass(\"k-header\")) {\n                            var headerRows = [];\n                            var columns = lockedColumns(this.columns);\n                            mapColumnToCellRows([columns[columns.length - 1]], childColumnsCells(rows.eq(0).children().last()), headerRows, 0, 0);\n\n                            if (headerRows[originalIndex]) {\n                                return headerRows[originalIndex][0];\n                            }\n\n                            return current;\n                        }\n\n                        //current is in filter row\n                        if (current.parent().hasClass(\"k-filter-row\")) {\n                            return rows.last().children(DATA_CELL).last();\n                        }\n\n                        //get the same row index in the new table\n                        return rows.eq(originalIndex).children(DATA_CELL).last();\n                    }\n                }\n\n                cells = current.prevAll(DATA_CELL + \",[hidden]\");\n                var cellToFocus = this._findVisibleCell(cells.first());\n                if (cellToFocus.is(\".k-group-cell\")) {\n                    return cellToFocus.next(DATA_CELL);\n                }\n\n                return cellToFocus;\n            },\n\n            _currentDataIndex: function(table, current) {\n                var index = current.attr(\"data-index\");\n\n                if (!index) {\n                    return undefined$1;\n                }\n\n                var lockedColumnsCount = lockedColumns(this.columns).length;\n                if (lockedColumnsCount && !table.closest(DIV).hasClass(\"k-grid-content-locked\")[0]) {\n                    return index - lockedColumnsCount;\n                }\n\n                return index;\n            },\n\n            _findVisibleCell: function($cell) {\n                var col = $cell.index();\n                var row = $cell.closest('tr').index();\n                var $newFocus;\n\n                if ($cell.is('[hidden]')) {\n                    $newFocus = $cell.prevAll(':not([hidden])').first();\n                    var hiddenCount = $cell.prevUntil(':not([hidden])', '[hidden]').length;\n                    if (!$newFocus.attr('colspan') || ($newFocus.attr('colspan') > 1 && $newFocus.attr('colspan') <= hiddenCount + 1)) {\n                        $newFocus = $cell.prevAll('[hidden]').last();\n                        if ($newFocus.length === 0) {\n                            return $cell.closest('tr').prevAll().find((\"td:nth-of-type(\" + (col + 1) + \"):visible\")).last();\n                        }\n\n                        while (!$newFocus.attr('rowspan') && !($newFocus.attr('rowspan') > 1 && $newFocus.attr('rowspan') != row - $newFocus.closest('tr').index()) && Math.abs($newFocus.index() - col) != $newFocus.attr('colspan')) {\n                            $newFocus = $newFocus.closest('tr').prevAll().find('td, th').eq(col).first();\n                            if ($newFocus.length === 0) {\n                                $newFocus = $cell;\n                                break;\n                            }\n                        }\n                    }\n                } else {\n                    $newFocus = $cell;\n                }\n\n                return $newFocus;\n            },\n\n            _prevVerticalCell: function(container, current) {\n                var cells;\n                var row = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                //get data-index in case of last level of multi-level columns\n                var index = this._currentDataIndex(container, current);\n\n                //current is in the header, but not at the last level of multi-level columns\n                if (index || current.hasClass(\"k-header\")) {\n                    cells = parentColumnsCells(current);\n                    return cells.eq(cells.length - 2);\n                }\n\n                //check this out\n                index = Math.max(row.children(DATA_CELL_HIDDENINCLUDED).index(current), this._lastCellIndex || 0);\n\n                //if current is inside filter row\n                if (row.hasClass(\"k-filter-row\")) {\n                    var offset = rows.last().children(\".k-group-cell\").length;\n\n                    return leafDataCells(container).filter(isCellVisible).eq(Math.max(0, index - offset));\n                }\n\n                //move up to header container\n                if (rowIndex == -1) {\n                    if (this._hasVirtualColumns()) {\n                        index = this._virtualCellIndex;\n                    }\n                    //is there filter row in the header container\n                    row = container.find(\"tr.k-filter-row:visible\");\n                    if (!row[0]) {\n                        // in hierarchical grid we need to correct the index\n                        // since the k-hierarchy cell is navigatable\n                        if ((this._hasDetails() || current.parent().find('.k-hierarchy-cell').length) && index) {\n                            index--;\n                        }\n\n                        var offset$1 = 0;\n                        if (current.parent().is(\".k-table-group-row\")) {\n                            offset$1 = rows.last().children(\".k-group-cell\").length;\n                        }\n\n                        return leafDataCells(container).eq(Math.max(0, index - offset$1));\n                    } else {\n                        if (this._hasDetails()) {\n                            index--;\n                        }\n                    }\n                } else {\n                    row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n                }\n\n                cells = row.children(DATA_CELL_HIDDENINCLUDED);\n                if (cells.length > index) {\n                    var nextCell = cells.eq(index);\n                    if (nextCell.is(\".k-group-cell\")) {\n                        nextCell = nextCell.nextAll(DATA_CELL_HIDDENINCLUDED + \":not(.k-group-cell)\").first();\n                    }\n\n                    return this._findVisibleCell(nextCell);\n                }\n\n                return cells.eq(0);\n            },\n\n            _nextVerticalCell: function(container, current) {\n                var cells;\n                var originalRow;\n                var row = originalRow = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                //get data-index in case of last level of multi-level columns\n                var index = this._currentDataIndex(container, current);\n                var virtualScroll = this.virtualScroll || {};\n                var colspan;\n                //current is in the header, but not at the last level of multi-level columns\n                //and we are not changing the table\n                if (rowIndex != -1 && index === undefined$1 && current.hasClass(\"k-header\")) {\n                    return childColumnsCells(current).eq(1);\n                }\n\n                index = index ? parseInt(index, 10) : row.children(DATA_CELL_HIDDENINCLUDED).index(current);\n                index = Math.max(index, this._lastCellIndex || 0);\n\n                //move down to data container\n                if (rowIndex == -1) {\n                    row = rows.eq(0);\n                    if (virtualScroll.columns) {\n                        colspan = parseInt(row.children().first().attr(\"colspan\"), 10);\n                        index = this._virtualCellIndex - (colspan > 1 ? colspan : 0);\n                    }\n                    // in hierarchical grid we need to correct the index\n                    // since the k-hierarchy cell is navigatable\n                    if (this._hasDetails() || row.find('.k-hierarchy-cell').length) {\n                        index++;\n                    }\n\n                    if (row.hasClass(\"k-table-group-row\")) {\n                        index += originalRow.children(\".k-group-cell\").length;\n                    }\n                } else {\n                    row = rows.eq(rowIndex + current[0].rowSpan);\n                }\n\n                cells = row.children(\".k-group-cell,\" + DATA_CELL_HIDDENINCLUDED);\n\n                var cellToFocus = cells.eq(0);\n                if (cells.length > index) {\n                    cellToFocus = cells.eq(index);\n                }\n\n                if (cellToFocus.is(\".k-group-cell\")) {\n                    cellToFocus = cellToFocus.next(\":not(k-group-cell):not([hidden])\");\n                }\n\n                return cellToFocus;\n            },\n\n            _verticalContainer: function(container, up) {\n                var table = container.parent();\n                var length = this._navigatableTables.length;\n                var step = Math.floor(length / 2);\n                var index = inArray(table[0], this._navigatableTables);\n\n                if (up) {\n                    step *= -1;\n                }\n                index += step;\n\n                if (index >= 0 || index < length) {\n                    table = this._navigatableTables.eq(index);\n                }\n\n                return table.find(up ? \">thead\" : \">tbody\");\n            },\n\n            _filterFocusable: function() {\n                return this.wrapper.find(\".k-filter-row\").find(\".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible\");\n            },\n\n            _horizontalContainer: function(container, right) {\n                var length = this._navigatableTables.length;\n                if (length <= 2) {\n                    return container;\n                }\n\n                var table = container.parent();\n                var index = inArray(table[0], this._navigatableTables);\n\n                index += right ? 1 : -1;\n\n                if (right && (index == 2 || index == length)) {\n                    return container;\n                }\n\n                if (!right && (index == 1 || index < 0)) {\n                    return container;\n                }\n\n                return this._navigatableTables.eq(index).find(\"thead, tbody\");\n            },\n\n            _tabNext: function(current, currentTable, back) {\n                var switchRow = true;\n                var next = back ? current.prevAll(DATA_CELL).first() : current.nextAll(\":visible\").first();\n\n                if (!next.length) {\n                    next = current.parent();\n                    if (this.lockedTable) {\n                        switchRow = (back && currentTable == this.lockedTable[0]) || (!back && currentTable == this.table[0]);\n                        next = this._relatedRow(next);\n                    }\n\n                    if (switchRow) {\n                        if (this._hasVirtualColumns()) {\n                            return current;\n                        }\n                        next = next[back ? \"prevAll\" : \"nextAll\"](\"tr:not(.k-grouping-row):not(.k-detail-row):visible\").first();\n                    }\n                    if (back) {\n                        next = next.children(DATA_CELL).last();\n                    } else {\n                        next = next.children(DATA_CELL).first();\n                    }\n                }\n\n                return next;\n            },\n\n            _handleEditing: function(current, next, table) {\n                var that = this,\n                    active = $(activeElement()),\n                    mode = that._editMode(),\n                    isIE = browser.msie,\n                    editContainer = that._editContainer,\n                    focusable,\n                    editable = that.options.editable && that.options.editable.update !== false,\n                    isEdited;\n\n                table = $(table);\n                if (mode == \"incell\") {\n                    isEdited = current.hasClass(\"k-edit-cell\");\n                } else {\n                    isEdited = current.parent().hasClass(\"k-grid-edit-row\");\n                }\n\n                if (that.editable) {\n                    if ($.contains(editContainer[0], active[0])) {\n                        active.trigger(\"blur\");\n                        if (isIE) {\n                            //IE10 with jQuery 1.9.x does not trigger blur handler\n                            //numeric textbox does trigger change\n                            active.trigger(\"blur\");\n                        }\n                    }\n\n                    if (!that.editable) {\n                        focusTable(that.table);\n                        return;\n                    }\n\n                    if (that.editable.end()) {\n                        if (mode == \"incell\") {\n                            that.closeCell();\n                        } else {\n                            that.saveRow();\n                            isEdited = true;\n                        }\n                    } else {\n                        if (mode == \"incell\") {\n                            that._setCurrent(editContainer);\n                        } else {\n                            that._setCurrent(editContainer.children().filter(DATA_CELL).first());\n                        }\n                        focusable = editContainer.find(\":kendoFocusable\").first()[0];\n                        if (focusable) {\n                            focusable.focus();\n                        }\n                        return;\n                    }\n                }\n\n                if (next) {\n                    that._setCurrent(next);\n                }\n\n                focusTable(that.table, true);\n\n                if (!editable) {\n                    return;\n                }\n\n                if ((!isEdited && !next) || next) {\n                    if (mode === INCELL) {\n                        if (!$(that.current()).hasClass(HIERARCHY_CELL_CLASS)) {\n                            that.editCell(that.current());\n                        }\n                    } else {\n                        that.editRow(that.current().parent());\n                    }\n                }\n            },\n\n            _wrapper: function() {\n                var that = this,\n                    table = that.table,\n                    height = that.options.height,\n                    width = that.options.width,\n                    wrapper = that.element;\n\n                if (!wrapper.is(DIV)) {\n                   wrapper = wrapper.wrap(\"<div/>\").parent();\n                }\n\n                that.wrapper = wrapper.addClass(\"k-grid \" + kendo.getValidCssClass(\"k-grid-\", \"size\", that.options.size));\n\n                if (height) {\n                    that.wrapper.css(HEIGHT, height);\n                    table.css(HEIGHT, AUTO);\n                }\n\n                if (width) {\n                    that.wrapper.css(WIDTH, width);\n                }\n\n                that._initMobile();\n            },\n\n            _initContextMenu: function() {\n                var that = this,\n                    options = that.options,\n                    groupsContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.groups) ? { items: options.contextMenu.groups } : { items: defaultGroupsContextMenu },\n                    tbodyContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.body) ? { items: options.contextMenu.body } : { items: defaultBodyContextMenu },\n                    theadContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.head) ? { items: options.contextMenu.head } : { items: defaultHeadContextMenu };\n\n                var mainOptions = isPlainObject(options.contextMenu) ? options.contextMenu : {};\n\n                tbodyContextMenu = extend({}, {\n                    messages: options.messages,\n                    target: that.tbody,\n                    filter: \".k-table-td\",\n                    action: that._action.bind(that),\n                    states: that._buildStates()\n                }, mainOptions, tbodyContextMenu);\n\n                theadContextMenu = extend({}, {\n                    messages: options.messages,\n                    target: that.thead,\n                    filter: \".k-table-th\",\n                    action: that._action.bind(that),\n                    states: that._buildStates()\n                }, mainOptions, theadContextMenu);\n\n                if (that.groupable) {\n                    groupsContextMenu = extend({}, {\n                        showOn: \"click\",\n                        target: that.groupable.groupContainer,\n                        filter: \".k-groupable-context-menu\",\n                        messages: options.messages,\n                        action: that._action.bind(that),\n                        states: that._buildStates()\n                    }, mainOptions, groupsContextMenu);\n                }\n\n\n                that.tbodyContextMenu = new ui.grid.ContextMenu(\"<ul></ul>\", tbodyContextMenu);\n                that.theadContextMenu = new ui.grid.ContextMenu(\"<ul></ul>\", theadContextMenu);\n                that.groupsContextMenu = !!that.groupable && new ui.grid.ContextMenu(\"<ul></ul>\", groupsContextMenu);\n            },\n\n            _buildStates: function() {\n                var this$1$1 = this;\n\n                var that = this;\n\n                return {\n                    isEditable: that.options.editable,\n                    isSelectable: that.options.selectable,\n                    isSortable: that.options.sortable,\n                    isRowReorderable: isPlainObject(that.options.reorderable) ? that.options.reorderable.rows : that.options.reorderable,\n                    isGroupable: that.options.groupable,\n                    hasSelection: function () { return (this$1$1.select() ? this$1$1.select().length > 0 : false); },\n                    isSorted: function () { return !(this$1$1.dataSource.sort() ? this$1$1.dataSource.sort().length > 0 : false); },\n                    canMoveGroupPrev: function (target) {\n                        var group = $(target).closest(\".k-chip\");\n\n                        return group.index() > 0;\n                    },\n                    canMoveGroupNext: function (target) {\n                        var length = $(target).closest(\".k-chip-list\").children().length - 1;\n                        var group = $(target).closest(\".k-chip\");\n\n                        return group.index() < length;\n                    }\n                };\n            },\n\n            _action: function(args) {\n                var commandName = args.command,\n                    commandOptions = extend({ grid: this }, args.options),\n                    command = new ui.grid.commands[commandName](commandOptions);\n\n                return command.exec();\n            },\n\n            _initMobile: function() {\n                var options = this.options;\n                var that = this;\n\n                this._isMobile = (options.mobile === true && kendo.support.mobileOS) ||\n                                    options.mobile === \"phone\" ||\n                                    options.mobile === \"tablet\";\n\n                if (this._isMobile) {\n                    var html = this.wrapper.addClass(\"k-grid-mobile\").wrap(\n                        '<div data-' + kendo.ns + 'stretch=\"true\" data-' + kendo.ns + 'role=\"view\" ' +\n                        'data-' + kendo.ns + 'init-widgets=\"false\"></div>'\n                    )\n                    .parent();\n\n                    this.pane = this._createPane(html);\n                    this.view = this.pane.view();\n\n                    if (options.height) {\n                        this.pane.element.parent().css(HEIGHT, options.height);\n                    } else {\n                        this.pane.element.parent().css(HEIGHT, this.wrapper[0].style.height);\n                    }\n\n                    this._editAnimation = \"slide\";\n\n                    // Grid transitions should not propagate to the view\n                    that.wrapper.on(\"transitionend\" + NS, function(e) {\n                        e.stopPropagation();\n                    });\n\n                    that.wrapper.on(\"contextmenu\" + NS, \"th a\", function(e) {\n                        e.preventDefault();\n                        return false;\n                    });\n\n                    this.view.bind(\"showStart\", function() {\n                        if (that._isLocked()) {\n                            that._updateTablesWidth();\n                            that._applyLockedContainersWidth();\n                            that._syncLockedContentHeight();\n                            that._syncLockedHeaderHeight();\n                            that._syncLockedFooterHeight();\n                        }\n                    });\n                }\n            },\n\n            _createPane: function(html) {\n                var pane = kendo.Pane.wrap(html, {\n                    viewEngine: {\n                        viewOptions: {\n                            renderOnInit: true,\n                            wrap: false,\n                            wrapInSections: true,\n                            detachOnHide: false,\n                            detachOnDestroy: false\n                        }\n                    }\n                });\n\n                return pane;\n            },\n\n            _tbody: function() {\n                var that = this,\n                    table = that.table,\n                    tbody;\n\n                tbody = table.find(\">tbody\");\n\n                if (!tbody.length) {\n                    tbody = $(\"<tbody class='k-table-tbody'/>\").appendTo(table);\n                }\n\n                that.tbody = tbody;\n            },\n\n            _scrollable: function() {\n                var that = this,\n                    header,\n                    table,\n                    options = that.options,\n                    scrollable = options.scrollable,\n                    hasVirtualScroll = scrollable !== true && scrollable.virtual,\n                    virtualScroll = hasVirtualScroll ? parseVirtualSettings(scrollable.virtual) : null,\n                    scrollbar = !kendo.support.kineticScrollNeeded || (virtualScroll && virtualScroll.rows) ? kendo.support.scrollbar() : 0,\n                    headerWrap;\n\n                if (scrollable) {\n                    header = that.wrapper.children(\".k-grid-header\");\n\n                    if (!header[0]) {\n                        header = $('<div class=\"k-grid-header\" />').insertBefore(that.table);\n                    }\n\n                    // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                    header.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollable.virtual ? scrollbar + 1 : scrollbar);\n                    table = $('<table role=\"none\" class=\"k-grid-header-table k-table\"/>');\n                    table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", options.size));\n\n                    table.width(that.table[0].style.width);\n\n                    table.append(that.thead);\n                    header.empty().append($('<div class=\"k-grid-header-wrap k-auto-scrollable\" />').append(table));\n\n\n                    that.content = that.table.parent();\n                    that.virtualScroll = virtualScroll;\n\n                    if (that.content.is(\".k-virtual-scrollable-wrap, \" + DOT + classNames.scrollContainer)) {\n                        that.content = that.content.parent();\n                    }\n\n                    if (!that.content.is(\".k-grid-content, .k-virtual-scrollable-wrap\")) {\n                        that.content = that.table.wrap('<div class=\"k-grid-content k-auto-scrollable\" />').parent();\n                    }\n\n                    if (!that.content.parent().hasClass(\"k-grid-container\")) {\n                        that.content.wrap(\"<div class='k-grid-container' />\").parent();\n                    }\n\n                    if (virtualScroll && virtualScroll.rows && !that.virtualScrollable) {\n                        that._createVirtualScrollable();\n                    }\n\n                    if (virtualScroll && virtualScroll.columns) {\n\n                        that.table.css({\n                            width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n                        });\n                    }\n\n                    headerWrap = header.children(\".k-grid-header-wrap\");\n\n                    that.scrollables = headerWrap.add(that.content);\n\n                    // the footer may exists if rendered from the server\n                    var footer = that.wrapper.find(\".k-grid-footer\");\n\n                    if (footer.length) {\n                        that.scrollables = that.scrollables.add(footer.children(\".k-grid-footer-wrap\"));\n                    }\n\n                    headerWrap.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                        if (that._scrollLeft !== this.scrollLeft) {\n                            kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                        }\n                    });\n\n                    if (virtualScroll && virtualScroll.rows) {\n                        that.content.find(\">.k-virtual-scrollable-wrap\").off(\"scroll\" + NS).on(\"scroll\" + NS, function() {\n                            var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                            that._scrollLeft = this.scrollLeft;\n                            kendo.scrollLeft(that.scrollables, this.scrollLeft);\n                            if (that.lockedContent) {\n                                that.lockedContent[0].scrollTop = this.scrollTop;\n                            }\n                            if (virtualScroll.columns && isScrollingLeft) {\n                                that.refresh();\n                            }\n                        });\n                    } else {\n                        var endless = scrollable.endless;\n                        var originalPageSize = that.dataSource.options.pageSize;\n                        if (endless) {\n                            that._endlessPageSize = originalPageSize;\n                        }\n                        that.content.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                            var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                            that._scrollLeft = this.scrollLeft;\n                            kendo.scrollLeft(that.scrollables.not(e.currentTarget), that._scrollLeft);\n                            if (that.lockedContent && e.currentTarget == that.content[0]) {\n                                that.lockedContent[0].scrollTop = this.scrollTop;\n                            }\n                            if (endless) {\n                                if ((this.scrollTop + this.clientHeight - this.scrollHeight >= -10) &&\n                                    !that._endlessFetchInProgress &&\n                                    that._endlessPageSize < that.dataSource.total()) {\n                                    that._skipRerenderItemsCount = that._endlessPageSize;\n                                    that._endlessPageSize = that._endlessPageSize + originalPageSize;\n                                    that.dataSource.options.endless = true;\n                                    that._endlessFetchInProgress = true;\n                                    that.dataSource.pageSize(that._endlessPageSize);\n                                }\n                            }\n\n                            if (virtualScroll && virtualScroll.columns && isScrollingLeft) {\n                                  that._virtualColScroll = true;\n                                  that._cacheEditableState();\n                                  that.refresh();\n                                  that._restoreEditableState();\n                                  that._virtualColScroll = false;\n                            }\n\n                            if (that.rowResizer) {\n                                that.rowResizer.css(\"left\", e.currentTarget.scrollLeft + \"px\");\n                            }\n                        });\n\n                        var touchScroller = that.content.data(\"kendoTouchScroller\");\n                        if (touchScroller) {\n                            touchScroller.destroy();\n                        }\n\n                        touchScroller = kendo.touchScroller(that.content);\n                        if (touchScroller && touchScroller.movable) {\n                            that.touchScroller = touchScroller;\n                            touchScroller.movable.bind(\"change\", function(e) {\n                                kendo.scrollLeft(that.scrollables, -e.sender.x);\n                                if (that.lockedContent) {\n                                    that.lockedContent.scrollTop(-e.sender.y);\n                                }\n                            });\n\n                            that.one(DATABOUND, function(e) {\n                                e.sender.wrapper.addClass(\"k-grid-backface\");\n                            });\n                        }\n                    }\n                }\n            },\n\n            _createVirtualScrollable: function() {\n                var that = this;\n\n                if (that.virtualScrollable) {\n                    that.virtualScrollable.destroy();\n                }\n\n                that.virtualScrollable = new VirtualScrollable(that.content, {\n                    dataSource: that.dataSource,\n                    itemHeight: function() { return that._averageRowHeight(); },\n                    page: function() {\n                        that._restoreEditableState();\n                    },\n                    scroll: function() {\n                        that._focusEditable();\n                    },\n                    loadStart: function() {\n                        that._progress(true);\n                    },\n                    loadEnd: function() {\n                        that._progress(false);\n                    }\n                });\n\n                that.virtualScrollable.bind(PAGING, that._onVirtualPaging.bind(that));\n            },\n\n            _onVirtualPaging: function() {\n                var that = this;\n\n                that._cacheEditableState();\n\n                if (that._isVirtualIncellEditable()) {\n                    that._shouldClearEditableState = false;\n                    that.closeCell();\n                    that._shouldClearEditableState = true;\n                }\n            },\n\n            _isVirtualEditable: function() {\n                return this._isVirtualIncellEditable() || this._isVirtualInlineEditable() || this._isVirtualPopupEditable();\n            },\n\n            _isVirtualInlineEditable: function() {\n                return (this.virtualScrollable) && this._editMode() === INLINE;\n            },\n\n            _isVirtualIncellEditable: function() {\n                return (this.virtualScrollable) && this._editMode() === INCELL;\n            },\n\n            _isVirtualPopupEditable: function() {\n                return this.virtualScrollable && this._editMode() === \"popup\";\n            },\n\n            _hasVirtualColumns: function() {\n                return (this.virtualScroll || {}).columns ? true : false;\n            },\n\n            _scrollVirtualWrapper: function() {\n                var that = this;\n                var scrollable = that.virtualScrollable;\n\n                if (that._isVirtualInlineEditable() || that._isVirtualIncellEditable()) {\n                    if (scrollable._isScrolledToBottom()) {\n                        scrollable._scrollWrapperToBottom();\n                    } else if (scrollable._isScrolledToTop()) {\n                        scrollable._scrollWrapperToTop();\n                    }\n                }\n            },\n\n            _scrollVirtualWrapperOnColumnResize: function() {\n                var virtualScrollable = this.virtualScrollable;\n\n                if (virtualScrollable) {\n                    virtualScrollable._scrollWrapperOnColumnResize();\n                }\n            },\n\n            _restoreEditableState: function() {\n                var that = this;\n                var editableState = that._editableState || {};\n                var editedModel = editableState.model;\n                var dataSource = that.dataSource;\n                var inlineMode = that._isVirtualInlineEditable();\n                var incellMode = that._isVirtualIncellEditable();\n                var virtualColumns = that._hasVirtualColumns();\n                var row;\n                var cell;\n\n                if ((inlineMode || incellMode || virtualColumns) && editedModel && dataSource._getByUid(editedModel.uid, dataSource.view())) {\n                    if (that._editMode() === INLINE) {\n                        that._shouldClearEditableState = false;\n                        that.editRow(editedModel);\n                        if (!virtualColumns) {\n                            that._focusEditable();\n                        }\n                    } else if (that._editMode() === INCELL) {\n                        row = that.tbody.children(attrEquals(UNIQUE_ID, editedModel.uid));\n                        cell = $(row).children(attrEquals(FIELD, editableState.field));\n\n                        if (cell[0]) {\n                            that._shouldClearEditableState = false;\n                            that.editCell(cell);\n                            if (!virtualColumns) {\n                                that._focusEditable();\n                            }\n                        }\n                    }\n                }\n\n                that._shouldClearEditableState = true;\n            },\n\n            _focusEditable: function() {\n                var that = this;\n                var editedField = (that._editableState || {}).field;\n                var editContainer = that._editContainer;\n\n                if (editContainer && editContainer.length && !contains(editContainer[0], activeElement()) && that._canFocusEditable()) {\n                    if (that._isVirtualInlineEditable() || that._hasVirtualColumns()) {\n                        editContainer.find(attrEquals(CONTAINER_FOR, editedField)).find(FOCUSABLE).eq(0).trigger(\"focus\");\n                    } else if (that._isVirtualIncellEditable() || that._hasVirtualColumns()) {\n                        editContainer.find(FOCUSABLE).eq(0).trigger(\"focus\");\n                    }\n                }\n            },\n\n            _canFocusEditable: function() {\n                var that = this;\n                var result = ((that._isVirtualIncellEditable() || that._isVirtualInlineEditable() || that._hasVirtualColumns()) &&\n                (isElementVisibleInWrapper((that.virtualScrollable || {}).wrapper, that._editContainer) || isElementVisibleInWrapper(that.content, that._editContainer)));\n\n                return result;\n            },\n\n            _cacheEditableState: function() {\n                var that = this;\n                var editContainer = that._editContainer;\n                var editedModel = editContainer ? that._modelForContainer(editContainer) : null;\n                var inlineMode = that._isVirtualInlineEditable();\n                var incellMode = that._isVirtualIncellEditable();\n                var virtualColumns = that._hasVirtualColumns();\n                var active;\n                var widget;\n                var value;\n\n                if ((inlineMode || incellMode || virtualColumns) && editedModel) {\n                    that._clearEditableState();\n                    active = $(activeElement());\n\n                    if (editContainer && active[0] && contains(editContainer[0], active[0])) {\n                        //change event is not fired if the editable container is scrolled\n                        //out of the virtual view with the mousewheel right after editing\n                        active.change();\n\n                        widget = kendo.widgetInstance(active, kendo.ui);\n\n                        if (widget && isFunction(widget.value) && active.is(INPUT)) {\n                            value = active.val();\n\n                            if (active.is(\"[type='checkbox'\")) {\n                                value = active.is(\":checked\");\n                            }\n\n                            widget.value(value);\n                            widget.trigger(CHANGE);\n                        }\n                    }\n\n                    if (that._editMode() === INLINE) {\n                        that._editableState = {\n                            model: editedModel,\n                            field: active.closest(\"[\" + kendo.attr(CONTAINER_FOR) + \"]\").attr(kendo.attr(CONTAINER_FOR))\n                        };\n                    } else if (that._editMode() === INCELL) {\n                        that._editableState = {\n                            model: editedModel,\n                            field: editContainer.attr(kendo.attr(FIELD))\n                        };\n                    }\n                }\n            },\n\n            _clearSortClasses: function() {\n                var that = this,\n                    content = that.content || that.table,\n                    lockedContent = that.lockedContent;\n\n                if (content) {\n                    content.find(COLGROUP).removeClass(SORTED_CLASS);\n                }\n\n                if (lockedContent) {\n                    lockedContent.find(COLGROUP).removeClass(SORTED_CLASS);\n                }\n            },\n\n            _clearEditableState: function() {\n                var that = this;\n\n                if (that.virtualScrollable || (that.virtualScroll && that._hasVirtualColumns())) {\n                    that._editableState = null;\n                }\n            },\n\n            _destroyVirtualScrollable: function() {\n                var that = this;\n\n                that._clearEditableState();\n\n                if (that.virtualScrollable && that.virtualScrollable.element) {\n                    that.virtualScrollable.destroy();\n                }\n\n                that.virtualScrollable = null;\n            },\n\n            _destroyRowResizing: function() {\n                if (this.rowResizing) {\n                    this.rowResizing.destroy();\n\n                    this.rowResizing = null;\n                }\n\n                if (this.rowResizer) {\n                    this._detachRowResizerEvents();\n                    this.rowResizer.off(DUBLECLICK + NS);\n                    this.rowResizer = null;\n                    this._clearCachedRowsHeight();\n                }\n            },\n\n            _renderNoRecordsContent: function() {\n                var that = this;\n\n                if (that.options.noRecords) {\n                    var noRecordsElement = that.table.parent().children('.' + NORECORDSCLASS);\n\n                    if (noRecordsElement.length) {\n                        that.angular(\"cleanup\", function() {\n                            return { elements: noRecordsElement.get() };\n                        });\n\n                        noRecordsElement.remove();\n                    }\n\n                    if (!that.dataSource || !that.dataSource.view().length) {\n                        noRecordsElement = $(that.noRecordsTemplate({ grid: that }));\n                        kendo.applyStylesFromKendoAttributes(noRecordsElement, [\"margin\", \"position\"]);\n                        noRecordsElement.insertAfter(that.table);\n\n                        that.angular(\"compile\", function() {\n                            return {\n                                elements: noRecordsElement.get(),\n                                data: [{}]\n                            };\n                        });\n                    }\n                }\n            },\n\n            _setContentWidth: function(scrollLeft) {\n                var that = this,\n                    hiddenDivClass = 'k-grid-content-expander',\n                    hiddenDiv = '<div class=\"' + hiddenDivClass + '\"></div>',\n                    resizable = that.resizable,\n                    expander;\n\n                if (that.options.scrollable && that.wrapper.is(\":visible\")) {\n                    expander = that.table.parent().children('.' + hiddenDivClass);\n                    that._setContentWidthHandler = that._setContentWidth.bind(that);\n                    if (!that.dataSource || !that.dataSource.view().length) {\n                        if (!expander[0]) {\n                            expander = $(hiddenDiv).appendTo(that.table.parent());\n                            if (resizable) {\n                                resizable.bind(\"resize\", that._setContentWidthHandler);\n                            }\n                        }\n                        if (that.thead) {\n                            expander.width(that.thead.width());\n                            if (!isNaN(parseFloat(scrollLeft, 10))) {\n                                kendo.scrollLeft(that.content, scrollLeft);\n                            }\n                        }\n                    } else if (expander[0]) {\n                        expander.remove();\n                        if (resizable) {\n                            resizable.unbind(\"resize\", that._setContentWidthHandler);\n                        }\n                    }\n\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n\n                    // workaround IE does not show vertical scrollbar for elements without width\n                    if (that.lockedHeader && that.table[0].clientWidth === 0) {\n                        that.table[0].style.width = \"1px\";\n                    }\n                }\n            },\n\n            _applyLockedContainersWidth: function() {\n                if (this.options.scrollable && this.lockedHeader) {\n                    var headerTable = this.thead.parent(),\n                        headerWrap = headerTable.parent(),\n                        contentWidth = this.wrapper[0].clientWidth,\n                        groups = this._groups(),\n                        scrollbar = kendo.support.scrollbar(),\n                        cols = this.lockedHeader.find(\">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                        nonLockedCols = headerTable.find(\">colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                        width = columnsWidth(cols),\n                        nonLockedColsWidth = columnsWidth(nonLockedCols),\n                        footerWrap;\n\n                    if (groups > 0) {\n                        width += outerWidth(this.lockedHeader.find(\".k-group-cell\").first()) * groups;\n                    }\n\n                    if (width >= contentWidth) {\n                        width = contentWidth - 3 * scrollbar;\n                    }\n\n                    this.lockedHeader\n                        .add(this.lockedContent)\n                        .width(width);\n\n                    headerWrap[0].style.width = headerWrap.parent().width() - width - 2 + PX;\n\n                    headerTable.add(this.table).width(nonLockedColsWidth);\n\n                    //https://github.com/telerik/kendo-ui-core/issues/377\n                    if (this.virtualScrollable && !isIE11) {\n                        contentWidth -= scrollbar;\n                    }\n\n                    this.content[0].style.width = contentWidth - width - 1 + PX;\n\n                    if (this.lockedFooter && this.lockedFooter.length) {\n                        this.lockedFooter.width(width);\n                        footerWrap = this.footer.find(\".k-grid-footer-wrap\");\n                        footerWrap[0].style.width = headerWrap[0].clientWidth + PX;\n                        footerWrap.children().first().width(nonLockedColsWidth);\n                    }\n                }\n            },\n\n            _setContentHeight: function() {\n                var that = this,\n                    options = that.options,\n                    height,\n                    header = that.wrapper.children(\".k-grid-header\"),\n                    scrollbar = kendo.support.scrollbar();\n                var scrollableHeight = (options.scrollable || {}).height;\n\n                if (options.scrollable && that.wrapper.is(\":visible\")) {\n                    if (scrollableHeight && that.content[0].style.height === \"\") {\n                        // fallback to client-side setting as ASP.NET MVC Core wrapper does not provide server rendering of the content\n                        that.content[0].style.height = scrollableHeight;\n                    }\n\n                    height = that.wrapper.innerHeight();\n\n                    height -= outerHeight(header);\n\n                    if (that.pager && that.pager.element.is(\":visible\")) {\n                        height -= outerHeight(that.pager.element);\n                    }\n\n                    if (options.groupable) {\n                        height -= outerHeight(that.wrapper.children(\".k-grouping-header\"));\n                    }\n\n                    if (options.toolbar) {\n                        height -= outerHeight(that.wrapper.children(\".k-grid-toolbar\"));\n                    }\n\n                    if (that.footerTemplate) {\n                        height -= outerHeight(that.wrapper.children(\".k-grid-footer\"));\n                    }\n\n                    var isGridHeightSet = function(el) {\n                        var initialHeight, newHeight;\n                        if (el[0].style.height) {\n                            return true;\n                        } else {\n                            initialHeight = el.height();\n                        }\n\n                        el.height(AUTO);\n                        newHeight = el.height();\n\n                        if (initialHeight != newHeight) {\n                            el.height(\"\");\n                            return true;\n                        }\n                        el.height(\"\");\n                        return false;\n                    };\n\n                    if (isGridHeightSet(that.wrapper)) { // set content height only if needed\n                        if (height > scrollbar * 2) { // do not set height if proper scrollbar cannot be displayed\n                            if (that.lockedContent) {\n                                scrollbar = that.table[0].offsetWidth > that.table.parent()[0].clientWidth ? scrollbar : 0;\n                                that.lockedContent.height(height - scrollbar);\n                            }\n\n                            that.content.height(height);\n                        } else {\n                            that.content.height(scrollbar * 2 + 1);\n                        }\n                    }\n                }\n            },\n\n            _averageRowHeight: function() {\n                var that = this,\n                    itemsCount = that._items(that.tbody, true).length,\n                    rowHeight = that._rowHeight;\n\n                if (itemsCount === 0) {\n                    return rowHeight;\n                }\n\n                if (!that._rowHeight) {\n                    that._rowHeight = rowHeight = outerHeight(that.table) / itemsCount;\n                    that._sum = rowHeight;\n                    that._measures = 1;\n                }\n\n                var currentRowHeight = outerHeight(that.table) / itemsCount;\n\n                if (rowHeight !== currentRowHeight) {\n                    that._measures ++;\n                    that._sum += currentRowHeight;\n                    that._rowHeight = that._sum / that._measures;\n                }\n                return rowHeight;\n            },\n\n            _dataSource: function() {\n                var that = this,\n                    options = that.options,\n                    pageable,\n                    dataSource = options.dataSource;\n\n                dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n                if (isPlainObject(dataSource)) {\n                    extend(dataSource, { table: that.table, fields: that.columns });\n\n                    pageable = options.pageable;\n\n                    if (isPlainObject(pageable) && pageable.pageSize !== undefined$1) {\n                        dataSource.pageSize = pageable.pageSize;\n                    }\n                }\n\n                if (that.dataSource && that._refreshHandler) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler)\n                                    .unbind(PROGRESS, that._progressHandler)\n                                    .unbind(ERROR, that._errorHandler)\n                                    .unbind(SORT, that._sortHandler);\n                } else {\n                    that._refreshHandler = that.refresh.bind(that);\n                    that._progressHandler = that._requestStart.bind(that);\n                    that._errorHandler = that._error.bind(that);\n                    that._sortHandler = that._clearSortClasses.bind(that);\n                }\n\n                that.dataSource = DataSource.create(dataSource)\n                                    .bind(CHANGE, that._refreshHandler)\n                                    .bind(PROGRESS, that._progressHandler)\n                                    .bind(ERROR, that._errorHandler)\n                                    .bind(SORT, that._sortHandler);\n            },\n\n            _error: function() {\n                this._progress(false);\n            },\n\n            _requestStart: function() {\n                this._progress(true);\n            },\n\n            _modelChange: function(e) {\n                var that = this,\n                    tbody = that.tbody,\n                    model = e.model,\n                    row = that.tbody.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"),\n                    relatedRow,\n                    cell,\n                    column,\n                    isAlt = row.hasClass(\"k-alt\"),\n                    tmp,\n                    idx = that._items(tbody).index(row),\n                    isLocked = that.lockedContent,\n                    selectable,\n                    selectableRow,\n                    childCells,\n                    originalCells,\n                    length;\n\n                if (isLocked) {\n                    relatedRow = that._relatedRow(row);\n                }\n\n                if (row.add(relatedRow).children(\".k-edit-cell\").length && !that.options.rowTemplate) {\n                    row.add(relatedRow).children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                        cell = $(this);\n                        column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                        if (column.field === e.field) {\n                            if (!cell.hasClass(\"k-edit-cell\")) {\n                                that._displayCell(cell, column, model);\n                            } else {\n                                cell.addClass(\"k-dirty-cell\");\n                            }\n                        }\n                    });\n\n                } else if (!row.hasClass(\"k-grid-edit-row\")) {\n\n                    selectableRow = $().add(row);\n\n                    if (isLocked) {\n                        tmp = (isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model);\n\n                        selectableRow = selectableRow.add(relatedRow);\n\n                        relatedRow.replaceWith(tmp);\n                    }\n\n                    that.angular(\"cleanup\", function() { return { elements: selectableRow.get() }; });\n\n                    tmp = (isAlt ? that.altRowTemplate : that.rowTemplate)(model);\n\n                    row.replaceWith(tmp);\n\n                    tmp = that._items(tbody).eq(idx);\n\n                    var angularData = [ { dataItem: model } ];\n\n                    if (isLocked) {\n                        row = row.add(relatedRow);\n\n                        relatedRow = that._relatedRow(tmp)[0];\n                        adjustRowHeight(tmp[0], relatedRow);\n\n                        tmp = tmp.add(relatedRow);\n                        angularData.push({ dataItem: model });\n                    }\n\n                    that.angular(\"compile\", function() {\n                        return {\n                            elements: tmp.get(),\n                            data: angularData\n                         };\n                    });\n\n                    selectable = that.options.selectable;\n                    if ((selectable || that._checkBoxSelection) && row.hasClass(SELECTED)) {\n                       that.select(tmp);\n                    }\n\n                    originalCells = selectableRow.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n                    childCells = tmp.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n                    for (idx = 0, length = that.columns.length; idx < length; idx++) {\n                        column = that.columns[idx];\n\n                        cell = childCells.eq(idx);\n                        if (selectable && originalCells.eq(idx).hasClass(SELECTED)) {\n                            cell.addClass(SELECTED);\n                        }\n                    }\n\n                    that.trigger(\"itemChange\", { item: tmp, data: model, ns: ui });\n                }\n            },\n\n            _pageable: function() {\n                var that = this,\n                    pagerWrap,\n                    pageable = that.options.pageable,\n                    size = that.options.size,\n                    navigatable = that.options.navigatable;\n\n                if (pageable) {\n                    pagerWrap = that.wrapper.children(\"div.k-grid-pager\");\n\n                    if (!pagerWrap.length) {\n                        pagerWrap = $('<div class=\"k-pager k-grid-pager\"/>');\n                    }\n\n                    if (pageable.position === \"top\") {\n                        pagerWrap.prependTo(that.wrapper).addClass(\"k-grid-pager-top\");\n                    } else {\n                        pagerWrap.appendTo(that.wrapper);\n                    }\n\n                    if (that.pager) {\n                        that.pager.destroy();\n                    }\n\n                    if (typeof pageable === \"object\" && pageable instanceof kendo.ui.Pager) {\n                        that.pager = pageable;\n                    } else {\n                        if (that.dataSource._groupPaging) {\n                            that.pager = new GroupsPager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                        } else {\n                            that.pager = new kendo.ui.Pager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                        }\n                    }\n\n                    that.pager.bind(\"pageChange\", function(e) {\n                        if (that.trigger(\"page\", { page: e.index })) {\n                            e.preventDefault();\n                        }\n                    });\n\n                    that._togglePagerVisibility();\n                }\n            },\n\n            _footer: function() {\n                var that = this,\n                    aggregates = that.dataSource.aggregates(),\n                    html = \"\",\n                    footerTemplate = that.footerTemplate,\n                    options = that.options,\n                    footerWrap,\n                    footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n                if (footerTemplate) {\n                    html = $(that._wrapFooter(footerTemplate(aggregates)));\n                    kendo.applyStylesFromKendoAttributes(html, [\"display\", \"left\", \"right\"]);\n\n                    if (footer.length) {\n                        var tmp = html;\n\n                        that.angular(\"cleanup\", function() {\n                            return { elements: footer.get() };\n                        });\n\n                        footer.replaceWith(tmp);\n                        footer = that.footer = tmp;\n                    } else {\n                        if (options.scrollable) {\n                            footer = that.footer = options.pageable && options.pageable.position !== \"top\" ? html.insertBefore(that.wrapper.children(\"div.k-grid-pager\")) : html.appendTo(that.wrapper);\n                        } else {\n                            footer = that.footer = html.insertAfter(that.tbody);\n                        }\n                    }\n\n                    that.angular(\"compile\", function() {\n                        return {\n                            elements: footer.find(\"td:not(.k-group-cell, .k-hierarchy-cell)\").get(),\n                            data: map(that.columns, function(col) {\n                                return {\n                                    column: col,\n                                    aggregate: aggregates[col.field]\n                                };\n                            })\n                        };\n                    });\n\n                } else if (footer && !that.footer) {\n                    that.footer = footer;\n                }\n\n                if (footer.length) {\n                    if (options.scrollable) {\n                        footerWrap = footer.attr(TABINDEX, -1).children(\".k-grid-footer-wrap\");\n\n                        that.scrollables = $(\n                            that.scrollables\n                                .filter(function() { return !$(this).is(\".k-grid-footer-wrap\"); })\n                                .toArray()\n                        ).add(footerWrap);\n                    }\n\n                    if (that._footerWidth) {\n                        footer.find(\"table\").css('width', that._footerWidth);\n                    }\n\n                    if (footerWrap) {\n                        var offset = kendo.scrollLeft(that.content);\n\n                        if (options.scrollable !== true && that.virtualScroll && that.virtualScroll.rows) {\n                            offset = kendo.scrollLeft(that.wrapper.find('.k-virtual-scrollable-wrap'));\n                        }\n                        kendo.scrollLeft(footerWrap, offset);\n                    }\n                }\n\n                if (that.lockedContent) {\n                    that._appendLockedColumnFooter();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedFooterHeight();\n                }\n            },\n\n            _wrapFooter: function(footerRow) {\n                var that = this,\n                    html = \"\",\n                    table,\n                    scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n\n                if (that.options.scrollable) {\n                    html = $('<div class=\"k-grid-footer\"><div class=\"k-grid-footer-wrap\"><table class=\"k-table k-grid-footer-table\"><tfoot class=\"k-table-tfoot\">' + footerRow + '</tfoot></table></div></div>');\n                    table = html.find(\"table\");\n                    table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                    that._appendCols(table);\n                    html.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar); // Update inner fix.\n\n                    return html;\n                }\n\n                return '<tfoot class=\"k-grid-footer k-table-tfoot\">' + footerRow + '</tfoot>';\n            },\n\n            _columnMenu: function() {\n                var that = this,\n                    menu,\n                    columns = leafColumns(that.columns),\n                    column,\n                    options = that.options,\n                    columnMenu = options.columnMenu,\n                    menuOptions,\n                    sortable,\n                    filterable,\n                    cells,\n                    hasMultiColumnHeaders = grep(that.columns, function(item) {\n                        return item.columns !== undefined$1;\n                    }).length > 0,\n                    hasLockableColumns = grep(that.columns, function(item) {\n                        return item.lockable !== false;\n                    }).length > 0,\n                    hasStickableColumns = grep(that.columns, function(item) {\n                        return item.stickable === true;\n                    }).length > 0,\n                    isMobile = this._isMobile,\n                    initCallback = function(e) {\n                        that.trigger(COLUMNMENUINIT, { field: e.field, container: e.container });\n                    },\n                    openCallback = function(e) {\n                        that.trigger(COLUMNMENUOPEN, { field: e.field, container: e.container });\n                    },\n                    closeCallback = function() {\n                        focusTable(that.table, true);\n                    },\n                    stickCallback = function(e) {\n                        that.trigger(COLUMNSTICK, { column: e.column });\n                    },\n                    unstickCallback = function(e) {\n                        that.trigger(COLUMNUNSTICK, { column: e.column });\n                    },\n                    sortHandler = function(e) {\n                        if (that.trigger(\"sort\", { sort: e.sort })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    },\n                    filterHandler = function(e) {\n                        if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    },\n                    $angular = options.$angular;\n\n                if (columnMenu) {\n                    if (typeof columnMenu == \"boolean\") {\n                        columnMenu = {};\n                    }\n\n                    that._setColumnsMediaVisibility(columns);\n\n                    cells = leafDataCells(that.thead);\n\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        column = columns[idx];\n                        var cell = cells.eq(idx);\n\n                        if (column.columnMenu !== false && !column.command && (column.field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                            menu = cell.data(\"kendoColumnMenu\");\n                            if (menu) {\n                                menu.destroy();\n                            }\n\n                            sortable = column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false ? extend({}, options.sortable, {\n                                compare: (column.sortable || {}).compare\n                            }) : false;\n\n                            filterable = options.filterable && column.filterable !== false && columnMenu.filterable !== false ? extend({ pane: that.pane }, options.filterable, column.filterable) : false;\n\n                            if (column.filterable && column.filterable.dataSource) {\n                                filterable.forceUnique = false;\n                                filterable.checkSource = column.filterable.dataSource;\n                            }\n\n                            if (filterable) {\n                                filterable.format = column.format;\n                            }\n\n                            menuOptions = {\n                                dataSource: that.dataSource,\n                                values: column.values,\n                                columns: columnMenu.columns,\n                                sortable: sortable,\n                                filterable: filterable,\n                                messages: columnMenu.messages,\n                                owner: that,\n                                closeCallback: closeCallback,\n                                init: initCallback,\n                                open: openCallback,\n                                stick: stickCallback,\n                                unstick: unstickCallback,\n                                pane: that.pane,\n                                sort: sortHandler,\n                                filtering: filterHandler,\n                                filter: isMobile ? \":not(.k-column-active)\" : \"\",\n                                autoSize: columnMenu.autoSize,\n                                hasLockableColumns: lockedColumns(columns).length > 0 && hasLockableColumns && !hasMultiColumnHeaders,\n                                hasStickableColumns: hasStickableColumns && !hasMultiColumnHeaders,\n                                encodeTitles: that.options.encodeTitles,\n                                componentType: columnMenu.componentType,\n                                appendTo: DOT + classNames.headerCellInner,\n                                reorderable: options.reorderable === true || (options.reorderable && options.reorderable.columns),\n                                groupable: that.options.groupable && column.groupable !== false\n                            };\n\n                            if ($angular) {\n                                menuOptions.$angular = $angular;\n                            }\n\n                            cell.kendoColumnMenu(menuOptions);\n                        }\n                    }\n                }\n            },\n\n            _headerCells: function() {\n                return $(this.thead).find(\"th\").filter(function() {\n                    var th = $(this);\n                    return !th.hasClass(\"k-group-cell\") && !th.hasClass(\"k-hierarchy-cell\");\n                });\n            },\n\n            _hasFilterMenu: function() {\n                var filterable = this.options.filterable;\n                if (filterable && typeof filterable.mode == STRING && filterable.mode.indexOf(\"menu\") == -1) {\n                    return false;\n                }\n\n                return filterable;\n            },\n\n            _filterable: function() {\n                var that = this,\n                    columns = leafColumns(that.columns),\n                    filterMenu,\n                    cells,\n                    cell,\n                    filterInit = function(e) {\n                        that.trigger(FILTERMENUINIT, { field: e.field, container: e.container });\n                    },\n                    closeCallback = function() {\n                        focusTable(that.table, true);\n                    },\n                    filterHandler = function(e) {\n                        if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    },\n                    filterOpen = function(e) {\n                        that.trigger(FILTERMENUOPEN, { field: e.field, container: e.container });\n                    },\n                    filterable = that._hasFilterMenu();\n\n                if (filterable && !that.options.columnMenu) {\n                    cells = leafDataCells(that.thead);//that._headerCells();\n\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        cell = cells.eq(idx);\n\n                        if (columns[idx].filterable !== false && !columns[idx].command && (columns[idx].field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                            filterMenu = cell.data(\"kendoFilterMenu\");\n\n                            if (filterMenu) {\n                                filterMenu.destroy();\n                            }\n\n                            filterMenu = cell.data(\"kendoFilterMultiCheck\");\n                            if (filterMenu) {\n                               filterMenu.destroy();\n                            }\n\n                            var columnFilterable = columns[idx].filterable;\n\n                            var options = extend({},\n                                filterable,\n                                columnFilterable,\n                                {\n                                    dataSource: that.dataSource,\n                                    values: columns[idx].values,\n                                    format: columns[idx].format,\n                                    closeCallback: closeCallback,\n                                    title: columns[idx].title || columns[idx].field,\n                                    init: filterInit,\n                                    open: filterOpen,\n                                    pane: that.pane,\n                                    change: filterHandler,\n                                    appendTo: DOT + classNames.headerCellInner\n                                }\n                            );\n\n                            if (columnFilterable && columnFilterable.messages) {\n                                options.messages = extend(true, {}, filterable.messages, columnFilterable.messages);\n                            }\n                            if (columnFilterable && columnFilterable.dataSource) {\n                                options.forceUnique = false;\n                                options.checkSource = columnFilterable.dataSource;\n                            }\n\n                            if (columnFilterable && columnFilterable.multi) {\n                                cell.kendoFilterMultiCheck(options);\n                            } else {\n                                cell.kendoFilterMenu(options);\n                            }\n                        }\n                    }\n                }\n            },\n\n            _filterRow: function() {\n                var that = this;\n                if (!that._hasFilterRow()) {\n                   return;\n                }\n\n                var settings;\n                var $angular = that.options.$angular;\n                var columns = leafColumns(that.columns),\n                    filterable = that.options.filterable,\n                    rowheader = that.thead.find(\".k-filter-row\"),\n                    filterHandler = function(e) {\n                        if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    };\n\n\n                this._updateHeader(that._groups());\n\n                for (var i = 0; i < columns.length; i++) {\n                    var suggestDataSource,\n                        col = columns[i],\n                        operators = that.options.filterable.operators,\n                        customDataSource = false,\n                        td = $(\"<td class='k-table-td' title='\" + that.options.messages.filterCellTitle + \"'/>\"),\n                        field = col.field;\n\n                    if (col.hidden) {\n                        td.hide();\n                    }\n                    rowheader.append(td);\n                    if (field && col.filterable !== false) {\n                        var cellOptions = col.filterable && col.filterable.cell || {};\n\n                        suggestDataSource = that.options.dataSource;\n                        if (suggestDataSource instanceof DataSource) {\n                            suggestDataSource = that.options.dataSource.options;\n                        }\n\n                        var messages = extend(true, {}, filterable.messages);\n                        if (col.filterable) {\n                            extend(true, messages, col.filterable.messages);\n                        }\n\n                        if (cellOptions.enabled === false) {\n                            td.html(\"&nbsp;\");\n                            continue;\n                        }\n                        if (cellOptions.dataSource) {\n                            suggestDataSource = cellOptions.dataSource;\n                            customDataSource = true;\n                        }\n                        if (col.filterable && col.filterable.operators) {\n                            operators = col.filterable.operators;\n                        }\n\n                        settings = {\n                            column: col,\n                            dataSource: that.dataSource,\n                            suggestDataSource: suggestDataSource,\n                            customDataSource: customDataSource,\n                            field: field,\n                            messages: messages,\n                            size: that.options.size,\n                            values: col.values,\n                            template: cellOptions.template,\n                            delay: cellOptions.delay,\n                            inputWidth: cellOptions.inputWidth,\n                            suggestionOperator: cellOptions.suggestionOperator,\n                            minLength: cellOptions.minLength,\n                            dataTextField: cellOptions.dataTextField,\n                            operator: cellOptions.operator,\n                            operators: operators,\n                            showOperators: cellOptions.showOperators,\n                            change: filterHandler\n                        };\n\n                        if ($angular) {\n                            settings.$angular = $angular;\n                        }\n\n                        $(\"<span/>\").attr(kendo.attr(\"field\"), field)\n                            .appendTo(td)\n                            .kendoFilterCell(settings);\n                    } else {\n                        td.html(\"&nbsp;\");\n                    }\n                    td.data(\"column\", col);\n                }\n\n                this._filterFocusable().attr(TABINDEX, -1);\n            },\n\n            _sortable: function() {\n                var that = this,\n                    columns = leafColumns(that.columns),\n                    column,\n                    sorterInstance,\n                    cell,\n                    sortable = that.options.sortable,\n                    sortHandler = function(e) {\n                        if (that.trigger(\"sort\", { sort: e.sort })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                        }\n                    };\n\n\n                if (sortable) {\n                    var cells = leafDataCells(that.thead);\n\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        column = columns[idx];\n\n                        if (column.sortable !== false && !column.command && column.field) {\n                            cell = cells.eq(idx);\n\n                            sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                            if (sorterInstance) {\n                                sorterInstance.destroy();\n                            }\n\n                            cell.attr(\"data-\" + kendo.ns + \"field\", column.field)\n                                .kendoColumnSorter(\n                                    extend({}, sortable, column.sortable, {\n                                        dataSource: that.dataSource,\n                                        aria: true,\n                                        filter: \":not(.k-column-active)\",\n                                        change: sortHandler\n                                    })\n                                );\n                        }\n                    }\n                    cells = null;\n                }\n            },\n\n            _columns: function(columns) {\n                var that = this,\n                    table = that.table,\n                    encoded,\n                    cols = table.find(\"col\"),\n                    lockedCols,\n                    headerRows = that.element.find('thead tr'),\n                    dataSource = that.options.dataSource,\n                    draggableColumns;\n\n                // using HTML5 data attributes as a configuration option e.g. <th data-field=\"foo\">Foo</foo>\n                columns = columns.length ? columns : map(table.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\"), function(th, idx) {\n                    th = $(th);\n                    var sortable = th.attr(kendo.attr(\"sortable\")),\n                        filterable = th.attr(kendo.attr(\"filterable\")),\n                        type = th.attr(kendo.attr(\"type\")),\n                        groupable = th.attr(kendo.attr(\"groupable\")),\n                        field = th.attr(kendo.attr(\"field\")),\n                        title = th.attr(kendo.attr(\"title\")),\n                        columnMenu = th.attr(kendo.attr(\"column-menu\")),\n                        menu = th.attr(kendo.attr(\"menu\"));\n\n                    if (!field) {\n                       field = th.text().replace(/\\s|[^A-z0-9]/g, \"\");\n                    }\n\n                    return {\n                        field: field,\n                        type: type,\n                        title: title,\n                        sortable: sortable !== \"false\",\n                        filterable: filterable !== \"false\",\n                        groupable: groupable !== \"false\",\n                        menu: menu !== \"false\",\n                        columnMenu: columnMenu !== \"false\",\n                        template: th.attr(kendo.attr(\"template\")),\n                        width: cols.eq(idx).css(WIDTH)\n                    };\n                });\n\n                encoded = !(that.table.find(\"tbody tr\").length > 0 && (!dataSource || !dataSource.transport));\n\n                if (that.options.scrollable) {\n                    var initialColumns = columns;\n                    lockedCols = lockedColumns(columns);\n                    columns = nonLockedColumns(columns);\n\n                    if (lockedCols.length > 0 && columns.length === 0) {\n                        throw new Error(\"There should be at least one non locked column\");\n                    }\n\n                    normalizeHeaderCells(that.element.find(\"tr:has(th)\").first(), initialColumns);\n                    columns = lockedCols.concat(columns);\n                }\n\n                if (headerRows.length && columns.length) {\n                    that._updateColumnIDs(columns, headerRows.first());\n                }\n\n                that.columns = normalizeColumns(columns, encoded);\n\n                if ($.grep(leafColumns(that.columns), function(col) { return col.selectable;}).length) {\n                    that._selectedIds = {};\n                    that._checkBoxSelection = true;\n                    that.wrapper.on(CLICK + NS, \"tbody > tr \" + CHECKBOXINPUT, that._checkboxClick.bind(that));\n                    that.wrapper.on(CLICK + NS, \"thead > tr \" + CHECKBOXINPUT, that._headerCheckboxClick.bind(that));\n                }\n\n                draggableColumns = $.grep(leafColumns(that.columns), function(col) { return col.draggable;});\n\n                if (draggableColumns.length) {\n                    that._hasDragHandleColumn = true;\n\n                    for (var i = 0; i < draggableColumns.length; i++) {\n                        draggableColumns[i].headerAttributes = $.extend({\n                            \"aria-label\": that.options.messages.dragHandleLabel\n                        }, draggableColumns[i].headerAttributes);\n                    }\n                }\n\n                that._foreignKeyBindings(that.columns);\n            },\n\n            _foreignKeyBindings: function(columns) {\n                var that = this;\n                var length = columns.length;\n                var column;\n\n                for (var i = 0; i < length; i++) {\n                    column = columns[i];\n\n                    if (column.dataSource) {\n                        that._fetchForeignKeyValues(column);\n                    }\n                }\n            },\n\n            _fetchForeignKeyValues: function(column) {\n                var that = this;\n                var promise = $.Deferred();\n\n                that._hasBoundForeignKey = true;\n                column.dataSource = DataSource.create(column.dataSource);\n\n                if (!that._foreignKeyPromises) {\n                    that._foreignKeyPromises = [];\n                }\n\n                that._foreignKeyPromises.push(promise);\n                column.dataSource.fetch().then(function() {\n                    var data = column.dataSource.data();\n                    column.values = data.map(function(item) {\n                        return {\n                            value: item[column.dataValueField],\n                            text: item[column.dataTextField]\n                        };\n                    });\n                    promise.resolve();\n                });\n\n            },\n\n            _updateColumnIDs: function(columns, tr) {\n\n                if (!columns.length) {\n                    return;\n                }\n\n                var ths = tr.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\");\n                var id;\n                for (var i = 0; i < columns.length; i++) {\n                    id = ths.eq(i).attr(ID);\n                    if (id) {\n                        columns[i].headerAttributes = extend(columns[i].headerAttributes, { id: id });\n                    }\n                }\n\n                this._updateColumnIDs(childColumns(columns), tr.next());\n            },\n\n            _headerCheckboxClick: function(e) {\n                var that = this,\n                    checkBox = $(e.target),\n                    checked = checkBox.prop(\"checked\");\n\n                if (!that._belongsToGrid(checkBox)) {\n                    return;\n                }\n\n                if (that.trigger(CHANGING, { target: checkBox, originalEvent: e })) {\n                    e.preventDefault();\n                    return;\n                }\n\n                if (checked) {\n                    that.select(that.items());\n                } else {\n                    that.clearSelection();\n                }\n\n                that.trigger(CHANGE);\n            },\n\n            _checkboxClick: function(e) {\n                var that = this,\n                    row = $(e.target).closest(TR),\n                    isSelecting = !row.hasClass(SELECTED);\n\n                if (!that._belongsToGrid(row)) {\n                    return;\n                }\n\n                if (that.trigger(CHANGING, { target: row, originalEvent: e })) {\n                    e.preventDefault();\n                    return;\n                }\n\n                if (isSelecting) {\n                    that.select(row);\n                } else {\n                    that._deselectCheckRows(row);\n                }\n                that.trigger(CHANGE);\n            },\n\n            _groups: function() {\n                var group = this.dataSource.group();\n\n                return group ? group.length : 0;\n            },\n\n            _tmpl: function(rowTemplate, columns, alt, skipGroupCells) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    paramName = settings.paramName,\n                    idx,\n                    length = columns.length,\n                    template,\n                    state = { storage: {}, count: 0 },\n                    column,\n                    type,\n                    hasDetails = that._hasDetails(),\n                    groups = that._groups();\n\n                var fieldAttr = kendo.attr(\"field\");\n                var field;\n                var classAttribute;\n                var compiledAttributes;\n                var rowTemplateFunc;\n\n                if (!rowTemplate) {\n                    rowTemplateFunc = function (data) {\n                        var uid = length ? (\" \" + (kendo.attr(\"uid\")) + \"=\\\"\" + (kendo.getter(\"uid\")(data)) + \"\\\"\") : '';\n                        var rowTemplateResult = \"<tr class=\\\"\" + (alt ? 'k-alt k-table-row k-table-alt-row ' : 'k-table-row ') + \"k-master-row\\\"\" + uid + \">\";\n\n                        if (groups > 0 && !skipGroupCells) {\n                            rowTemplateResult += groupCells(groups);\n                        }\n\n                        if (hasDetails) {\n                            rowTemplateResult += '<td class=\"k-hierarchy-cell k-table-td\" aria-expanded=\"false\">' + kendo.ui.icon($((\"<a href=\\\"#\\\" \" + ARIA_LABEL + \"=\\\"\" + EXPAND + \"\\\" tabindex=\\\"-1\\\"></a>\")), { icon: (\"caret-alt-\" + (isRtl ? \"left\" : \"right\")) }) + '</td>';\n                        }\n\n                        for (idx = 0; idx < length; idx++) {\n                            column = columns[idx];\n                            template = column.template;\n                            type = typeof template;\n                            field = column.field;\n                            compiledAttributes = {};\n\n                            if (that._editMode() === INCELL && field) {\n                                column.attributes = column.attributes || {};\n\n                                if (that.virtualScroll) {\n                                    column.attributes[fieldAttr] = field;\n                                }\n\n                                var dirtyCellTemplate = that._dirtyCellTemplate(field)(data);\n                                column.attributes[\"class\"] = (column.attributes[\"class\"] || \"\");\n\n                                if (column.attributes[\"class\"].indexOf(dirtyCellTemplate) < 0) {\n                                    column.attributes[\"class\"] += dirtyCellTemplate;\n                                }\n                            }\n\n                            if (column.colSpan && column.colSpan > 0 && hasHiddenStyle(column.attributes)) { //virtual cell should be visible at all times\n                                column.attributes = removeHiddenStyle(column.attributes);\n                            } else if (!column.colSpan && column.hidden) {\n                                column.attributes = addHiddenStyle(column.attributes);\n                            }\n\n                            if (column.command) {\n                                column.attributes = column.attributes || {};\n                                classAttribute = column.attributes[\"class\"];\n\n                                if (typeof classAttribute !== \"undefined\") {\n                                    if (classAttribute.indexOf(\"k-command-cell\") < 0) {\n                                        column.attributes[\"class\"] += \" k-command-cell\";\n                                    }\n                                } else {\n                                    column.attributes[\"class\"] = \"k-command-cell\";\n                                }\n                            }\n\n                            if (column.draggable) {\n                                column.attributes = column.attributes || {};\n                                if (typeof column.attributes[\"class\"] !== \"undefined\") {\n                                    column.attributes[\"class\"] += \" k-drag-cell k-touch-action-none\";\n                                } else {\n                                    column.attributes[\"class\"] = \"k-drag-cell k-touch-action-none\";\n                                }\n\n                                if (typeof column.attributes[ARIA_LABEL] === \"undefined\") {\n                                    column.attributes[ARIA_LABEL] = that.options.messages.dragHandleLabel;\n                                }\n\n                                if (typeof column.attributes.style !== \"undefined\") {\n                                    column.attributes.style += \" cursor: move;\";\n                                } else {\n                                    column.attributes.style = \"cursor: move;\";\n                                }\n                            }\n\n                            if (column._attributesFunction) {\n                                compiledAttributes = column._attributesFunction(data);\n                            }\n\n                            var attributes = extend({}, column.attributes, compiledAttributes);\n                            var columnAttributes = stringifyAttributes(attributes);\n                            var colSpanAttributes = '';\n\n                            if (column.colSpan) {\n                                if (column.colSpan > 1) {\n                                    colSpanAttributes += \" \" + kendo.attr(\"virtual\");\n                                }\n                                colSpanAttributes += \" colSpan=\\\"\" + (column.colSpan) + \"\\\"\";\n                            }\n                            rowTemplateResult += decorateCellWithClass((\"<td\" + columnAttributes + colSpanAttributes + \">\"));\n                            rowTemplateResult += column.selectable ? kendo.template(SELECTCOLUMNTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) }) : that._cellTmpl(column, state)(data);\n                            rowTemplateResult += \"</td>\";\n                        }\n\n                        rowTemplateResult += \"</tr>\";\n                        return rowTemplateResult;\n                    };\n                }\n\n                rowTemplate = kendo.template(rowTemplate || rowTemplateFunc, settings);\n\n                if (state.count > 0) {\n                    return rowTemplate.bind(state.storage);\n                }\n\n                return rowTemplate;\n            },\n\n            _dirtyCellTemplate: function(field) {\n                return function (data) {\n                    if (field && data && data.dirty && data.dirtyFields) {\n                        var dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                        return dirtyField ? ' k-dirty-cell' : '';\n                    }\n\n                    return \"\";\n                };\n            },\n\n            _headerCellText: function(column) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    template = column.headerTemplate,\n                    type = typeof(template),\n                    text = column.title && (that.options.encodeTitles ? htmlEncode(column.title) : column.title) || column.field || \"\";\n\n                if (type === FUNCTION) {\n                    text = kendo.template(template, settings)({});\n                } else if (type === STRING) {\n                    text = template;\n                }\n                return text;\n            },\n\n            _cellTmpl: function(column, state) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    template = column.template,\n                    field = column.field,\n                    // html = \"\",\n                    idx,\n                    length,\n                    format = column.format,\n                    type = typeof template,\n                    columnValues = column.values;\n\n                if (column.command) {\n                    if (isArray(column.command)) {\n                        return function (data) {\n                            var html = \"\";\n                            for (idx = 0, length = column.command.length; idx < length; idx++) {\n                                if (column.command[idx].visible) {\n                                    html += column.command[idx].visible(data) ? that._createButton(column.command[idx]) : '';\n                                } else {\n                                    html += that._createButton(column.command[idx]);\n                                }\n                            }\n                            return html;\n                        };\n                    }\n                    return function () { return that._createButton(column.command); };\n                }\n\n                if (column.selectable) {\n                    return SELECTCOLUMNTMPL;\n                }\n\n                if (column.draggable) {\n                    return DRAGHANDLECOLUMNTMPL;\n                }\n\n                return function (data) {\n                    var html = that._dirtyIndicatorTemplate(field)(data);\n\n                    if (type === FUNCTION) {\n                        state.storage[\"tmpl\" + state.count] = template;\n                        html += template(data);\n                        state.count++;\n                    } else if (type === STRING) {\n                        html += kendo.template(template, settings)(data);\n                    } else if (columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0] && field) {\n                        var v = convertToObject(columnValues);\n                        var f = v[settings.useWithBlock ? kendo.getter(field)(data) : field];\n                        html += encode(f != null ? f : '');\n                    } else {\n                        var fieldValue = '';\n                        if (field) {\n                            field = kendo.getter(field)(data);\n                            fieldValue = field == null ? '' : field;\n                        }\n\n                        if (format) {\n                            fieldValue = kendo.format(format.replace(formatRegExp, \"$1\"), fieldValue);\n                        }\n\n                        html += column.encoded ? encode(fieldValue) : fieldValue;\n                    }\n\n                    return html;\n                };\n            },\n\n            _dirtyIndicatorTemplate: function(field) {\n                return function (data) {\n                    if (field && data && data.dirty && data.dirtyFields) {\n                        var dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                        return dirtyField ? '<span class=\\\"k-dirty\\\"></span>' : '';\n                    }\n\n                    return \"\";\n                };\n            },\n\n            _virtualCols: function(columns) {\n                var that = this;\n                var widths = $.map(columns, function(c) { return c.hidden ? 0 : parseInt(c.width, 10); });\n                var scrollLeft = that.virtualScrollable ? kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\")) : kendo.scrollLeft(that.content);\n                var tableWidth = outerWidth(that.content);\n                var sumOfWidths = sumWidths(columns);\n                var colsToRender = [];\n                var firstColspan = 0;\n                var lastColspan = 0;\n                var hiddenColumns = 0;\n                var idx = 0;\n                var widthOfHiddenColumns = 0;\n                var considerNext;\n\n                for (idx = 0; idx < columns.length; idx++) {\n                    considerNext = (idx < widths.length - 1) ? widths[idx + 1] : 0;\n                    if (widthOfHiddenColumns + widths[idx] + 2 * considerNext < scrollLeft) {\n                        if (widths[idx]) {\n                            hiddenColumns++;\n                        }\n                        widthOfHiddenColumns += widths[idx];\n                    } else {\n                        firstColspan = 1 + hiddenColumns;\n                        break;\n                    }\n                }\n\n                hiddenColumns = 0;\n                widthOfHiddenColumns = 0;\n\n                for (var i = columns.length - 1; i >= 0; i--) {\n                    if (widthOfHiddenColumns + 3 * widths[i] < sumOfWidths - tableWidth - scrollLeft) {\n                        if (widths[i]) {\n                            hiddenColumns++;\n                        }\n                        widthOfHiddenColumns += widths[i];\n                    } else {\n                        lastColspan = 1 + hiddenColumns;\n                        for (var j = idx; j <= i; j++) {\n                            if (columns[j].locked) {\n                                continue;\n                            }\n                            colsToRender.push(columns[j]);\n                            if (columns[j].colSpan) {\n                                delete columns[j].colSpan;\n                            }\n                        }\n                        colsToRender[0].colSpan = firstColspan;\n                        colsToRender[colsToRender.length - 1].colSpan = lastColspan;\n                        break;\n                    }\n                }\n\n                if (colsToRender[0].hidden) {\n                    colsToRender[0].colSpan--;\n                }\n\n                that.virtualCols = colsToRender;\n\n                return colsToRender;\n            },\n\n            _templates: function() {\n                var that = this,\n                    options = that.options,\n                    dataSource = that.dataSource,\n                    groups = dataSource.group(),\n                    footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                    aggregates = dataSource.aggregate(),\n                    columnLeafs = leafColumns(that.columns),\n                    columnsLocked = leafColumns(lockedColumns(that.columns)),\n                    leafsCols = options.scrollable ? leafColumns(nonLockedColumns(that.columns)) : columnLeafs,\n                    columns = (that.virtualScroll || {}).columns ? that._virtualCols(leafsCols) : leafsCols,\n                    groupHeaderColumnTemplateLockedColumns = grep(visibleColumns(columnsLocked), function(column, index) { return column.groupHeaderColumnTemplate && index !== 0; }),\n                    groupHeaderColumnTemplateNonLockedColumns = grep(visibleColumns(columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (options.scrollable && columnsLocked.length) {\n                    if (options.rowTemplate || options.altRowTemplate) {\n                        throw new Error(\"Having both row template and locked columns is not supported\");\n                    }\n\n                    that.rowTemplate = that._tmpl(options.rowTemplate, columns, false, true);\n                    that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true, true);\n\n                    that.lockedRowTemplate = that._tmpl(options.rowTemplate, columnsLocked);\n                    that.lockedAltRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columnsLocked, true);\n                } else {\n                    that.rowTemplate = that._tmpl(options.rowTemplate, columns);\n                    that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true);\n                }\n\n                if (that._hasDetails()) {\n                    that.detailTemplate = that._detailTmpl(options.detailTemplate || (function () { return \"\"; }));\n                }\n\n                if ((that._group && !isEmptyObject(aggregates)) || (!isEmptyObject(aggregates) && !footer.length) ||\n                    grep(columnLeafs, function(column) { return column.footerTemplate; }).length) {\n\n                    that.footerTemplate = that._footerTmpl(columnLeafs, aggregates, \"footerTemplate\", \"k-footer-template k-table-row\");\n                }\n\n                if (groups && grep(columnLeafs, function(column) { return column.groupFooterTemplate; }).length) {\n                    aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                    that.groupFooterTemplate = that._footerTmpl(columns, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\", columnsLocked.length);\n\n                    if (options.scrollable && columnsLocked.length) {\n                        that.lockedGroupFooterTemplate = that._footerTmpl(columnsLocked, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\");\n                    }\n                }\n\n                if (groups && (groupHeaderColumnTemplateLockedColumns.length || groupHeaderColumnTemplateNonLockedColumns.length)) {\n                    aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                    that.groupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columns), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", columnsLocked.length, groupHeaderColumnTemplateNonLockedColumns);\n\n                    if (options.scrollable && columnsLocked.length) {\n                        that.lockedGroupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columnsLocked), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", 0, groupHeaderColumnTemplateLockedColumns);\n                    }\n                } else {\n                    that.groupHeaderColumnTemplate = null;\n                    that.lockedGroupHeaderColumnTemplate = null;\n                }\n\n                if (that.options.noRecords) {\n                    that.noRecordsTemplate = that._noRecordsTmpl();\n                }\n            },\n\n            _noRecordsTmpl: function() {\n                var wrapper = '<div class=\"{0}\">{1}</div>';\n                var defaultTemplate = '<div class=\"k-grid-norecords-template\"{1}>{0}</div>';\n                var scrollableNoGridHeightStyles = (this.options.scrollable && !this.wrapper[0].style.height) ? (\" \" + (kendo.attr(\"style-margin\")) + \"=\\\"0 auto\\\" \" + (kendo.attr(\"style-position\")) + \"=\\\"static\\\"\") : '';\n                var state = { storage: {}, count: 0 };\n                var settings = $.extend({}, kendo.Template, this.options.templateSettings);\n                var paramName = settings.paramName;\n                var template;\n                // var html = \"\";\n                var type;\n                var tmpl;\n                var resultTemplate;\n\n                if (this.options.noRecords.template) {\n                    template = this.options.noRecords.template;\n                } else {\n                    template = kendo.format(defaultTemplate, this.options.messages.noRecords, scrollableNoGridHeightStyles);\n                }\n\n                type = typeof template;\n                if (type === \"function\") {\n                    var currentCustomTemplate = state.storage[\"tmpl\" + state.count] = template;\n                    state.count++;\n                    resultTemplate = function (data) { return kendo.format(wrapper, NORECORDSCLASS, currentCustomTemplate(data)); };\n\n                } else if (type === \"string\") {\n                    resultTemplate = this.options.noRecords.template ?\n                        kendo.format(wrapper, NORECORDSCLASS, template)\n                        : function () { return kendo.format(wrapper, NORECORDSCLASS, template); };\n                }\n\n                tmpl = kendo.template(resultTemplate, settings);\n\n                if (state.count > 0) {\n                    tmpl = tmpl.bind(state.storage);\n                }\n\n                return tmpl;\n            },\n\n            _footerTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    paramName = settings.paramName,\n                    // html = \"\",\n                    idx,\n                    length,\n                    template,\n                    type,\n                    storage = {},\n                    count = 0,\n                    scope = {},\n                    groups = that._groups(),\n                    fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                    column;\n\n                var footerTemplateFunction = function (data) {\n                    var html = '<tr class=\"' + rowClass + '\">';\n\n                    if (groups > 0 && !skipGroupCells) {\n                        html += groupCells(groups);\n                    }\n\n                    if (that._hasDetails()) {\n                        html += '<td class=\"k-hierarchy-cell k-table-td\">&nbsp;</td>';\n                    }\n\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        template = column[templateName];\n                        type = typeof template;\n\n                        html += decorateCellWithClass(\"<td\" + stringifyAttributes(column.footerAttributes) + \">\");\n\n                        if (template) {\n                            if (type !== FUNCTION) {\n                                scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                                template = kendo.template(template, scope);\n                            }\n\n                            storage[\"tmpl\" + count] = template;\n                            html += template(data);\n                            count++;\n                        } else {\n                            html += \"&nbsp;\";\n                        }\n\n                        html += \"</td>\";\n                    }\n\n                    html += '</tr>';\n                    return html;\n                };\n\n                var resultTemplate = kendo.template(footerTemplateFunction, settings);\n\n                if (count > 0) {\n                    return resultTemplate.bind(storage);\n                }\n\n                return resultTemplate;\n            },\n\n            _groupHeaderTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells, groupHeaderColumnTemplateColumns) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    paramName = settings.paramName,\n                    html = \"\",\n                    idx,\n                    length,\n                    template,\n                    type,\n                    storage = {},\n                    count = 0,\n                    scope = {},\n                    fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                    column,\n                    headerTemplateIndex = groupHeaderColumnTemplateColumns.length ? inArray(groupHeaderColumnTemplateColumns[0], columns) : -1,\n                    groupHeaderColumnTemplateClass;\n\n                if (headerTemplateIndex < 0) {\n                    return;\n                }\n                var groupHeaderTemplFunc = function (data) {\n                    var resultHtml = '<tr class=\"' + rowClass + '\">';\n\n                    if (!skipGroupCells) {\n                        for (var i = 0; i < data.groupCells; i++) {\n                            resultHtml += '<td class=\"k-table-td k-group-cell\">&nbsp;</td>';\n                        }\n                    }\n\n                    if (that._hasDetails()) {\n                        resultHtml += '<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>';\n                    }\n\n                    if (headerTemplateIndex < MINCOLSPANVALUE && groupHeaderColumnTemplateColumns.length <= 1 && !skipGroupCells) {\n                        resultHtml += !skipGroupCells ? groupCellBuilder(columns.length)(data) : '';\n                        return resultHtml;\n                        // return kendo.template(resultHtml, settings);\n                    }\n\n                    if (headerTemplateIndex < MINCOLSPANVALUE) {\n                        headerTemplateIndex = !skipGroupCells ? 1 : 0;\n                        resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : '';\n                    }\n                    else {\n                        resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : groupCellLockedContentBuilder(headerTemplateIndex);\n                    }\n\n                    for (idx = headerTemplateIndex, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        template = column[templateName];\n                        type = typeof template;\n\n                        if (column.sticky) {\n                            var stickyAttributes = '';\n                            groupHeaderColumnTemplateClass = (column.groupHeaderColumnTemplateClass || '');\n\n                            if (!groupHeaderColumnTemplateClass) {\n                                groupHeaderColumnTemplateClass = column.groupHeaderColumnTemplateClass = \"group-header-column-template-\" + kendo.guid();\n                            }\n\n                            if (isPlainObject(column.stickyStyle)) {\n                                var stickyLeft = column.stickyStyle.left ? ((kendo.attr(\"style-left\")) + \"=\\\"\" + (column.stickyStyle.left) + \"\\\"\") : '';\n                                var stickyRight = column.stickyStyle.right ? ((kendo.attr(\"style-right\")) + \"=\\\"\" + (column.stickyStyle.right) + \"\\\"\") : '';\n                                stickyAttributes = stickyLeft + \" \" + stickyRight;\n                            }\n\n                            resultHtml += \"<td class=\\\"k-table-td \" + STICKY_CELL_CLASS + \" \" + groupHeaderColumnTemplateClass + \"\\\" \" + stickyAttributes + \">\";\n                        } else {\n                            resultHtml += \"<td class='k-table-td'>\";\n                        }\n\n                        if (template) {\n                            if (type !== FUNCTION) {\n                                scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                                template = kendo.template(template, scope);\n                            }\n\n                            storage[\"tmpl\" + count] = template;\n                            resultHtml += storage[\"tmpl\" + count](data);\n                            count++;\n                        } else {\n                            resultHtml += \"&nbsp;\";\n                        }\n\n                        resultHtml += \"</td>\";\n                    }\n\n                    resultHtml += '</tr>';\n\n                    return resultHtml;\n                };\n\n                html = kendo.template(groupHeaderTemplFunc, settings);\n\n                if (count > 0) {\n                    return html.bind(storage);\n                }\n\n                return html;\n            },\n\n            _detailTmpl: function(template) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    paramName = settings.paramName,\n                    templateFunctionStorage = {},\n                    templateFunctionCount = 0,\n                    groups = that._groups(),\n                    colspan = visibleColumns(leafColumns(that.columns)).length,\n                    type = typeof template;\n\n                var detailTemplateFunction = function (data) {\n                    var html = '<tr role=\"row\" class=\"k-detail-row k-table-row\">';\n                    if (groups > 0) {\n                        html += groupCells(groups);\n                    }\n\n                    html += \"<td role=\\\"gridcell\\\" class=\\\"k-hierarchy-cell k-table-td\\\"></td><td role=\\\"gridcell\\\" class=\\\"k-table-td k-detail-cell\\\"\" + (colspan ? (\" colspan=\\\"\" + colspan + \"\\\"\") : '') + \">\";\n                    if (type === FUNCTION) {\n                        templateFunctionStorage[\"tmpl\" + templateFunctionCount] = template;\n                        html += template(data);\n                        templateFunctionCount++;\n                    } else {\n                        html += kendo.template(template, settings)(data);\n                    }\n\n                    html += \"</td></tr>\";\n                    return html;\n                };\n\n                var resultTemplate = kendo.template(detailTemplateFunction, settings);\n\n                if (templateFunctionCount > 0) {\n                    return resultTemplate.bind(templateFunctionStorage);\n                }\n\n                return resultTemplate;\n            },\n\n            _hasDetails: function() {\n                var that = this;\n\n                return that.options.detailTemplate !== null || (that._events[DETAILINIT] || []).length;\n            },\n            _hasFilterRow: function() {\n                var filterable = this.options.filterable;\n                var hasFiltering = filterable &&\n                        typeof filterable.mode == STRING &&\n                        filterable.mode.indexOf(ROW) != -1;\n                var columns = this.columns;\n                var columnsWithoutFiltering = $.grep(columns, function(col) {\n                    return col.filterable === false;\n                });\n\n                if (columns.length && columnsWithoutFiltering.length == columns.length) {\n                    hasFiltering = false;\n                }\n\n                return hasFiltering;\n            },\n\n            _details: function() {\n                var that = this;\n\n                if (that.options.scrollable && that._hasDetails() && lockedColumns(that.columns).length) {\n                    throw new Error(\"Having both detail template and locked columns is not supported\");\n                }\n\n                that.table.on(CLICK + NS, \".k-hierarchy-cell \" + CARET_ALT_RIGHT + \", .k-hierarchy-cell \" + CARET_ALT_DOWN, function(e) {\n                    var button = $(this);\n\n                    that._toggleDetails(button);\n                    e.preventDefault();\n                    return false;\n                });\n            },\n\n            _toggleDetails: function(button, omitAnimation) {\n                var that = this,\n                cell = button.closest(\"td.k-hierarchy-cell\"),\n                expanding = button.is(CARET_ALT_RIGHT),\n                masterRow = button.closest(\"tr.k-master-row\"),\n                masterRowIndex = masterRow.attr(ARIA_ROWINDEX),\n                detailRow,\n                detailTemplate = that.detailTemplate,\n                data,\n                hasDetails = that._hasDetails(),\n                ariaLabelText = expanding ? COLLAPSE : EXPAND,\n                ariaExpandText = expanding ? true : false;\n\n                if (!expanding) {\n                    kendo.ui.icon(button, { icon: (\"caret-alt-\" + (isRtl ? 'left' : 'right')) });\n                } else {\n                    kendo.ui.icon(button, { icon: \"caret-alt-down\" });\n                }\n\n                button.attr(ARIA_LABEL, ariaLabelText);\n\n                cell.attr(ARIA_EXPANDED, ariaExpandText);\n\n                detailRow = masterRow.next();\n\n                if (detailRow.hasClass(\"k-hidden\")) {\n                    detailRow.removeClass(\"k-hidden\");\n                }\n\n                if (hasDetails && !detailRow.hasClass(\"k-detail-row\")) {\n                    data = that.dataItem(masterRow);\n\n                    detailRow = $(detailTemplate(data))\n                        .addClass(masterRow.hasClass(\"k-alt\") ? \"k-alt\" : \"\")\n                        .insertAfter(masterRow);\n\n                    if (masterRowIndex || masterRowIndex === 0) {\n                        detailRow.attr(ARIA_ROWINDEX, Number(masterRowIndex) + 1);\n                    }\n\n                    that.angular(\"compile\", function() {\n                        return {\n                            elements: detailRow.get(),\n                            data: [ { dataItem: data } ]\n                        };\n                    });\n\n                    that.trigger(DETAILINIT, { masterRow: masterRow, detailRow: detailRow, data: data, detailCell: detailRow.find(\".k-detail-cell\") });\n                }\n\n                that.trigger(expanding ? DETAILEXPAND : DETAILCOLLAPSE, { masterRow: masterRow, detailRow: detailRow });\n\n                if (omitAnimation) {\n                    toggleRow(detailRow, expanding);\n                } else {\n                    detailRow.toggle(expanding);\n                }\n            },\n\n            dataItem: function(tr) {\n                tr = $(tr)[0];\n                if (!tr) {\n                    return null;\n                }\n\n                var rows = this.tbody.children(),\n                    classesRegEx = /k-grouping-row|k-detail-row|k-group-footer/,\n                    idx = tr.sectionRowIndex,\n                    j, correctIdx;\n\n                correctIdx = idx;\n\n                for (j = 0; j < idx; j++) {\n                    if (classesRegEx.test(rows[j].className)) {\n                        correctIdx--;\n                    }\n                }\n\n                return this._data[correctIdx];\n            },\n\n            expandRow: function(tr, omitAnimation) {\n                var button = $(tr).find('> td ' + CARET_ALT_RIGHT);\n\n                if (button.length) {\n                    this._toggleDetails(button, omitAnimation);\n                }\n            },\n\n            collapseRow: function(tr, omitAnimation) {\n                var button = $(tr).find('> td ' + CARET_ALT_DOWN);\n\n                if (button.length) {\n                    this._toggleDetails(button, omitAnimation);\n                }\n            },\n\n            _createHeaderCells: function(columns, rowSpan) {\n                var that = this,\n                    idx,\n                    th,\n                    text,\n                    html = \"\",\n                    length,\n                    title,\n                    columnMenu = that.options.columnMenu,\n                    sortable = that.options.sortable,\n                    filterable = that._hasFilterMenu(),\n                    messages = that.options.messages,\n                    leafs = leafColumns(that.columns),\n                    groups = that.dataSource.group(),\n                    field;\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    th = columns[idx].column || columns[idx];\n                    text = that._headerCellText(th);\n                    title = th.title;\n                    field = \"\";\n\n                    var index = inArray(th, leafs);\n                    var currentTh = \"\";\n\n                    if (th.selectable) {\n                        currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                        if (rowSpan && !columns[idx].colSpan) {\n                            currentTh += \" rowspan='\" + rowSpan + \"'\";\n                        }\n\n                        if (index > -1) {\n                            currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                        }\n                        text = th.headerTemplate ? text : kendo.template(SELECTCOLUMNHEADERTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) });\n                        currentTh += \">\" + text + \"</th>\";\n                    } else if (th.draggable) {\n                        currentTh += \"<th class='k-header k-drag-cell' scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                        if (rowSpan && !columns[idx].colSpan) {\n                            currentTh += \" rowspan='\" + rowSpan + \"'\";\n                        }\n\n                        if (index > -1) {\n                            currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                        }\n                        text = th.headerTemplate ? text : \"\";\n                        currentTh += \">\" + text + \"</th>\";\n                    } else if (th.command) {\n                        currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                        if (rowSpan && !columns[idx].colSpan) {\n                            currentTh += \" rowspan='\" + rowSpan + \"'\";\n                        }\n\n                        if (index > -1) {\n                            currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                        }\n\n                        currentTh += \">\" + text + \"</th>\";\n                    } else {\n                        if (th.field) {\n                            field = kendo.attr(\"field\") + \"='\" + th.field + \"' \";\n                        }\n\n                        currentTh += \"<th scope='col' \" + field;\n                        if ((columnMenu && th.field && th.menu !== false)) {\n                            currentTh += \" aria-haspopup='menu'\";\n                        } else if (filterable && th.filterable !== false && !th.command) {\n                            currentTh += \" aria-haspopup='dialog'\";\n                        }\n\n                        if (rowSpan && !columns[idx].colSpan) {\n                            currentTh += \" rowspan='\" + rowSpan + \"'\";\n                        }\n\n                        if (columns[idx].colSpan > 1) {\n                            currentTh += 'colspan=\"' + (columns[idx].colSpan - hiddenLeafColumnsCount(th.columns)) + '\" ';\n                            currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                        } else if (columns[idx].colSpan === 1) {\n                            currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                        }\n\n                        if (title) {\n                            title = title && (that.options.encodeTitles ? htmlEncode(title, true) : title);\n                            currentTh += kendo.attr(\"title\") + '=\"' + title + '\" ';\n                        }\n\n                        if (th.groupable !== undefined$1) {\n                            currentTh += kendo.attr(\"groupable\") + \"='\" + th.groupable + \"' \";\n                        }\n\n                        if (isColumnGroupable(that, th) && (!th.headerAttributes || !th.headerAttributes.title)) {\n                            currentTh += \"title='\";\n                            currentTh += isGroupedBy(groups, th.field) ? messages.ungroupHeader : messages.groupHeader;\n                            currentTh += \"' \";\n                        }\n\n                        if (th.aggregates && th.aggregates.length) {\n                            currentTh += kendo.attr(\"aggregates\") + \"='\" + th.aggregates + \"'\";\n                        }\n\n                        if (index > -1) {\n                            currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                        }\n\n                        currentTh += stringifyAttributes(th.headerAttributes);\n\n                        if (sortable) {\n                            text = kendo.template(SORTHEADERTMPL)({ text: text });\n                        }\n\n                        currentTh += \">\" + text + \"</th>\";\n                    }\n                    html += $(currentTh).addClass(\"k-table-th\")[0].outerHTML;\n                }\n                return html;\n            },\n\n            _appendLockedColumnContent: function() {\n                var columns = this.columns,\n                    idx,\n                    colgroup = this.table.find(\"colgroup\"),\n                    cols = colgroup.find(COLGROUP),\n                    length,\n                    lockedCols = $(),\n                    skipHiddenCount = 0,\n                    container,\n                    colSpan,\n                    spanIdx,\n                    colOffset = 0;\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    if (columns[idx].locked) {\n\n                        if (isVisible(columns[idx])) {\n                            colSpan = 1;\n\n                            if (columns[idx].columns) {\n                                colSpan = leafColumns(columns[idx].columns).length - hiddenLeafColumnsCount(columns[idx].columns);\n                            }\n\n                            colSpan = colSpan || 1;\n                            for (spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                                lockedCols = lockedCols.add(cols.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                            }\n                            colOffset += colSpan - 1;\n                        } else {\n                            skipHiddenCount ++;\n                        }\n                    }\n                }\n\n                container = $('<div class=\"k-grid-content-locked\"><table class=\"k-grid-table k-table\"><colgroup></colgroup><tbody class=\"k-table-tbody\"></tbody></table></div>');\n                // detach is required for IE8, otherwise it switches to compatibility mode\n                colgroup.detach();\n                container.find(\"colgroup\").append(lockedCols);\n                colgroup.insertBefore(this.table.find(\"tbody\"));\n\n                this.lockedContent = container.insertBefore(this.content);\n                this.lockedTable = container.children(\"table\");\n                this.lockedTable.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n            },\n\n            _appendLockedColumnFooter: function() {\n                var that = this;\n                var footer = that.footer;\n                var cells = footer.find(\".k-footer-template>td\");\n                var cols = footer.find(\".k-grid-footer-wrap>table>colgroup>col\");\n                var html = $('<div class=\"k-grid-footer-locked\"><table class=\"k-grid-footer-table k-table\"><colgroup></colgroup><tfoot class=\"k-table-tfoot\"><tr class=\"k-footer-template k-table-row\"></tr></tfoot></table></div>');\n                var idx, length;\n                var groups = that._groups();\n                var lockedCells = $(), lockedCols = $();\n\n                html.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n\n                lockedCells = lockedCells.add(cells.filter(\".k-group-cell\"));\n                for (idx = 0, length = leafColumns(lockedColumns(that.columns)).length; idx < length; idx++) {\n                    lockedCells = lockedCells.add(cells.eq(idx + groups));\n                }\n\n                lockedCols = lockedCols.add(cols.filter(\".k-group-col\"));\n                for (idx = 0, length = visibleColumns(leafColumns(visibleLockedColumns(that.columns))).length; idx < length; idx++) {\n                    lockedCols = lockedCols.add(cols.eq(idx + groups));\n                }\n\n                lockedCells.appendTo(html.find(TR));\n                lockedCols.appendTo(html.find(\"colgroup\"));\n                that.lockedFooter = html.prependTo(footer);\n            },\n\n            _appendLockedColumnHeader: function(container) {\n                var that = this,\n                    columns = this.columns,\n                    idx,\n                    html,\n                    length,\n                    colgroup,\n                    tr,\n                    trFilter,\n                    table,\n                    header,\n                    filtercellCells,\n                    rows = [],\n                    skipHiddenCount = 0,\n                    cols = $(),\n                    hasFilterRow = that._hasFilterRow(),\n                    filterCellOffset = 0,\n                    filterCells = $(),\n                    cell,\n                    leafColumnsCount = 0,\n                    cells = $();\n\n                colgroup = that.thead.prev().find(COLGROUP);\n                header = that.thead.find(TR).first().find(\".k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n                filtercellCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n\n                var colOffset = 0;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    if (columns[idx].locked) {\n                        cell = header.eq(idx);\n                        leafColumnsCount = leafColumns(columns[idx].columns || []).length;\n\n                        if (isVisible(columns[idx])) {\n                            var colSpan = null;\n\n                            if (columns[idx].columns) {\n                                colSpan = leafColumnsCount - hiddenLeafColumnsCount(columns[idx].columns);\n                            }\n\n                            colSpan = colSpan || 1;\n                            for (var spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                                cols = cols.add(colgroup.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                            }\n                            colOffset += colSpan - 1;\n                        }\n\n                        mapColumnToCellRows([columns[idx]], childColumnsCells(cell), rows, 0, 0);\n\n                        leafColumnsCount = leafColumnsCount || 1;\n                        for (var j = 0; j < leafColumnsCount; j++) {\n                            filterCells = filterCells.add(filtercellCells.eq(filterCellOffset + j));\n                        }\n                        filterCellOffset += leafColumnsCount;\n                    }\n\n                    if (columns[idx].columns) {\n                        skipHiddenCount += hiddenLeafColumnsCount(columns[idx].columns);\n                    }\n\n                    if (!isVisible(columns[idx])) {\n                        skipHiddenCount++;\n                    }\n                }\n\n                if (rows.length) {\n                    html = '<div class=\"k-grid-header-locked\"><table class=\"k-grid-header-table k-table\"><colgroup></colgroup><thead class=\"k-table-thead\">';\n                    html += new Array(rows.length + 1).join(\"<tr class='k-table-row'></tr>\");\n                    html += (hasFilterRow ? '<tr class=\"k-filter-row k-table-row\"></tr>' : '') + '</thead></table></div>';\n\n                    table = $(html);\n\n                    table.find('.k-grid-header-locked').css('width', '1px');\n\n                    table.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                    colgroup = table.find(\"colgroup\");\n                    colgroup.append(that.thead.prev().find(\"col.k-group-col\").add(cols));\n\n                    tr = table.find(\"thead tr:not(.k-filter-row)\");\n                    for (idx = 0, length = rows.length; idx < length; idx++) {\n                        cells = toJQuery(rows[idx]);\n                        tr.eq(idx).append(that.thead.find(TR).eq(idx).find(\".k-group-cell\").add(cells));\n                    }\n\n                    var count = removeEmptyRows(this.thead);\n                    if (rows.length < count) {\n                        removeRowSpanValue(table, count - rows.length);\n                    }\n\n                    trFilter = table.find(\".k-filter-row\");\n                    trFilter.append(that.thead.find(\".k-filter-row .k-group-cell\").add(filterCells));\n\n                    this.lockedHeader = table.prependTo(container);\n                    this.thead.find(\".k-group-cell\").remove();\n\n                    return true;\n                }\n                return false;\n            },\n\n            _removeLockedContainers: function() {\n                var elements = this.lockedHeader\n                    .add(this.lockedContent)\n                    .add(this.lockedFooter);\n\n                kendo.destroy(elements);\n                elements.off(NS).remove();\n\n                this.lockedHeader = this.lockedContent = this.lockedFooter = null;\n                this.selectable = null;\n            },\n\n            _thead: function() {\n                var that = this,\n                    columns = that.columns,\n                    hasDetails = that._hasDetails() && columns.length,\n                    hasFilterRow = that._hasFilterRow(),\n                    idx,\n                    html = \"\",\n                    thead = that.table.find(\">thead\"),\n                    hasTHead = that.element.find(\"thead\").first().length > 0,\n                    headerContent = that.options.messages.expandCollapseColumnHeader,\n                    tr;\n\n                if (!thead.length) {\n                    thead = $(\"<thead class='k-table-thead' role='rowgroup'/>\").insertBefore(that.tbody);\n                }\n\n                if (that.lockedHeader && that.thead) {\n                    tr = that.thead.find(\"tr:has(th):not(.k-filter-row)\").html(\"\");\n                    tr.remove();\n                    tr = $();\n\n                    that._removeLockedContainers();\n                } else if (hasTHead) {\n                    tr = that.element.find(\"thead\").first().find(\"tr:has(th):not(.k-filter-row)\");\n                } else {\n                    tr = that.element.find(\"tr:has(th)\").first();\n                }\n\n                if (!tr.length) {\n                    tr = thead.children().first();\n                    if (!tr.length) {\n                       var rows = [{ rowSpan: 1, cells: [], index: 0 }];\n                       that._prepareColumns(rows, columns);\n\n                       for (idx = 0; idx < rows.length; idx++) {\n                           html += \"<tr class='k-table-row'>\";\n                           if (hasDetails) {\n                               html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + headerContent + '</th>';\n                           }\n                           html += that._createHeaderCells(rows[idx].cells, rows[idx].rowSpan);\n                           html += \"</tr>\";\n                       }\n\n                       tr = $(html);\n                       kendo.applyStylesFromKendoAttributes(tr, [\"display\", \"left\", \"right\"]);\n                    }\n                } else {\n                    for (idx = 0; idx < columns.length; idx++) {\n    \t\t\t\t\tvar columnIndex = inArray(columns[idx], leafColumns(columns));\n    \t\t\t\t\tvar cell = leafDataCells(tr.parent()).filter(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(columnIndex);\n    \t\t\t\t\tif (columns[idx].hidden && columnIndex >= 0) {\n    \t\t\t\t\t\tcell[0].style.display = NONE;\n    \t\t\t\t\t}\n                   }\n\n                   that._updateHeadersAttr(childColumns(columns));\n    \t\t\t}\n\n                if (hasFilterRow) {\n                    var filterRow = $(\"<tr/>\");\n                    filterRow.addClass(\"k-filter-row k-table-row\");\n                    if (hasDetails || tr.find(\".k-hierarchy-cell\").length) { // handles server side detail template\n                        filterRow.prepend('<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>');\n                    }\n\n                    var existingFilterRow = (that.thead || thead).find(\".k-filter-row\");\n                    if (existingFilterRow.length) {\n                        kendo.destroy(existingFilterRow);\n                        existingFilterRow.remove();\n                    }\n\n                    thead.append(filterRow);\n                }\n\n                if (!tr.children().length) {\n                    html = \"\";\n                    if (hasDetails) {\n                        html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">&nbsp;</th>';\n                    }\n\n                    html += that._createHeaderCells(columns);\n\n                    tr.html(html);\n                } else if (hasDetails && !tr.find(\".k-hierarchy-cell\")[0]) {\n                    tr.prepend('<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + (headerContent ? headerContent : '&nbsp;') + '</th>');\n                }\n\n                tr.find(\"th\").addClass(\"k-header\");\n\n                if (!that.options.scrollable) {\n                    thead.addClass(\"k-grid-header\");\n                }\n\n                tr.find(\"script\").remove().end().prependTo(thead);\n\n                if (that.thead) {\n                    that._destroyColumnAttachments();\n                }\n\n                this.angular(\"cleanup\", function() {\n                    return {\n                        elements: thead.find(\"th\" + NAVCELL).get()\n                    };\n                });\n\n                this.angular(\"compile\", function() {\n                    return {\n                        elements: thead.find(HEADERCELLS).get(),\n                        data: map(columns, function(col) { return { column: col }; })\n                    };\n                });\n\n                that.thead = thead;\n\n                that._sortable();\n\n                that._filterable();\n\n                that._filterRow();\n\n                that._scrollable();\n\n                that._columnMenu();\n\n                var syncHeight;\n                var hasLockedColumns = this.options.scrollable && lockedColumns(this.columns).length;\n\n                if (hasLockedColumns) {\n\n                    syncHeight = that._appendLockedColumnHeader(that.thead.closest(\".k-grid-header\"));\n\n                    that._appendLockedColumnContent();\n\n                    that.lockedContent.on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n\n                    if (kendo.support.touch) {\n                        that._lockedContentUserEvents = new kendo.UserEvents(that.lockedContent, {\n                            move: function(e) {\n                                that.content.scrollTop(that.content.scrollTop() + (-e.y.delta));\n                                e.preventDefault();\n                            }\n                        });\n                    }\n\n                    that._updateLockedCols();\n                }\n\n                that._updateCols();\n\n                that._updateColumnCellIndex();\n\n                that._updateFirstColumnClass();\n\n                that._resizable();\n\n                that._draggable();\n\n                that._reorderable();\n\n                that._updateHeader(that._groups());\n\n                that._updateStickyColumns();\n\n                if (hasLockedColumns) {\n                    if (syncHeight) {\n                        that._syncLockedHeaderHeight();\n                    }\n\n                    that._applyLockedContainersWidth();\n                }\n\n                if (that.groupable) {\n                    that._attachGroupable();\n                }\n            },\n\n            _retrieveFirstColumn: function(columns, rows) {\n                var result = $();\n\n                if (rows.length && columns[0]) {\n                    var column = columns[0];\n\n                    while (column.columns && column.columns.length) {\n                        column = column.columns[0];\n                        rows = rows.filter(\":not(:first)\");\n                    }\n\n                    result = result.add(rows);\n                }\n\n                return result;\n            },\n\n            _updateFirstColumnClass: function() {\n                var that = this,\n                    columns = that.columns || [],\n                    hasDetails = that._hasDetails() && columns.length;\n\n                if (!hasDetails && !that._groups()) {\n                    var tr = that.thead.find(\">tr:not(.k-filter-row):not(:first)\");\n                    columns = nonLockedColumns(columns);\n\n                    var rows = that._retrieveFirstColumn(columns, tr);\n\n                    if (that._isLocked()) {\n                        tr = that.lockedHeader.find(\"thead>tr:not(.k-filter-row):not(:first)\");\n                        columns = lockedColumns(that.columns);\n\n                        rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                    }\n\n                    rows.each(function() {\n                        var ths = $(this).find(\"th\");\n                        ths.removeClass(\"k-first\");\n                        ths.eq(0).addClass(\"k-first\");\n                    });\n                }\n            },\n\n            _prepareColumns: function(rows, columns, parentCell, parentRow) {\n                var row = parentRow || rows[rows.length - 1];\n\n                var childRow = rows[row.index + 1];\n                var totalColSpan = 0;\n\n                for (var idx = 0; idx < columns.length; idx++) {\n                    var cell = { column: columns[idx], colSpan: 0 };\n                    row.cells.push(cell);\n\n                    if (columns[idx].columns && columns[idx].columns.length) {\n                        if (!childRow) {\n                            childRow = { rowSpan: 0, cells: [], index: rows.length };\n                            rows.push(childRow);\n                        }\n                        cell.colSpan = columns[idx].columns.length;\n                        this._prepareColumns(rows, columns[idx].columns, cell, childRow);\n                        totalColSpan += cell.colSpan - 1;\n                        row.rowSpan = rows.length - row.index;\n                    }\n                }\n                if (parentCell) {\n                    parentCell.colSpan += totalColSpan;\n                }\n            },\n\n            _wheelScroll: function(e) {\n                if (e.ctrlKey) {\n                    return;\n                }\n\n                var content = this.content;\n\n                if (this.virtualScroll && this.virtualScroll.rows) {\n                    content = this.virtualScrollable.verticalScrollbar;\n                }\n\n                var scrollTop = content.scrollTop(),\n                    delta = kendo.wheelDeltaY(e);\n\n                if (delta) {\n                    if (content[0].scrollHeight > content[0].clientHeight &&\n                        (content[0].scrollTop < content[0].scrollHeight - content[0].clientHeight && delta < 0 ||\n                        content[0].scrollTop > 0 && delta > 0)) {\n                        e.preventDefault();\n                    }\n\n                    content.scrollTop(scrollTop + (-delta));\n                }\n            },\n\n            _isLocked: function() {\n                return this.lockedHeader != null;\n            },\n\n            _updateHeaderCols: function() {\n                var table = this.thead.parent().add(this.table);\n\n                if (this._isLocked()) {\n                    normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n                } else {\n                    normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), 0);\n                }\n            },\n\n            _updateColumnSorters: function() {\n                var that = this;\n                var cells = leafDataCells(that.thead);\n                var columns = leafColumns(that.columns);\n                var column;\n                var cell;\n                var sorterInstance;\n\n                if (!that.options.sortable) {\n                    return;\n                }\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (column.sortable !== false && !column.command && column.field) {\n                        cell = cells.eq(idx);\n\n                        sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                        if (sorterInstance) {\n                            sorterInstance.refresh();\n                        }\n                    }\n                }\n            },\n\n            _updateHeadersAttr: function(columns) {\n                if (!columns.length) {\n                    return;\n                }\n\n                var that = this;\n\n                for (var i = 0; i < columns.length; i++) {\n                    if (columns[i].headerAttributes) {\n                        var th = that.element.find(\"[id='\" + columns[i].headerAttributes.id + \"']\");\n                        th.attr(\"headers\", columns[i].headerAttributes.headers);\n                    }\n                }\n\n                that._updateHeadersAttr(childColumns(columns));\n            },\n\n            _updateCols: function(table) {\n                table = table || this.thead.parent().add(this.table);\n\n                this._appendCols(table, this._isLocked());\n            },\n\n            _updateLockedCols: function(table) {\n                if (this._isLocked()) {\n                    table = table || this.lockedHeader.find(\"table\").add(this.lockedTable);\n\n                    normalizeCols(table, visibleLeafColumns(visibleLockedColumns(this.columns)), this._hasDetails(), this._groups());\n                }\n            },\n\n            _appendCols: function(table, locked) {\n                if (locked) {\n                    normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n                } else {\n                    normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), this._groups());\n                }\n            },\n\n            _autoColumns: function(schema) {\n                if (schema && schema.toJSON) {\n                    var that = this,\n                        field,\n                        encoded;\n\n                    schema = schema.toJSON();\n\n                    encoded = !(that.table.find(\"tbody tr\").length > 0 && (!that.dataSource || !that.dataSource.transport));\n\n                    for (field in schema) {\n                        that.columns.push({ field: field, encoded: encoded, headerAttributes: { id: kendo.guid() } });\n                    }\n\n                    that._thead();\n\n                    that._templates();\n                }\n            },\n\n            _setRowCachedHeight: function(row, uid) {\n                var cachedHeights = this._cachedRowsHeight,\n                    cachedHeight = cachedHeights[uid],\n                    $row;\n\n                if (cachedHeight) {\n                    $row = $(row);\n                    $row[0].style.height = cachedHeight + \"px\";\n                    row = $row.prop(\"outerHTML\");\n                }\n\n                return row;\n            },\n\n            _rowsHtml: function(data, templates) {\n                var that = this,\n                    html = \"\",\n                    idx,\n                    rowTemplate = templates.rowTemplate,\n                    altRowTemplate = templates.altRowTemplate,\n                    cachedHeights = that._cachedRowsHeight,\n                    length, row;\n\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    if (that._skipRerenderItemsCount > 0) {\n                        that._skipRerenderItemsCount--;\n                    } else {\n                        if (idx % 2) {\n                            row = altRowTemplate(data[idx]);\n                        } else {\n                            row = rowTemplate(data[idx]);\n                        }\n\n                        if (cachedHeights) {\n                            row = that._setRowCachedHeight(row, data[idx].uid);\n                        }\n\n                        html += row;\n                    }\n                    that._data.push(data[idx]);\n                }\n\n                return html;\n            },\n\n            _groupData: function(group, skipFooter, firstColumn) {\n                var that = this,\n                    footerDefaults = that._groupAggregatesDefaultObject || {},\n                    groupItems = group.items,\n                    aggregates = extend({}, footerDefaults, group.aggregates),\n                    headerData = extend({}, {\n                        field: group.field,\n                        value: group.value,\n                        items: groupItems,\n                        aggregates: aggregates\n                    }, group.aggregates[firstColumn ? firstColumn.field : group.field]),\n                    footerData = {};\n\n                if (!skipFooter) {\n                    for (var aggregate in aggregates) {\n                        footerData[aggregate] = extend({}, aggregates[aggregate],\n                            { group: { field: group.field, value: group.value, items: groupItems } }\n                        );\n                    }\n                }\n                return extend({}, footerData, headerData);\n            },\n\n            _removeGroupIfEmpty: function(row) {\n                var that = this,\n                    itemsCount,\n                    subgroupsCount,\n                    length = that.dataSource._group.length;\n\n                for (var i = 0; i < length; i++) {\n                    row = row.prev();\n                    itemsCount = +row.attr('data-group-item-count');\n                    subgroupsCount = +row.attr('data-sub-group-count');\n\n                    if (itemsCount == 1 || subgroupsCount == 1) {\n                        row.hide();\n                    }\n\n                }\n            },\n\n            _groupRowHtml: function(group, colspan, level, groupHeaderBuilder, templates, skipColspan, skipLastGroup, isLockedTable) {\n                var that = this,\n                    html = \"\",\n                    idx,\n                    length,\n                    isLocked = that.lockedContent != null,\n                    field = group.field,\n                    column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { },\n                    firstColumn = visibleColumns(that.columns)[0],\n                    firstVisibleColumnGroupHeaderTemplate = firstColumn ? firstColumn.groupHeaderColumnTemplate : null,\n                    template = column.groupHeaderTemplate ? column.groupHeaderTemplate : firstVisibleColumnGroupHeaderTemplate,\n                    text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded),\n                    groupItems = group.currentItems || group.items,\n                    groups = that._groups(),\n                    groupFooterTemplate = templates.groupFooterTemplate,\n                    groupHeaderColumnTemplate = templates.groupHeaderColumnTemplate,\n                    groupData,\n                    isGroupPaged = that.dataSource._isGroupPaged(),\n                    expanded = isGroupPaged ? that.dataSource._groupsState[group.uid] : true;\n\n                if (that.options.editable && group.items && group.items[0] && group.items[0].isNew && group.items[0].isNew()) {\n                    expanded = true;\n                }\n\n                if (templates.groupFooterTemplate || templates.groupHeaderColumnTemplate || column.groupHeaderTemplate) {\n                    groupData = that._groupData(group, false, !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false);\n                }\n                if (template && !skipColspan) {\n                    text = typeof template === FUNCTION ? template(groupData) : kendo.template(template)(groupData);\n                }\n\n                if (!that._skipRerenderItemsCount) {\n                    if (!group.excludeHeader) {\n                        html += groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, groups - level, groupData, level, text, expanded, group, isGroupPaged);\n                    } else if (isLocked) {\n                        group.excludeHeader = isLockedTable ? false : true;\n                    } else {\n                        group.excludeHeader = false;\n                    }\n                } else {\n                    groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n                }\n\n                if (expanded) {\n                    if (group.hasSubgroups) {\n                        for (idx = 0, length = groupItems.length; idx < length; idx++) {\n                            html += that._groupRowHtml(groupItems[idx], skipColspan ? colspan : colspan - 1, level + 1, groupHeaderBuilder, templates, skipColspan, skipLastGroup && idx === groupItems.length - 1, isLockedTable);\n                        }\n                    } else {\n                        html += that._rowsHtml(groupItems, templates);\n                    }\n                }\n\n                if (groupFooterTemplate) {\n\n                    if (skipLastGroup) {\n                        if (!inArray(group.value, that._skippedGroups)) {\n                            that._skippedGroups.push(group.value);\n                        }\n                    } else {\n                        if (that._skippedGroups.length && that._skippedGroups[0] === group.value) {\n                            that._skippedGroups.shift();\n                        }\n                        if (!that._skipRerenderItemsCount) {\n                            html += groupFooterTemplate(groupData);\n                        }\n                    }\n                }\n                return html;\n            },\n\n            collapseGroup: function(group) {\n                var level,\n                    that = this,\n                    groupToCollapse = group,\n                    groupable = this.options.groupable,\n                    showFooter = groupable.showFooter,\n                    footerCount = showFooter ? 0 : 1,\n                    offset,\n                    relatedGroup = $(),\n                    idx,\n                    length,\n                    tr;\n\n                group = $(group);\n                level = group.find(\".k-group-cell\").length;\n\n                if (this.dataSource._isGroupPaged()) {\n                    var groupUid = group.attr(\"data-group-uid\");\n                    var groupObject = that.dataSource._getGroupByUid(groupUid);\n                    var currentGroupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    var groupCountAfterCollapse;\n\n                    that.dataSource._groupsState[groupUid] = false;\n                    groupCountAfterCollapse = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    that.dataSource._serverGroupsTotal -= currentGroupCount - groupCountAfterCollapse;\n                    that._progress(true);\n                    that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                        that._progress(false);\n                    }, \"collapseGroup\");\n                    return;\n                }\n\n                if (this._isLocked()) {\n                    if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                        relatedGroup = group.nextAll(TR);\n                        group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                    } else {\n                        relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                    }\n                }\n\n                if (group.find(CARET_ALT_DOWN).length) {\n                    kendo.ui.icon(group.find(CARET_ALT_DOWN), { icon: (\"caret-alt-\" + (isRtl ? 'left' : 'right')) });\n                }\n\n                group.find(\"td[aria-expanded='true']\").first().attr(ARIA_EXPANDED, false)\n                    .find(\"a\").attr(ARIA_LABEL, EXPAND);\n\n                group = group.nextAll(TR);\n\n                var toHide = [];\n\n                for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                    tr = group.eq(idx);\n                    offset = tr.find(\".k-group-cell\").length;\n\n                    if (tr.hasClass(GROUPING_ROW)) {\n                        footerCount++;\n                    } else if (tr.hasClass(\"k-group-footer\")) {\n                        footerCount--;\n                    }\n\n                    if (offset <= level || (tr.hasClass(\"k-group-footer\") && footerCount < 0)) {\n                        break;\n                    }\n\n                    if (relatedGroup.length) {\n                        toHide.push(relatedGroup[idx]);\n                    }\n                    toHide.push(tr[0]);\n                }\n\n                $(toHide).hide();\n\n                if (this.options.scrollable.endless && this.content) {\n                    clearTimeout(that._collapseGroupsTimeOut);\n                    that._collapseGroupsTimeOut = setTimeout(function() {\n                        that.content.scroll();\n                        that._groupToCollapse = groupToCollapse;\n                    });\n                }\n            },\n\n            expandGroup: function(group) {\n                    group = $(group);\n\n                var that = this,\n                    showFooter = that.options.groupable.showFooter,\n                    level,\n                    tr,\n                    offset,\n                    relatedGroup = $(),\n                    idx,\n                    length,\n                    footersVisibility = [],\n                    groupsCount = 1;\n\n                    level = group.find(\".k-group-cell\").length;\n\n                if (this.dataSource._isGroupPaged()) {\n                    var groupUid = group.attr(\"data-group-uid\");\n                    var groupObject = that.dataSource._getGroupByUid(groupUid);\n                    var groupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    var groupCountAfterExpand;\n\n                    that.dataSource._groupsState[groupUid] = true;\n                    if (groupObject.items && groupObject.items.length) {\n                        groupCountAfterExpand = that.dataSource._calculateGroupsTotal([groupObject], true);\n                        that.dataSource._serverGroupsTotal += groupCountAfterExpand - groupCount;\n                    }\n\n                    that._progress(true);\n                    that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                        that._progress(false);\n                    }, \"expandGroup\");\n                    return;\n                }\n\n                if (this._isLocked()) {\n                    if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                        relatedGroup = group.nextAll(TR);\n                        group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                    } else {\n                        relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                    }\n                }\n\n                if (group.find(CARET_ALT_RIGHT).length) {\n                    kendo.ui.icon(group.find(CARET_ALT_RIGHT), { icon: \"caret-alt-down\" });\n                }\n\n                group.find(\"td[aria-expanded='false']\").first().attr(ARIA_EXPANDED, true)\n                    .find(\"a\").attr(ARIA_LABEL, COLLAPSE);\n                group = group.nextAll(TR);\n\n                for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                    tr = group.eq(idx);\n                    offset = tr.find(\".k-group-cell\").length;\n                    if (offset <= level) {\n                        break;\n                    }\n\n                    if (offset == level + 1 && !tr.hasClass(\"k-detail-row\")) {\n                        tr.show();\n                        relatedGroup.eq(idx).show();\n\n                        if (tr.hasClass(GROUPING_ROW) && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                            that.expandGroup(tr);\n                        }\n\n                        if (tr.hasClass(\"k-master-row\") && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                            tr.next().show();\n                            relatedGroup.eq(idx + 1).show();\n                        }\n                    }\n\n                    if (tr.hasClass(GROUPING_ROW)) {\n                        if (showFooter) {\n                            footersVisibility.push(tr.is(\":visible\"));\n                        }\n                        groupsCount ++;\n                    }\n\n                    if (tr.hasClass(\"k-group-footer\")) {\n                        if (showFooter) {\n                            var toggleVisibility = footersVisibility.pop();\n                            tr.toggle(toggleVisibility);\n                            relatedGroup.eq(idx).toggle(toggleVisibility);\n                        }\n                        if (groupsCount == 1) {\n                            tr.show();\n                            relatedGroup.eq(idx).show();\n                        } else {\n                            groupsCount --;\n                        }\n                    }\n                }\n\n                if ((level === 0 && that.options.scrollable.endless && this._isLocked()) ||\n                (!that.options.scrollable.endless && this._isLocked())) {\n                    that._syncLockedContentHeight();\n                }\n            },\n\n            _updateHeader: function(groups) {\n                var that = this,\n                    container = that._isLocked() ? that.lockedHeader.find(\"thead\") : that.thead,\n                    filterCells = container.find(\"tr.k-filter-row\").find(\"td.k-group-cell\").length,\n                    length = container.find(TR).first().find(\"th.k-group-cell\").length,\n                    rows = container.children(\"tr:not(:first)\").filter(function() {\n                        return !$(this).children(\":visible\").length;\n                    });\n\n                if (groups > length) {\n                    $(new Array(groups - length + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">' + encode(that.options.messages.expandCollapseColumnHeader) + '</th>')).prependTo(container.children(\"tr:not(.k-filter-row)\"));\n                    if (that.element.is(\":visible\")) {\n                        rows.find(\"th.k-group-cell\").hide();\n                    }\n                } else if (groups < length) {\n                    container.find(TR).each(function() {\n                        $(this).find(\".k-group-cell\").eq(groups).remove();\n                        $(this).find(\".k-group-cell\").slice(groups).remove();\n                    });\n                }\n                if (groups > filterCells) {\n                    $(new Array(groups - filterCells + 1).join('<td class=\"k-group-cell k-table-td\">&nbsp;</td>')).prependTo(container.find(\".k-filter-row\"));\n                }\n            },\n\n            _firstDataItem: function(data, grouped) {\n                if (data && grouped) {\n                    if (data.hasSubgroups) {\n                        data = this._firstDataItem(data.items[0], grouped);\n                    } else {\n                        data = data.items[0];\n                    }\n                }\n                return data;\n            },\n\n            _updateTablesWidth: function() {\n                var that = this,\n                    tables;\n\n                if (!that._isLocked()) {\n                    return;\n                }\n\n                tables =\n                    $(\">.k-grid-footer>.k-grid-footer-wrap>table\", that.wrapper)\n                    .add(that.thead.parent())\n                    .add(that.table);\n\n                that._footerWidth = tableWidth(tables.eq(0));\n                tables.width(that._footerWidth);\n\n                tables =\n                    $(\">.k-grid-footer>.k-grid-footer-locked>table\", that.wrapper)\n                    .add(that.lockedHeader.find(\">table\"))\n                    .add(that.lockedTable);\n\n                tables.width(tableWidth(tables.eq(0)));\n            },\n\n            hideColumn: function(column) {\n                var that = this,\n                    cell,\n                    tables,\n                    idx,\n                    cols,\n                    colWidth,\n                    position,\n                    width = 0,\n                    headerCellIndex,\n                    length,\n                    footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                    virtualScroll = that.virtualScroll || {},\n                    columns = that.columns,\n                    visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                    columnIndex,\n                    groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(flatColumns(columns), function(item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(flatColumns(columns), function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || !isVisible(column)) {\n                    return;\n                }\n\n                var setColumnVisibility = that._columnVisibilitySetter(column);\n\n                if (column.columns && column.columns.length) {\n                    position = columnVisiblePosition(column, columns);\n\n                    setColumnVisibility(column, false);\n\n                    setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, false);\n\n                    for (idx = 0; idx < column.columns.length; idx++) {\n                       this.hideColumn(column.columns[idx]);\n                    }\n\n                    that._ariaAddHiddenColIndex();\n                    that.trigger(COLUMNHIDE, { column: column });\n\n                    return;\n                }\n\n                columnIndex = inArray(column, visibleColumns(leafColumns(columns)));\n\n                setColumnVisibility(column, false);\n\n                that._setParentsVisibility(column, false);\n\n                that._templates();\n\n                that._updateCols();\n                that._updateLockedCols();\n\n                var container = that.thead;\n\n                headerCellIndex = columnIndex;\n                if (that.lockedHeader && visibleLocked > columnIndex) {\n                    container = that.lockedHeader.find(\">table>thead\");\n                } else {\n                    headerCellIndex -= visibleLocked;\n                }\n\n                cell = leafDataCells(container).filter(isCellVisible).eq(headerCellIndex);\n                cell[0].style.display = NONE;\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnIndex, false);\n                if (footer[0]) {\n                    that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                    that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                    setCellVisibility(footer.find(\".k-footer-template>td\"), columnIndex, false);\n                }\n\n                if (virtualScroll.columns && !column.locked) {\n                    that._updateContentWidth();\n                    that.trigger(COLUMNHIDE, { column: column });\n                    return;\n                }\n\n                if (that.lockedTable && visibleLocked > columnIndex) {\n                    hideColumnCells(that.lockedTable.find(\">tbody>tr\"), columnIndex);\n                } else {\n                    hideColumnCells(that.tbody.children(), columnIndex - visibleLocked);\n                }\n\n                if (that.lockedTable) {\n                    that._updateTablesWidth();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n                    that._syncLockedHeaderHeight();\n                    that._syncLockedFooterHeight();\n                } else {\n                    cols = that.thead.prev().find(\"col\");\n                    for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n\n                        if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                            width += parseInt(colWidth, 10);\n                        } else {\n                            width = 0;\n                            break;\n                        }\n                    }\n\n                    tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                    that._footerWidth = null;\n\n                    if (width) {\n                        tables.each(function() {\n                            this.style.width = width + PX;\n                        });\n\n                        that._footerWidth = width;\n                        that._setContentWidth();\n                    }\n                }\n\n                that._updateFirstColumnClass();\n                that._updateStickyColumns();\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n                that._ariaAddHiddenColIndex();\n                that.trigger(COLUMNHIDE, { column: column });\n            },\n\n            _setParentsVisibility: function(column, visible) {\n                var that = this;\n                var columns = that.columns;\n                var idx;\n                var parents = [];\n                var parent;\n                var position;\n                var cell;\n                var colSpan;\n                var setColumnVisibility = that._columnVisibilitySetter(column);\n\n                var predicate = visible ?\n                    function(p) { return visibleColumns(p.columns).length && p.hidden; } :\n                    function(p) { return !visibleColumns(p.columns).length && !p.hidden; };\n\n\n                if (columnParents(column, columns, parents) && parents.length) {\n                    for (idx = parents.length - 1; idx >= 0; idx--) {\n                        parent = parents[idx];\n                        position = columnPosition(parent, columns);\n                        cell = elements($(\">table>thead\", this.lockedHeader), this.thead, \">tr:eq(\" + position.row + \")>th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(position.cell);\n\n                        if (predicate(parent)) {\n                            setColumnVisibility(parent, visible);\n                            cell[0].style.display = visible ? \"\" : NONE;\n                        }\n\n                        if (cell.filter(\"[\" + kendo.attr(\"colspan\") + \"]\").length) {\n                            colSpan = parseInt(cell.attr(kendo.attr(\"colspan\")), 10);\n                            cell[0].colSpan = (colSpan - hiddenLeafColumnsCount(parent.columns)) || 1;\n                        }\n                    }\n                }\n            },\n\n            _updateContentWidth: function() {\n                var that = this;\n                var tables = that.table.add(that.thead.parent());\n\n                tables.css({\n                    width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n                });\n                that.refresh();\n            },\n\n            showColumn: function(column) {\n                var that = this,\n                    idx,\n                    length,\n                    cell,\n                    tables,\n                    width,\n                    headerCellIndex,\n                    position,\n                    colWidth,\n                    cols,\n                    columns = that.columns,\n                    virtualScroll = that.virtualScroll || {},\n                    footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                    lockedColumnsCount = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).length : 0,\n                    columnIndex,\n                    originalColumn,\n                    columnLeafIndex,\n                    groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (typeof column == \"number\") {\n                    columnIndex = column;\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    $.each(flatColumns(columns), function(index, item) {\n                        if (item === column) {\n                            column = item;\n                            columnIndex = index;\n                            return false;\n                        }\n                    });\n                } else {\n                    $.each(flatColumns(columns), function(index, item) {\n                        if (item.field === column) {\n                            column = item;\n                            columnIndex = index;\n                            return false;\n                        }\n                    });\n                }\n\n                if (!column || isVisible(column)) {\n                    return;\n                }\n\n                var setColumnVisibility = that._columnVisibilitySetter(column);\n\n                if (column.columns && column.columns.length) {\n                    position = columnPosition(column, columns);\n                    originalColumn = flatColumns(that.options.columns)[columnIndex];\n\n                    setColumnVisibility(column, true);\n\n                    setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, true);\n\n                    for (idx = 0; idx < column.columns.length; idx++) {\n                        if (!originalColumn.columns[idx].hidden) {\n                            this.showColumn(column.columns[idx]);\n                        }\n                    }\n\n                    that._ariaRemoveHiddenColIndex();\n                    that.trigger(COLUMNSHOW, { column: column });\n\n                    return;\n                }\n\n                columnLeafIndex = inArray(column, leafColumns(columns));\n\n                setColumnVisibility(column, true);\n\n                that._setParentsVisibility(column, true);\n\n                that._templates();\n                that._updateCols();\n                that._updateLockedCols();\n\n                var container = that.thead;\n\n                headerCellIndex = columnLeafIndex;\n                if (that.lockedHeader && lockedColumnsCount > columnLeafIndex) {\n                    container = that.lockedHeader.find(\">table>thead\");\n                } else {\n                    headerCellIndex -= lockedColumnsCount;\n                }\n\n                cell = leafDataCells(container).eq(headerCellIndex);\n                cell[0].style.display = \"\";\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnLeafIndex, true);\n                if (footer[0]) {\n                    that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                    that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                    setCellVisibility(footer.find(\".k-footer-template>td\"), columnLeafIndex, true);\n                }\n\n                if (virtualScroll.columns && !column.locked) {\n                    that._updateContentWidth();\n                    that.trigger(COLUMNSHOW, { column: column });\n                    return;\n                }\n\n                if (that.lockedTable && lockedColumnsCount > columnLeafIndex) {\n                    showColumnCells(that.lockedTable.find(\">tbody>tr\"), columnLeafIndex);\n                } else {\n                    showColumnCells(that.tbody.children(), columnLeafIndex - lockedColumnsCount);\n                }\n\n                if (that.lockedTable) {\n                    that._updateTablesWidth();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n                    that._syncLockedHeaderHeight();\n                } else {\n                    tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                    if (!column.width) {\n                        tables.width(\"\");\n                    } else {\n                        width = 0;\n                        cols = that.thead.prev().find(\"col\");\n                        for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                            colWidth = cols[idx].style.width;\n\n                            if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                                width += outerWidth(cols[idx]);\n                                continue;\n                            }\n\n                            if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                                width += outerWidth(cols[idx]);\n                                continue;\n                            }\n\n                            if (colWidth.indexOf(\"%\") > -1) {\n                                width = 0;\n                                break;\n                            }\n                            width += parseInt(colWidth, 10);\n                        }\n\n                        that._footerWidth = null;\n                        if (width) {\n                            tables.each(function() {\n                                this.style.width = width + PX;\n                            });\n                            that._footerWidth = width;\n                            that._setContentWidth();\n                        }\n                    }\n                }\n\n                that._updateFirstColumnClass();\n                that._updateStickyColumns();\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n                that._ariaRemoveHiddenColIndex();\n                that.trigger(COLUMNSHOW, { column: column });\n            },\n\n            _columnVisibilitySetter: function(column) {\n                var col = column || {};\n\n                if (isUndefined(col.media)) {\n                    return setColumnVisibility;\n                } else {\n                    return setColumnMediaVisibility;\n                }\n            },\n\n\n            _buildSkeleton: function() {\n                var visibleColumns = this.virtualCols ? this.virtualCols : visibleLeafColumns(this.columns);\n                var pageSize = this.dataSource.pageSize() || this.dataSource.total();\n                var loaderHTML = \"\";\n                var colspan;\n                var groups = this._groups();\n                var columnsCount = visibleColumns.length + groups;\n\n                if (this._hasDetails()) {\n                    columnsCount++;\n                }\n\n                if (this._hasVirtualColumns()) {\n                    colspan = parseInt(this.content.find(TR).first().find(\"td\").first().attr(\"colspan\"), 10);\n                }\n\n                for (var i = 0; i < pageSize; i++) {\n                    loaderHTML += \"<tr class='k-table-row'>\";\n                    for (var j = 0; j < columnsCount; j++) {\n                        if (colspan && !j) {\n                            loaderHTML += \"<td colspan='\" + colspan + \"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                        } else {\n                            loaderHTML += \"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                        }\n                    }\n                    loaderHTML += \"</tr>\";\n                }\n                return loaderHTML;\n            },\n\n            _progress: function(toggle) {\n                var element = this.element;\n                var endless = this.options.scrollable && this.options.scrollable.endless;\n                var loaderType = this.options.loaderType;\n                var isVirtualization = this.options.scrollable && this.options.scrollable.virtual;\n                var skeleton;\n\n                if (isVirtualization) {\n                    element = this.content;\n                } else if (this._editContainer && this._editMode() === \"popup\") {\n                    element = this._editContainer;\n                } else if (this.lockedContent || endless) {\n                    element = this.wrapper;\n                } else if (this.element.is(\"table\")) {\n                    element = this.element.parent();\n                } else if (this.content && this.content.length) {\n                    element = this.content;\n                }\n\n                if (loaderType == \"skeleton\") {\n                    if (toggle) {\n                        skeleton = this._buildSkeleton();\n                            element.find(\"tbody\")\n                             .empty()\n                             .append(skeleton);\n                    } else {\n                        element.find(\".k-skeleton\").closest(\"tbody\").empty();\n                    }\n                } else {\n                    if (endless && toggle) {\n                        kendo.ui.progress(element, toggle, { height: this.content.height(), top: this.content.parent()[0].offsetTop, opacity: true });\n                    } else {\n                        kendo.ui.progress(element, toggle);\n                    }\n                }\n            },\n\n            _resize: function(size, force) {\n\n                this._syncLockedContentHeight();\n                this._syncLockedHeaderHeight();\n\n                if (this.content) {\n                    this._setContentWidth();\n                    this._setContentHeight();\n                }\n\n                if (this.lockedTable) {\n                    this._syncLockedScroll();\n                }\n\n                if (this.virtualScrollable && (force || this._rowHeight)) {\n                    if (force) {\n                        this._rowHeight = null;\n                    }\n                    this.virtualScrollable.repaintScrollbar();\n                }\n\n                if (this.pager && this.pager.element) {\n                    this.pager.resize(force);\n                }\n\n                if (this._anyStickyColumns()) {\n                    this._updateStickyColumns(false);\n                }\n            },\n\n            _isActiveInTable: function() {\n                var active = activeElement();\n\n                if (!active) { return false; }\n\n                return this.table[0] === active ||\n                    $.contains(this.table[0], active) ||\n                    (this._isLocked() &&\n                        (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active))\n                    );\n            },\n\n            refresh: function(e) {\n                var that = this,\n                    data = that.dataSource.view(),\n                    navigatable = that.options.navigatable,\n                    virtualScroll = that.virtualScroll || {},\n                    currentIndex,\n                    current = $(that.current()),\n                    isCurrentInHeader = false,\n                    groups = that._groups(),\n                    colspan = groups + visibleLeafColumns(visibleColumns(that.columns)).length,\n                    contentScrollLeft,\n                    cachedItemsToSkip;\n\n                if (e && e.action === \"itemchange\" && (that.editable || that.options.scrollable.endless)) { // skip rebinding if editing is in progress\n                    if (this._editMode() != \"popup\" || this._editMode() === \"popup\" && !that._editableIsClosing) { // popup editing animation has not finished yet and the editable is not destoyed\n                        return;\n                    }\n                }\n\n                if (that._shouldMapHights) {\n                    that._mapCachedRowsHeight(\"get\", \"uid\");\n                    that._shouldMapHights = false;\n                }\n\n                if (virtualScroll.columns) {\n                    that._templates();\n                }\n\n                //someone remove the edited item\n                if (e && e.action === \"remove\" && that.editable &&\n                    that.editable.options.model && inArray(that.editable.options.model, e.items) > -1) {\n                    that.editable.options.model.unbind(CHANGE, that._modelChangeHandler);\n                }\n\n                e = e || {};\n\n                if (that.trigger(\"dataBinding\", { action: e.action || \"rebind\", index: e.index, items: e.items })) {\n                    return;\n                }\n\n                if (e.action === SYNC && that._isVirtualEditable()) {\n                    that._destroyEditable();\n                    that._clearEditableState();\n                }\n\n                that._angularItems(\"cleanup\");\n\n                if (!that._endlessFetchInProgress) {\n                    if (navigatable && (that._isActiveInTable() || (that._editContainer && that._editContainer.data(\"kendoWindow\")))) {\n                        isCurrentInHeader = current.is(\"th\");\n                        currentIndex = isCurrentInHeader ? current.parent().children(\":not(.k-group-cell)\").index(current[0]) : Math.max(that.cellIndex(current), 0);\n                    }\n                    that._destroyEditable();\n                }\n\n                if (that.options.scrollable && that.options.scrollable.endless && !that._pdfInitialized) {\n                    clearTimeout(that._progressTimeOut);\n                    that._progressTimeOut = setTimeout(function() {\n                        if (!that._endlessFetchInProgress) {\n                            that._progress(false);\n                        }\n                    }, 250);\n                } else {\n                     that._progress(false);\n                }\n\n                that._hideResizeHandle();\n\n                that._data = [];\n\n                if (!that.columns.length) {\n                    that._autoColumns(that._firstDataItem(data[0], groups));\n                    colspan = groups + that.columns.length;\n                }\n\n                that._group = groups > 0 || that._group;\n\n                if (that._group) {\n                    that._templates();\n                    that._updateCols();\n                    that._updateLockedCols();\n                    if (!that._virtualColScroll) {\n                        that._updateHeader(groups);\n                    }\n                    that._group = groups > 0;\n                    that._groupRows = groupRows(data);\n                }\n\n                if (that.content) {\n                    contentScrollLeft = kendo.scrollLeft(that.content);\n                }\n                cachedItemsToSkip = that._skipRerenderItemsCount;\n                that._renderContent(data, colspan, groups);\n                if (that.options.scrollable && that.options.scrollable.endless && this.lockedContent) {\n                    that._skipRerenderItemsCount = cachedItemsToSkip;\n                }\n                that._renderLockedContent(data, colspan, groups);\n\n                if (!that._virtualColScroll) {\n                    that._footer();\n\n                    that._renderNoRecordsContent();\n\n                    that._togglePagerVisibility();\n\n                    that._setContentHeight();\n\n                    that._setContentWidth(that.content && contentScrollLeft);\n                }\n\n                if (that.lockedTable) {\n                    //requires manual trigger of scroll to sync both tables\n                    if (virtualScroll.rows) {\n                        that.content.find(\">.k-virtual-scrollable-wrap\").trigger(\"scroll\");\n                    } else if (that.touchScroller) {\n                        that.touchScroller.movable.trigger(\"change\");\n                    } else {\n                        that.wrapper.one(\"scroll\", function(e) { e.stopPropagation(); });\n                        that.content.trigger(\"scroll\");\n                    }\n                }\n\n                if (!that._endlessFetchInProgress && !that._rowDropping) {\n                    that._restoreCurrent(currentIndex, isCurrentInHeader);\n                }\n\n                if (that.touchScroller) {\n                    that.touchScroller.contentResized();\n                }\n\n                if (that.selectable) {\n                    that.selectable.resetTouchEvents();\n                }\n\n                that._muteAngularRebind(function() {\n                    that._angularItems(\"compile\");\n                });\n\n                if (that._checkBoxSelection) {\n                    that._toggleHeaderCheckState(false);\n                }\n\n                if (that.options.persistSelection &&\n                    ((that.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell) || that._checkBoxSelection) &&\n                    (that.items().length || that.dataSource._isGroupPaged())) {\n                    that._restoreSelection();\n                }\n\n                if (!that.options.persistSelection) {\n                    that._selectedIds = {};\n                }\n\n                if (that._hasReorderableRows()) {\n                    that._draggableRows();\n                    that._reorderableRows();\n                }\n\n                that._aria();\n\n                that.trigger(DATABOUND);\n           },\n\n            _restoreCurrent: function(currentIndex, isCurrentInHeader) {\n                if (currentIndex === undefined$1 || currentIndex < 0) {\n                    return;\n                }\n\n                this._removeCurrent();\n\n                if (isCurrentInHeader) {\n                    this._setCurrent(this.thead.find(\"th:not(.k-group-cell)\").eq(currentIndex));\n                } else {\n                    var rowIndex = 0;\n                    var virtualScroll = this.virtualScroll || {};\n\n                    if (this._rowVirtualIndex) {\n                        if (virtualScroll.rows) {\n                            rowIndex = this.virtualScrollable.position(this._rowVirtualIndex);\n                        } else {\n                            rowIndex = this._rowVirtualIndex;\n                        }\n                    } else {\n                        currentIndex = 0;\n                    }\n\n                    var row = $();\n                    var colspan;\n\n                    if (this.lockedTable) {\n                        row = this.lockedTable.find(\">tbody>tr\").eq(rowIndex);\n                    }\n                    row = row.add(this.tbody.children().eq(rowIndex));\n\n                    if (this._hasVirtualColumns()) {\n                        colspan = parseInt(row.find(\"td\").first().attr(\"colspan\"), 10);\n                        currentIndex = this._virtualCellIndex - (colspan > 1 ? colspan - 1 : 0);\n                    }\n\n\n                    var td = row.find(\">td:not(.k-group-cell):not(.k-hierarchy-cell)\")\n                        .eq(currentIndex);\n\n                    if (!td.length || currentIndex < 0) {\n                        return;\n                    }\n\n                    if (this._hasVirtualColumns()) {\n                        this._setCurrent(td, true, true);\n\n                    } else {\n                        this._setCurrent(td);\n                    }\n\n                }\n\n                if (this._current) {\n                    focusTable(this.table, true);\n                }\n            },\n\n            _restoreSelection: function() {\n                var that = this,\n                    allRows = that.items(),\n                    selectedRows,\n                    id = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n\n                selectedRows = grep(allRows, function(row) {\n                     var dataItemKey = that.dataItem(row)[id];\n                     if (that._selectedIds[dataItemKey]) {\n                        return row;\n                     }\n                });\n\n                that.select(selectedRows);\n            },\n\n           _angularItems: function(cmd) {\n\n               kendo.ui.DataBoundWidget.fn._angularItems.call(this, cmd);\n\n               if (cmd === \"cleanup\" && (!this.dataSource || !this.dataSource.options.endless)) {\n                   this._cleanupDetailItems();\n               }\n\n               this._angularGroupItems(cmd);\n\n               this._angularGroupFooterItems(cmd);\n           },\n\n           _cleanupDetailItems: function() {\n               var that = this;\n\n               if (that._hasDetails()) {\n                  that.angular(\"cleanup\", function() {\n                       return { elements: that.tbody.children(\".k-detail-row\") };\n                   });\n\n                   that.tbody.find(\".k-detail-cell\").empty();\n               }\n           },\n\n           _angularGroupItems: function(cmd) {\n               var that = this,\n                   container = that.tbody;\n\n               if (that.lockedContent) {\n                   container = that.lockedTable.find(\"tbody\");\n               }\n\n               if (that._group) {\n                  that.angular(cmd, function() {\n                       return {\n                           elements: container.children(DOT + GROUPING_ROW),\n                           data: $.map(groupRows(that.dataSource.view()), function(dataItem) {\n                               return { dataItem: dataItem };\n                           })\n                       };\n                   });\n               }\n           },\n\n           _angularGroupFooterItems: function(cmd) {\n               var that = this,\n                   container = that.tbody;\n\n               if (that.lockedContent) {\n                    container = that.element;\n               }\n\n               if (that._group && that.groupFooterTemplate) {\n\n                   that.angular(cmd, function() {\n                       return {\n                           elements: container.find(\".k-group-footer\"),\n                           data: $.map(groupFooters(that.dataSource.view()), function(dataItem) {\n                               return { dataItem: dataItem };\n                           })\n                       };\n                   });\n               }\n           },\n\n           _renderContent: function(data, colspan, groups) {\n                var that = this,\n                    idx,\n                    length,\n                    html = \"\",\n                    isLocked = that.lockedContent != null,\n                    endlessAppend = null,\n                    skipLastGroup,\n                    flatViewLength,\n                    scrollable = that.options.scrollable,\n                    templates = {\n                            rowTemplate: that.rowTemplate,\n                            altRowTemplate: that.altRowTemplate,\n                            groupFooterTemplate: that.groupFooterTemplate,\n                            groupHeaderColumnTemplate: that.groupHeaderColumnTemplate\n                        };\n                if (scrollable && scrollable.endless && !that.dataSource.options.endless) {\n                    that._skipRerenderItemsCount = 0;\n                    if (that.content) {\n                        that.content[0].scrollTop = 0;\n                    }\n                }\n                endlessAppend = that._skipRerenderItemsCount > 0;\n                colspan = isLocked ? colspan - visibleLeafColumns(visibleLockedColumns(that.columns)).length : colspan;\n                if (groups > 0) {\n\n                    colspan = isLocked ? colspan - groups : colspan;\n\n                    if (that.detailTemplate) {\n                        colspan++;\n                    }\n\n                    if (that.groupFooterTemplate) {\n                        that._groupAggregatesDefaultObject = that.dataSource.aggregates();\n                    }\n                    if (that.options.scrollable.endless) {\n                        flatViewLength = that.dataSource.flatView().length;\n                    }\n                    for (idx = 0, length = data.length; idx < length; idx++) {\n                        if (!that._skippedGroups) {\n                            that._skippedGroups = [];\n                        }\n                        skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== that.dataSource.total();\n                        html += that._groupRowHtml(data[idx], colspan, 0, isLocked ? groupRowLockedContentBuilder : groupRowBuilder, templates, isLocked, skipLastGroup, false);\n                    }\n                } else {\n                    html += that._rowsHtml(data, templates);\n                }\n\n                if (endlessAppend) {\n                    that.tbody.append(html);\n                    kendo.applyStylesFromKendoAttributes(that.tbody, [\"display\", \"left\", \"right\"]);\n                    clearTimeout(that._endlessFetchTimeOut);\n                    that._endlessFetchTimeOut = setTimeout(function() {\n                        if (that._groupToCollapse) {\n                            that.collapseGroup(that._groupToCollapse);\n                            that._groupToCollapse = null;\n                        }\n                    });\n                    that._endlessFetchInProgress = null;\n                } else {\n                    that.tbody = appendContent(that.tbody, that.table, html, this.options.$angular, this.options.size);\n                }\n           },\n\n           _renderGroupRows: function() {\n            var that = this,\n            data = that._groupRows,\n            groupRows = that.wrapper.find(DOT + GROUPING_ROW),\n            groups = that._groups(),\n            groupRowBuilderFunc,\n            isLocked = that.lockedContent != null,\n            columns,\n            colspan,\n            group,\n            field,\n            column,\n            template,\n            text,\n            groupHeaderData,\n            tableContainer,\n            isInLockedContainer,\n            prevElement,\n            newGroupRowElement,\n            currentRow,\n            level,\n            groupHeaderColumnTemplate,\n            firstColumnGroupData;\n\n            groupRows.each(function(index, row) {\n                currentRow = $(row);\n                tableContainer = currentRow.closest(\"table\").parent();\n                isInLockedContainer = tableContainer.is(\".\" + CONTENTRLOCKEDCONTAINER);\n                columns = isInLockedContainer ? visibleLeafColumns(visibleColumns(lockedColumns(that.columns))) : visibleLeafColumns(visibleColumns(nonLockedColumns(that.columns)));\n                level = currentRow.find(\".\" + GROUPCELLCLASS).length;\n                if (isLocked) {\n                    groupRowBuilderFunc = isInLockedContainer ? groupRowBuilder : groupRowLockedContentBuilder;\n                    colspan = isInLockedContainer ? columns.length + groups - level : columns.length;\n                }\n                else {\n                    groupRowBuilderFunc = groupRowBuilder;\n                    colspan = columns.length + groups - level;\n                }\n\n                group = index >= data.length ? data[index - data.length] : data[index];\n                field = group.field;\n                column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { };\n                firstColumnGroupData = !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false;\n                template = column.groupHeaderTemplate ? column.groupHeaderTemplate : visibleColumns(that.columns)[0].groupHeaderColumnTemplate;\n                text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded);\n                groups = groups;\n                groupHeaderData = that._groupData(group, false, firstColumnGroupData);\n                groupHeaderColumnTemplate = isInLockedContainer ? that.lockedGroupHeaderColumnTemplate : that.groupHeaderColumnTemplate;\n\n                if (template) {\n                    text = typeof template === FUNCTION ? template(groupHeaderData) : kendo.template(template)(groupHeaderData);\n                }\n\n                prevElement = currentRow.prev().length ? currentRow.prev() : currentRow.parent();\n\n                newGroupRowElement = $(groupHeaderColumnTemplate ?\n                    groupHeaderColumnTemplate(extend({}, groupHeaderData, { groupCells: level, colspan: groups - level, text: text })) :\n                    groupRowBuilderFunc(colspan, level, text, null, null, null, isRtl)\n                );\n\n                kendo.applyStylesFromKendoAttributes(newGroupRowElement, [\"display\", \"left\", \"right\"]);\n\n                if (prevElement.is(\"tbody\")) {\n                    prevElement.prepend(newGroupRowElement);\n                }\n                else {\n                    prevElement.after(newGroupRowElement);\n                }\n                    currentRow.remove();\n               });\n           },\n\n           _renderLockedContent: function(data, colspan, groups) {\n               var html = \"\",\n                   idx,\n                   length,\n                   skipLastGroup,\n                   endlessAppend = null,\n                   flatViewLength,\n                   templates = {\n                       rowTemplate: this.lockedRowTemplate,\n                       altRowTemplate: this.lockedAltRowTemplate,\n                       groupFooterTemplate: this.lockedGroupFooterTemplate,\n                       groupHeaderColumnTemplate: this.lockedGroupHeaderColumnTemplate\n                   };\n\n               if (this.lockedContent) {\n\n                   var table = this.lockedTable;\n                   endlessAppend = this._skipRerenderItemsCount > 0;\n\n                   if (groups > 0) {\n                       colspan = colspan - visibleColumns(leafColumns(nonLockedColumns(this.columns))).length;\n                       if (this.options.scrollable.endless) {\n                         flatViewLength = this.dataSource.flatView().length;\n                       }\n                       for (idx = 0, length = data.length; idx < length; idx++) {\n                        skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== this.dataSource.total();\n                        html += this._groupRowHtml(data[idx], colspan, 0, groupRowBuilder, templates, false, skipLastGroup, true);\n                       }\n                   } else {\n                       html = this._rowsHtml(data, templates);\n                   }\n\n                   if (endlessAppend) {\n                       table.children(\"tbody\").append(html);\n                   } else {\n                       appendContent(table.children(\"tbody\"), table, html, this.options.$angular, this.options.size);\n                   }\n\n                   this._syncLockedContentHeight();\n               }\n           },\n\n           _togglePagerVisibility: function() {\n               if (this.options.pageable.alwaysVisible === false) {\n                    this.wrapper.find(\".k-grid-pager\").toggle(this.dataSource.total() >= this.dataSource.pageSize());\n                }\n           },\n\n           _adjustRowsHeight: function(table1, table2) {\n               var rows = table1[0].rows,\n                   length = rows.length,\n                   idx,\n                   rows2 = table2[0].rows,\n                   containers = table1.add(table2),\n                   containersLength = containers.length,\n                   heights = [];\n\n               for (idx = 0; idx < length; idx++) {\n                   if (!rows2[idx]) {\n                       break;\n                   }\n\n                   if (rows[idx].style.height) {\n                       rows[idx].style.height = rows2[idx].style.height = \"\";\n                   }\n               }\n\n               for (idx = 0; idx < length; idx++) {\n                   if (!rows2[idx]) {\n                       break;\n                   }\n\n                   var offsetHeight1 = rows[idx].offsetHeight;\n                   var offsetHeight2 = rows2[idx].offsetHeight;\n                   var height = 0;\n\n                   if (offsetHeight1 > offsetHeight2) {\n                       height = offsetHeight1;\n                   } else if (offsetHeight1 < offsetHeight2) {\n                       height = offsetHeight2;\n                   }\n\n                   heights.push(height);\n               }\n\n               for (idx = 0; idx < containersLength; idx++) {\n                   containers[idx].style.display = NONE;\n               }\n\n               for (idx = 0; idx < length; idx++) {\n                   if (heights[idx]) {\n                       //add one to resolve row misalignment in IE\n                       rows[idx].style.height = rows2[idx].style.height = (heights[idx] + 1) + PX;\n                   }\n               }\n\n               for (idx = 0; idx < containersLength; idx++) {\n                   containers[idx].style.display = \"\";\n               }\n           }\n       });\n\n       if (kendo.ExcelMixin) {\n           kendo.ExcelMixin.extend(Grid.prototype);\n       }\n\n       if (kendo.PDFMixin) {\n           kendo.PDFMixin.extend(Grid.prototype);\n\n           Grid.prototype._drawPDF_autoPageBreak = function(progress) {\n               var grid = this;\n               var result = new $.Deferred();\n               var dataSource = grid.dataSource;\n               var allPages = grid.options.pdf.allPages;\n               var origBody = grid.wrapper.find('> table > tbody, .k-grid-content > table > tbody').first();\n               var cont = $(\"<div>\")\n                   .css({ position: \"absolute\", left: -10000, top: -10000 });\n               var clone;\n\n               grid.toggleUnexportableColumns(grid.columns);\n               clone = grid.wrapper.clone().css({\n                   height: AUTO, width: AUTO\n               }).appendTo(cont);\n               clone.find(\".k-grid-content\").css({ height: AUTO, width: AUTO, overflow: \"visible\" });\n               clone.find('> table, .k-grid-content > table, .k-grid-footer table').css({ height: AUTO, width: \"100%\", overflow: \"visible\" });\n               clone.find(\".k-grid-pager, .k-grid-toolbar, .k-grouping-header\").remove();\n               clone.find(\".k-grid-header, .k-grid-footer, .k-auto-scrollable\").css({ paddingRight: 0 });\n\n               this._initPDFProgress(progress);\n\n               var body = clone.find('> table > tbody, .k-grid-content > table > tbody').first().empty();\n               var startingPage = dataSource.page();\n\n               function resolve() {\n                   if (allPages && startingPage !== undefined$1) {\n                       dataSource.one(\"change\", draw);\n                       dataSource.page(startingPage);\n                   } else {\n                       grid.refresh();\n                       draw();\n                   }\n               }\n\n               function draw() {\n                   cont.appendTo(document.body);\n                   var options = $.extend({}, grid.options.pdf, {\n                       _destructive: true,\n                       progress: function(p) {\n                           progress.notify({\n                               page: p.page,\n                               pageNumber: p.pageNum,\n                               progress: 0.5 + p.pageNum / p.totalPages / 2,\n                               totalPages: p.totalPages\n                           });\n                       }\n                   });\n                   kendo.drawing.drawDOM(clone, options)\n                       .always(function() {\n                           cont.remove();\n                       })\n                       .then(function(group) {\n                           result.resolve(group);\n                           grid.toggleUnexportableColumns(grid.columns, true);\n                       })\n                       .fail(function(err) {\n                           result.reject(err);\n                       });\n               }\n\n               function renderPage() {\n                   var pageNum = dataSource.page();\n                   var totalPages = allPages ? dataSource.totalPages() : 1;\n                   body.append(origBody.children(\"tr:not(.k-detail-row)\"));\n                   if (pageNum < totalPages) {\n                       dataSource.page(pageNum + 1);\n                   } else {\n                       dataSource.unbind(\"change\", renderPage);\n                       resolve();\n                   }\n               }\n\n               if (allPages) {\n                   dataSource.bind(\"change\", renderPage);\n                   dataSource.page(1);\n               } else {\n                   renderPage();\n               }\n\n               return result.promise();\n           };\n\n           Grid.prototype.toggleUnexportableColumns = function(columns, restore) {\n               var length = columns.length;\n               var column;\n               var exportable;\n               var visibleInExport;\n               var visibleInExportOnly;\n\n               for (var i = 0; i < length; i++) {\n                   column = columns[i];\n                   exportable = column.exportable;\n                   if (!restore) {\n                       if (typeof column.exportable === \"object\") {\n                           exportable = column.exportable.pdf;\n                       }\n\n                       visibleInExport = !column.hidden && exportable !== false;\n                       visibleInExportOnly = column.hidden && exportable === true;\n                       exportable = visibleInExport || visibleInExportOnly;\n\n                       if (!exportable && !column.hidden) {\n                           column._toggledDuringExport = true;\n                           this.hideColumn(column);\n                       } else if (exportable && column.hidden) {\n                           column._toggledDuringExport = true;\n                           this.showColumn(column);\n                       } else if (exportable && column.columns) {\n                           this.toggleUnexportableColumns(column.columns);\n                       }\n                   } else {\n                       if (column._toggledDuringExport) {\n                           column._toggledDuringExport = false;\n\n                           if (column.hidden) {\n                               this.showColumn(column);\n                           } else {\n                               this.hideColumn(column);\n                           }\n                       } else if (column.columns) {\n                           this.toggleUnexportableColumns(column.columns, restore);\n                       }\n                   }\n               }\n           };\n\n           Grid.prototype._drawPDF = function(progress) {\n               var grid = this;\n\n               if (grid.options.pdf.paperSize && grid.options.pdf.paperSize != AUTO) {\n                   return grid._drawPDF_autoPageBreak(progress);\n               }\n\n               var result = new $.Deferred();\n               var dataSource = grid.dataSource;\n               var allPages = grid.options.pdf.allPages;\n\n               this._initPDFProgress(progress);\n\n               // This group will be our document containing all pages\n               var doc = new kendo.drawing.Group();\n               var startingPage = dataSource.page();\n\n               function resolve() {\n                   if (allPages && startingPage !== undefined$1) {\n                       dataSource.unbind(\"change\", exportPage);\n                       dataSource.one(\"change\", function() {\n                           result.resolve(doc);\n                       });\n\n                       dataSource.page(startingPage);\n                   } else {\n                       result.resolve(doc);\n                   }\n               }\n\n               function exportPage() {\n                    grid.toggleUnexportableColumns(grid.columns);\n                    grid._drawPDFShadow({\n                        width: grid.wrapper.width()\n                    }, {\n                        avoidLinks: grid.options.pdf.avoidLinks\n                    })\n                    .done(function(group) {\n                        var pageNum = dataSource.page();\n                        var totalPages = allPages ? dataSource.totalPages() : 1;\n\n                        var args = {\n                            page: group,\n                            pageNumber: pageNum,\n                            progress: pageNum / totalPages,\n                            totalPages: totalPages\n                        };\n\n                        grid.toggleUnexportableColumns(grid.columns, true);\n                        progress.notify(args);\n                        doc.append(args.page);\n\n                        if (pageNum < totalPages) {\n                            dataSource.page(pageNum + 1);\n                        } else {\n                            resolve();\n                        }\n                    })\n                    .fail(function(err) {\n                        result.reject(err);\n                    });\n                }\n\n                if (allPages) {\n                    dataSource.bind(\"change\", exportPage);\n                    dataSource.page(1);\n                } else {\n                    exportPage();\n                }\n\n                return result.promise();\n            };\n\n            Grid.prototype._initPDFProgress = function(deferred) {\n               var loading = $(\"<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>\");\n               loading.prepend(this.wrapper.clone().css({\n                   position: \"absolute\", top: 0, left: 0\n               }));\n\n               this._pdfInitialized = true;\n               this.wrapper.append(loading);\n\n               var pb = $(\"<div class='k-loading-pdf-progress'>\")\n               .appendTo(loading)\n               .kendoProgressBar({\n                   type: \"chunk\",\n                   chunkCount: 10,\n                   min: 0,\n                   max: 1,\n                   value: 0\n               }).data(\"kendoProgressBar\");\n\n               deferred.progress(function(e) {\n                   pb.value(e.progress);\n               })\n               .always(function() {\n                   kendo.destroy(loading);\n                   loading.remove();\n               });\n            };\n       }\n\n       function syncTableHeight(table1, table2) {\n           table1 = table1[0];\n           table2 = table2[0];\n\n           if (table1.rows.length !== table2.rows.length) {\n               var lockedHeigth = table1.offsetHeight;\n               var tableHeigth = table2.offsetHeight;\n\n               var row;\n               var diff;\n               if (lockedHeigth > tableHeigth) {\n                   row = table2.rows[table2.rows.length - 1];\n\n                   if (filterRowRegExp.test(row.className)) {\n                       row = table2.rows[table2.rows.length - 2];\n                   }\n\n                   diff = lockedHeigth - tableHeigth;\n               } else {\n                   row = table1.rows[table1.rows.length - 1];\n\n                   if (filterRowRegExp.test(row.className)) {\n                       row = table1.rows[table1.rows.length - 2];\n                   }\n\n                   diff = tableHeigth - lockedHeigth;\n               }\n               row.style.height = row.offsetHeight + diff + PX;\n           }\n       }\n\n       function adjustRowHeight(row1, row2) {\n           var height;\n           var offsetHeight1 = row1.offsetHeight;\n           var offsetHeight2 = row2.offsetHeight;\n\n           if (offsetHeight1 > offsetHeight2) {\n               height = offsetHeight1 + PX;\n           } else if (offsetHeight1 < offsetHeight2) {\n               height = offsetHeight2 + PX;\n           }\n\n           if (height) {\n               row1.style.height = row2.style.height = height;\n           }\n       }\n\n       function getCommand(commands, name) {\n           var idx, length, command;\n\n           if (typeof commands === STRING && commands === name) {\n              return commands;\n           }\n\n           if (isPlainObject(commands) && commands.name === name) {\n               return commands;\n           }\n\n           if (isArray(commands)) {\n               for (idx = 0, length = commands.length; idx < length; idx++) {\n                   command = commands[idx];\n\n                   if ((typeof command === STRING && command === name) || (command.name === name)) {\n                       return command;\n                   }\n               }\n           }\n           return null;\n       }\n\n       function compareElements(element, toCompare) {\n           if (element.length !== toCompare.length) {\n               return false;\n           }\n\n           for (var i = 0; i < element.length; i++) {\n               if (element[i] !== toCompare[i]) {\n                   return false;\n               }\n           }\n\n           return true;\n       }\n\n       function focusTable(table, direct) {\n           if (!table || table.length === 0) {\n               return;\n           }\n\n           if (direct === true) {\n               table = $(table);\n               var scrollLeft = kendo.scrollLeft(table.parent());\n\n                kendo.focusElement(table);\n                kendo.scrollLeft(table.parent(), scrollLeft);\n            } else {\n                $(table).one(\"focusin\", function(e) { e.preventDefault(); }).trigger(\"focus\");\n            }\n        }\n\n       function isColumnGroupable(grid, column) {\n           return grid.options.groupable && (column.groupable || column.groupable === undefined$1);\n       }\n\n       function isGroupedBy(groups, field) {\n           return !!$.grep(groups, function(item) {\n               return item.field === field;\n           }).length;\n       }\n\n       function isColumnEditable(column, model) {\n           if (!column.field || column.selectable) {\n               return false;\n           }\n           if (model.editable && !model.editable(column.field)) {\n               return false;\n           }\n           if (column.editable && !column.editable(model)) {\n               return false;\n           }\n           return true;\n       }\n\n       function isInputElement(element) {\n           return $(element).is(\":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on\");\n       }\n\n        function tableClick(e) {\n            var that = this,\n                currentTarget = $(e.currentTarget),\n                isHeader = currentTarget.is(\"th\"),\n                table = this.table.add(this.lockedTable),\n                headerTable = this.thead.parent().add($(\">table\", this.lockedHeader)),\n                isInput = isInputElement(e.target),\n                preventScroll = $(e.target).is('.k-checkbox'),\n                target = $(e.target),\n                currentTable = currentTarget.closest(\"table\")[0];\n\n            if (isInput && currentTarget.find(kendo.roleSelector(\"filtercell\")).length) {\n                this._setCurrent(currentTarget);\n                return;\n            }\n\n            if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n                return;\n            }\n\n            if (target.is(CARET_ALT_RIGHT + \",\" + CARET_ALT_DOWN)) {\n                return;\n            }\n\n            if (this.options.navigatable) {\n                this._setCurrent(currentTarget, false, preventScroll);\n            }\n\n            if (isHeader || !isInput) {\n                setTimeout(function() {\n                    var activeEl = $(kendo._activeElement());\n                    if ((activeEl.hasClass(\"k-widget\") || activeEl.hasClass(\"k-dropdownlist\")) && !activeEl.hasClass(\"k-grid-pager\")) {\n                        return;\n                    }\n\n                    //Only if input element is not selected yet and it is not descendant of the grid's table\n                    if (that.table && (activeEl.is(CHECKBOXINPUT) || !isInputElement(kendo._activeElement()) || !$.contains(currentTable, kendo._activeElement()))) {\n                        //DOMElement.focus() only for header, because IE doesn't really focus the table\n                        focusTable(that.table[0], true);\n                    }\n                });\n            }\n\n            if (isHeader && !kendo.support.touch) {\n                e.preventDefault(); //if any problem occurs, call preventDefault only for the clicked header links\n            }\n        }\n\n       function leftMostPosition(element, rtl) {\n           if (!rtl) {\n               return 0;\n           }\n\n           var result = 0;\n\n           if (kendo.support.browser.webkit) {\n               result = element.width();\n           }\n\n           return result;\n       }\n\n       function parseVirtualSettings(options) {\n            var asLowerString;\n\n            if (typeof options === \"string\") {\n                asLowerString = options.toLowerCase();\n                if (asLowerString === \"true\") {\n                    return {\n                        rows: true\n                    };\n                } else {\n                    return {\n                        rows: asLowerString.indexOf(\"rows\") > -1,\n                        columns: asLowerString.indexOf(\"columns\") > -1\n                    };\n                }\n\n            } else if (options === true) {\n                return {\n                    rows: true\n                };\n            }\n       }\n\n       function isElementVisibleInWrapper(wrapper, element) {\n           var offsetTop;\n           var halfHeight;\n\n           if (!wrapper) {\n             return false;\n           }\n\n           element = $(element);\n\n           if (element[0] && contains(wrapper[0], element[0])) {\n               offsetTop = element.offset().top - wrapper.offset().top;\n               halfHeight = element.outerHeight() / 2;\n\n               if ((offsetTop >= 0 || math.abs(offsetTop) <= halfHeight) && (math.floor(offsetTop + halfHeight) <= wrapper.height())) {\n                   return true;\n               }\n           }\n\n           return false;\n       }\n\n       function isInEdit(cell) {\n           return cell &&\n               (cell.hasClass(\"k-edit-cell\") ||\n                cell.parent().hasClass(\"k-grid-edit-row\"));\n       }\n\n        function groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, templateColspan, groupData, level, text, expanded, group, isGroupPaged) {\n            var html;\n\n            if (groupHeaderColumnTemplate) {\n                html = groupHeaderColumnTemplate(extend({}, groupData, {\n                    groupCells: level,\n                    colspan: templateColspan,\n                    text: text\n                }));\n            } else {\n                html = groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n            }\n\n            return html;\n        }\n\n       function groupCellBuilder(headerTemplateIndex) {\n        return function (ref) {\n           var colspan = ref.colspan;\n           var text = ref.text;\n\n           return \"<td class=\\\"k-table-td\\\" colspan=\\\"\" + (colspan + headerTemplateIndex) + \"\\\">\" +\n        '<p class=\"k-reset\">' +\n            kendo.ui.icon($((\"<a href=\\\"\\\\#\\\" tabindex=\\\"-1\\\" \" + ARIA_LABEL + \"=\\\"\" + COLLAPSE + \"\\\"></a>\")), { icon: \"caret-alt-down\" }) + text +\n        \"</p></td>\" + (new Array(colspan + headerTemplateIndex).join(\"<td hidden group-header-spanned-hidden></td>\"));\n        };\n       }\n\n       function groupCellLockedContentBuilder(headerTemplateIndex) {\n        return '<td class=\"k-table-td\" colspan=\"' + headerTemplateIndex + '\">' +\n        \"<p class=\\\"k-reset\\\">&nbsp;</p></td>\" + (new Array(headerTemplateIndex).join(\"<td hidden group-header-spanned-hidden></td>\"));\n       }\n\n       function groupRowBuilder(colspan, level, text, expanded, uid, includeAdditionalData, isRtl) {\n        return '<tr ' + (includeAdditionalData ? 'data-group-uid=\"' + uid + '\"' : '') + 'class=\"k-table-group-row k-grouping-row k-table-row\">' + groupCells(level) +\n            '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"' + !!expanded + '\">' +\n            '<p class=\"k-reset\">' +\n            kendo.ui.icon($('<a href=\"#\" tabindex=\"-1\" ' + ARIA_LABEL + '=\"' + (expanded ? COLLAPSE : EXPAND) + '\"></a>'), { icon: (expanded ? 'caret-alt-down' : (\"caret-alt-\" + (isRtl ? 'left' : 'right'))) }) + text +\n        \"</p></td>\" + (new Array(colspan).join(\"<td hidden group-header-spanned-hidden></td>\")) + \"</tr>\";\n       }\n\n       function groupRowLockedContentBuilder(colspan) {\n        return '<tr class=\"k-table-group-row k-grouping-row k-table-row\">' +\n            '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"true\">' +\n            \"<p class=\\\"k-reset\\\">&nbsp;</p></td>\" + (new Array(colspan).join(\"<td hidden group-header-spanned-hidden></td>\")) + \"</tr>\";\n       }\n\n       function toggleRow(row, visible) {\n           row = $(row)[0];\n           if (visible) {\n               row.style.display = \"\";\n           } else {\n               row.style.display = NONE;\n           }\n       }\n\n       function htmlEncode(value, backslashEscapeQuotes) {\n           var ampRegExp = /&/g,\n               ltRegExp = /</g,\n               quoteRegExp = /\"/g,\n               aposRegExp = /'/g,\n               gtRegExp = />/g;\n\n           return (\"\" + value)\n               .replace(ampRegExp, \"&amp;\")\n               .replace(ltRegExp, \"&lt;\")\n               .replace(gtRegExp, \"&gt;\")\n               .replace(quoteRegExp, function(match) {\n                   if (backslashEscapeQuotes) {\n                       return \"\\\\\" + match;\n                   }\n                   return \"&quot;\";\n               })\n               .replace(aposRegExp, \"&#39;\");\n       }\n\n       function getTitle(field, columns) {\n            return columns.filter(function(col) {\n                return col.field === field;\n            })[0].title || field;\n        }\n\n        function exportDataSort(a, b) {\n            return this.dataSource.indexOf(this.dataSource.getByUid(a.uid)) - this.dataSource.indexOf(this.dataSource.getByUid(b.uid));\n        }\n\n        function isExcelExportableColumn(column) {\n            return !(column.exportable === false || (column.exportable && column.exportable.excel === false));\n        }\n\n       ui.plugin(Grid);\n       ui.plugin(VirtualScrollable);\n\n       extend(kendo.ui.grid, {\n           defaultBodyContextMenu: defaultBodyContextMenu,\n           defaultHeadContextMenu: defaultHeadContextMenu,\n           defaultGroupsContextMenu: defaultGroupsContextMenu\n       });\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}