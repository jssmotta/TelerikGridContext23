{"version":3,"file":"kendo.treelist.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendotreelist","js","this","$","undefined$1","data","kendo","encode","htmlEncode","kendoDom","dom","kendoDomElement","element","kendoTextElement","text","kendoHtmlElement","html","outerWidth","_outerWidth","keys","extend","F10","outerHeight","_outerHeight","ui","DataBoundWidget","DataSource","ObservableArray","Query","Model","browser","support","kendoTemplate","template","activeElement","_activeElement","touchDevice","touch","isArray","Array","map","grep","inArray","isPlainObject","push","prototype","STRING","CHANGE","ITEM_CHANGE","ERROR","PROGRESS","DOT","NS","CLICK","BEFORE_EDIT","EDIT","PAGE","SAVE","SAVE_CHANGES","EXPAND","COLLAPSE","CELL_CLOSE","REMOVE","DATA_CELL","FILTER_CELL","DATABINDING","DATABOUND","CANCEL","TABINDEX","FILTERMENUINIT","FILTERMENUOPEN","COLUMNHIDE","COLUMNSHOW","COLUMNREORDER","COLUMNRESIZE","COLUMNMENUINIT","COLUMNMENUOPEN","COLUMNLOCK","COLUMNUNLOCK","FILTER","NAVIGATE","SORT","PARENTIDFIELD","DRAGSTART","DRAG","DROP","DRAGEND","NAVROW","NAVCELL","NAVHEADER","NORECORDSCLASS","ITEMROW","isRtl","CHECKBOX","CHECKBOXINPUT","SELECTCOLUMNTMPL","SELECTCOLUMNHEADERTMPL","SELECTED","whitespaceRegExp","filterRowRegExp","RegExp","ICON_EXPAND_COLLAPSE_SELECTOR","ARIA_LABEL","ARIA_ACTIVEDESCENDANT","classNames","wrapper","header","button","alt","editCell","editRow","dirtyCell","group","toolbar","gridToolbar","gridHeader","gridHeaderWrap","gridContent","gridContentWrap","gridFilter","footerTemplate","focused","loading","refresh","retry","selected","status","link","filterable","icon","iconFilter","iconCollapse","iconExpand","iconHidden","iconPlaceHolder","input","dropPositions","dropTop","dropBottom","dropAdd","dropMiddle","dropDenied","dragStatus","dragClue","dragClueText","headerCellInner","columnTitle","defaultCommands","create","className","methodName","createchild","destroy","edit","update","canceledit","cancel","save","excel","pdf","search","ref","message","iconClass","TreeView","Class","init","options","that","defaultParentId","idField","parentIdField","childrenMap","dataItem","dataItemId","dataItemParentId","dataLength","length","_childrenMap","i","idsMap","_idMap","dataMaps","_dataMaps","children","ids","rootNodes","removeCollapsedSubtreesFromRootNodes","prunedTree","result","maxDepth","Infinity","removeCollapsedSubtrees","concat","rootNode","childIdx","expanded","isUndefined","TreeQuery","constructor","process","inPlace","total","filteredChildrenMap","view","prunedData","query","sort","normalizeGroup","normalizeSort","filterCallback","filter","skip","take","toArray","processFromRootNodes","range","TreeListModel","id","parentId","fields","type","nullable","value","fn","call","_loaded","get","accept","set","field","initiator","loaded","shouldSerialize","is","object","not","func","base","model","TreeListDataSource","_getDataMaps","schema","modelBase","_addRange","_createNewModel","fromModel","_modelParentIdField","_isPageable","_shouldWrap","_push","operation","_readData","_getData","_data","newData","toJSON","_replaceData","source","target","sourceLength","_readAggregates","_aggregateResult","reader","aggregates","_defaultParentId","read","_modelOptions","_skip","_page","_collapsedTotal","remove","root","_removeChildData","_removeFromDataMaps","removePristine","pageable","_getChildrenMap","items","_subtree","shouldRemovePristine","removedItems","_removeItems","pushDestroy","insert","index","newModel","_insertInDataMaps","_filterCallback","item","parent","_modelIdField","parentSubtree","_parentNode","unshift","parentNode","len","_observeView","_createTreeView","_initIdsMap","_idsMap","_getIdsMap","_getFilteredChildrenMap","filteredChildren","_setFilteredChildrenMap","_initDataMaps","_initChildrenMapForParent","_defaultTreeModelOptions","modelOptions","_defaultDataItemType","ObservableObject","_calculateAggregates","subtree","pageableChildrenMap","aggregate","bind","_queryProcess","_processPageableQuery","hasLoadedChildren","hasChildren","slice","_processTreeQuery","_replaceWithObservedData","_processDataItemsState","_replaceItemsInDataMaps","dataToAggregate","_dataToAggregate","_replaceInMapWithObservedData","_calculateCollapsedTotal","firstDataItem","_parentNodes","observableArray","parents","directParent","itemType","viewIndex","_insertInIdsMap","_replaceInMap","replacement","itemInArray","itemIndex","indexOf","dataToReplace","replacementArray","itemToReplace","itemToReplaceId","dataItemIndex","observableItem","_getById","at","key","_insertInChildrenMap","itemId","splice","_removeFromIdsMap","_removeFromChildrenMap","_indexInChildrenMap","_itemIndexInMap","dataMap","uid","_isLastItemInView","_defaultPageableQueryOptions","page","pageSize","serverPaging","_updateTotalForAction","action","_updateCollapsedTotalForAction","parseInt","isNaN","_setFilterTotal","filterTotal","setDefaultValue","collapsedTotal","filteredData","_dataWithoutCollapsedSubtrees","_removeCollapsedSubtrees","_processDataItemState","_queueRequest","callback","_modelLoaded","childNodes","_modelError","e","_error","success","requestParams","_observe","_total","load","method","remote","serverSorting","serverFiltering","serverGrouping","serverAggregates","defaultPromise","Deferred","resolve","promise","done","fail","contains","child","rootId","_byParentId","defaultId","current","defaults","allChildNodes","directChildren","_rootNode","_pageableRootNodes","node","nodesWithoutParentInView","_nodesWithoutParentInView","_parentNodesNotInView","_parentInView","level","_pageableModelLevel","baseFilter","_pageableQueryOptions","_flatData","cancelChanges","_restorePageSizeAfterAddChild","_modelCanceled","_changesCanceled","_setAddChildPageSize","queryOptions","_addChildPageSize","_query","sync","then","_syncEnd","isCellVisible","style","display","sortCells","cells","indexAttr","attr","a","b","indexA","indexB","leafDataCells","container","rows","find","el","hasClass","add","last","createPlaceholders","spans","columnsWidth","cols","colWidth","width","idx","TreeListPager","Pager","name","totalPages","dataSource","_filter","Math","ceil","_createDataSource","Editor","Observable","events","_fields","columns","_initContainer","createEditable","renderForm","form","Form","buttonsTemplate","formData","change","editable","Editable","clearContainer","_isEditable","column","isColumnEditable","format","editor","editorOptions","label","title","end","close","empty","removeAttr","PopupEditor","_attachHandlers","cycleForm","open","window","modal","resizable","draggable","visible","formContent","append","_appendTemplate","_appendButtons","Tree","render","appendTo","Window","unescape","class","commandRenderer","closeHandler","_cancelProxy","_cancel","on","_saveProxy","_save","userTriggered","_detachHandlers","off","trigger","center","IncellEditor","TreeList","_events","_dataSource","_columns","_layout","_aria","_ariaId","_navigatable","_selectable","_sortable","_resizable","_filterable","_filterRow","_attachEvents","_toolbar","_scrollable","_reorderable","_columnMenu","_minScreenSupport","_draggable","_pageable","autoBind","fetch","_hasLockedColumns","widget","addClass","_resizeHandler","resize","notify","reorderable","clickMoveClick","move","_hasDragHandleColumn","_dragging","HierarchicalDragAndDrop","$angular","autoScroll","holdToDrag","itemSelector","allowedContainers","table","hintText","row","closest","join","destination","dest","src","itemFromTarget","first","tr","prevRow","prev","nextRow","next","sameLevel","content","dragstart","css","drag","drop","removeClass","dragend","originalSrcParentId","originalSrcIndex","position","isPrevented","insertBefore","insertAfter","dropHintContainer","eq","dropPositionFrom","dropHint","contents","dropHintElement","isAfterText","prevAll","nodeType","arguments","nodeData","referenceNode","insertAction","indexOffset","destIndex","nodeDataIndex","originalDestIndex","_unbindDataSource","_unbindDataChange","_destroyed","pop","_bindDataChange","_bindDataSource","_changeHandler","unbind","_refreshHandler","itemFor","tbody","_itemFor","lockedContent","lockedTable","scrollable","scrollables","thead","_wheelScroll","scrollLeft","scrollTop","wrapAll","touchScroller","movable","_touchScroller","sender","x","y","ctrlKey","delta","wheelDeltaY","lockedDiv","currentTarget","scrollHeight","clientHeight","preventDefault","one","_progress","messages","_showStatus","_render","error","currentIndex","isCurrentInHeader","_cancelEditor","_adjustHeight","navigatable","_isActiveInTable","max","cellIndex","_restoreCurrent","_checkBoxSelection","_deselectCheckRows","_angularFooters","command","footer","allAggregates","footerRows","_footerItems","_angularFooter","angular","elements","col","_items","dataItems","n","tmp","_showNoRecordsTemplate","noRecordsElement","scrollableNoGridHeightStyles","height","_contentTree","_lockedContentTree","noRows","applyStylesFromKendoAttributes","hide","_hideStatus","_hideNoRecordsTempalte","show","contentWrap","pagerHeight","pager","scrollbar","initialHeight","newHeight","offsetWidth","clientWidth","_resize","size","force","_applyLockedContainersWidth","hideMinScreenCols","minScreenResizeHandler","_iterateMinScreenCols","screenWidth","any","minWidth","minScreenWidth","hideColumn","showColumn","hidden","innerWidth","screen","_destroyColumnAttachments","_errorHandler","_progressHandler","_navigatableTables","_headertables","_current","_draggableInstance","selectable","_userEvents","_destroyEditor","_destroyPager","_autoExpandable","_dataSourceFetchProxy","lockedHeader","_statusTree","_headerTree","_lockedHeaderColsTree","_lockedContentColsTree","_lockedHeaderTree","sortable","columnMenu","requestFailed","dragHandleLabel","commands","sortHeader","filterCellTitle","hierarchy","renderAllRows","rowTemplate","altRowTemplate","getOptions","deepExtend","initialData","transport","setOptions","currentOptions","before","_setEvents","each","th","filterMenu","_toggle","expand","_isIncellEditable","closeCell","afterModelLoaded","_toggleData","_syncLockedContentHeight","always","_togglePageableData","_renderProgress","_refreshPager","collapse","_toggleChildren","event","tables","headerTables","_tableClick","_tableFocus","_tableBlur","_tableKeyDown","td","lockedColumnOffset","leafColumns","lockedColumns","active","_setCurrent","focusTable","newCurrent","preventTrigger","isIncellEditable","_updateCurrentAttr","_scrollCurrent","_lastCellIndex","tableContainer","isInLockedContainer","isInContent","scrollableContainer","_scrollTo","_relatedRow","_findCurrentCell","elementToLowercase","tagName","toLowerCase","isHorizontal","elementOffsetDir","containerScroll","containerOffsetDir","elementOffset","abs","offsetLeft","bottomDistance","ieCorrection","firefoxCorrection","msie","edge","mozilla","webkit","version","tbodyId","headerGroupId","footerGroupId","tableOwned","rowsCount","groupingHeader","gridId","tableTabindex","numberOfFixedRows","trailingColumns","_trailingColumns","virtual","virtualScroll","role","tabindex","_groups","_ariaRowIndex","_ariaColumnIndex","guid","toolbarLabel","groupingHeaderLabel","_ariaHeaderFooter","_ariaLockedContent","previousIndex","dataIndex","cellsIndex","dataVirtual","headerRows","lockedHeaderRows","firstIndex","Number","MAX_VALUE","lastIndex","lockedLastIndex","previousVirtual","nextVirtual","eachHeaderCell","j","cell","getAttribute","lockedParent","setAttribute","rowGroup","groupId","_ariaLocked","_cellId","lockedRows","ownedCells","_cellsIds","tableRows","_ariaAddHiddenColIndex","leafColsCount","_ariaRemoveHiddenColIndex","numberOfHeaderRows","bodyRows","totalNumberOfItems","previousItems","prefix","_currentDataIndex","lockedColumnsCount","_prevVerticalCell","rowIndex","cellSelector","parentColumnsCells","_nextVerticalCell","childColumnsCells","rowSpan","tmpIndex","currentRowCells","hiddenColumns","_verticalContainer","up","step","floor","_filterFocusable","headerId","replace","handled","canHandle","isDefaultPrevented","altKey","keyCode","DOWN","click","stopImmediatePropagation","UP","_moveUp","shiftKey","_moveDown","RIGHT","LEFT","_moveColumn","_handleExpand","_moveRight","_handleCollapse","_moveLeft","PAGEDOWN","_handlePageDown","PAGEUP","_handlePageUp","ENTER","F2","_handleEnterKey","ESC","_handleEscKey","HOME","_handleHome","END","_handleEnd","TAB","_handleTabKey","stopPropagation","isLeft","kendoReorderable","visibleColumns","flatColumnsInDomOrder","oldIndex","offset","newIndex","targetParentContainerIndex","reorderColumn","ctrl","rowContainer","isInLockedTable","isInBody","currentTable","blur","cancelRow","has","focusable","focus","_handleEditing","filterFocusable","document","_tabCycleStop","_tabNext","_preventPageSizeRestore","back","switchRow","nextAll","editContainer","isEdited","editedCell","isIE","incellEditing","nextFocusableCellRowIndex","nextFocusableCellIndex","currentFocusedCellRowIndex","currentFocusedCellIndex","opera","triggerHandler","saveRow","isHeader","headerTable","isInput","isInputElement","setTimeout","retryButton","UserEvents","press","_onPress","allowSelection","_commandClick","_search","_attachCellEditingEventHandlers","icons","multiple","_editCellEvent","isLockedCell","clearTimeout","_closeCellTimeout","relatedTarget","_commandByName","currentName","commandName","parentsUntil","_searchTimeOut","searchFields","expression","filters","logic","getColumnsFields","operator","_ensureExpandableColumn","expandable","expandableColumns","draggableColumns","encoded","lockedCols","Error","nonLockedColumns","normalizeColumns","_columnTemplates","_columnAttributes","_includeChildren","includeChildren","_checkboxClick","_headerCheckboxClick","headerAttributes","dirtyCellTemplate","_createDirtyColumnTemplate","dirtyIndicatorTemplate","_createIndicatorTemplate","headerTemplate","convertStyle","properties","declaration","split","trim","camelCase","attributes","_clearSortClasses","this$1$1","layoutTemplateFunction","layout","addBack","rtl","_initVirtualTrees","_renderCols","_renderHeader","_headerColsTree","_contentColsTree","_processToolbarItems","word","charAt","toUpperCase","imageClass","spriteCssClass","kendoToolBar","navigateOnTab","_lockedColumns","_nonLockedColumns","_templateColumns","_flushCache","_renderOptions","maps","hasFooterTemplate","viewChildrenMap","_dataToRender","_renderedModelLevel","uidAttr","select","_","_absoluteIndex","_angularItems","_clearRenderMap","buttonClass","_viewChildrenMap","_hasFooterTemplate","_trs","editedColumn","editedColumnIndex","isLockedTable","contentResized","_muteAngularRebind","_togglePagerVisibility","_setExpanderElement","expander","hiddenDivClass","hiddenDiv","toggle","progress","parentNotInView","parentNotInViewId","childId","parentsCopy","parentsNotInView","_markNodeAsNonRenderable","parentIndex","_skipRenderingMap","nodeId","_adjustRowsHeight","table1","table2","rows2","containers","containersLength","heights","offsetHeight1","offsetHeight","offsetHeight2","_ths","cellClasses","headerContent","leafs","ths","scope","colSpan","sortableTitle","_cols","_clearColsCache","_retrieveFirstColumn","_updateFirstColumnClass","_updateRowSpans","visibleChildColumns","_setColumnDataIndexes","_updateColumnCellIndex","updateCellIndex","_setParentsVisibility","predicate","p","columnParents","_prepareColumns","parentCell","parentRow","parentColumn","childRow","totalColSpan","_renderHeaderTree","tree","hasMultiColumnHeaders","rowsToRender","filterThs","_hasFilterRow","_filterThs","_syncLockedHeaderHeight","_updateFilterThs","refColumn","refIndex","currIndex","filterRowThs","thIndex","lockedWidth","nonLockedWidth","wrapperWidth","modelId","_edit","rowOptions","isAlt","_trFromTemplate","_tds","_td","_footerId","isFunction","parseRowTemplate","nodeName","toLocaleLowerCase","parseAttributes","test","nodeValue","_createCellElement","_isTextNode","spaceElements","iconElement","noop","c","renderer","editedColumnField","editColumn","iconType","columnHasEditCommand","ariaExpanded","dirty","dirtyFields","isDirtyColumn","cursor","_buildCommands","_cellContent","dirtyIndicator","_evalColumnTemplate","templateSettings","_customTemplateSettings","_dirtyIndicatorTemplate","columnTemplate","paramName","Template","_handleCommand","_button","buttonHTML","renderButton","_positionResizeHandle","left","headerWrap","leftMargin","invisibleSpace","leftBorderWidth","resizeHandle","rtlCorrection","cellWidth","buttons","which","indicatorWidth","columnResizeHandleWidth","halfResizeHandle","parseFloat","scrollWidth","top","val","locked","autoFitColumn","isLocked","visibleLocked","contentTable","footerTable","oldColumnWidth","newColumnWidth","totalWidth","oldWidth","newWidth","_adjustLockedHorizontalScrollBar","_syncLockedScroll","diff","lockedHeigth","tableHeigth","syncTableHeight","treelist","Resizable","handle","start","startLocation","location","columnWidth","rtlModifier","resizeend","sortableInstance","sortHandler","_sort","kendoColumnSorter","filterMenuInstance","filterInit","filterOpen","filterHandler","mode","kendoFilterMenu","settings","existingInstance","suggestDataSource","operators","customDataSource","cellOptions","enabled","values","delay","inputWidth","suggestionOperator","minLength","dataTextField","showOperators","kendoFilterCell","hasFiltering","columnsWithoutFiltering","_change","selectedValues","_uncheckCheckBoxes","_checkRows","_toggleHeaderCheckState","_isLocked","useAllItems","multi","Selectable","parseOptions","aria","continuousItems","_continuousItems","_selectableTarget","SPACEBAR","clear","_lastActive","selectRange","_firstSelectee","lockedItems","nonLockedItems","apply","related","clearSelection","prop","preventChange","checkBox","checked","parentGrid","getKendoTreeList","isSelecting","selector","ds","_sortHandler","setDataSource","getByUid","_isPopupEditable","_editMode","_createEditor","_cancelEdit","args","addRow","inlineEditing","_isInlineEditable","showNewModelInView","_insertAt","_firstEditableColumnIndex","removeRow","_shouldRestorePageSize","leafCols","fieldRenderer","_createIncellEditor","_editCell","isCancel","ns","row1","row2","adjustRowHeight","saveChanges","_toggleColumnVisibility","_findColumn","_adjustTablesWidth","Draggable","hint","prepend","Reorderable","dragOverContainers","_allowDragOverContainers","inSameContainer","sourceIndex","targetIndex","lockable","_reorderTrees","destSources","destContainer","destDomTree","sources","sourcesContainer","sourcesDomTree","depth","sourcesLeafs","destLeafs","reorderTaget","destThs","sourceDOM","sourceChildren","destColumn","findReorderTarget","_insertTree","domTr","_reorderHeader","rowsToAdd","destTarget","sourcesDepth","targetDepth","sourceLocked","destLocked","destRows","updateRowSpans","removeEmptyRows","rowspan","lockChanged","nonLockedColumnsLength","lockColumn","unlockColumn","menu","menuOptions","initHandler","_columnMenuInit","openHandler","_columnMenuOpen","hasLockableColumns","compare","pane","owner","closeCallback","filtering","kendoColumnMenu","_createPager","alwaysVisible","masterColumns","parentColumns","columnParent","targetLocked","findParentColumnWithChildren","parentIds","isVisible","headers","flatColumns","parentCellsWithChildren","prevCells","colSpanAttr","inserted","columnPosition","cellCounts","allColumns","temp","containerDOMtree","emptyRows","shouldRemove","direct","focusElement","ExcelMixin","PDFMixin","_drawPDF","treeList","paperSize","_drawPDF_autoPageBreak","allPages","_initPDFProgress","doc","drawing","Group","startingPage","exportPage","_drawPDFShadow","avoidLinks","pageNum","pageNumber","err","reject","deferred","clone","progressBar","kendoProgressBar","chunkCount","min","origBody","cont","overflow","paddingRight","body","draw","_destructive","drawDOM","renderPage","plugin","jQuery"],"sources":["kendo.treelist.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.dom.js'), require('kendo.data.js'), require('kendo.columnsorter.js'), require('kendo.editable.js'), require('kendo.window.js'), require('kendo.filtermenu.js'), require('kendo.columnmenu.js'), require('kendo.selectable.js'), require('kendo.resizable.js'), require('kendo.treeview.draganddrop.js'), require('kendo.pager.js'), require('kendo.filtercell.js'), require('kendo.textbox.js'), require('kendo.form.js'), require('kendo.toolbar.js'), require('kendo.icons.js'), require('kendo.reorderable.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.dom', 'kendo.data', 'kendo.columnsorter', 'kendo.editable', 'kendo.window', 'kendo.filtermenu', 'kendo.columnmenu', 'kendo.selectable', 'kendo.resizable', 'kendo.treeview.draganddrop', 'kendo.pager', 'kendo.filtercell', 'kendo.textbox', 'kendo.form', 'kendo.toolbar', 'kendo.icons', 'kendo.reorderable'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendotreelist = global.kendotreelist || {}, global.kendotreelist.js = factory()));\n})(this, (function () {\n    var __meta__ = {\n        id: \"treelist\",\n        name: \"TreeList\",\n        category: \"web\",\n        description: \"The TreeList widget displays self-referencing data and offers rich support for interacting with data, sorting, filtering, and selection.\",\n        depends: [ \"dom\", \"data\", \"pager\", \"toolbar\", \"icons\", \"reorderable\" ],\n        features: [ {\n            id: \"treelist-sorting\",\n            name: \"Sorting\",\n            description: \"Support for column sorting\",\n            depends: [ \"columnsorter\" ]\n        }, {\n            id: \"treelist-filtering\",\n            name: \"Filtering\",\n            description: \"Support for record filtering\",\n            depends: [ \"filtermenu\" ]\n        }, {\n            id: \"treelist-columnmenu\",\n            name: \"Column menu\",\n            description: \"Support for header column menu\",\n            depends: [ \"columnmenu\" ]\n        }, {\n            id: \"treelist-editing\",\n            name: \"Editing\",\n            description: \"Support for record editing\",\n            depends: [ \"editable\", \"window\", \"textbox\", \"form\" ]\n        }, {\n            id: \"treelist-selection\",\n            name: \"Selection\",\n            description: \"Support for row selection\",\n            depends: [ \"selectable\" ]\n        }, {\n            id: \"treelist-column-resize\",\n            name: \"Column resizing\",\n            description: \"Support for column resizing\",\n            depends: [ \"resizable\" ]\n        }, {\n            id: \"treelist-dragging\",\n            name: \"Drag & Drop\",\n            description: \"Support for drag & drop of rows\",\n            depends: [ \"treeview.draganddrop\" ]\n        }, {\n            id: \"treelist-excel-export\",\n            name: \"Excel export\",\n            description: \"Export data as Excel spreadsheet\",\n            depends: [ \"excel\" ]\n        }, {\n            id: \"treelist-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export data as PDF\",\n            depends: [ \"pdf\", \"drawing\" ]\n        }, {\n            id: \"treelist-paging\",\n            name: \"Paging\",\n            description: \"Support for treelist paging\",\n            depends: [ \"pager\" ]\n        } ]\n    };\n\n    (function($, undefined$1) {\n        var data = kendo.data;\n        var encode = kendo.htmlEncode;\n        var kendoDom = kendo.dom;\n        var kendoDomElement = kendoDom.element;\n        var kendoTextElement = kendoDom.text;\n        var kendoHtmlElement = kendoDom.html;\n        var outerWidth = kendo._outerWidth;\n        var keys = $.extend({ F10: 121 }, kendo.keys);\n        var outerHeight = kendo._outerHeight;\n        var ui = kendo.ui;\n        var DataBoundWidget = ui.DataBoundWidget;\n        var DataSource = data.DataSource;\n        var ObservableArray = data.ObservableArray;\n        var Query = data.Query;\n        var Model = data.Model;\n        var browser = kendo.support.browser;\n        var kendoTemplate = kendo.template;\n        var activeElement = kendo._activeElement;\n        var touchDevice = kendo.support.touch;\n\n        var isArray = Array.isArray;\n        var extend = $.extend;\n        var map = $.map;\n        var grep = $.grep;\n        var inArray = $.inArray;\n        var isPlainObject = $.isPlainObject;\n\n        var push = Array.prototype.push;\n\n        var STRING = \"string\";\n        var CHANGE = \"change\";\n        var ITEM_CHANGE = \"itemChange\";\n        var ERROR = \"error\";\n        var PROGRESS = \"progress\";\n        var DOT = \".\";\n        var NS = \".kendoTreeList\";\n        var CLICK = \"click\";\n        var INPUT = \"input\";\n        var BEFORE_EDIT = \"beforeEdit\";\n        var EDIT = \"edit\";\n        var PAGE = \"page\";\n        var PAGE_CHANGE = \"pageChange\";\n        var SAVE = \"save\";\n        var SAVE_CHANGES = \"saveChanges\";\n        var EXPAND = \"expand\";\n        var COLLAPSE = \"collapse\";\n        var CELL_CLOSE = \"cellClose\";\n        var REMOVE = \"remove\";\n        var DATA_CELL = \"td:not(.k-group-cell):not(.k-hierarchy-cell):visible,th:not(.k-group-cell):not(.k-hierarchy-cell):visible\";\n        var FILTER_CELL = \".k-filter-row td:not(.k-group-cell):not(.k-hierarchy-cell):visible,.k-filter-row th:not(.k-group-cell):not(.k-hierarchy-cell):visible\";\n        var DATABINDING = \"dataBinding\";\n        var DATABOUND = \"dataBound\";\n        var CANCEL = \"cancel\";\n        var TABINDEX = \"tabIndex\";\n        var FILTERMENUINIT = \"filterMenuInit\";\n        var FILTERMENUOPEN = \"filterMenuOpen\";\n        var COLUMNHIDE = \"columnHide\";\n        var COLUMNSHOW = \"columnShow\";\n        var HEADERCELLS = \"th.k-header\";\n        var COLUMNREORDER = \"columnReorder\";\n        var COLUMNRESIZE = \"columnResize\";\n        var COLUMNMENUINIT = \"columnMenuInit\";\n        var COLUMNMENUOPEN = \"columnMenuOpen\";\n        var COLUMNLOCK = \"columnLock\";\n        var COLUMNUNLOCK = \"columnUnlock\";\n        var FILTER = \"filter\";\n        var NAVIGATE = \"navigate\";\n        var SORT = \"sort\";\n        var PARENTIDFIELD = \"parentId\";\n        var DRAGSTART = \"dragstart\";\n        var DRAG = \"drag\";\n        var DROP = \"drop\";\n        var DRAGEND = \"dragend\";\n        var NAVROW = \"tr:visible\";\n        var NAVCELL = \"td:visible\";\n        var NAVHEADER = \"th:visible\";\n        var NORECORDSCLASS = \"k-grid-norecords\";\n        var ITEMROW = \"tr:not(.k-footer-template):visible\";\n        var isRtl = false;\n        var HEIGHT = \"height\";\n        var INCELL = \"incell\";\n        var INLINE = \"inline\";\n        var POPUP = \"popup\";\n        var TABLE = \"table\";\n        var CHECKBOX = \"k-checkbox\";\n        var CHECKBOXINPUT = \"input[data-role='checkbox'].\" + CHECKBOX;\n        var SELECTCOLUMNTMPL = '<input class=\"' + CHECKBOX + ' k-checkbox-md k-rounded-md\" data-role=\"checkbox\" aria-label=\"Select row\" aria-checked=\"false\" type=\"checkbox\">';\n        var SELECTCOLUMNHEADERTMPL = '<input class=\"' + CHECKBOX + ' k-checkbox-md k-rounded-md\" data-role=\"checkbox\" aria-label=\"Select all rows\" aria-checked=\"false\" type=\"checkbox\">';\n        var DRAGHANDLECOLUMNTMPL = function () { return kendo.ui.icon(\"reorder\"); };\n        var SELECTED = \"k-selected\";\n        var whitespaceRegExp = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\";\n        var filterRowRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-filter-row)\" + \"(\" + whitespaceRegExp + \"|$)\");\n        var ICON_REFRESH_SELECTOR = \"[class*='-i-arrow-rotate-cw']\";\n        var ICON_EXPAND_COLLAPSE_SELECTOR = \"[ref-treelist-expand-collapse-icon]\";\n        var CARET_ALT_RIGHT = \"caret-alt-right\";\n        var CARET_ALT_LEFT = \"caret-alt-left\";\n        var ARIA_LABEL = \"aria-label\";\n\n        var ID = \"id\",\n            PX = \"px\",\n            TR = \"tr\",\n            DIV = \"div\",\n\n            ARIA_LABEL = \"aria-label\",\n            ARIA_OWNS = \"aria-owns\",\n            ARIA_ROWCOUNT = \"aria-rowcount\",\n            ARIA_COLCOUNT = \"aria-colcount\",\n            ARIA_CONTROLS = \"aria-controls\",\n            ARIA_COLINDEX = \"aria-colindex\",\n            ARIA_ROWINDEX = \"aria-rowindex\",\n            ARIA_EXPANDED = \"aria-expanded\",\n            ARIA_CHECKED = \"aria-checked\",\n            ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n            ROLE = \"role\",\n            NONE = \"none\",\n            ROW = \"row\",\n            ROWGROUP = \"rowgroup\",\n            COLUMNHEADER = \"columnheader\",\n            GRIDCELL = \"gridcell\";\n\n        var classNames = {\n            wrapper: \"k-treelist k-grid k-grid-md k-grid-display-block\",\n            header: \"k-header k-table-th\",\n            button: \"k-button\",\n            alt: \"k-alt k-table-alt-row\",\n            editCell: \"k-edit-cell\",\n            editRow: \"k-grid-edit-row\",\n            dirtyCell: \"k-dirty-cell\",\n            group: \"k-treelist-group k-table-group-row\",\n            toolbar: \"k-toolbar\",\n            gridToolbar: \"k-grid-toolbar\",\n            gridHeader: \"k-grid-header\",\n            gridHeaderWrap: \"k-grid-header-wrap\",\n            gridContent: \"k-grid-content\",\n            gridContentWrap: \"k-grid-content\",\n            gridFilter: \"k-grid-filter-menu\",\n            footerTemplate: \"k-footer-template\",\n            focused: \"k-focus\",\n            loading: \"k-i-loading\",\n            refresh: \"arrow-rotate-cw\",\n            retry: \"k-request-retry\",\n            selected: \"k-selected\",\n            status: \"k-status\",\n            link: \"k-link\",\n            filterable: \"k-filterable\",\n            icon: \"k-icon\",\n            iconFilter: \"filter\",\n            iconCollapse: \"caret-alt-down\",\n            iconExpand: \"caret-alt-right\",\n            iconHidden: \"k-i-none\",\n            iconPlaceHolder: \"k-treelist-toggle k-icon k-svg-icon k-i-none\",\n            input: \"k-input\",\n            dropPositions: \"k-i-insert-top k-i-insert-bottom k-i-plus k-i-insert-middle\",\n            dropTop: \"insert-top\",\n            dropBottom: \"insert-bottom\",\n            dropAdd: \"plus\",\n            dropMiddle: \"insert-middle\",\n            dropDenied: \"cancel\",\n            dragStatus: \"k-drag-status\",\n            dragClue: \"k-drag-clue\",\n            dragClueText: \"k-clue-text\",\n            headerCellInner: \"k-cell-inner\",\n            columnTitle: \"k-column-title\"\n        };\n\n        var defaultCommands = {\n            create: {\n                icon: \"plus\",\n                className: \"k-grid-add\",\n                methodName: \"addRow\"\n            },\n            createchild: {\n                icon: \"plus\",\n                className: \"k-grid-add\",\n                methodName: \"addRow\"\n            },\n            destroy: {\n                icon: \"x\",\n                className: \"k-grid-remove-command\",\n                methodName: \"removeRow\"\n            },\n            edit: {\n                icon: \"pencil\",\n                className: \"k-button-solid-primary k-grid-edit-command\",\n                methodName: \"editRow\"\n            },\n            update: {\n                icon: \"save\",\n                className: \"k-button-solid-primary k-grid-save-command\",\n                methodName: \"saveRow\"\n            },\n            canceledit: {\n                icon: \"cancel-outline\",\n                className: \"k-grid-cancel-command\",\n                methodName: \"_cancelEdit\"\n            },\n            cancel: {\n                icon: \"cancel-outline\",\n                text: \"Cancel changes\",\n                className: \"k-grid-cancel-changes\",\n                methodName: \"cancelChanges\"\n            },\n            save: {\n                icon: \"check\",\n                text: \"Save changes\",\n                className: \"k-grid-save-changes\",\n                methodName: \"saveChanges\"\n            },\n            excel: {\n                icon: \"excel\",\n                className: \"k-grid-excel\",\n                methodName: \"saveAsExcel\"\n            },\n            pdf: {\n                icon: \"pdf\",\n                className: \"k-grid-pdf\",\n                methodName: \"saveAsPDF\"\n            },\n            search: {\n                template: function (ref) {\n                    var message = ref.message;\n\n                    return \"<span class='k-spacer'></span>\" +\n                \"<span class='k-searchbox k-input k-input-md k-rounded-md k-input-solid k-grid-search'>\" +\n                    kendo.ui.icon({ icon: \"search\", iconClass: \"k-input-icon\" }) +\n                    \"<input autocomplete='off' placeholder='\" + message + \"' title='\" + message + \"' aria-label='\" + message + \"' class='k-input-inner' />\" +\n                \"</span>\";\n        }\n            }\n        };\n\n        var TreeView = kendo.Class.extend({\n            init: function(data, options) {\n                var that = this;\n\n                that.data = data || [];\n                that.options = extend(that.options, options);\n            },\n\n            options: {\n                defaultParentId: null,\n                idField: \"id\",\n                parentIdField: PARENTIDFIELD\n            },\n\n            childrenMap: function() {\n                var that = this;\n                var childrenMap = {};\n                var dataLength = that.data.length;\n                var dataItem;\n                var dataItemId;\n                var dataItemParentId;\n                var idField = that.options.idField;\n                var parentIdField = that.options.parentIdField;\n\n                if (that._childrenMap) {\n                    return that._childrenMap;\n                }\n\n                for (var i = 0; i < dataLength; i++) {\n                    dataItem = this.data[i];\n                    dataItemId = dataItem[idField];\n                    dataItemParentId = dataItem[parentIdField];\n\n                    childrenMap[dataItemId] = childrenMap[dataItemId] || [];\n                    childrenMap[dataItemParentId] = childrenMap[dataItemParentId] || [];\n\n                    childrenMap[dataItemParentId].push(dataItem);\n                }\n\n                that._childrenMap = childrenMap;\n\n                return childrenMap;\n            },\n\n            idsMap: function() {\n                var that = this;\n                var idsMap = {};\n                var data = that.data;\n                var dataLength = data.length;\n                var dataItem;\n                var idField = that.options.idField;\n\n                if (that._idMap) {\n                    return that._idMap;\n                }\n\n                for (var i = 0; i < dataLength; i++) {\n                    dataItem = data[i];\n                    idsMap[dataItem[idField]] = dataItem;\n                }\n\n                that.idsMap = idsMap;\n                return idsMap;\n            },\n\n            dataMaps: function() {\n                var that = this;\n                var childrenMap = {};\n                var data = that.data;\n                var dataLength = data.length;\n                var idsMap = {};\n                var dataItem;\n                var dataItemId;\n                var dataItemParentId;\n                var idField = that.options.idField;\n                var parentIdField = that.options.parentIdField;\n\n                if (that._dataMaps) {\n                    return that._dataMaps;\n                }\n\n                for (var i = 0; i < dataLength; i++) {\n                    dataItem = data[i];\n                    dataItemId = dataItem[idField];\n                    dataItemParentId = dataItem[parentIdField];\n\n                    idsMap[dataItemId] = dataItem;\n\n                    childrenMap[dataItemId] = childrenMap[dataItemId] || [];\n                    childrenMap[dataItemParentId] = childrenMap[dataItemParentId] || [];\n                    childrenMap[dataItemParentId].push(dataItem);\n                }\n\n                that._dataMaps = {\n                    children: childrenMap,\n                    ids: idsMap\n                };\n\n                return that._dataMaps;\n            },\n\n            rootNodes: function() {\n                var that = this;\n                var data = that.data;\n                var defaultParentId = that.options.defaultParentId;\n                var dataLength = data.length;\n                var rootNodes = [];\n                var dataItem;\n                var parentIdField = that.options.parentIdField;\n\n                for (var i = 0; i < dataLength; i++) {\n                    dataItem = data[i];\n\n                    if (dataItem[parentIdField] === defaultParentId) {\n                        rootNodes.push(dataItem);\n                    }\n                }\n\n                return rootNodes;\n            },\n\n            removeCollapsedSubtreesFromRootNodes: function(options) {\n                options = options || {};\n                var that = this;\n                var rootNodes = that.rootNodes();\n                var result = [];\n                var prunedTree;\n\n                that._childrenMap = options.childrenMap = options.childrenMap || that.childrenMap();\n                options.maxDepth = options.maxDepth || Infinity;\n\n                for (var i = 0; i < rootNodes.length; i++) {\n                    prunedTree = that.removeCollapsedSubtrees(rootNodes[i], options);\n                    result = result.concat(prunedTree);\n                }\n\n                return result;\n            },\n\n            removeCollapsedSubtrees: function(rootNode, options) {\n                options = options || {};\n                var that = this;\n                var result = [];\n                var childIdx;\n                var prunedTree;\n                var childrenMap = options.childrenMap || {};\n                var maxDepth = options.maxDepth || Infinity;\n                var idField = that.options.idField;\n                var children = childrenMap[rootNode[idField]] || [];\n                var expanded = isUndefined(rootNode.expanded) ? options.expanded : rootNode.expanded;\n\n                result.push(rootNode);\n\n                if (children && expanded) {\n                    for (childIdx = 0; childIdx < children.length; childIdx++) {\n                        if (result.length >= maxDepth) {\n                            break;\n                        }\n\n                        prunedTree = that.removeCollapsedSubtrees(children[childIdx], options);\n                        result = result.concat(prunedTree);\n                    }\n                }\n\n                return result;\n            }\n        });\n\n        var TreeQuery = function(data) {\n            this.data = data || [];\n        };\n\n        TreeQuery.prototype = new Query();\n        TreeQuery.prototype.constructor = TreeQuery;\n\n        TreeQuery.process = function(data, options, inPlace) {\n            options = options || {};\n            var query = new TreeQuery(data);\n            var group = options.group;\n            var sort = Query.normalizeGroup(group || []).concat(Query.normalizeSort(options.sort || []));\n            var filterCallback = options.filterCallback;\n            var filter = options.filter;\n            var skip = options.skip;\n            var take = options.take;\n            var total;\n            var childrenMap;\n            var filteredChildrenMap;\n            var view;\n            var prunedData;\n\n            if (sort && inPlace) {\n                query = query.sort(sort, undefined$1, undefined$1, inPlace);\n            }\n\n            if (filter) {\n                query = query.filter(filter);\n\n                if (filterCallback) {\n                    query = filterCallback(query);\n                }\n\n                total = query.toArray().length;\n            }\n\n            if (sort && !inPlace) {\n                query = query.sort(sort);\n\n                if (group) {\n                    data = query.toArray();\n                }\n            }\n\n            if (options.processFromRootNodes) {\n                view = new TreeView(query.toArray(), options);\n\n                if (filter) {\n                    filteredChildrenMap = view.childrenMap();\n                }\n\n                prunedData = view.removeCollapsedSubtreesFromRootNodes({\n                    // filtering or sorting requires changes to childrenMap\n                    childrenMap: filter || (sort && sort.length) ? undefined$1 : options.childrenMap,\n                    expanded: options.expanded,\n                    maxDepth: (skip + take) || Infinity\n                });\n\n                childrenMap = view.childrenMap();\n\n                query = new TreeQuery(prunedData);\n            }\n\n            if (skip !== undefined$1 && take !== undefined$1) {\n                query = query.range(skip, take);\n            }\n\n            if (group) {\n                query = query.group(group, data);\n            }\n\n            return {\n                total: total,\n                data: query.toArray(),\n                childrenMap: childrenMap,\n                filteredChildrenMap: filteredChildrenMap\n            };\n        };\n\n        var TreeListModel = Model.define({\n            id: \"id\",\n\n            parentId: PARENTIDFIELD,\n\n            fields: {\n                id: { type: \"number\" },\n                parentId: { type: \"number\", nullable: true }\n            },\n\n            init: function(value) {\n                Model.fn.init.call(this, value);\n\n                this._loaded = false;\n\n                if (!this.parentIdField) {\n                    this.parentIdField = PARENTIDFIELD;\n                }\n\n                this.parentId = this.get(this.parentIdField);\n            },\n\n            accept: function(data) {\n                Model.fn.accept.call(this, data);\n\n                this.parentId = this.get(this.parentIdField);\n            },\n\n            set: function(field, value, initiator) {\n                if (field == PARENTIDFIELD && this.parentIdField != PARENTIDFIELD) {\n                    this[this.parentIdField] = value;\n                }\n\n                Model.fn.set.call(this, field, value, initiator);\n\n                if (field == this.parentIdField) {\n                    this.parentId = this.get(this.parentIdField);\n                }\n            },\n\n            loaded: function(value) {\n                if (value !== undefined$1) {\n                    this._loaded = value;\n                } else {\n                    return this._loaded;\n                }\n            },\n\n            shouldSerialize: function(field) {\n                return Model.fn.shouldSerialize.call(this, field) && field !== \"_loaded\" && field != \"_error\" && field != \"_edit\" && !(this.parentIdField !== \"parentId\" && field === \"parentId\");\n            }\n        });\n\n        TreeListModel.parentIdField = PARENTIDFIELD;\n\n        TreeListModel.define = function(base, options) {\n            if (options === undefined$1) {\n                options = base;\n                base = TreeListModel;\n            }\n\n            var parentId = options.parentId || PARENTIDFIELD;\n\n            options.parentIdField = parentId;\n\n            var model = Model.define(base, options);\n\n            if (parentId) {\n                model.parentIdField = parentId;\n            }\n\n            return model;\n        };\n\n        function is(field) {\n            return function(object) {\n                return object[field];\n            };\n        }\n\n        function not(func) {\n            return function(object) {\n                return !func(object);\n            };\n        }\n\n        var TreeListDataSource = DataSource.extend({\n            init: function(options) {\n                options = options || {};\n                var that = this;\n                that._dataMaps = that._getDataMaps();\n\n                options.schema = extend(true, {}, {\n                    modelBase: TreeListModel,\n                    model: TreeListModel\n                }, options.schema);\n\n                DataSource.fn.init.call(this, options);\n            },\n\n            _addRange: function() {\n                // empty override for performance - the treelist does not support virtualization\n            },\n\n            _createNewModel: function(data) {\n                var that = this;\n                var model = {};\n                var fromModel = data instanceof Model;\n                var parentIdField = this._modelParentIdField();\n\n                if (fromModel) {\n                    model = data;\n                }\n\n                model = DataSource.fn._createNewModel.call(this, model);\n\n                if (!fromModel) {\n                    if (data.parentId) {\n                        data[model.parentIdField] = data.parentId;\n                    } else if (that._isPageable() && data[parentIdField]) {\n                        data[model.parentIdField] = data[parentIdField];\n                    }\n\n                    model.accept(data);\n                }\n\n                return model;\n            },\n\n            _shouldWrap: function() {\n                return true;\n            },\n\n            _push: function(result, operation) {\n                var data = DataSource.fn._readData.call(this, result);\n\n                if (!data) {\n                    data = result;\n                }\n\n                this[operation](data);\n            },\n\n            _getData: function() {\n                // do not use .data(), which wraps the data items\n                return this._data || [];\n            },\n\n            _readData: function(newData) {\n                var that = this;\n                var data = that._isPageable() ? that._getData().toJSON() : that.data();\n\n                newData = DataSource.fn._readData.call(this, newData);\n\n                this._replaceData(((data.toJSON ? data.toJSON() : data)).concat(newData), data);\n\n                if (newData instanceof ObservableArray) {\n                    return newData;\n                }\n\n                return data;\n            },\n\n            _replaceData: function(source, target) {\n                var sourceLength = source.length;\n\n                for (var i = 0; i < sourceLength; i++) {\n                    target[i] = source[i];\n                }\n\n                target.length = sourceLength;\n            },\n\n            _readAggregates: function(data) {\n                var result = extend(this._aggregateResult, this.reader.aggregates(data));\n                if (\"\" in result) {\n                    result[this._defaultParentId()] = result[\"\"];\n                    delete result[\"\"];\n                }\n\n                return result;\n            },\n\n            read: function(data) {\n                var that = this;\n\n                if (that._isPageable()) {\n                    that._dataMaps = {};\n                    if (!that._modelOptions().expanded) {\n                        that._skip = 0;\n                        that._page = 1;\n                        that._collapsedTotal = undefined$1;\n                    }\n                }\n\n                return DataSource.fn.read.call(that, data);\n            },\n\n            remove: function(root) {\n                this._removeChildData(root);\n\n                this._removeFromDataMaps(root);\n\n                return DataSource.fn.remove.call(this, root);\n            },\n\n            _removeChildData: function(model, removePristine) {\n                var that = this;\n                var pageable = that._isPageable();\n                var data = pageable ? this._getData() : this.data();\n                var childrenMap = pageable ? that._getChildrenMap() || that.childrenMap(data) : that._childrenMap(data);\n                var items = this._subtree(childrenMap, model.id);\n                var shouldRemovePristine = isUndefined(removePristine) ? false : removePristine;\n\n                var removedItems = this._removeItems(items, shouldRemovePristine);\n\n                that._removeFromDataMaps(removedItems);\n            },\n\n            pushDestroy: function(items) {\n                var that = this;\n\n                if (!isArray(items)) {\n                    items = [items];\n                }\n\n                for (var i = 0; i < items.length; i++) {\n                    that._removeChildData(items[i], true);\n                    that._removeFromDataMaps(items[i]);\n                }\n\n                DataSource.fn.pushDestroy.call(that, items);\n            },\n\n            insert: function(index, model) {\n                var that = this;\n                var newModel = that._createNewModel(model);\n\n                that._insertInDataMaps(newModel);\n\n                return DataSource.fn.insert.call(that, index, newModel);\n            },\n\n            _filterCallback: function(query) {\n                var that = this;\n                var i, item;\n                var map = {};\n                var result = [];\n                var data = query.toArray();\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var pageable = that._isPageable();\n                var parentSubtree = [];\n                var parent;\n\n                for (i = 0; i < data.length; i++) {\n                    item = data[i];\n\n                    if (pageable) {\n                        // return view from root nodes to child nodes\n                        parentSubtree = [];\n\n                        if (!map[item[idField]]) {\n                            map[item[idField]] = true;\n                            parentSubtree.push(item);\n                        }\n\n                        parent = that._parentNode(item);\n\n                        while (parent) {\n                            if (!map[parent[idField]]) {\n                                map[parent[idField]] = true;\n                                parentSubtree.unshift(parent);\n                                parent = that._parentNode(parent);\n                            } else {\n                                // the parent chain is already processed\n                                break;\n                            }\n                        }\n\n                        if (parentSubtree.length) {\n                            result = result.concat(parentSubtree);\n                        }\n                    } else {\n                        while (item) {\n                            if (!map[item[idField]]) {\n                                map[item[idField]] = true;\n                                result.push(item);\n                            }\n\n                            if (!map[item[parentIdField]]) {\n                                map[item[parentIdField]] = true;\n                                item = this.parentNode(item);\n\n                                if (item) {\n                                    result.push(item);\n                                }\n                            } else {\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                return new Query(result);\n            },\n\n            _subtree: function(map, id) {\n                var that = this;\n                var result = map[id] || [];\n                var defaultParentId = that._defaultParentId();\n                var idField = that._modelIdField();\n\n                for (var i = 0, len = result.length; i < len; i++) {\n                    if (result[i][idField] !== defaultParentId) {\n                        result = result.concat(that._subtree(map, result[i][idField]));\n                    }\n                }\n\n                return result;\n            },\n\n            // builds hash id -> children\n            _childrenMap: function(data) {\n                var map = {};\n                var i, item, id, parentId;\n\n                data = this._observeView(data);\n\n                for (i = 0; i < data.length; i++) {\n                    item = data[i];\n                    id = item.id;\n                    parentId = item.parentId;\n\n                    map[id] = map[id] || [];\n                    map[parentId] = map[parentId] || [];\n                    map[parentId].push(item);\n                }\n\n                return map;\n            },\n\n            childrenMap: function(data) {\n                var view = this._createTreeView(data);\n                var map = view.childrenMap();\n                return map;\n            },\n\n            _getChildrenMap: function() {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                return dataMaps.children;\n            },\n\n            _initIdsMap: function(data) {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n\n                if (isUndefined(dataMaps.ids)) {\n                    dataMaps.ids = that._idsMap(data);\n                }\n\n                return dataMaps.ids;\n            },\n\n            _idsMap: function(data) {\n                var view = this._createTreeView(data);\n                var map = view.idsMap();\n                return map;\n            },\n\n            _getIdsMap: function() {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                return dataMaps.ids || {};\n            },\n\n            _getFilteredChildrenMap: function() {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                return dataMaps.filteredChildren;\n            },\n\n            _setFilteredChildrenMap: function(map) {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                dataMaps.filteredChildren = map;\n            },\n\n            _initDataMaps: function(data) {\n                var that = this;\n                var view = that._createTreeView(data);\n\n                that._dataMaps = view.dataMaps();\n\n                return that._dataMaps;\n            },\n\n            _initChildrenMapForParent: function(parent) {\n                var that = this;\n                var data = that._getData();\n                var childrenMap = that._getChildrenMap();\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var parentId = (parent || {})[idField];\n\n                if (childrenMap && parent) {\n                    childrenMap[parentId] = [];\n\n                    for (var i = 0; i < data.length; i++) {\n                        if (data[i][parentIdField] === parentId) {\n                            childrenMap[parentId].push(data[i]);\n                        }\n                    }\n                }\n            },\n\n            _getDataMaps: function() {\n                var that = this;\n                that._dataMaps = that._dataMaps || {};\n                return that._dataMaps;\n            },\n\n            _createTreeView: function(data, options) {\n                var view = new TreeView(data, extend(options, this._defaultTreeModelOptions()));\n                return view;\n            },\n\n            _defaultTreeModelOptions: function() {\n                var that = this;\n                var modelOptions = that._modelOptions();\n\n                return {\n                    defaultParentId: that._defaultParentId(),\n                    idField: that._modelIdField(),\n                    parentIdField: that._modelParentIdField(),\n                    expanded: modelOptions.expanded\n                };\n            },\n\n            _defaultDataItemType: function() {\n                return this.reader.model || kendo.data.ObservableObject;\n            },\n\n            _calculateAggregates: function(data, options) {\n                options = options || {};\n                var that = this;\n                var result = {};\n                var item, subtree, i;\n                var filter = options.filter;\n                var skip = options.skip;\n                var take = options.take;\n                var maxDepth = !isUndefined(skip) && !isUndefined(take) ? (skip + take) : Infinity;\n                var pageable = that._isPageable();\n                var filteredChildrenMap = options.filteredChildrenMap;\n                var childrenMap = options.childrenMap;\n                var pageableChildrenMap;\n\n                if (pageable) {\n                    if (isUndefined(options.aggregate)) {\n                        return result;\n                    }\n\n                    if (filteredChildrenMap) {\n                        pageableChildrenMap = filteredChildrenMap;\n                    } else if (childrenMap) {\n                        pageableChildrenMap = childrenMap;\n                    } else {\n                        pageableChildrenMap = that.childrenMap(that._getData());\n                    }\n                }\n\n                if (!pageable && filter) {\n                    data = Query.process(data, {\n                        filter: filter,\n                        filterCallback: this._filterCallback.bind(this)\n                    }).data;\n                }\n\n                var map = pageable ? pageableChildrenMap : that._childrenMap(data);\n\n                // calculate aggregates for each subtree\n                result[this._defaultParentId()] = new Query(this._subtree(map, this._defaultParentId())).aggregate(options.aggregate);\n\n                for (i = 0; i < data.length; i++) {\n                    if (i >= maxDepth) {\n                        break;\n                    }\n\n                    item = data[i];\n                    subtree = this._subtree(map, item.id);\n\n                    result[item.id] = new Query(subtree).aggregate(options.aggregate);\n                }\n\n                return result;\n            },\n\n            _queryProcess: function(data, options) {\n                var that = this;\n                var result = {};\n                options = options || {};\n                options.filterCallback = this._filterCallback.bind(this);\n\n                if (that._isPageable()) {\n                    return that._processPageableQuery(data, options);\n                } else {\n                    var defaultParentId = this._defaultParentId();\n                    result = Query.process(data, options);\n                    var map = this._childrenMap(result.data);\n                    var hasLoadedChildren, i, item, children;\n\n                    data = map[defaultParentId] || [];\n\n                    for (i = 0; i < data.length; i++) {\n                        item = data[i];\n\n                        if (item.id === defaultParentId) {\n                            continue;\n                        }\n\n                        children = map[item.id];\n                        hasLoadedChildren = !!(children && children.length);\n\n                        if (!item.loaded()) {\n                            item.loaded(hasLoadedChildren || !item.hasChildren);\n                        }\n\n                        if (item.loaded() || item.hasChildren !== true) {\n                            item.hasChildren = hasLoadedChildren;\n                        }\n\n                        if (hasLoadedChildren) {\n                            //cannot use splice due to IE8 bug\n                            data = data.slice(0, i + 1).concat(children, data.slice(i + 1));\n                        }\n                    }\n\n                    result.data = data;\n                }\n\n                return result;\n            },\n\n            _processPageableQuery: function(data, options) {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                var result;\n                var filteredChildrenMap;\n\n                if (that._getData() !== data || !dataMaps.children || !dataMaps.ids) {\n                    dataMaps = that._initDataMaps(that._getData());\n                }\n\n                options.childrenMap = dataMaps.children || {};\n                options.idsMap = dataMaps.ids || {};\n\n                result = that._processTreeQuery(data, options);\n\n                that._replaceWithObservedData(result.data, data);\n\n                that._processDataItemsState(result.data, result.childrenMap);\n\n                that._replaceItemsInDataMaps(result.data);\n\n                result.dataToAggregate = that._dataToAggregate(result.data, options);\n\n                if (options.filter || that.filter()) {\n                    filteredChildrenMap = result.filteredChildrenMap;\n                    that._replaceInMapWithObservedData(filteredChildrenMap, data);\n                    that._setFilteredChildrenMap(filteredChildrenMap);\n                    options.filteredChildrenMap = filteredChildrenMap;\n                    that._calculateCollapsedTotal(result.data);\n                } else {\n                    that._collapsedTotal = undefined$1;\n                }\n\n                return result;\n            },\n\n            _dataToAggregate: function(data) {\n                var that = this;\n                var firstDataItem = data[0] || {};\n                var firstItemParents = that._parentNodes(firstDataItem);\n                var dataToAggregate = firstItemParents.concat(data);\n\n                return dataToAggregate;\n            },\n\n            _replaceItemsInDataMaps: function(observableArray) {\n                var that = this;\n                var view = isArray(observableArray) ? observableArray : [observableArray];\n                var itemType = that._defaultDataItemType();\n                var defaultParentId = that._defaultParentId();\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var dataMaps = that._getDataMaps();\n                var item;\n                var parents;\n                var directParent;\n\n                for (var viewIndex = 0; viewIndex < view.length; viewIndex++) {\n                    item = view[viewIndex];\n\n                    if (!(item instanceof itemType)) {\n                        continue;\n                    }\n\n                    that._insertInIdsMap(item);\n\n                    parents = that._parentNodes(item);\n                    directParent = parents && parents.length ? parents[parents.length - 1] : undefined$1;\n\n                    if (item[parentIdField] === defaultParentId) {\n                        that._replaceInMap(dataMaps.children, defaultParentId, item, itemType);\n                    } else if (directParent) {\n                        that._replaceInMap(dataMaps.children, directParent[idField], item, itemType);\n                    }\n                }\n            },\n\n            _replaceInMap: function(map, id, replacement, itemType) {\n                var idField = this._modelIdField();\n                map[id] = map[id] || [];\n                itemType = itemType || this._defaultDataItemType();\n\n                var itemInArray = map[id].filter(function(element) {\n                    return replacement[idField] === element[idField];\n                })[0];\n\n                var itemIndex = itemInArray ? map[id].indexOf(itemInArray) : -1;\n\n                if (itemIndex !== -1 && !(itemInArray instanceof itemType)) {\n                    map[id][itemIndex] = replacement;\n                }\n            },\n\n            _replaceWithObservedData: function(dataToReplace, replacementArray) {\n                var that = this;\n                var idsMap = that._getDataMaps().ids || {};\n                var idField = that._modelIdField();\n                var itemType = that._defaultDataItemType();\n                var itemToReplace;\n                var itemToReplaceId;\n                var dataItem;\n                var dataItemIndex;\n                var observableItem;\n\n                for (var i = 0; i < dataToReplace.length; i++) {\n                    itemToReplace = dataToReplace[i];\n                    itemToReplaceId = itemToReplace[idField];\n\n                    if (!(itemToReplace instanceof itemType)) {\n                        if (!(idsMap[itemToReplaceId] instanceof itemType)) {\n                            dataItem = that._getById(itemToReplaceId);\n                            dataItemIndex = replacementArray.indexOf(dataItem);\n\n                            if (dataItem && dataItemIndex !== -1) {\n                                observableItem = replacementArray.at(dataItemIndex);\n                                dataToReplace[i] = observableItem;\n                            }\n                        } else {\n                            dataToReplace[i] = idsMap[itemToReplaceId];\n                        }\n                    }\n                }\n            },\n\n            _replaceInMapWithObservedData: function(map, replacementArray) {\n                var that = this;\n\n                for (var key in map) {\n                    that._replaceWithObservedData(map[key], replacementArray);\n                }\n            },\n\n            _insertInDataMaps: function(item) {\n                var that = this;\n\n                if (that._isPageable()) {\n                    that._insertInIdsMap(item);\n                    that._insertInChildrenMap(item);\n                }\n            },\n\n            _insertInIdsMap: function(item) {\n                var that = this;\n                var idsMap = that._getIdsMap();\n                var idField = that._modelIdField();\n\n                if (!isUndefined(item[idField])) {\n                    idsMap[item[idField]] = item;\n                }\n            },\n\n            _insertInChildrenMap: function(item, index) {\n                var that = this;\n                var childrenMap = that._getChildrenMap() || {};\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var itemId = item[idField];\n                var parentId = item[parentIdField];\n                index = index || 0;\n\n                childrenMap[itemId] = childrenMap[itemId] || [];\n                childrenMap[parentId] = childrenMap[parentId] || [];\n                childrenMap[parentId].splice(index, 0, item);\n            },\n\n            _removeFromDataMaps: function(items) {\n                var that = this;\n                items = isArray(items) ? items : [items];\n\n                if (that._isPageable()) {\n                    for (var i = 0; i < items.length; i++) {\n                        that._removeFromIdsMap(items[i]);\n                        that._removeFromChildrenMap(items[i]);\n                    }\n                }\n            },\n\n            _removeFromIdsMap: function(item) {\n                var that = this;\n                var idsMap = that._getIdsMap();\n                var idField = that._modelIdField();\n\n                if (!isUndefined(item[idField])) {\n                    idsMap[item[idField]] = undefined$1;\n                }\n            },\n\n            _removeFromChildrenMap: function(item) {\n                var that = this;\n                var childrenMap = that._getChildrenMap() || {};\n                var parentIdField = that._modelParentIdField();\n                var parentId = item[parentIdField];\n\n                childrenMap[parentId] = childrenMap[parentId] || [];\n\n                var itemIndex = that._indexInChildrenMap(item);\n\n                if (itemIndex !== -1) {\n                    childrenMap[parentId].splice(itemIndex, 1);\n                }\n            },\n\n            _indexInChildrenMap: function(item) {\n                var that = this;\n                return that._itemIndexInMap(item, that._getChildrenMap());\n            },\n\n            _itemIndexInMap: function(item, dataMap) {\n                var that = this;\n                var map = dataMap || {};\n                var parentIdField = that._modelParentIdField();\n                var parentId = item[parentIdField];\n\n                map[parentId] = map[parentId] || [];\n\n                var itemInArray = map[parentId].filter(function(element) {\n                    return item.uid === element.uid;\n                })[0];\n\n                var itemIndex = itemInArray ? map[parentId].indexOf(itemInArray) : -1;\n\n                return itemIndex;\n            },\n\n            _getById: function(id) {\n                var that = this;\n                var idField = that._modelIdField();\n                var data = that._getData();\n\n                for (var i = 0; i < data.length; i++) {\n                    if (data[i][idField] === id) {\n                        return data[i];\n                    }\n                }\n            },\n\n            _isLastItemInView: function(dataItem) {\n                var view = this.view();\n                return view.length && view[view.length - 1] === dataItem;\n            },\n\n            _defaultPageableQueryOptions: function() {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                var options = {\n                    skip: that.skip(),\n                    take: that.take(),\n                    page: that.page(),\n                    pageSize: that.pageSize(),\n                    sort: that.sort(),\n                    filter: that.filter(),\n                    group: that.group(),\n                    aggregate: that.aggregate(),\n                    filterCallback: that._filterCallback.bind(that),\n                    childrenMap: dataMaps.children,\n                    idsMap: dataMaps.ids\n                };\n\n                return options;\n            },\n\n            _isPageable: function() {\n                var pageSize = this.pageSize();\n                return (!isUndefined(pageSize) && pageSize > 0 && !this.options.serverPaging);\n            },\n\n            _updateTotalForAction: function(action, items) {\n                var that = this;\n\n                DataSource.fn._updateTotalForAction.call(that, action, items);\n\n                if (that._isPageable()) {\n                    that._updateCollapsedTotalForAction(action, items);\n                }\n            },\n\n            _updateCollapsedTotalForAction: function(action, items) {\n                var that = this;\n                var total = parseInt(that._collapsedTotal, 10);\n\n                if (!isNumber(that._collapsedTotal)) {\n                    that._calculateCollapsedTotal();\n                    return;\n                }\n\n                if (action === \"add\") {\n                    total += items.length;\n                } else if (action === \"remove\") {\n                    total -= items.length;\n                } else if (action !== \"itemchange\" && action !== \"sync\" && !that.options.serverPaging) {\n                    total = that._calculateCollapsedTotal();\n                } else if (action === \"sync\") {\n                    total = that._calculateCollapsedTotal();\n                }\n\n                that._collapsedTotal = total;\n            },\n\n            _setFilterTotal: function(filterTotal, setDefaultValue) {\n                var that = this;\n\n                DataSource.fn._setFilterTotal.call(that, filterTotal, setDefaultValue);\n\n            },\n\n            collapsedTotal: function() {\n                var that = this;\n\n                if (!isUndefined(that._collapsedTotal)) {\n                    return that._collapsedTotal;\n                }\n\n                return that._calculateCollapsedTotal();\n            },\n\n            _calculateCollapsedTotal: function(filteredData) {\n                var that = this;\n                var data = that._dataWithoutCollapsedSubtrees(filteredData);//\n\n                if (data.length) {\n                    that._collapsedTotal = data.length;\n                }\n\n                return that._collapsedTotal;\n            },\n\n            _dataWithoutCollapsedSubtrees: function(filteredData) {\n                return this._removeCollapsedSubtrees(filteredData || this._getData());\n            },\n\n            _removeCollapsedSubtrees: function(data) {\n                var that = this;\n                var view = that._createTreeView(data);\n                var result = view.removeCollapsedSubtreesFromRootNodes({\n                    expanded: that._modelOptions().expanded,\n                    childrenMap: that.filter() ? that._getFilteredChildrenMap() : that._getChildrenMap()\n                });\n\n                return result;\n            },\n\n            _processTreeQuery: function(data, options) {\n                var result = TreeQuery.process(data, extend(options, this._defaultTreeModelOptions(), {\n                    processFromRootNodes: true\n                }));\n\n                return result;\n            },\n\n            _processDataItemsState: function(data, childrenMap) {\n                var dataLength = data.length;\n                var i;\n\n                for (i = 0; i < dataLength; i++) {\n                    this._processDataItemState(data[i], childrenMap);\n                }\n            },\n\n            _processDataItemState: function(dataItem, childrenMap) {\n                var defaultParentId = this._defaultParentId();\n\n                if (dataItem.id === defaultParentId) {\n                    return;\n                }\n\n                var children = childrenMap[dataItem.id] || [];\n                var hasLoadedChildren = !!(children && children.length);\n\n                if (!dataItem.loaded) {\n                    return;\n                }\n\n                if (!dataItem.loaded()) {\n                    dataItem.loaded(hasLoadedChildren || !dataItem.hasChildren);\n                }\n\n                if (dataItem.loaded() || dataItem.hasChildren !== true) {\n                    dataItem.hasChildren = hasLoadedChildren;\n                }\n            },\n\n            _queueRequest: function(options, callback) {\n                // allow simultaneous requests (loading multiple items at the same time)\n                callback.call(this);\n            },\n\n            _modelLoaded: function(id) {\n                var model = this.get(id);\n                model.loaded(true);\n                model.hasChildren = this.childNodes(model).length > 0;\n            },\n\n            _modelError: function(id, e) {\n                this.get(id)._error = e;\n            },\n\n            success: function(data, requestParams) {\n                if (!requestParams || typeof requestParams.id == \"undefined\") {\n                    this._data = this._observe([]);\n                }\n\n                DataSource.fn.success.call(this, data, requestParams);\n    \t\t\tthis._total = this._data.length;\n            },\n\n            load: function(model) {\n                var method = \"_query\";\n                var remote = this.options.serverSorting || this.options.serverPaging || this.options.serverFiltering || this.options.serverGrouping || this.options.serverAggregates;\n                var defaultPromise = $.Deferred().resolve().promise();\n\n                if (model.loaded()) {\n                    if (remote) {\n                        return defaultPromise;\n                    }\n                } else if (model.hasChildren) {\n                    method = \"read\";\n                    this._removeChildData(model);\n                }\n\n                return this[method]({ id: model.id })\n                    .done(this._modelLoaded.bind(this, model.id))\n                    .fail(this._modelError.bind(this, model.id));\n            },\n\n            contains: function(root, child) {\n                var that = this;\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var rootId = root[idField];\n                var pageable = that._isPageable();\n\n                while (child) {\n                    if (child[parentIdField] === rootId) {\n                        return true;\n                    }\n\n                    child = pageable ? that._parentNode(child) : that.parentNode(child);\n                }\n\n                return false;\n            },\n\n            _byParentId: function(id, defaultId) {\n                var result = [];\n                var view = this.view();\n                var current;\n\n                if (id === defaultId) {\n                    return [];\n                }\n\n                for (var i = 0; i < view.length; i++) {\n                    current = view.at(i);\n\n                    if (current.parentId == id) {\n                        result.push(current);\n                    }\n                }\n\n                return result;\n            },\n\n            _defaultParentId: function() {\n                return this.reader.model.fn.defaults[this.reader.model.parentIdField];\n            },\n\n            _modelOptions: function() {\n                var modelOptions = ((this.options.schema || {}).model || {});\n                return modelOptions;\n            },\n\n            _modelIdField: function() {\n                var modelOptions = this._modelOptions();\n                return modelOptions.id || \"id\";\n            },\n\n            _modelParentIdField: function() {\n                var modelOptions = this._modelOptions();\n                return modelOptions.parentId || PARENTIDFIELD;\n            },\n\n            childNodes: function(model) {\n                return this._byParentId(model.id, this._defaultParentId());\n            },\n\n            allChildNodes: function(model, result) {\n                var directChildren = this.data().filter(function(item) {\n                    return item.parentId === model.id;\n                });\n\n                for (var i = 0; i < directChildren.length; i++) {\n                    result.push(directChildren[i]);\n                    this.allChildNodes(directChildren[i], result);\n                }\n            },\n\n            rootNodes: function() {\n                return this._byParentId(this._defaultParentId());\n            },\n\n            _rootNode: function(child) {\n                return this._parentNodes(child)[0];\n            },\n\n            _pageableRootNodes: function(options) {\n                options = options || {};\n                var that = this;\n                var defaultParentId = that._defaultParentId();\n                var parentIdField = that._modelParentIdField();\n                var result = [];\n                var nodesWithoutParentInView = that._nodesWithoutParentInView(options);\n                var node;\n                var root;\n\n                for (var i = 0; i < nodesWithoutParentInView.length; i++) {\n                    node = nodesWithoutParentInView[i];\n\n                    if (node[parentIdField] === defaultParentId) {\n                        result.push(node);\n                    } else {\n                        root = that._rootNode(node);\n\n                        if (root && result.indexOf(root) === -1) {\n                            result.push(root);\n                        }\n                    }\n                }\n\n                return result;\n            },\n\n            parentNode: function(model) {\n                return this.get(model.parentId);\n            },\n\n            _parentNode: function(child) {\n                var that = this;\n                var parentIdField = that._modelParentIdField();\n                var idsMap = that._initIdsMap(that._getData());\n                var parentId = child[parentIdField];\n                var parent = idsMap[parentId] || that._getById(parentId);\n\n                return parent;\n            },\n\n            _parentNodes: function(child) {\n                var that = this;\n                var parent = that._parentNode(child);\n                var parents = [];\n\n                while (parent) {\n                    parents.unshift(parent);\n                    parent = that._parentNode(parent);\n                }\n\n                return parents;\n            },\n\n            _parentNodesNotInView: function() {\n                var that = this;\n                var view = that.view();\n                var result = [];\n                var defaultParentId = that._defaultParentId();\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var parentInView;\n                var parents = [];\n                var directParent;\n                var dataItem;\n                var dataItemId;\n                var dataItemParentId;\n\n                for (var i = 0; i < view.length; i++) {\n                    dataItem = view[i];\n                    dataItemId = dataItem[idField];\n                    dataItemParentId = dataItem[parentIdField];\n                    parentInView = that._parentInView(dataItemParentId);\n\n                    if (!parentInView && dataItemParentId !== defaultParentId) {\n                        parents = that._parentNodes(dataItem);\n\n                        directParent = parents && parents.length ? parents[parents.length - 1] : that._getById(dataItemParentId);\n\n                        if (directParent && result.indexOf(directParent) === -1) {\n                            result.push(directParent);\n                        }\n                    }\n                }\n\n                return result;\n            },\n\n            _nodesWithoutParentInView: function(options) {\n                options = options || {};\n                var that = this;\n                var view = that.view();\n                var childrenMap = options.childrenMap || that.childrenMap(that._getData());\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var dataItem;\n                var parentInView;\n                var children = [];\n                var result = [];\n\n                for (var i = 0; i < view.length; i++) {\n                    dataItem = view[i];\n                    children = childrenMap[dataItem[idField]];\n                    parentInView = that._parentInView(dataItem[parentIdField]);\n\n                    if (!parentInView) {\n                        result.push(dataItem);\n                    }\n                }\n\n                return result;\n            },\n\n            _parentInView: function(parentId) {\n                var view = this.view();\n\n                for (var i = 0; i < view.length; i++) {\n                    if (view[i].id === parentId) {\n                        return view[i];\n                    }\n                }\n            },\n\n            level: function(model) {\n                var result = -1;\n\n                if (!(model instanceof TreeListModel)) {\n                    model = this.get(model);\n                }\n\n                do {\n                    model = this.parentNode(model);\n                    result++;\n                } while (model);\n\n                return result;\n            },\n\n            _pageableModelLevel: function(model) {\n                var that = this;\n\n                if (!model || !that._isPageable()) {\n                    return 0;\n                }\n\n                var parents = that._parentNodes(model);\n\n                return parents.length;\n            },\n\n            filter: function(value) {\n                var baseFilter = DataSource.fn.filter;\n\n                if (value === undefined$1) {\n                    return baseFilter.call(this, value);\n                }\n\n                baseFilter.call(this, value);\n            },\n\n            _pageableQueryOptions: function(options) {\n                var dataMaps = this._getDataMaps();\n\n                options.childrenMap = dataMaps.children;\n                options.idsMap = dataMaps.ids;\n\n                return options;\n            },\n\n            _flatData: function(data, skip) {\n                skip = this._isPageable() ? true : skip;\n                return DataSource.fn._flatData.call(this, data, skip);\n            },\n\n            data: function(data) {\n                var that = this;\n                var result = DataSource.fn.data.call(that, data);\n\n                if (that._isPageable()) {\n                    that._initDataMaps(that._getData());\n                    that._calculateCollapsedTotal();\n                }\n\n                return result;\n            },\n\n            cancelChanges: function(model) {\n                var that = this;\n\n                DataSource.fn.cancelChanges.call(that, model);\n\n                that._restorePageSizeAfterAddChild();\n            },\n\n            _modelCanceled: function(model) {\n                var that = this;\n\n                if (that._isPageable()) {\n                    that._removeFromDataMaps(model);\n                }\n            },\n\n            _changesCanceled: function() {\n                var that = this;\n\n                if (that._isPageable()) {\n                    that._initDataMaps(that._getData());\n                }\n            },\n\n            _setAddChildPageSize: function() {\n                var that = this;\n                var queryOptions = {};\n\n                if (that._isPageable()) {\n                    // increase the page size to make the new item visible in view\n                    that._addChildPageSize = that.pageSize() + 1;\n\n                    queryOptions = that._defaultPageableQueryOptions();\n                    queryOptions.take = that._addChildPageSize;\n                    queryOptions.pageSize = that._addChildPageSize;\n                    that._query(queryOptions);\n                }\n            },\n\n            _restorePageSizeAfterAddChild: function() {\n                var that = this;\n                var queryOptions = {};\n\n                if (that._isPageable()) {\n                    if (!isUndefined(that._addChildPageSize)) {\n                        queryOptions = that._defaultPageableQueryOptions();\n                        queryOptions.take = that._addChildPageSize - 1;\n                        queryOptions.pageSize = that._addChildPageSize - 1;\n                        that._query(queryOptions);\n                    }\n                }\n\n                that._addChildPageSize = undefined$1;\n            },\n\n            sync: function() {\n                var that = this;\n\n                return DataSource.fn.sync.call(that)\n                    .then(function() {\n                        that._restorePageSizeAfterAddChild();\n                    });\n            },\n\n            _syncEnd: function() {\n                var that = this;\n\n                if (that._isPageable()) {\n                    that._initDataMaps(that._getData());\n                }\n            }\n        });\n\n        TreeListDataSource.create = function(options) {\n            if (Array.isArray(options)) {\n                options = { data: options };\n            } else if (options instanceof ObservableArray) {\n                options = { data: options.toJSON() };\n            }\n\n            return options instanceof TreeListDataSource ? options : new TreeListDataSource(options);\n        };\n\n        function isCellVisible() {\n            return this.style.display !== \"none\";\n        }\n\n        function sortCells(cells) {\n            var indexAttr = kendo.attr(\"index\");\n            return cells.sort(function(a, b) {\n                a = $(a);\n                b = $(b);\n\n                var indexA = a.attr(indexAttr);\n                var indexB = b.attr(indexAttr);\n\n                if (indexA === undefined$1) {\n                    indexA = $(a).index();\n                }\n                if (indexB === undefined$1) {\n                    indexB = $(b).index();\n                }\n\n                indexA = parseInt(indexA, 10);\n                indexB = parseInt(indexB, 10);\n                return indexA > indexB ? 1 : (indexA < indexB ? -1 : 0);\n            });\n        }\n\n        function leafDataCells(container) {\n            var rows = container.find(\">tr:not(.k-filter-row)\");\n\n            var filter = function() {\n                var el = $(this);\n                return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n            };\n\n            var cells = $();\n            if (rows.length > 1) {\n                cells = rows.find(\"th[data-index]\")\n                    .filter(filter);\n            }\n\n            cells = cells.add(rows.last().find(\"th\").filter(filter));\n\n            return sortCells(cells);\n        }\n\n        function createPlaceholders(options) {\n            var spans = [];\n            var className = options.className;\n\n            for (var i = 0, level = options.level; i < level; i++) {\n                spans.push(kendoDomElement(\"span\", { className: className, 'aria-hidden': true }));\n            }\n\n            return spans;\n        }\n\n        function columnsWidth(cols) {\n            var colWidth, width = 0;\n\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n                colWidth = cols[idx].style.width;\n                if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                    width += parseInt(colWidth, 10);\n                }\n            }\n\n            return width;\n        }\n\n        function syncTableHeight(table1, table2) {\n           table1 = table1[0];\n           table2 = table2[0];\n\n           if (table1.rows.length && table2.rows.length && table1.rows.length !== table2.rows.length) {\n               var lockedHeigth = table1.offsetHeight;\n               var tableHeigth = table2.offsetHeight;\n\n               var row;\n               var diff;\n               if (lockedHeigth > tableHeigth) {\n                   row = table2.rows[table2.rows.length - 1];\n\n                   if (filterRowRegExp.test(row.className)) {\n                       row = table2.rows[table2.rows.length - 2];\n                   }\n\n                   diff = lockedHeigth - tableHeigth;\n               } else {\n                   row = table1.rows[table1.rows.length - 1];\n\n                    if (filterRowRegExp.test(row.className)) {\n                        row = table1.rows[table1.rows.length - 2];\n                    }\n\n                   diff = tableHeigth - lockedHeigth;\n               }\n               row.style.height = row.offsetHeight + diff + \"px\";\n           }\n        }\n\n        var TreeListPager = ui.Pager.extend({\n            options: {\n                name: \"TreeListPager\"\n            },\n\n            totalPages: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n\n                if (dataSource && dataSource._filter) {\n                    return ui.Pager.fn.totalPages.call(that);\n                }\n\n                return Math.ceil((that._collapsedTotal() || 0) / (that.pageSize() || 1));\n            },\n\n            _createDataSource: function(options) {\n                this.dataSource = kendo.data.TreeListDataSource.create(options.dataSource);\n            },\n\n            _collapsedTotal: function() {\n                var dataSource = this.dataSource;\n                return dataSource ? (dataSource.collapsedTotal() || 0) : 0;\n            }\n        });\n\n        var Editor = kendo.Observable.extend({\n            init: function(element, options) {\n                kendo.Observable.fn.init.call(this);\n\n                options = this.options = extend(true, {}, this.options, options);\n\n                this.element = element;\n\n                this.bind(this.events, options);\n\n                this.model = this.options.model;\n\n                this.fields = this._fields(this.options.columns);\n\n                this._initContainer();\n\n                this.createEditable();\n            },\n\n            options: {\n                renderForm: false\n            },\n\n            events: [],\n\n            _initContainer: function() {\n                this.wrapper = this.element;\n            },\n\n            createEditable: function() {\n                var options = this.options;\n\n                if (options.renderForm) {\n                    this.form = new ui.Form(this.wrapper.find(\".k-treelist-form\"), {\n                        items: this.fields,\n                        buttonsTemplate: function () { return ''; },\n                        formData: this.model,\n                        change: options.change\n                    });\n\n                    this.editable = this.form.editable;\n                } else {\n                    this.editable = new ui.Editable(this.wrapper, {\n                        fields: this.fields,\n                        target: options.target,\n                        clearContainer: options.clearContainer,\n                        model: this.model,\n                        change: options.change\n                    });\n                }\n            },\n\n            _isEditable: function(column) {\n                return isColumnEditable(column, this.model);\n            },\n\n            _fields: function(columns) {\n                var fields = [];\n                var idx, length, column;\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (this._isEditable(column)) {\n                        fields.push({\n                            field: column.field,\n                            format: column.format,\n                            editor: column.editor,\n                            editorOptions: extend(true, { format: column.format }, column.editorOptions),\n                            label: column.title || column.field || \"\"\n                        });\n                    }\n                }\n\n                return fields;\n            },\n\n            end: function() {\n                return this.editable.end();\n            },\n\n            close: function() {\n                this.destroy();\n            },\n\n            destroy: function() {\n                this.editable.destroy();\n                this.editable.element\n                    .find(\"[\" + kendo.attr(\"container-for\") + \"]\")\n                    .empty()\n                    .end()\n                    .removeAttr(kendo.attr(\"role\"));\n\n                this.model = this.wrapper = this.element = this.columns = this.editable = null;\n            }\n        });\n\n        var PopupEditor = Editor.extend({\n            init: function(element, options) {\n                Editor.fn.init.call(this, element, options);\n\n                this._attachHandlers();\n                kendo.cycleForm(this.wrapper);\n\n                this.open();\n            },\n\n            events: [\n                CANCEL,\n                SAVE\n            ],\n\n            options: {\n                window: {\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: \"Edit\",\n                    visible: false\n                }\n            },\n\n            _initContainer: function() {\n                var options = this.options;\n                var formContent = [];\n\n                this.wrapper = $('<div class=\"k-popup-edit-form\"/>')\n                    .attr(kendo.attr(\"uid\"), this.model.uid)\n                    .append('<div class=\"k-edit-form-container\"/>');\n\n                if (options.template) {\n                    this._appendTemplate(formContent);\n                    this.fields = [];\n                } else {\n                    this.options.renderForm = true;\n                    formContent.push(kendoHtmlElement('<div class=\"k-treelist-form\"></div>'));\n                }\n                this._appendButtons(formContent);\n\n                new kendoDom.Tree(this.wrapper.children()[0]).render(formContent);\n\n                this.wrapper.appendTo(options.appendTo);\n\n                this.window = new ui.Window(this.wrapper, options.window);\n            },\n\n            _appendTemplate: function(form) {\n                var template = this.options.template;\n\n                if (typeof template === STRING) {\n                    template = kendo.unescape(template);\n                }\n\n                template = kendo.template(template)(this.model);\n\n                form.push(kendoHtmlElement(template));\n            },\n\n            _appendButtons: function(form) {\n                form.push(kendoDomElement(\"div\", {\n                    \"class\": \"k-edit-buttons\"\n                }, this.options.commandRenderer()));\n            },\n\n            _attachHandlers: function() {\n                var closeHandler = this._cancelProxy = this._cancel.bind(this);\n                this.wrapper.on(CLICK + NS, \".k-grid-cancel-command\", this._cancelProxy);\n\n                this._saveProxy = this._save.bind(this);\n                this.wrapper.on(CLICK + NS, \".k-grid-save-command\", this._saveProxy);\n\n                this.window.bind(\"close\", function(e) {\n                    if (e.userTriggered) {\n                        closeHandler(e);\n                    }\n                });\n            },\n\n            _detachHandlers: function() {\n                this._cancelProxy = null;\n                this._saveProxy = null;\n                this.wrapper.off(NS);\n            },\n\n            _cancel: function(e) {\n                this.trigger(CANCEL, e);\n            },\n\n            _save: function() {\n                this.trigger(SAVE);\n            },\n\n            open: function() {\n                this.window.center().open();\n            },\n\n            close: function() {\n                this.window.bind(\"deactivate\", this.destroy.bind(this)).close();\n            },\n\n            destroy: function() {\n                if (this.form) {\n                    this.form.destroy();\n                }\n\n                this.window.destroy();\n                this.window = null;\n                this._detachHandlers();\n\n                Editor.fn.destroy.call(this);\n            }\n        });\n\n        var IncellEditor = Editor.extend({\n            destroy: function() {\n                var that = this;\n\n                that.editable.destroy();\n\n                that.editable.element\n                    .off()\n                    .empty()\n                    .removeAttr(kendo.attr(\"role\"));\n\n                that.model = that.wrapper = that.element = that.columns = that.editable = null;\n            }\n        });\n\n        var TreeList = DataBoundWidget.extend({\n            init: function(element, options, events) {\n                DataBoundWidget.fn.init.call(this, element, options);\n\n                if (events) {\n                    this._events = events;\n                }\n\n                isRtl = kendo.support.isRtl(element);\n\n                classNames.iconExpand = isRtl ? CARET_ALT_LEFT : CARET_ALT_RIGHT;\n\n                this._dataSource(this.options.dataSource);\n                this._columns();\n                this._layout();\n                this._aria();\n                this._ariaId();\n                this._navigatable();\n                this._selectable();\n                this._sortable();\n                this._resizable();\n                this._filterable();\n                this._filterRow();\n                this._attachEvents();\n                this._toolbar();\n                this._scrollable();\n                this._reorderable();\n                this._columnMenu();\n                this._minScreenSupport();\n                this._draggable();\n                this._pageable();\n\n                if (this.options.autoBind) {\n                    this.dataSource.fetch();\n                }\n\n                if (this._hasLockedColumns) {\n                    var widget = this;\n                    this.wrapper.addClass(\"k-grid-lockedcolumns\");\n                    this._resizeHandler = function() { widget.resize(); };\n                    $(window).on(\"resize\" + NS, this._resizeHandler);\n                }\n\n                kendo.notify(this);\n            },\n\n            _draggable: function() {\n                var that = this;\n                var editable = this.options.editable;\n                var dataSource = that.dataSource;\n                var idField = dataSource._modelIdField();\n                var parentIdField = dataSource._modelParentIdField();\n                var pageable = that._isPageable();\n                var reorderable, clickMoveClick;\n\n                if (!editable || !editable.move) {\n                    return;\n                }\n\n                reorderable = editable.move.reorderable;\n\n                if (editable.move.clickMoveClick !== false && this._hasDragHandleColumn) {\n                    clickMoveClick = true;\n                }\n\n                this._dragging = new kendo.ui.HierarchicalDragAndDrop(this.wrapper, {\n                    $angular: this.$angular,\n                    autoScroll: true,\n                    holdToDrag: touchDevice,\n                    filter: that._hasDragHandleColumn ? \".k-drag-cell\" : \"tbody>tr\",\n                    itemSelector: \"tr\",\n                    allowedContainers: this.table,\n                    clickMoveClick: clickMoveClick,\n                    hintText: function(row) {\n                        var text = function() { return $(this).text(); };\n                        var separator = \"<span class='k-drag-separator'></span>\";\n\n                        row = row.closest(\"tr\");\n\n                        return row.children(\"td\").map(text).toArray().join(separator);\n                    },\n                    contains: (function(source, destination) {\n                        var dest = this.dataItem(destination);\n                        var src = this.dataItem(source);\n\n                        return src == dest || this.dataSource.contains(src, dest);\n                    }).bind(this),\n                    itemFromTarget: function(target) {\n                        var tr = target.closest(\"tr\");\n                        var prevRow = tr.prev();\n                        var nextRow = tr.next();\n                        var first;\n                        var last;\n\n                        if (prevRow) {\n                            first = !that.sameLevel(prevRow, tr);\n                        }\n\n                        if (nextRow) {\n                            last = !that.sameLevel(nextRow, tr);\n                        }\n\n                        return {\n                            item: tr,\n                            content: tr,\n                            first: first,\n                            last: last\n                        };\n                    },\n                    dragstart: (function(source) {\n                        this.wrapper.addClass(\"k-treelist-dragging\");\n\n                        if (this.wrapper.find('.k-grid-content').length) {\n                            this.wrapper.find('.k-grid-content table, .k-grid-content-locked table').css(\"position\", \"relative\");\n                        }\n\n                        var model = this.dataItem(source);\n\n                        return this.trigger(DRAGSTART, { source: model });\n                    }).bind(this),\n                    drag: (function(e) {\n                        e.source = this.dataItem(e.source);\n\n                        this.trigger(DRAG, e);\n                    }).bind(this),\n                    drop: (function(e) {\n                        e.source = this.dataItem(e.source);\n                        e.destination = this.dataItem(e.destination);\n\n                        this.wrapper.removeClass(\"k-treelist-dragging\");\n\n                        if (this.wrapper.find('.k-grid-content').length) {\n                            this.wrapper.find('.k-grid-content table, .k-grid-content-locked table').css(\"position\", \"static\");\n                        }\n\n                        return this.trigger(DROP, e);\n                    }).bind(this),\n                    dragend: (function(e) {\n                        var dest = this.dataItem(e.destination);\n                        var src = this.dataItem(e.source);\n                        var originalSrcParentId = src[parentIdField];\n                        var originalSrcIndex = dataSource._indexInChildrenMap(src);\n                        var position = e.position;\n\n                        if (position == \"over\") {\n                            if (pageable) {\n                                dataSource._removeFromChildrenMap(src);\n                                src[parentIdField] = dest ? dest[idField] : null;\n\n                                dataSource._initChildrenMapForParent(dest);\n\n                                // src.set() below will not work as the parent id is already set\n                                src[parentIdField] = originalSrcParentId;\n                            }\n\n                            var isPrevented = src.set(\"parentId\", dest ? dest.id : null);\n\n                            if (pageable && isPrevented) {\n                                dataSource._removeFromChildrenMap(src);\n                                src[parentIdField] = originalSrcParentId;\n                                dataSource._removeFromChildrenMap(src);\n                                dataSource._insertInChildrenMap(src, originalSrcIndex);\n                            }\n\n\n                        } else {\n                            if (position == \"before\") {\n                                that.insertBefore(src, dest);\n                            } else if (position == \"after\") {\n                                that.insertAfter(src, dest);\n                            }\n                        }\n\n                        e.source = src;\n                        e.destination = dest;\n\n                        this.trigger(DRAGEND, e);\n                    }).bind(this),\n                    reorderable: reorderable,\n                    dropHintContainer: function(item) {\n                        return item.children(\"td:visible\").eq(0);\n                    },\n                    dropPositionFrom: function(dropHint) {\n                        var contents;\n                        var length;\n                        var i;\n                        var dropHintElement;\n                        var isAfterText = false;\n\n                        if (dropHint.parent().find('.k-i-none').length) {\n                            return dropHint.prevAll(\".k-i-none\").length > 0 ? \"after\" : \"before\";\n                        } else {\n                            contents = dropHint.parent().contents();\n                            length = contents.length;\n                            dropHintElement = dropHint[0];\n\n                            for (i = 0; i < length; i++) {\n                                if (contents[i] === dropHintElement) {\n                                    break;\n                                }\n\n                                if (contents[i].nodeType === 3) {\n                                    isAfterText = true;\n                                }\n                            }\n\n                            return isAfterText ? \"after\" : \"before\";\n                        }\n                    }\n                });\n            },\n\n            sameLevel: function() {\n               return arguments[0].find(\".\" + classNames.iconHidden).length === arguments[1].find(\".\" + classNames.iconHidden).length;\n            },\n\n            insertAfter: function(nodeData, referenceNode) {\n                this.insertAction(nodeData, referenceNode, 1);\n            },\n\n            insertBefore: function(nodeData, referenceNode) {\n                this.insertAction(nodeData, referenceNode, 0);\n            },\n\n            insertAction: function(nodeData, referenceNode, indexOffset) {\n                var that = this;\n                var dataSource = that.dataSource;\n                var parentIdField = dataSource._modelParentIdField();\n                var referenceNodeIndex;\n                var nodeDataIndex = dataSource.indexOf(nodeData);\n                var pageable = that._isPageable();\n                var originalDestIndex = dataSource._indexInChildrenMap(referenceNode);\n                var destIndex;\n                var childrenMap = dataSource._getChildrenMap() || {};\n                var parentId = nodeData[parentIdField];\n\n                that._unbindDataSource();\n                that._unbindDataChange();\n\n                if (pageable) {\n                    dataSource._removeFromChildrenMap(nodeData);\n                }\n\n                if (nodeData[parentIdField] != referenceNode[parentIdField]) {\n                     nodeData.set(\"parentId\", referenceNode && referenceNode.parentId ? referenceNode.parentId : null);\n                }\n\n                dataSource._data.splice(nodeDataIndex, 1);\n                referenceNodeIndex = dataSource.indexOf(referenceNode);\n                destIndex = referenceNodeIndex + indexOffset;\n\n                if (pageable) {\n                    originalDestIndex += indexOffset;\n\n                    if (childrenMap[parentId].length <= originalDestIndex) {\n                        originalDestIndex = childrenMap[parentId].length;\n                    }\n                    dataSource._insertInChildrenMap(nodeData, originalDestIndex);\n                }\n\n                dataSource._data.splice(destIndex, 0, nodeData);\n                dataSource._destroyed.pop();\n                that._bindDataChange();\n                that._bindDataSource();\n                that.refresh();\n            },\n\n            _bindDataChange: function() {\n                var dataSource = this.dataSource;\n                if (dataSource._data && dataSource._changeHandler) {\n                    dataSource._data.bind(CHANGE, dataSource._changeHandler);\n                    dataSource._data.trigger(CHANGE);\n                }\n            },\n\n            _unbindDataChange: function() {\n                var dataSource = this.dataSource;\n                if (dataSource._data && dataSource._changeHandler) {\n                    dataSource._data.unbind(CHANGE, dataSource._changeHandler);\n                }\n            },\n\n            _bindDataSource: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n\n                if (dataSource) {\n                    dataSource.bind(CHANGE, that._refreshHandler);\n                }\n            },\n\n            _unbindDataSource: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n\n                if (dataSource) {\n                    dataSource.unbind(CHANGE, that._refreshHandler);\n                }\n            },\n\n            itemFor: function(model) {\n                if (typeof model == \"number\") {\n                    model = this.dataSource.get(model);\n                }\n\n                return this.tbody.find(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\");\n            },\n\n            _itemFor: function(model) {\n                var that = this;\n                var table = that.lockedContent ? that.lockedTable : that.table;\n\n                if (typeof model == \"number\") {\n                    model = this.dataSource.get(model);\n                }\n\n                return table.find(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\");\n            },\n\n            _scrollable: function() {\n                if (this.options.scrollable) {\n                    var scrollables = this.thead.closest(\".k-grid-header-wrap\");\n                    var lockedContent = $(this.lockedContent)\n                        .on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, this._wheelScroll.bind(this));\n\n                    this.content.on(\"scroll\" + NS, function() {\n                        kendo.scrollLeft(scrollables, this.scrollLeft);\n                        lockedContent.scrollTop(this.scrollTop);\n                    });\n\n                    this.element.find(\".k-grid-content, .k-grid-content-locked\").wrapAll(\"<div class='k-grid-container' />\");\n\n                    var touchScroller = kendo.touchScroller(this.content);\n\n                    if (touchScroller && touchScroller.movable) {\n                        this._touchScroller = touchScroller;\n\n                        touchScroller.movable.bind(\"change\", function(e) {\n                            kendo.scrollLeft(scrollables, -e.sender.x);\n                            if (lockedContent) {\n                                lockedContent.scrollTop(-e.sender.y);\n                            }\n                        });\n                    }\n                }\n            },\n\n            _wheelScroll: function(e) {\n                if (e.ctrlKey) {\n                    return;\n                }\n\n                var delta = kendo.wheelDeltaY(e);\n                var lockedDiv = $(e.currentTarget);\n\n                if (delta) {\n                    if (lockedDiv[0].scrollHeight > lockedDiv[0].clientHeight &&\n                        (lockedDiv[0].scrollTop < lockedDiv[0].scrollHeight - lockedDiv[0].clientHeight && delta < 0 ||\n                        lockedDiv[0].scrollTop > 0 && delta > 0)) {\n                        e.preventDefault();\n                    }\n                    //In Firefox DOMMouseScroll event cannot be canceled\n                    lockedDiv.one(\"wheel\" + NS, false);\n\n                    this.content.scrollTop(this.content.scrollTop() + (-delta));\n                }\n            },\n\n            _progress: function() {\n                var messages = this.options.messages;\n\n                if (!this.tbody.find(\"tr\").length) {\n                    this._showStatus(\n                        kendo.template(\n                            function (ref) {\n                                var className = ref.className;\n                                var messages = ref.messages;\n\n                                return (\"<span class='\" + className + \"'></span> \" + (encode(messages.loading)));\n                    }\n                        )({\n                            className: classNames.icon + \" \" + classNames.loading,\n                            messages: messages\n                        })\n                    );\n                }\n            },\n\n            _error: function(e) {\n                if (!this.dataSource.rootNodes().length) {\n                    this._render({ error: e });\n                }\n            },\n\n            refresh: function(e) {\n                var that = this;\n                e = e || {};\n\n                if (e.action == \"itemchange\" && this.editor) {\n                    return;\n                }\n\n                if (this.trigger(DATABINDING)) {\n                    return;\n                }\n                var current = $(this.current());\n                var isCurrentInHeader = false;\n                var currentIndex;\n\n                this._cancelEditor();\n\n                this._render();\n\n                this._adjustHeight();\n\n                if (this.options.navigatable) {\n                    if (this._isActiveInTable() || this.editor) {\n                        isCurrentInHeader = current.is(\"th\");\n                        currentIndex = isCurrentInHeader ? current.parent().children(\":not(.k-group-cell)\").index(current[0]) : Math.max(this.cellIndex(current), 0);\n                    }\n\n                    this._restoreCurrent(currentIndex, isCurrentInHeader);\n                }\n\n                if (that._checkBoxSelection) {\n                    that._deselectCheckRows(that.items(), true);\n                }\n\n                that._aria();\n\n                this.trigger(DATABOUND);\n            },\n\n            _angularFooters: function(command) {\n                var i, footer, aggregates;\n                var allAggregates = this.dataSource.aggregates();\n                var footerRows = this._footerItems();\n\n                for (i = 0; i < footerRows.length; i++) {\n                    footer = footerRows.eq(i);\n                    aggregates = allAggregates[footer.attr(\"data-parentId\")];\n\n                    this._angularFooter(command, footer.find(\"td\").get(), aggregates);\n                }\n            },\n\n            _angularFooter: function(command, cells, aggregates) {\n                var columns = this.columns;\n                this.angular(command, function() {\n                    return {\n                        elements: cells,\n                        data: map(columns, function(col) {\n                            return {\n                                column: col,\n                                aggregate: aggregates && aggregates[col.field]\n                            };\n                        })\n                    };\n                });\n            },\n\n            items: function() {\n                if (this._hasLockedColumns) {\n                    return this._items(this.tbody).add(this._items(this.lockedTable));\n                } else {\n                    return this._items(this.tbody);\n                }\n            },\n\n            _items: function(container) {\n                return container.find(\"tr[data-uid]\").filter(function() {\n                    return !$(this).hasClass(classNames.footerTemplate);\n                });\n            },\n\n            _footerItems: function() {\n                var container = this.tbody;\n                if (this._hasLockedColumns) {\n                    container = container.add(this.lockedTable);\n                }\n\n                return container.find(\"tr\").filter(function() {\n                    return $(this).hasClass(classNames.footerTemplate);\n                });\n            },\n\n            dataItems: function() {\n                var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n                if (this._hasLockedColumns) {\n                    var n = dataItems.length, tmp = new Array(2 * n);\n                    for (var i = n; --i >= 0;) {\n                        tmp[i] = tmp[i + n] = dataItems[i];\n                    }\n                    dataItems = tmp;\n                }\n\n                return dataItems;\n            },\n\n            _showNoRecordsTemplate: function() {\n                var wrapper = '<div class=\"{0}\">{1}</div>';\n                var defaultTemplate = '<div class=\"k-grid-norecords-template\"{1}>{0}</div>';\n                var scrollableNoGridHeightStyles = (this.options.scrollable && !this.wrapper[0].style.height) ? (\" \" + (kendo.attr(\"style-margin\")) + \"=\\\"0 auto\\\" \" + (kendo.attr(\"style-position\")) + \"=\\\"static\\\"\") : '';\n                var template;\n                var noRecordsElement;\n\n                this._contentTree.render([]);\n                if (this._hasLockedColumns) {\n                    this._lockedContentTree.render([]);\n                }\n\n                template = kendo.format(defaultTemplate, this.options.messages.noRows, scrollableNoGridHeightStyles);\n\n                noRecordsElement = $(kendo.template(function () { return kendo.format(wrapper, NORECORDSCLASS, template); })({}));\n                kendo.applyStylesFromKendoAttributes(noRecordsElement, [\"margin\", \"position\"]);\n                noRecordsElement.insertAfter(this.table);\n            },\n\n            _showStatus: function(message) {\n                var status = this.element.find(\".k-status\");\n                var content = $(this.content).add(this.lockedContent);\n\n                if (!status.length) {\n                    status = $(\"<div class='k-status' role='alert' aria-live='polite' />\").appendTo(this.element);\n                }\n\n                this._contentTree.render([]);\n                if (this._hasLockedColumns) {\n                    this._lockedContentTree.render([]);\n                }\n\n                content.hide();\n\n                status.html(message);\n            },\n\n            _hideStatus: function() {\n                this.element.find(\".k-status\").remove();\n                this._hideNoRecordsTempalte();\n\n                $(this.content).add(this.lockedContent).show();\n            },\n\n            _hideNoRecordsTempalte: function() {\n                this.element.find(\".\" + NORECORDSCLASS).remove();\n            },\n\n            _adjustHeight: function() {\n                var that = this;\n                var element = this.element;\n                var contentWrap = element.find(DOT + classNames.gridContentWrap);\n                var header = element.find(DOT + classNames.gridHeader);\n                var toolbar = element.find(DOT + classNames.gridToolbar);\n                var status = element.find(DOT + classNames.status);\n                var pagerHeight = that._isPageable() && that.pager && that.pager.element.is(\":visible\") ? outerHeight(that.pager.element) : 0;\n                var height;\n                var scrollbar = kendo.support.scrollbar();\n\n                element.css(HEIGHT, this.options.height);\n\n                // identical code found in grid & scheduler :(\n                var isHeightSet = function(el) {\n                    var initialHeight, newHeight;\n                    if (el[0].style.height) {\n                        return true;\n                    } else {\n                        initialHeight = el.height();\n                    }\n\n                    el.height(\"auto\");\n                    newHeight = el.height();\n                    el.height(\"\");\n\n                    return (initialHeight != newHeight);\n                };\n\n                if (isHeightSet(element)) {\n                    height = element.height() - outerHeight(header) - outerHeight(toolbar) - outerHeight(status) - pagerHeight;\n\n                    contentWrap.height(height);\n\n                    if (this._hasLockedColumns) {\n                        scrollbar = this.table[0].offsetWidth > this.table.parent()[0].clientWidth ? scrollbar : 0;\n                        this.lockedContent.height(height - scrollbar);\n                    }\n                }\n            },\n\n            _resize: function(size, force) {\n                this._applyLockedContainersWidth();\n                this._adjustHeight();\n\n                if (this.pager && this.pager.element) {\n                    this.pager.resize(force);\n                }\n            },\n\n            _minScreenSupport: function() {\n                var any = this.hideMinScreenCols();\n\n                if (any) {\n                    this.minScreenResizeHandler = this.hideMinScreenCols.bind(this);\n                    $(window).on(\"resize\", this.minScreenResizeHandler);\n                }\n            },\n\n            _iterateMinScreenCols: function(cols, screenWidth) {\n                var any = false;\n\n                for (var i = 0; i < cols.length; i++) {\n                    var col = cols[i];\n                    var minWidth = col.minScreenWidth;\n                    if (minWidth !== undefined$1 && minWidth !== null) {\n                        any = true;\n                        if (minWidth > screenWidth) {\n                            this.hideColumn(col);\n                        } else {\n                            this.showColumn(col);\n                        }\n                    }\n                    if (!col.hidden && col.columns) {\n                        any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                    }\n                }\n                return any;\n            },\n\n            hideMinScreenCols: function() {\n                var cols = this.columns,\n                    screenWidth = (window.innerWidth > 0) ? window.innerWidth : screen.width;\n\n                return this._iterateMinScreenCols(cols, screenWidth);\n            },\n\n            destroy: function() {\n                this._destroyColumnAttachments();\n\n                DataBoundWidget.fn.destroy.call(this);\n\n                var dataSource = this.dataSource;\n\n                dataSource.unbind(CHANGE, this._refreshHandler);\n                dataSource.unbind(ERROR, this._errorHandler);\n                dataSource.unbind(PROGRESS, this._progressHandler);\n\n                if (this._navigatableTables) {\n                    this._navigatableTables.off(NS);\n                    this._navigatableTables = null;\n                    this._headertables = null;\n                }\n\n                this._current = null;\n\n                if (this._resizeHandler) {\n                    $(window).off(\"resize\" + NS, this._resizeHandler);\n                }\n\n                if (this._dragging) {\n                    this._dragging.destroy();\n                    this._dragging = null;\n                }\n\n                if (this.resizable) {\n                    this.resizable.destroy();\n                    this.resizable = null;\n                }\n\n                if (this.reorderable) {\n                    this.reorderable.destroy();\n                    this.reorderable = null;\n                }\n\n                if (this._draggableInstance && this._draggableInstance.element) {\n                    this._draggableInstance.destroy();\n                    this._draggableInstance = null;\n                }\n\n                if (this.selectable) {\n                    this.selectable.destroy();\n                }\n\n                if (this._userEvents) {\n                    this._userEvents.destroy();\n                    this._userEvents = null;\n                }\n\n                if (this.minScreenResizeHandler) {\n                    $(window).off(\"resize\", this.minScreenResizeHandler);\n                }\n\n                this._destroyEditor();\n\n                this.element.off(NS);\n                if (this.wrapper) {\n                    this.wrapper.off(NS);\n                }\n\n                if (this._touchScroller) {\n                    this._touchScroller.destroy();\n                }\n\n                this._destroyPager();\n\n                if (dataSource) {\n                    dataSource._dataMaps = null;\n                }\n\n                this._autoExpandable = null;\n\n                this._refreshHandler = this._errorHandler = this._progressHandler = this._dataSourceFetchProxy = null;\n\n                this.thead =\n                    this.content =\n                    this.tbody =\n                    this.table =\n                    this.element =\n                    this.lockedHeader =\n                    this.lockedContent = null;\n\n                this._statusTree =\n                    this._headerTree =\n                    this._contentTree =\n                    this._lockedHeaderColsTree =\n                    this._lockedContentColsTree =\n                    this._lockedHeaderTree =\n                    this._lockedContentTree = null;\n\n                kendo.destroy(this.wrapper);\n            },\n\n            options: {\n                name: \"TreeList\",\n                columns: [],\n                autoBind: true,\n                scrollable: true,\n                selectable: false,\n                sortable: false,\n                toolbar: null,\n                height: null,\n                columnMenu: false,\n                messages: {\n                    noRows: \"No records to display\",\n                    loading: \"Loading...\",\n                    requestFailed: \"Request failed.\",\n                    retry: \"Retry\",\n                    dragHandleLabel: \"Drag row\",\n                    commands: {\n                        edit: \"Edit\",\n                        update: \"Save\",\n                        canceledit: \"Cancel\",\n                        create: \"Add new record\",\n                        createchild: \"Add child record\",\n                        destroy: \"Delete\",\n                        excel: \"Export to Excel\",\n                        pdf: \"Export to PDF\",\n                        search: \"Search...\"\n                    },\n                    sortHeader: \"Press Enter to sort\",\n                    filterCellTitle: \"filter cell\"\n                },\n                excel: {\n                    hierarchy: true\n                },\n                resizable: false,\n                search: false,\n                filterable: false,\n                editable: false,\n                reorderable: false,\n                pageable: false,\n                renderAllRows: true,\n                rowTemplate: null,\n                altRowTemplate: null\n            },\n\n            events: [\n                CHANGE,\n                BEFORE_EDIT,\n                EDIT,\n                PAGE,\n                SAVE,\n                SAVE_CHANGES,\n                REMOVE,\n                EXPAND,\n                COLLAPSE,\n                DATABINDING,\n                DATABOUND,\n                CANCEL,\n                DRAGSTART,\n                DRAG,\n                DROP,\n                DRAGEND,\n                FILTERMENUINIT,\n                ITEM_CHANGE,\n                CELL_CLOSE,\n                FILTERMENUOPEN,\n                COLUMNHIDE,\n                COLUMNSHOW,\n                COLUMNREORDER,\n                COLUMNRESIZE,\n                COLUMNMENUINIT,\n                COLUMNMENUOPEN,\n                COLUMNLOCK,\n                COLUMNUNLOCK,\n                FILTER,\n                NAVIGATE,\n                SORT\n            ],\n\n            getOptions: function() {\n                var options = this.options;\n                options.dataSource = null;\n\n                var result = extend(true, {}, this.options);\n                result.columns = kendo.deepExtend([], this.columns);\n\n                var dataSource = this.dataSource;\n\n                var initialData = dataSource.options.data && dataSource._data;\n                dataSource.options.data = null;\n\n                result.dataSource = $.extend(true, {}, dataSource.options);\n\n                dataSource.options.data = initialData;\n\n                result.dataSource.data = initialData;\n                result.dataSource.page = dataSource.page();\n                result.dataSource.filter = $.extend(true, {}, dataSource.filter());\n                result.dataSource.pageSize = dataSource.pageSize();\n                result.dataSource.sort = dataSource.sort();\n                result.dataSource.group = dataSource.group();\n                result.dataSource.aggregate = dataSource.aggregate();\n\n                if (result.dataSource.transport) {\n                    result.dataSource.transport.dataSource = null;\n                }\n\n                if (result.pageable && result.pageable.pageSize) {\n                    result.pageable.pageSize = dataSource.pageSize();\n                }\n\n                result.$angular = undefined$1;\n\n                return result;\n            },\n\n            setOptions: function(options) {\n                var currentOptions = this.getOptions();\n                kendo.deepExtend(currentOptions, options);\n                if (!options.dataSource) {\n                    currentOptions.dataSource = this.dataSource;\n                }\n                var wrapper = this.wrapper;\n                var events = this._events;\n                var element = this.element;\n\n                this.destroy();\n                this.options = null;\n                if (wrapper[0] !== element[0]) {\n                    wrapper.before(element);\n                    wrapper.remove();\n                }\n                element.empty();\n\n                this.init(element, currentOptions, events);\n                this._setEvents(currentOptions);\n            },\n\n            _destroyColumnAttachments: function() {\n                var that = this;\n\n                if (!that.thead) {\n                    return;\n                }\n\n                this.angular(\"cleanup\", function() {\n                    return { elements: that.thead.get() };\n                });\n\n                that.thead.add(that.lockedHeader).find(\"th\").each(function() {\n                    var th = $(this),\n                        filterMenu = th.data(\"kendoFilterMenu\"),\n                        sortable = th.data(\"kendoColumnSorter\"),\n                        columnMenu = th.data(\"kendoColumnMenu\");\n\n                    if (filterMenu) {\n                        filterMenu.destroy();\n                    }\n\n                    if (sortable) {\n                        sortable.destroy();\n                    }\n\n                    if (columnMenu) {\n                        columnMenu.destroy();\n                    }\n                });\n            },\n\n            _toggle: function(model, expand) {\n                var that = this;\n                var defaultPromise = $.Deferred().resolve().promise();\n                var loaded = model.loaded();\n\n                if (that._isIncellEditable() && that.editor) {\n                    // manually trigger change as the expand/collapse icons are not focusable\n                    $(activeElement()).change();\n                    that.closeCell();\n                }\n\n                // reset error state\n                if (model._error) {\n                    model.expanded = false;\n                    model._error = undefined$1;\n                }\n\n                // do not load items that are currently loading\n                if (!loaded && model.expanded) {\n                    return defaultPromise;\n                }\n\n                // toggle expanded state\n                if (typeof expand == \"undefined\") {\n                    expand = !model.expanded;\n                }\n\n                model.expanded = expand;\n\n                function afterModelLoaded() {\n                    that._toggleData();\n                    if (that._isPageable()) {\n                        that.refresh();\n                    } else {\n                        that._render();\n                    }\n                    that._syncLockedContentHeight();\n                }\n\n                if (!loaded) {\n                    defaultPromise = this.dataSource.load(model)\n                        .always((function() {\n                            afterModelLoaded();\n                        }));\n                }\n\n                afterModelLoaded();\n\n                return defaultPromise;\n            },\n\n            _toggleData: function() {\n                var that = this;\n\n                if (that._isPageable()) {\n                    that._togglePageableData();\n                }\n            },\n\n            _togglePageableData: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n                var data = dataSource._getData();\n                var result;\n                var queryOptions = dataSource._defaultPageableQueryOptions();\n\n                that._renderProgress(true);\n\n                var childrenMap = dataSource._getChildrenMap() || dataSource.childrenMap(dataSource._getData());\n\n                dataSource._processDataItemsState(data, childrenMap);\n\n                result = dataSource._processPageableQuery(data, queryOptions);\n\n                queryOptions.childrenMap = result.childrenMap;\n                queryOptions.filteredChildrenMap = result.filteredChildrenMap;\n\n                dataSource._aggregateResult = dataSource._calculateAggregates(result.dataToAggregate, queryOptions);\n\n                dataSource.view(result.data);\n\n                if (!dataSource.filter()) {\n                    dataSource._calculateCollapsedTotal();\n                }\n\n                that._refreshPager();\n\n                that._renderProgress(false);\n            },\n\n            _refreshPager: function() {\n                var pager = this.pager;\n\n                if (pager) {\n                    pager.refresh();\n                }\n            },\n\n            expand: function(row) {\n                return this._toggle(this.dataItem(row), true);\n            },\n\n            collapse: function(row) {\n                return this._toggle(this.dataItem(row), false);\n            },\n\n            _toggleChildren: function(e) {\n                var icon = $(e.target);\n                var model = this.dataItem(icon);\n\n                if (!model) {\n                    return;\n                }\n\n                var event = !model.expanded ? EXPAND : COLLAPSE;\n\n                if (!this.trigger(event, { model: model })) {\n                    this._toggle(model);\n                }\n\n                e.preventDefault();\n            },\n\n            _navigatable: function() {\n                var that = this;\n\n                if (!that.options.navigatable) {\n                    that.table.attr(\"tabindex\", 0);\n                    return;\n                }\n                var tables = that.table.add(that.lockedTable);\n\n                var headerTables = that.thead.parent().add($(\">table\", that.lockedHeader));\n                if (that.options.scrollable) {\n                    //add the header table when the widget is scrollable\n                    tables = tables.add(headerTables);\n                }\n\n                headerTables\n                    .find(\"a.k-link\").attr(\"tabIndex\", -1);\n\n                this._navigatableTables = tables;\n                this._headertables = headerTables;\n\n                tables\n                    //handle click on tables, will attempt to focus the table\n                    .on((kendo.support.touch ? \"touchstart\" + NS : \"mousedown\" + NS), NAVROW + \">:visible\", that._tableClick.bind(that))\n                    .on(\"focus\" + NS, that._tableFocus.bind(that))\n                    .on(\"focusout\" + NS, that._tableBlur.bind(that))\n                    .on(\"keydown\" + NS, that._tableKeyDown.bind(that));\n            },\n\n            cellIndex: function(td) {\n                var lockedColumnOffset = 0;\n\n                if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                    lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n                }\n\n                return $(td).parent().children().index(td) + lockedColumnOffset;\n            },\n\n            _isActiveInTable: function() {\n                var active = kendo._activeElement();\n\n                if (!active) { return false; }\n\n                return this.table[0] === active ||\n                    $.contains(this.table[0], active) ||\n                    (this.lockedTable &&\n                        (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active))\n                    );\n            },\n\n            _restoreCurrent: function(currentIndex, isCurrentInHeader) {\n                var rowIndex;\n                var row;\n                var td;\n\n                if (currentIndex === undefined$1 || currentIndex < 0) {\n                    return;\n                }\n\n                if (this._current) {\n                    this._current.removeClass(\"k-focus\");\n                }\n\n                if (isCurrentInHeader) {\n                    this._setCurrent(this.thead.find(\"th\").eq(currentIndex));\n                } else {\n                    rowIndex = 0;\n                    currentIndex = 0;\n\n                    row = $();\n\n                    if (this.lockedTable) {\n                        row = this.lockedTable.find(\">tbody>tr:visible\").eq(rowIndex);\n                    }\n                    row = row.add(this.tbody.children().eq(rowIndex));\n\n                    td = row.find(\">td:visible\")\n                        .eq(currentIndex);\n\n                    this._setCurrent(td);\n                }\n\n                if (this._current) {\n                    focusTable(this.table, true);\n                    this._current.addClass(\"k-focus\");\n                }\n            },\n\n            current: function(newCurrent) {\n                return this._setCurrent(newCurrent, true);\n            },\n\n            _setCurrent: function(newCurrent, preventTrigger, isIncellEditable) {\n                var that = this;\n                var current = that._current;\n                newCurrent = $(newCurrent);\n\n                if (isIncellEditable) {\n                    if (newCurrent[0]) {\n                        that._current = newCurrent;\n                        that._updateCurrentAttr(that._current, newCurrent);\n                        that._scrollCurrent();\n\n                        if (!preventTrigger) {\n                            this.trigger(NAVIGATE, {\n                                element: newCurrent\n                            });\n                        }\n                    }\n                } else {\n                    if (newCurrent.length && (!current || current[0] !== newCurrent[0])) {\n                        this._updateCurrentAttr(current, newCurrent);\n\n                        this._scrollCurrent();\n\n                        if (!preventTrigger) {\n                            this.trigger(NAVIGATE, {\n                                element: newCurrent\n                            });\n                        }\n                    }\n\n                    if (newCurrent && newCurrent.length) {\n                        this._lastCellIndex = newCurrent.parent().children(DATA_CELL).index(newCurrent);\n                    }\n                }\n\n                return that._current;\n            },\n\n            _scrollCurrent: function() {\n                var current = this._current;\n                var scrollable = this.options.scrollable;\n\n                if (!current || !scrollable) {\n                    return;\n                }\n\n                var row = current.parent();\n                var tableContainer = row.closest(\"table\").parent();\n\n                var isInLockedContainer = tableContainer.is(\".k-grid-content-locked,.k-grid-header-locked\");\n                var isInContent = tableContainer.is(\".k-grid-content-locked,.k-grid-content\");\n\n                var scrollableContainer = $(this.content)[0];\n\n                //adjust scroll vertically\n                if (isInContent) {\n                    this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                }\n\n                if (this.lockedContent) {\n                    //sync locked and non-locked content scrollTop\n                    this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n                }\n\n                //adjust scroll horizontally, if not inside locked tables\n                if (!isInLockedContainer) {\n                    this._scrollTo(current[0], scrollableContainer);\n                }\n            },\n\n            _findCurrentCell: function() {\n                var that = this;\n                var current = that.current();\n                var elements = $(that.table).add(that.header).add(that.lockedTable).add(that.lockedHeader);\n\n                if (current && elements.find(current).length > 0) {\n                    return current;\n                } else {\n                    return elements.find(DOT + classNames.focused);\n                }\n            },\n\n            _scrollTo: function(element, container) {\n                var elementToLowercase = element.tagName.toLowerCase();\n                var isHorizontal = elementToLowercase === \"td\" || elementToLowercase === \"th\";\n                var table = $(element).closest(\"table\")[0];\n                var elementOffsetDir = element[isHorizontal ? \"offsetWidth\" : \"offsetHeight\"];\n                var containerScroll = container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"];\n                var containerOffsetDir = container[isHorizontal ? \"clientWidth\" : \"clientHeight\"];\n                var elementOffset = $(element).css(\"position\") === \"relative\" && isRtl && isHorizontal ? Math.abs(table.offsetLeft - element.offsetLeft) : element[isHorizontal ? \"offsetLeft\" : \"offsetTop\"];\n                var bottomDistance = elementOffset + elementOffsetDir;\n                var result = 0;\n                var ieCorrection = 0;\n                var firefoxCorrection = 0;\n\n                if (isRtl && isHorizontal) {\n                    if (browser.msie || browser.edge) {\n                        ieCorrection = table.offsetLeft;\n                    } else if (browser.mozilla || (browser.webkit && (browser.version > 85))) {\n                        firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                    }\n                }\n                containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n                if (containerScroll > elementOffset) {\n                    result = elementOffset;\n                } else if (bottomDistance > (containerScroll + containerOffsetDir)) {\n                    if (elementOffsetDir <= containerOffsetDir) {\n                        result = (bottomDistance - containerOffsetDir);\n                    } else {\n                        result = elementOffset;\n                    }\n                } else {\n                    result = containerScroll;\n                }\n                result = Math.abs(result + ieCorrection) + firefoxCorrection;\n                container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"] = result;\n            },\n\n            _aria: function() {\n                var wrapper = this.wrapper,\n                    gridRole = \"treegrid\",\n                    table = this.table,\n                    toolbar = wrapper.find(\".k-grid-toolbar\"),\n                    groupingHeader = wrapper.find(\".k-grouping-header\"),\n                    gridId = table.attr(\"id\"),\n                    tableTabindex = table.attr(\"tabindex\"),\n                    tbodyId, headerGroupId, footerGroupId, tableOwned,\n                    numberOfFixedRows = this.thead.find(\"tr\").length + this.wrapper.find(\".k-grid-footer-wrap table tr\").length,\n                    trailingColumns = this._trailingColumns(),\n                    virtual = this.virtualScroll,\n                    pageable = this.options.pageable,\n                    rowsCount;\n\n                table.attr({\n                    role: gridRole,\n                    tabindex: tableTabindex >= 0 ? tableTabindex : 0\n                });\n\n                table.find(\"tbody, thead, tfoot\").attr(\"role\", \"rowgroup\");\n                table.find(\"tr\").attr(\"role\", \"row\");\n                table.find(\"th\").attr(\"role\", \"columnheader\");\n                table.find(\"td\").attr(\"role\", \"gridcell\");\n\n                if ((pageable && this.dataSource.totalPages() > 1) || (virtual && virtual.rows)) {\n                    if (this._groups() > 0) {\n                        rowsCount = -1;\n                    } else {\n                        rowsCount = numberOfFixedRows + this.dataSource.total();\n                    }\n\n                    table.attr(\"aria-rowcount\", rowsCount);\n                }\n\n                if (rowsCount && rowsCount > 0) {\n                    this._ariaRowIndex();\n                }\n\n                if ((virtual && virtual.columns) ||\n                    (!table.attr(\"aria-colcount\") &&\n                        (table.find(\"td:hidden\").length > 0 ||\n                        wrapper.find(\".k-grid-content-locked td:hidden\").length > 0))) {\n                            table.attr(\"aria-colcount\", trailingColumns + leafColumns(this.columns).length);\n                            this._ariaColumnIndex();\n                }\n\n                if (!gridId) {\n                    gridId = kendo.guid();\n                    table.attr(\"id\", gridId);\n                }\n\n                if (this.pager) {\n                    this.pager.element.attr(\"aria-controls\", gridId);\n                }\n\n                toolbar.attr({\n                    role: \"toolbar\",\n                    \"aria-label\": this.options.messages.toolbarLabel,\n                    \"aria-controls\": gridId\n                });\n\n                groupingHeader.attr({\n                    role: \"toolbar\",\n                    \"aria-label\": this.options.messages.groupingHeaderLabel,\n                    \"aria-controls\": gridId\n                });\n\n                headerGroupId = this._ariaHeaderFooter(\"header\", \"thead\", \"th, td\", \"columnheader\");\n                footerGroupId = this._ariaHeaderFooter(\"footer\", \"tfoot\", \"td\", \"gridcell\");\n\n                if (wrapper.find(\".k-grid-content-locked\").length > 0) {\n                    this._ariaLockedContent();\n                }\n\n                if (!!headerGroupId || !!footerGroupId) {\n                    tbodyId = this.tbody.attr(\"id\") || kendo.guid();\n                    tableOwned = [headerGroupId, tbodyId, footerGroupId].join(\" \");\n\n                    this.tbody.attr(\"id\", tbodyId);\n                    table.attr(\"aria-owns\", tableOwned);\n                }\n            },\n\n            _ariaColumnIndex: function() {\n                var trailingColumns = this._trailingColumns(),\n                    dataVirtual = this.tbody.find(\">tr\").last().find(\"> td[data-virtual]\"),\n                    headerRows = this.thead.find(\">tr\").not(\".k-filter-row\"),\n                    lockedHeaderRows = this.wrapper.find(\".k-grid-header-locked thead > tr\").not(\".k-filter-row\"),\n                    firstIndex = Number.MAX_VALUE,\n                    lastIndex = 0,\n                    lockedLastIndex = 0,\n                    previousVirtual = 0,\n                    nextVirtual = 0,\n                    previousIndex, i, cells, dataIndex, cellsIndex,\n                    eachHeaderCell = function(j, cell) {\n                        var current = cell.getAttribute(\"data-index\"),\n                            currentIndex = Number(current),\n                            lockedParent = $(cell).closest(\".k-grid-header-locked\");\n\n                        if (lockedParent.length === 0 && currentIndex < firstIndex) {\n                            firstIndex = currentIndex;\n                        }\n\n                        if (lockedParent.length > 0 && lockedLastIndex < currentIndex) {\n                            lockedLastIndex = currentIndex;\n                        }\n\n                        if (lockedParent.length === 0 && lastIndex < currentIndex) {\n                            lastIndex = currentIndex;\n                        }\n\n                        if (current !== null) {\n                            cell.setAttribute(\"aria-colindex\", Number(currentIndex) + 1);\n                            previousIndex = Number(currentIndex) + 1 + cell.getAttribute(\"colspan\");\n                        } else {\n                            cell.setAttribute(\"aria-colindex\", previousIndex + 1);\n                            previousIndex = previousIndex + cell.getAttribute(\"colspan\");\n                        }\n                    };\n\n                if (dataVirtual.length === 2) {\n                    previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                    nextVirtual = Number(dataVirtual[1].getAttribute(\"colspan\"));\n                } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 0) {\n                    previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 1) {\n                    nextVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                }\n\n                for (i = 0; i < lockedHeaderRows.length; i++) {\n                    previousIndex = 0;\n                    lockedHeaderRows.eq(i).find(\"th\").each(eachHeaderCell);\n                }\n\n                for (i = 0; i < headerRows.length; i++) {\n                    previousIndex = 0;\n                    headerRows.eq(i).find(\"th\").each(eachHeaderCell);\n                }\n\n                for (i = 0; i <= lockedLastIndex; i++) {\n                    dataIndex = i + trailingColumns;\n                    cells = this.wrapper.find(\".k-grid-content-locked tbody > tr > td:nth-child(\" + (i + 1) + \")\");\n                    cells.attr(\"aria-colindex\", dataIndex + 1);\n                }\n\n                for (i = previousVirtual; i <= lastIndex - firstIndex - nextVirtual; i++) {\n                    if (previousVirtual === 0 ) {\n                        cellsIndex = i + 1;\n                    } else {\n                        cellsIndex = i - previousVirtual + 2;\n                    }\n\n                    dataIndex = firstIndex + i + trailingColumns;\n\n                    cells = this.tbody.find(\"> tr > td:nth-child(\" + cellsIndex + \")\");\n                    cells.attr(\"aria-colindex\", dataIndex + 1);\n                }\n            },\n\n            _ariaHeaderFooter: function(type, group, el, role) {\n                var that = this,\n                    wrapper = that.wrapper,\n                    table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                    lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                    groupId = \"\",\n                    rowGroup;\n\n                if (table.length > 0) {\n                    rowGroup = table.find(group + \", tbody\");\n                    groupId = rowGroup.attr(\"id\") || kendo.guid();\n\n                    table.attr(\"role\", \"none\");\n                    table.find(\"tr\").attr(\"role\", \"row\");\n                    table.find(el).attr(\"role\", role);\n                    rowGroup.attr({\n                        role: \"rowgroup\",\n                        id: groupId\n                    });\n                }\n\n                if (lockedTable.length > 0) {\n                    that._ariaLocked(type, group, el, role);\n                }\n\n                lockedTable.find(\"td\").attr(\"role\", \"gridcell\");\n                table.find(\"td\").attr(\"role\", \"gridcell\");\n\n                return groupId;\n            },\n\n            _ariaId: function() {\n                var id = this.element.attr(\"id\") || \"aria\";\n\n                if (id) {\n                    this._cellId = id + \"_active_cell\";\n                }\n            },\n\n            _ariaLocked: function(type, group, el, role) {\n                var that = this,\n                    wrapper = that.wrapper,\n                    table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                    lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                    rows = table.find(\"tr\"),\n                    lockedRows = lockedTable.find(\"tr\");\n\n                lockedTable.attr(\"role\", \"none\");\n                lockedTable.find(group + \", tbody\").attr(\"role\", \"none\");\n                lockedRows.attr(\"role\", \"none\");\n\n                lockedTable.find(el).attr(\"role\", role);\n\n                rows.each(function(i, row) {\n                    var ownedCells = [];\n\n                    ownedCells = that._cellsIds(lockedRows.eq(i).find(el), \"locked_\" + type, i);\n                    ownedCells = ownedCells.concat(that._cellsIds($(row).find(el), type, i));\n\n                    row.setAttribute(\"aria-owns\", ownedCells.join(\" \"));\n                });\n            },\n\n            _ariaLockedContent: function() {\n                var that = this,\n                    table = that.table,\n                    tableRows = table.find(\"tr\"),\n                    lockedTable = that.wrapper.find(\".k-grid-content-locked table\"),\n                    lockedRows = lockedTable.find(\"tr\");\n\n                lockedTable.attr(\"role\", \"none\");\n                lockedTable.find(\"tbody\").attr(\"role\", \"none\");\n                lockedRows.attr(\"role\", \"none\");\n                lockedTable.find(\"td\").attr(\"role\", \"gridcell\");\n\n                tableRows.each(function(i, row) {\n                    var ownedCells = [];\n\n                    ownedCells = that._cellsIds(lockedRows.eq(i).find(\"td\"), \"locked_datacell\", i);\n                    ownedCells = ownedCells.concat(that._cellsIds($(row).find(\"td\"), \"datacell\", i));\n\n                    row.setAttribute(\"aria-owns\", ownedCells.join(\" \"));\n                });\n            },\n\n            _ariaAddHiddenColIndex: function() {\n                var virtualScroll = this.virtualScroll || {},\n                    columns = this.columns,\n                    table = this.table,\n                    leafColsCount = leafColumns(columns).length;\n\n                if (!virtualScroll.columns && !table.attr(\"aria-colcount\")) {\n                    this._ariaColumnIndex();\n\n                    table.attr(\"aria-colcount\", leafColsCount);\n                }\n            },\n\n            _ariaRemoveHiddenColIndex: function() {\n                var virtualScroll = this.virtualScroll || {},\n                    columns = this.columns,\n                    leafColsCount = leafColumns(columns).length;\n\n                if (!virtualScroll.columns /* && (leafColsCount === visibleLeafColumns(this.columns).length)*/) {\n                    this.wrapper.find(\"td, th\").removeAttr(\"aria-colindex\");\n\n                    this.table.removeAttr(\"aria-colcount\");\n                }\n            },\n\n            _ariaRowIndex: function() {\n                var headerRows = this.thead.find(\">tr\"),\n                    numberOfHeaderRows = headerRows.length,\n                    bodyRows = this.tbody.find(\">tr\"),\n                    footerRows = this.wrapper.find(\".k-grid-footer-wrap tfoot > tr\"),\n                    totalNumberOfItems = this.dataSource.total(),\n                    previousItems = this.dataSource.skip() || 0,\n                    currentIndex = 1,\n                    previousMaster = false,\n                    i, currentRow;\n\n                for (i = 0; i < numberOfHeaderRows; i++) {\n                    headerRows.eq(i).attr(\"aria-rowindex\", currentIndex + i);\n                }\n\n                currentIndex = numberOfHeaderRows + previousItems;\n\n                for (i = 0; i < bodyRows.length; i++) {\n                    currentRow = bodyRows.eq(i);\n                    currentIndex = currentIndex + 1;\n                    currentRow.attr(\"aria-rowindex\", currentIndex);\n                }\n\n                currentIndex = numberOfHeaderRows + totalNumberOfItems + 1;\n\n                for (i = 0; i < footerRows.length; i++) {\n                    footerRows.eq(i).attr(\"aria-rowindex\", currentIndex + i);\n                }\n            },\n\n            _cellsIds: function(elements, prefix, i) {\n                var ownedCells = [];\n\n                elements.each(function(j, cell) {\n                    var id = cell.getAttribute(\"id\") || prefix + \"_\" + i + \"_\" + j;\n\n                    cell.setAttribute(\"id\", id);\n\n                    ownedCells.push(id);\n                });\n\n                return ownedCells;\n            },\n\n            _trailingColumns: function() {\n                return this._groups();\n            },\n\n            _groups: function() {\n                var group = this.dataSource.group();\n\n                return group ? group.length : 0;\n            },\n\n            _currentDataIndex: function(table, current) {\n                var index = current.attr(\"data-index\");\n\n                if (!index) {\n                    return undefined$1;\n                }\n\n                var lockedColumnsCount = lockedColumns(this.columns).length;\n                if (lockedColumnsCount && !table.closest(\"div\").hasClass(\"k-grid-content-locked\")[0]) {\n                    return index - lockedColumnsCount;\n                }\n\n                return index;\n            },\n\n            _prevVerticalCell: function(container, current) {\n                var cells;\n                var row = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                //get data-index in case of last level of multi-level columns\n                var index = this._currentDataIndex(container, current);\n                var cellSelector = DATA_CELL + \",\" + FILTER_CELL;\n\n                //current is in the header, but not at the last level of multi-level columns\n                if ((index || current.hasClass(\"k-header\")) && !row.hasClass(\"k-filter-row\")) {\n                    cells = parentColumnsCells(current);\n                    return cells.eq(cells.length - 2);\n                }\n\n                index = Math.max(row.children(cellSelector).index(current), this._lastCellIndex || 0);\n\n                //if current is inside filter row\n                if (row.hasClass(\"k-filter-row\")) {\n                    return leafDataCells(container).filter(isCellVisible).eq(index);\n                }\n\n                //move up to header container\n                if (rowIndex == -1) {\n                    //is there filter row in the header container\n                    row = container.find(\"tr.k-filter-row:visible\");\n                    if (!row[0]) {\n                        return leafDataCells(container).filter(isCellVisible).eq(index);\n                    }\n                } else {\n                    row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n                }\n\n                cells = row.children(cellSelector);\n                if (cells.length > index) {\n                    return cells.eq(index);\n                }\n\n                return cells.eq(0);\n            },\n\n            _nextVerticalCell: function(container, current) {\n                var cells;\n                var row = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                //get data-index in case of last level of multi-level columns\n                var index = this._currentDataIndex(container, current);\n                var cellSelector = DATA_CELL + \",\" + FILTER_CELL;\n\n                //current is in the header, but not at the last level of multi-level columns\n                //and we are not changing the table\n                if (rowIndex != -1 && index === undefined$1 && current.hasClass(\"k-header\")) {\n                    return childColumnsCells(current).eq(1);\n                }\n\n                index = index ? parseInt(index, 10) : row.children(cellSelector).index(current);\n                index = Math.max(index, this._lastCellIndex || 0);\n\n                //move down to data container\n                if (rowIndex == -1) {\n                    row = rows.eq(0);\n                } else {\n                    row = rows.eq(rowIndex + current[0].rowSpan);\n                }\n\n                var tmpIndex = index;\n                //in case of last level of multi-level columns the index should be updated depending on the hidden columns\n                if (this._currentDataIndex(container, current) !== undefined$1) {\n                    var currentRowCells = row.children(\":not(.k-group-cell):not(.k-hierarchy-cell)\");\n                    var hiddenColumns = currentRowCells.filter(\":hidden\");\n                    for (var idx = 0, length = hiddenColumns.length; idx < length; idx++) {\n                        if (currentRowCells.index(hiddenColumns[idx]) < index) {\n                            tmpIndex--;\n                        }\n                    }\n                }\n                index = tmpIndex;\n\n                cells = row.children(cellSelector);\n                if (cells.length > index) {\n                    return cells.eq(index);\n                }\n\n                return cells.eq(0);\n            },\n\n            _verticalContainer: function(container, up) {\n                var table = container.parent();\n                var length = this._navigatableTables.length;\n                var step = Math.floor(length / 2);\n                var index = inArray(table[0], this._navigatableTables);\n\n                if (up) {\n                    step *= -1;\n                }\n                index += step;\n\n                if (index >= 0 || index < length) {\n                    table = this._navigatableTables.eq(index);\n                }\n\n                return table.find(up ? \"thead\" : \"tbody\");\n            },\n\n            _filterFocusable: function() {\n                return this.wrapper.find(\".k-filter-row\").find(\".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible\");\n            },\n\n            _updateCurrentAttr: function(current, next) {\n                var headerId = $(current).data(\"headerId\");\n\n                $(current)\n                    .removeClass(classNames.focused);\n                this.table.removeAttr(ARIA_ACTIVEDESCENDANT);\n\n                if (headerId) {\n                    headerId = headerId.replace(this._cellId, \"\");\n                    $(current).attr(\"id\", headerId);\n                } else {\n                    $(current).removeAttr(\"id\");\n                }\n\n                next\n                    .data(\"headerId\", next.attr(\"id\"))\n                    .attr(\"id\", this._cellId)\n                    .addClass(classNames.focused);\n\n\n                this.table.attr(ARIA_ACTIVEDESCENDANT, this._cellId);\n\n                this._current = next;\n            },\n\n            _tableKeyDown: function(e) {\n                var handled = false;\n                var current = this.current();\n                var target = $(e.target);\n                var canHandle = !e.isDefaultPrevented() && !target.is(\":button,a,:input,a>.k-icon,a>.k-svg-icon\");\n\n                current = current ? current : $(this.lockedTable).add(this.table).find(NAVROW + \" > td:visible\").first();\n\n                if (e.altKey && e.keyCode == keys.DOWN) {\n                    current.find(\".k-grid-filter-menu, .k-grid-column-menu\").click();\n                    e.stopImmediatePropagation();\n                    return;\n                }\n\n                if (e.keyCode === keys.F10 && this.toolbar && this.toolbar.length) {\n                    this.toolbar.find(\"[tabindex=0]:visible\").first().trigger(\"focus\");\n                    handled = true;\n                }\n\n                if (canHandle && e.keyCode == keys.UP) {\n                    handled = this._moveUp(current, e.shiftKey);\n                }\n\n                if (canHandle && e.keyCode == keys.DOWN) {\n                    handled = this._moveDown(current, e.shiftKey);\n                }\n\n                if (canHandle && e.ctrlKey && current.is(\".k-header\") && this.options.reorderable && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                    this._moveColumn(current, true);\n                } else if (canHandle && e.ctrlKey && current.is(\".k-header\") && this.options.reorderable && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                    this._moveColumn(current, false);\n                } else if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                    if (e.altKey) {\n                        this._handleExpand(current);\n                        handled = true;\n                    } else {\n                        handled = this._moveRight(current);\n                    }\n                } else if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                    if (e.altKey) {\n                        this._handleCollapse(current);\n                        handled = true;\n                    } else {\n                        handled = this._moveLeft(current);\n                    }\n                }\n\n                if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                    handled = this._handlePageDown();\n                }\n\n                if (canHandle && e.keyCode == keys.PAGEUP) {\n                    handled = this._handlePageUp();\n                }\n\n                if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                    handled = this._handleEnterKey(current, e.currentTarget, target);\n                }\n\n                if (e.keyCode == keys.ESC) {\n                    handled = this._handleEscKey(current, e.currentTarget);\n                }\n\n                if (canHandle && e.keyCode == keys.HOME) {\n                    handled = this._handleHome(current, e.ctrlKey);\n                }\n\n                if (canHandle && e.keyCode == keys.END) {\n                    handled = this._handleEnd(current, e.ctrlKey);\n                }\n\n                if (e.keyCode == keys.TAB) {\n                    handled = this._handleTabKey(current, e.currentTarget, e.shiftKey, target);\n                }\n\n                if (handled) {\n                    //prevent scrolling while pressing the keys\n                    e.preventDefault();\n                    //required in hierarchy\n                    e.stopPropagation();\n                }\n            },\n\n            _moveColumn: function(current, isLeft) {\n                var elements = this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter + \":visible\");\n                var columns = visibleColumns(flatColumnsInDomOrder(this.columns));\n                var oldIndex = elements.index($(current));\n                var offset = isLeft ? - 1 : 1;\n                var column = columns[oldIndex];\n                var newIndex = targetParentContainerIndex(columns, this.columns, oldIndex, oldIndex + offset);\n\n                if (newIndex >= 0) {\n                    this.reorderColumn(newIndex, column, isLeft);\n                    this.trigger(COLUMNREORDER, {\n                        newIndex: newIndex,\n                        oldIndex: oldIndex,\n                        column: column\n                    });\n                }\n            },\n\n            _handleExpand: function(current) {\n                var that = this;\n                var row = current.parent();\n                var model = that.dataItem(row);\n\n                if (current.hasClass(\"k-header\")) {\n                    return false;\n                }\n\n                if (model && model.hasChildren && !model.expanded && !that.trigger(EXPAND, { model: model })) {\n                    this.expand(row);\n                    return true;\n                }\n\n                return false;\n            },\n\n            _handleCollapse: function(current) {\n                var that = this;\n                var row = current.parent();\n                var model = that.dataItem(row);\n\n                if (current.hasClass(\"k-header\")) {\n                    return false;\n                }\n\n                if (model && model.hasChildren && model.expanded && !that.trigger(COLLAPSE, { model: model })) {\n                    that.collapse(row);\n                    return true;\n                }\n\n                return false;\n            },\n\n            _handleHome: function(current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var prev;\n\n                if (ctrl) {\n                    if (this.lockedTable) {\n                        prev = this.lockedTable.find(NAVROW + \" > td:visible\").first();\n                    } else {\n                        prev = this.table.find(NAVROW + \" > td:visible\").first();\n                    }\n                } else if (isInBody || isInLockedTable) {\n                    if (isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    prev = row.children(NAVCELL).first();\n                }\n\n                if (prev && prev.length) {\n                    this._setCurrent(prev);\n                    return true;\n                }\n            },\n\n            _handleEnd: function(current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var next;\n\n                if (ctrl) {\n                    next = this.table.find(ITEMROW).last().children(NAVCELL).last();\n                } else if (isInBody || isInLockedTable) {\n                    if (!isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    next = row.children(NAVCELL).last();\n                }\n\n                if (next && next.length) {\n                    this._setCurrent(next);\n                    return true;\n                }\n            },\n\n            _handlePageDown: function() {\n                var that = this;\n\n                if (!that._isPageable()) {\n                    return false;\n                }\n\n                that.dataSource._restorePageSizeAfterAddChild();\n                that.dataSource.page(that.dataSource.page() + 1);\n\n                return true;\n            },\n\n            _handlePageUp: function() {\n                var that = this;\n\n                if (!that._isPageable()) {\n                    return false;\n                }\n\n                that.dataSource._restorePageSizeAfterAddChild();\n                that.dataSource.page(that.dataSource.page() - 1);\n\n                return true;\n            },\n\n            _handleEscKey: function(current, currentTable) {\n                var active = kendo._activeElement();\n                var currentIndex;\n                var that = this;\n                var row;\n                var rowIndex;\n                var cellIndex;\n                var tbody;\n\n                if (!current || !current.parent().hasClass(\"k-grid-edit-row\")) {\n                    if (current.has(active).length) {\n                        // return focus back to the table\n                        focusTable(that.table, true);\n\n                        return true;\n                    }\n\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        this._filterFocusable().attr(TABINDEX, -1);\n                        focusTable(this.table, true);\n\n                        return true;\n                    }\n\n                    return false;\n                }\n\n                if (that._isIncellEditable()) {\n                    row = current.parent();\n                    cellIndex = current.index();\n                    rowIndex = row.index();\n                    tbody = row.closest(\"tbody\");\n\n                    that.closeCell(true);\n\n                    // refresh the current element as the DOM element reference can be changed after render()\n                    // moving this to closeCell() causes flickering when clicking on a cell and then on another\n                    // as 'k-focused' is shown for the closing cell and then added to the newly edited cell\n                    that._setCurrent(tbody.children().eq(rowIndex).children().eq(cellIndex), false, true);\n                } else {\n                    currentIndex = $(current).parent().index();\n                    if (active) {\n                        active.blur();\n                    }\n                    this.cancelRow();\n                    if (currentIndex >= 0) {\n                        this._setCurrent(this.items().eq(currentIndex).children(NAVCELL).first());\n                    }\n                }\n\n                focusTable(that.table, true);\n\n                return true;\n            },\n\n            _handleEnterKey: function(current, currentTable, target) {\n                var editable = this.options.editable;\n                var container = target.closest(\"[role=gridcell]\");\n                var focusable, link, filterFocusable;\n\n                if (!target.is(\"table\") && !$.contains(current[0], target[0])) {\n                    current = container;\n                }\n\n                if (current.is(\"th\")) {\n                    // sort the column, if possible\n                    link = current.find(\".k-link\");\n\n                    if (current.has($(activeElement())).length > 0) {\n                        return false;\n                    } else if (link.length) {\n                        link.click();\n                    } else if (current.parent().hasClass(\"k-filter-row\")) {\n                        filterFocusable = this._filterFocusable();\n                        filterFocusable.attr(TABINDEX, 0);\n                        current.find(\":kendoFocusable\").first().focus();\n                    } else {\n                        current.find(CHECKBOXINPUT).trigger(\"focus\");\n                    }\n\n                    return true;\n                }\n\n                focusable = current.find(\":kendoFocusable\").first();\n                if (focusable[0] && current.hasClass(\"k-focus\")) {\n                    focusable.trigger(\"focus\");\n\n                    return true;\n                }\n\n                if (editable && !target.is(\":button,.k-button,textarea\")) {\n                    if (!container[0]) {\n                        container = current;\n                    }\n\n                    this._handleEditing(container, false, currentTable);\n\n                    return true;\n                }\n\n                if (!editable && current.is(\"td[aria-expanded]\")) {\n                    if (current.is(\"[aria-expanded=false]\")) {\n                        this._handleExpand(current);\n                    } else {\n                        this._handleCollapse(current);\n                    }\n                }\n\n                return false;\n            },\n\n            _handleTabKey: function(current, currentTable, shiftKey, target) {\n                var that = this;\n                var incellEditing = that.options.editable && that._isIncellEditable();\n                var cell, filterFocusable;\n\n                if (!incellEditing || current.is(\"th\") || (this.options.scrollable ? this._headertables.filter(currentTable).length : this.thead.filter(target).length)) {\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        filterFocusable = this._filterFocusable();\n\n                        if (!shiftKey && filterFocusable[filterFocusable.length - 1] === document.activeElement) {\n                            filterFocusable.first().trigger(\"focus\");\n\n                            return true;\n                        } else if (shiftKey && filterFocusable[0] === document.activeElement) {\n                            filterFocusable.last().trigger(\"focus\");\n\n                            return true;\n                        }\n                    }\n\n                    return false;\n                }\n\n                cell = $(activeElement()).closest(DOT + classNames.editCell);\n\n                if (that.options._tabCycleStop) {\n                    return false;\n                }\n\n                if (cell[0] && cell[0] !== current[0]) {\n                    current = cell;\n                }\n\n                cell = that._tabNext(current, currentTable, shiftKey);\n\n                if (cell.length) {\n                    that._handleEditing(current, cell, cell.closest(TABLE));\n                    return true;\n                } else {\n                    that._preventPageSizeRestore = false;\n                }\n\n                return false;\n            },\n\n            _tabNext: function(current, currentTable, back) {\n                var that = this;\n                var switchRow = true;\n                var next = back ? current.prevAll(DATA_CELL).first() : current.nextAll(\":visible\").first();\n\n                if (!next.length) {\n                    next = current.parent();\n                    if (that.lockedTable) {\n                        switchRow = (back && currentTable == that.lockedTable[0]) || (!back && currentTable == that.table[0]);\n                        next = that._relatedRow(next);\n                    }\n\n                    if (switchRow) {\n                        next = next[back ? \"prevAll\" : \"nextAll\"](\"tr:not(.k-grouping-row):not(.k-detail-row):visible\").first();\n                    }\n\n                    if (back) {\n                        next = next.children(DATA_CELL).last();\n                    } else {\n                        next = next.children(DATA_CELL).first();\n                    }\n\n\n                    that.dataSource._restorePageSizeAfterAddChild();\n                }\n\n                return next;\n            },\n\n            _handleEditing: function(current, next, table) {\n                var that = this,\n                    active = $(kendo._activeElement()),\n                    isIE = browser.msie,\n                    editContainer,\n                    focusable,\n                    isEdited;\n                var editable = that.options.editable && that.options.editable.update !== false;\n                var incellEditing = that._isIncellEditable();\n                var nextFocusableCellRowIndex = $(next).parents(\"tr\").index();\n                var nextFocusableCellIndex = $(next).index();\n                var currentFocusedCellRowIndex = $(current).parents(\"tr\").index();\n                var currentFocusedCellIndex = current.index();\n                var editedCell;\n\n                table = $(table);\n\n                if (incellEditing) {\n                    isEdited = current.hasClass(classNames.editCell);\n                } else {\n                    isEdited = current.parent().hasClass(\"k-grid-edit-row\");\n                }\n\n                if (that.editor) {\n                    editContainer = that.editor.wrapper;\n                    if (editContainer && $.contains(editContainer[0], active[0])) {\n                        if (browser.opera) {\n                            active.trigger(\"blur\").change().triggerHandler(\"blur\");\n                        } else {\n                            active.trigger(\"blur\");\n                            if (isIE) {\n                                //IE10 with jQuery 1.9.x does not trigger blur handler\n                                //numeric textbox does trigger change\n                                active.trigger(\"blur\");\n                            }\n                        }\n                    }\n\n                    if (!that.editor) {\n                        focusTable(that.table);\n                        return;\n                    }\n\n                    if (that.editor.end()) {\n                        if (incellEditing) {\n                            that._preventPageSizeRestore = true;\n                            that.closeCell();\n                            that._preventPageSizeRestore = false;\n\n                            if ($(that.table).add(that.lockedTable).find(DOT + classNames.editCell).length === 0) {\n                                that._setCurrent(table.find(\"tbody\").children().eq(currentFocusedCellRowIndex).children().eq(currentFocusedCellIndex));\n                            }\n                        } else {\n                            that.saveRow();\n                            isEdited = true;\n                        }\n                    } else {\n                        if (incellEditing) {\n                            that._setCurrent(editContainer);\n                        } else {\n                            that._setCurrent(editContainer.children().filter(NAVCELL).first());\n                        }\n\n                        focusable = editContainer.find(\":kendoFocusable\").first()[0];\n                        if (focusable) {\n                            focusable.focus();\n                        }\n                        return;\n                    }\n                }\n\n                // the next cell to focus might be re-rendered, so update the reference to it if it is an element\n                next = $(next).length && table.find(next).length === 0 ? table.find(\"tbody\").children().eq(nextFocusableCellRowIndex).children().eq(nextFocusableCellIndex) : next;\n\n                if (next) {\n                    that._setCurrent(next);\n                }\n\n                focusTable(that.table, true);\n\n                if (!editable) {\n                    return;\n                }\n\n                if ((!isEdited && !next) || next) {\n                    var currentIndex = that.current().index();\n\n                    if (incellEditing) {\n                        that.editCell(that.current());\n\n                        editedCell = $(that.table).add(that.lockedTable).find(DOT + classNames.editCell)[0];\n\n                        if (editedCell) {\n                            that._current = $(editedCell);\n                        } else {\n                            that._setCurrent(that._findCurrentCell());\n                        }\n                    } else {\n                        that.editRow(that.current().parent());\n                        that._setCurrent(that.editor.wrapper.children().eq(currentIndex));\n                        that.current().removeClass(\"k-focus\");\n                    }\n                } else {\n                    that.dataSource._restorePageSizeAfterAddChild();\n                }\n            },\n\n            _moveRight: function(current) {\n                var next = current.nextAll(NAVCELL).first();\n                var row = current.parent();\n                var rowIndex = row.index();\n\n                if (current.hasClass(\"k-header\") || row.is('.k-filter-row')) {\n                    next = current.nextAll(NAVHEADER).first();\n                    if (!next[0] && this.lockedTable && current.closest(\"table\")[0] === this.lockedHeader.find(\"table\")[0]) {\n                        next = this.thead.find(\"tr\").eq(rowIndex).find(NAVHEADER).first();\n                    }\n                }\n\n                if (!next[0] && this.lockedTable && current.closest(\"table\")[0] === this.lockedTable[0]) {\n                   next = this._relatedRow(row).children(NAVCELL).first();\n                }\n\n                if (next[0] && next[0] !== current[0]) {\n                    focusTable(this.table, true);\n                }\n\n                this._setCurrent(next);\n\n                return true;\n            },\n\n            _moveLeft: function(current) {\n                var prev = current.prevAll(NAVCELL).first();\n                var row = current.parent();\n                var rowIndex = row.index();\n\n                if (current.hasClass(\"k-header\") || row.is('.k-filter-row')) {\n                    prev = current.prevAll(NAVHEADER).first();\n                    if (!prev[0] && this.lockedTable && current.closest(\"table\")[0] === this.thead.parent()[0]) {\n                        prev = this.lockedHeader.find(\">table>thead>tr\").eq(rowIndex).children(NAVHEADER).last();\n                    }\n                }\n\n                if (!prev[0] && this.lockedTable && current.closest(\"table\")[0] === this.table[0]) {\n                   prev = this._relatedRow(row).children(NAVCELL).last();\n                }\n\n                if (prev[0] && prev[0] !== current[0]) {\n                    focusTable(this.table, true);\n                }\n\n                this._setCurrent(prev);\n\n                return true;\n            },\n\n            _moveUp: function(current, shiftKey) {\n                var container = current.parent().parent();\n                var prev;\n\n                if (shiftKey) {\n                   prev = current.parent();\n                   prev = prev.prevAll(ITEMROW).first();\n                   prev = current.parent().is(ITEMROW) ? prev.children().eq(current.index()) : prev.children(DATA_CELL).last();\n                } else {\n                   prev = this._prevVerticalCell(container, current);\n                   if (!prev[0]) {\n                      this._lastCellIndex = 0;\n                      container = this._verticalContainer(container, true);\n\n                      prev = this._prevVerticalCell(container, current);\n\n                      if (prev[0]) {\n                          focusTable(this.table, true);\n                      }\n                   }\n                }\n\n                var tmp = this._lastCellIndex || 0;\n                this._setCurrent(prev);\n                this._lastCellIndex = tmp;\n\n                return true;\n            },\n\n            _moveDown: function(current, shiftKey) {\n                var container = current.parent().parent();\n                var next;\n\n                if (shiftKey) {\n                    next = current.parent();\n                    next = next.nextAll(ITEMROW).first();\n                    next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).first();\n                } else {\n                    next = this._nextVerticalCell(container, current);\n                    if (!next[0]) {\n                        this._lastCellIndex = 0;\n                        container = this._verticalContainer(container);\n\n                        next = this._nextVerticalCell(container, current);\n                        if (next[0]) {\n                            focusTable(this.table, true);\n                        }\n                    }\n                }\n                var tmp = this._lastCellIndex || 0;\n                this._setCurrent(next);\n                this._lastCellIndex = tmp;\n                return true;\n            },\n\n            _tableClick: function(e) {\n                var that = this,\n                    currentTarget = $(e.currentTarget),\n                    isHeader = currentTarget.is(\"th\"),\n                    target = $(e.target),\n                    table = this.table.add(this.lockedTable),\n                    headerTable = this.thead.parent().add($(\">table\", this.lockedHeader)),\n                    isInput = isInputElement(target.add(target.closest(\".k-button-icon\"))),\n                    currentTable = currentTarget.closest(\"table\")[0];\n\n                if (kendo.support.touch) {\n                    return;\n                }\n\n                if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n                    return;\n                }\n\n                if (this.options.navigatable) {\n                    this._setCurrent(currentTarget);\n                }\n\n                if (isHeader || !isInput) {\n                    setTimeout(function() {\n                       if (!isInputElement(kendo._activeElement()) || !$.contains(currentTable, kendo._activeElement())) {\n                           focusTable(that.table, true);\n                       }\n                    });\n                }\n\n                if (isHeader) {\n                    e.preventDefault(); //if any problem occurs, call preventDefault only for the clicked header links\n                }\n            },\n\n            _tableFocus: function(e) {\n                var current = this.current();\n                var table = this.lockedTable ? this.lockedTable : this.table;\n\n                if (current && current.is(\":visible\")) {\n                    current.addClass(classNames.focused);\n                } else {\n                    this._setCurrent(table.find(NAVROW + \" > td:visible\").first());\n                }\n\n                this.table.attr(TABINDEX, 0);\n            },\n\n            _tableBlur: function() {\n                var current = this.current();\n\n                if (current) {\n                    current.removeClass(classNames.focused);\n                }\n            },\n\n            _attachEvents: function() {\n                var that = this;\n                var retryButton = DOT + classNames.retry;\n\n                that._userEvents = new kendo.UserEvents(that.element, {\n                    press: that._onPress.bind(that),\n                    allowSelection: true\n                });\n\n                this.element\n                    .on(CLICK + NS, retryButton, this._dataSourceFetchProxy)\n                    .on(CLICK + NS, \".k-button[data-command]\", this._commandClick.bind(this))\n                    .on(INPUT + NS, \".k-grid-search input\", this._search.bind(this));\n\n                this._attachCellEditingEventHandlers();\n            },\n\n            _onPress: function(e) {\n                var that = this;\n                var icons = ICON_EXPAND_COLLAPSE_SELECTOR +\n                    \",\" + ICON_REFRESH_SELECTOR;\n\n                if ($(e.event.target).closest(\":not(path,svg)\").is(icons)) {\n                    that._toggleChildren.call(that, e.event);\n                }\n            },\n\n            _attachCellEditingEventHandlers: function() {\n                var that = this;\n                var editable = that.options.editable;\n                var selectable = that.selectable && that.selectable.options.multiple;\n                var closeCell = function(e) {\n                    var target = activeElement();\n                    var editor = that.editor || {};\n                    var cell = editor.element;\n\n                    if (cell && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest(\".k-animation-container\").length) {\n                        if (editor.end()) {\n                            if (!e.relatedTarget && that._isPageable() && !isUndefined(that.dataSource._addChildPageSize)) {\n                                that._preventPageSizeRestore = false;\n                            }\n\n                            that.closeCell();\n                        }\n                    }\n\n                    that._preventPageSizeRestore = false;\n                };\n\n                if (that._isIncellEditable() && editable.update !== false) {\n                    that.wrapper\n                        .on(that.options._editCellEvent || CLICK + NS, \"tr:not(.k-grouping-row) > td\", function(e) {\n                            var td = $(this),\n                                isLockedCell = that.lockedTable && td.closest(\"table\")[0] === that.lockedTable[0];\n\n                            if (td.hasClass(classNames.editCell) ||\n                                td.has(\"a.k-grid-delete\").length ||\n                                td.has(\"button.k-grid-delete\").length ||\n                                (td.closest(\"tbody\")[0] !== that.tbody[0] && !isLockedCell) ||\n                                $(e.target).is(\":input\") ||\n                                $(e.target).is(ICON_EXPAND_COLLAPSE_SELECTOR)) {\n\n                                if (!that.editor) {\n                                    that.dataSource._restorePageSizeAfterAddChild();\n                                }\n\n                                that._preventPageSizeRestore = false;\n\n                                return;\n                            }\n\n                            if (that.editor) {\n                                if (that.editor.end()) {\n                                    if (selectable) {\n                                        $(activeElement()).trigger(\"blur\");\n                                    }\n                                    that.closeCell();\n                                    that.editCell(td);\n                                }\n                            } else {\n                                that.editCell(td);\n                            }\n                        })\n                        .on(\"mousedown\" + NS, \"tr:not(.k-grouping-row) > td\", function(e) {\n                            // cache the result on \"mousedown\", which is fired before \"focusout\" and \"click\"\n                            if (that.editor && that._isPageable() && !isUndefined(that.dataSource._addChildPageSize)) {\n                                that._preventPageSizeRestore = $(e.target).parents(DOT + classNames.editRow).length > 0;\n                            } else {\n                                that._preventPageSizeRestore = false;\n                            }\n                        })\n                        .on(\"focusin\" + NS, function() {\n                            // fix focus issue in IE\n                            if (!$.contains(this, activeElement())) {\n                                clearTimeout(that._closeCellTimeout);\n                                that._closeCellTimeout = null;\n                            }\n                        })\n                        .on(\"focusout\" + NS, function(e) {\n                            that._closeCellTimeout = setTimeout(function() {\n                                closeCell(e);\n                            }, 1);\n                        });\n                }\n            },\n\n            _commandByName: function(name) {\n                var columns = this.columns;\n                var toolbar = Array.isArray(this.options.toolbar) ? this.options.toolbar : [];\n                var i, j, commands, currentName;\n\n                name = name.toLowerCase();\n\n                if (defaultCommands[name]) {\n                    return defaultCommands[name];\n                }\n\n                // command not found in defaultCommands, must be custom\n                for (i = 0; i < columns.length; i++) {\n                    commands = columns[i].command;\n                    if (commands) {\n                        for (j = 0; j < commands.length; j++) {\n                            currentName = commands[j].name;\n\n                            if (!currentName) {\n                                continue;\n                            }\n\n                            if (currentName.toLowerCase() == name) {\n                                return commands[j];\n                            }\n                        }\n                    }\n                }\n\n                // custom command in toolbar\n                for (i = 0; i < toolbar.length; i++) {\n                    currentName = toolbar[i].name;\n\n                    if (!currentName) {\n                        continue;\n                    }\n\n                    if (currentName.toLowerCase() == name) {\n                        return toolbar[i];\n                    }\n                }\n            },\n\n            _commandClick: function(e) {\n                var button = $(e.currentTarget);\n                var commandName = button.attr(\"data-command\");\n                var command = this._commandByName(commandName);\n                var row = button.parentsUntil(this.wrapper, \"tr\");\n\n                row = row.length ? row : undefined$1;\n\n                if (command) {\n                    if (command.methodName) {\n                        this[command.methodName](row);\n                    } else if (command.click) {\n                        command.click.call(this, e);\n                    }\n\n                    if (e.preventDefault) {\n                        e.preventDefault();\n                    }\n                }\n            },\n\n            _search: function(e) {\n                var that = this;\n                var input = e.currentTarget;\n                clearTimeout(that._searchTimeOut);\n                that._searchTimeOut = setTimeout(function() {\n                    that._searchTimeOut = null;\n                    var options = that.options;\n                    var searchFields = options.search ? options.search.fields : null;\n                    var expression = { filters: [], logic: \"or\" };\n                    var value = input.value;\n\n                    if (!searchFields) {\n                        searchFields = getColumnsFields(options.columns);\n                    }\n\n                    if (value) {\n                        for (var i = 0; i < searchFields.length; i++) {\n                            expression.filters.push({ field: searchFields[i], operator: \"contains\", value: value });\n                        }\n                    } else {\n                        expression = {};\n                    }\n\n                    that.dataSource.filter(expression);\n\n                }, 300);\n            },\n\n            _ensureExpandableColumn: function() {\n                if (this._autoExpandable) {\n                    delete this._autoExpandable.expandable;\n                }\n\n                var visibleColumns = grep(this.columns, not(is(\"hidden\")));\n                visibleColumns = grep(visibleColumns, not(is(\"command\")));\n                visibleColumns = grep(visibleColumns, not(is(\"selectable\")));\n                visibleColumns = grep(visibleColumns, not(is(\"draggable\")));\n\n                var expandableColumns = grep(visibleColumns, is(\"expandable\"));\n\n                if (this.columns.length && !expandableColumns.length) {\n                    this._autoExpandable = visibleColumns[0];\n                    visibleColumns[0].expandable = true;\n                }\n            },\n\n            _columns: function() {\n                var that = this,\n                    columns = this.options.columns || [],\n                    draggableColumns;\n\n                this.columns = map(columns, function(column) {\n                    column = (typeof column === \"string\") ? { field: column } : column;\n\n                    return extend({ encoded: true }, column);\n                });\n\n                var lockedCols = lockedColumns(columns);\n                if (lockedCols.length > 0) {\n                    if (this.options.rowTemplate || this.options.altRowTemplate) {\n                        throw new Error(\"Having both row template and locked columns is not supported\");\n                    }\n                    this._hasLockedColumns = true;\n                    this.columns = lockedCols.concat(nonLockedColumns(this.columns));\n                }\n\n                this.columns = normalizeColumns(this.columns);\n\n                this._ensureExpandableColumn();\n\n                this._columnTemplates();\n                this._columnAttributes();\n\n                if ($.grep(leafColumns(that.columns), function(col) {\n                    if (col.selectable) {\n                        that._includeChildren = col.includeChildren;\n                    }\n                    return col.selectable;\n                }).length) {\n                    that._checkBoxSelection = true;\n                    that.element.on(CLICK + NS, \"tbody > tr \" + CHECKBOXINPUT, that._checkboxClick.bind(that));\n                    that.element.on(CLICK + NS, \"thead > tr \" + CHECKBOXINPUT, that._headerCheckboxClick.bind(that));\n                }\n\n                draggableColumns = $.grep(leafColumns(that.columns), function(col) { return col.draggable;});\n\n                if (draggableColumns.length) {\n                    that._hasDragHandleColumn = true;\n\n                    for (var i = 0; i < draggableColumns.length; i++) {\n                        draggableColumns[i].headerAttributes = $.extend({\n                            \"aria-label\": that.options.messages.dragHandleLabel\n                        }, draggableColumns[i].headerAttributes);\n                    }\n                }\n            },\n\n            _columnTemplates: function() {\n                var idx, length, column;\n                var columns = leafColumns(this.columns);\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.template) {\n                        column.template = kendo.template(column.template);\n                    }\n\n                    if (this._isIncellEditable()) {\n                        column.dirtyCellTemplate = this._createDirtyColumnTemplate(column);\n                        column.dirtyIndicatorTemplate = this._createIndicatorTemplate(column);\n                    }\n\n                    if (column.headerTemplate) {\n                        column.headerTemplate = kendo.template(column.headerTemplate);\n                    }\n\n                    if (column.footerTemplate) {\n                        column.footerTemplate = kendo.template(column.footerTemplate);\n                    }\n                }\n            },\n\n            _columnAttributes: function() {\n                // column style attribute is string, kendo.dom expects object\n                var idx, length;\n                var columns = this.columns;\n\n                function convertStyle(attr) {\n                    var properties, i, declaration;\n\n                    if (attr && attr.style && attr.style.split) {\n                        properties = attr.style.split(\";\");\n                        attr.style = {};\n\n                        for (i = 0; i < properties.length; i++) {\n                            declaration = properties[i].split(\":\");\n\n                            var name = kendo.trim(declaration[0]);\n\n                            if (name) {\n                                attr.style[$.camelCase(name)] = kendo.trim(declaration[1]);\n                            }\n                        }\n                    }\n                }\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    convertStyle(columns[idx].attributes);\n                    convertStyle(columns[idx].headerAttributes);\n                }\n            },\n\n            _clearSortClasses: function() {\n                var that = this;\n\n                if (that.content) {\n                    that.content.find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").removeClass(\"k-sorted\");\n                }\n\n                if (that.lockedContent) {\n                    that.lockedContent.find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").removeClass(\"k-sorted\");\n                }\n            },\n\n            _layout: function() {\n                var this$1$1 = this;\n\n                var that = this;\n                var columns = this.columns;\n                var element = this.element;\n\n                this.wrapper = element.addClass(classNames.wrapper);\n\n                var layoutTemplateFunction = function (ref) {\n                    var gridHeader = ref.gridHeader;\n                    var gridHeaderWrap = ref.gridHeaderWrap;\n                    var gridContentWrap = ref.gridContentWrap;\n                    var toolbar = ref.toolbar;\n                    var gridToolbar = ref.gridToolbar;\n\n                    var layout = \"<div class='\" + gridHeader + \"'>\";\n                    if (this$1$1._hasLockedColumns) {\n                        layout += \"<div class='k-grid-header-locked'>\" +\n                                        \"<table class='k-grid-header-table k-table k-table-md'>\" +\n                                            \"<colgroup></colgroup>\" +\n                                            \"<thead class='k-table-thead' role='rowgroup'></thead>\" +\n                                        \"</table>\" +\n                                    \"</div>\";\n                    }\n\n                    layout += \"<div class='\" + gridHeaderWrap + \"'>\" +\n                                    \"<table class='k-grid-header-table k-table k-table-md'>\" +\n                                        \"<colgroup></colgroup>\" +\n                                        \"<thead class='k-table-thead' role='rowgroup'></thead>\" +\n                                    \"</table>\" +\n                                \"</div>\" +\n                            \"</div>\";\n\n                    if (this$1$1._hasLockedColumns) {\n                        layout += \"<div class='k-grid-content-locked'>\" +\n                                        \"<table class='k-grid-table k-table k-table-md' role='treegrid'>\" +\n                                            \"<colgroup></colgroup>\" +\n                                            \"<tbody class='k-table-tbody' role='rowgroup'></tbody>\" +\n                                        \"</table>\" +\n                                    \"</div>\";\n                    }\n\n                    layout += \"<div class='\" + gridContentWrap + \" k-auto-scrollable'>\" +\n                                    \"<table class='k-grid-table k-table k-table-md' role='treegrid'>\" +\n                                        \"<colgroup></colgroup>\" +\n                                        \"<tbody class='k-table-tbody' role='rowgroup'></tbody>\" +\n                                    \"</table>\" +\n                                \"</div>\";\n\n                    if (!this$1$1.options.scrollable) {\n                        layout =\n                            \"<table class='k-grid-table k-table k-table-md' role='treegrid' >\" +\n                                \"<colgroup></colgroup>\" +\n                                \"<thead class='k-table-thead \" + gridHeader + \"' role='rowgroup'></thead>\" +\n                                \"<tbody class='k-table-tbody' role='rowgroup'></tbody>\" +\n                            \"</table>\";\n                    }\n\n                    if (this$1$1.options.toolbar) {\n                        layout = \"<div class='\" + toolbar + \" \" + gridToolbar + \"'></div>\" + layout;\n                    }\n\n                    return layout;\n                };\n\n                layoutTemplateFunction = layoutTemplateFunction.bind(that);\n\n                element.append(\n                    kendo.template(layoutTemplateFunction)(classNames) +\n                    \"<div class='k-status' role='alert' aria-live='polite'></div>\"\n                );\n\n                this.toolbar = element.find(DOT + classNames.gridToolbar);\n\n                var header = element.find(DOT + classNames.gridHeader).find(\"thead\").addBack().filter(\"thead\");\n                this.thead = header.last();\n\n                if (this.options.scrollable) {\n                    var rtl = kendo.support.isRtl(element);\n\n                    element.find(\"div.\" + classNames.gridHeader)\n                        .css(rtl ? \"padding-left\" : \"padding-right\", kendo.support.scrollbar());\n                }\n\n\n                var content = element.find(DOT + classNames.gridContentWrap);\n                if (!content.length) {\n                    content = element;\n                } else {\n                    this.content = content;\n                }\n\n                this.table = content.find(\">table\").addClass(\"k-grid-table\");\n                this.tbody = this.table.find(\">tbody\");\n\n                if (this._hasLockedColumns) {\n                    this.lockedHeader = header.first().closest(\".k-grid-header-locked\");\n                    this.lockedContent = element.find(\".k-grid-content-locked\");\n                    this.lockedTable = this.lockedContent.children().addClass(\"k-grid-table\");\n                }\n\n                this._initVirtualTrees();\n\n                this._renderCols();\n                this._renderHeader();\n\n                this.angular(\"compile\", function() {\n                    return {\n                        elements: header.find(\"th.k-header\").get(),\n                        data: map(columns, function(col) { return { column: col }; })\n                    };\n                });\n            },\n\n            _initVirtualTrees: function() {\n                this._headerColsTree = new kendoDom.Tree(this.thead.prev()[0]);\n                this._contentColsTree = new kendoDom.Tree(this.tbody.prev()[0]);\n                this._headerTree = new kendoDom.Tree(this.thead[0]);\n                this._contentTree = new kendoDom.Tree(this.tbody[0]);\n                this._statusTree = new kendoDom.Tree(this.element.children(\".k-status\")[0]);\n\n                if (this.lockedHeader) {\n                    this._lockedHeaderColsTree = new kendoDom.Tree(this.lockedHeader.find(\"colgroup\")[0]);\n                    this._lockedContentColsTree = new kendoDom.Tree(this.lockedTable.find(\">colgroup\")[0]);\n                    this._lockedHeaderTree = new kendoDom.Tree(this.lockedHeader.find(\"thead\")[0]);\n                    this._lockedContentTree = new kendoDom.Tree(this.lockedTable.find(\">tbody\")[0]);\n                }\n            },\n\n            _processToolbarItems: function(commands) {\n                var that = this,\n                    messages = that.options.messages.commands,\n                    items = [];\n\n                commands.map(function (command) {\n                    var name = (isPlainObject(command) ? command.name || \"\" : command).toLowerCase(),\n                        text = messages[name];\n\n                    if (!name && !(isPlainObject(command) && command.template)) {\n                        throw new Error(\"Commands should have name specified\");\n                    }\n\n                    command = extend({}, defaultCommands[name], {\n                        name: name,\n                        text: (defaultCommands[name] || {}).text || text || capitalize(name),\n                        type: command.template ? null : \"button\"\n                    }, command);\n\n                    if (name === \"search\") {\n                        items.push({ type: \"spacer\" });\n                        command.template = command.template({ message: command.text || messages.search });\n                    }\n\n                    if (command.imageClass) {\n                        command.spriteCssClass = command.imageClass;\n                        command.iconClass = command.imageClass;\n                    }\n\n                    if (that._commandByName(name)) {\n                        if (!command.attributes) {\n                            command.attributes = {};\n                        }\n\n                        command.attributes[\"data-command\"] = name;\n                        command.click = function (e) {\n                            e.event.preventDefault();\n                            e.event.stopPropagation();\n\n                            that._commandClick({\n                                currentTarget: e.target\n                            });\n                        };\n                    }\n\n                    if (command.className) {\n                        if (!command.attributes) {\n                            command.attributes = {};\n                        }\n\n                        command.attributes[\"class\"] = command.className;\n                    }\n\n                    items.push(command);\n                });\n\n                return items;\n            },\n\n            _toolbar: function() {\n                var options = this.options.toolbar;\n                var toolbar = this.toolbar;\n\n                if (!options) {\n                    return;\n                }\n\n                if (Array.isArray(options)) {\n                    toolbar.kendoToolBar({\n                        size: \"medium\",\n                        navigateOnTab: !this.options.navigatable,\n                        items: this._processToolbarItems(options)\n                    });\n                } else {\n                    toolbar.append(kendo.template(options)({}));\n                }\n\n                this.angular(\"compile\", function() {\n                    return { elements: toolbar.get() };\n                });\n            },\n\n            _lockedColumns: function() {\n                return grep(this.columns, is(\"locked\"));\n            },\n\n            _nonLockedColumns: function() {\n                return grep(this.columns, not(is(\"locked\")));\n            },\n\n            _templateColumns: function() {\n                return grep(this.columns, is(\"template\"));\n            },\n\n            _flushCache: function() {\n                if (this.options.$angular && this._templateColumns().length) {\n                    this._contentTree.render([]);\n                    if (this._hasLockedColumns) {\n                        this._lockedContentTree.render([]);\n                    }\n                }\n            },\n\n            _render: function(options) {\n                var that = this;\n                options = options || {};\n                options = that._renderOptions(options);\n                var messages = this.options.messages;\n                var pageable = that._isPageable();\n                var dataSource = that.dataSource;\n\n                var maps = { children: (options.filteredChildrenMap || options.childrenMap), ids: options.idsMap };\n                var dataMaps = pageable ? (maps && maps.children && maps.ids ? maps : dataSource._initDataMaps(dataSource._getData())) : {};\n                var childrenMap = dataMaps.children;\n                var idsMap = dataMaps.ids;\n                options.childrenMap = childrenMap;\n                options.idsMap = idsMap;\n\n                var data = that._dataToRender(options);\n                var level = that._renderedModelLevel(data[0], options);\n                var uidAttr = kendo.attr(\"uid\");\n                var hasFooterTemplate;\n                var selected = this.select().removeClass(\"k-selected\").map(function(_, row) {\n                    return $(row).attr(uidAttr);\n                });\n                var viewChildrenMap;\n\n                this._absoluteIndex = 0;\n\n                this._angularItems(\"cleanup\");\n                this._angularFooters(\"cleanup\");\n                this._flushCache();\n\n                that._clearRenderMap();\n\n                if (options.error) {\n                    // root-level error message\n                    this._showStatus(kendo.template(\n                        function (ref) {\n                            var messages = ref.messages;\n                            var buttonClass = ref.buttonClass;\n\n                            return (encode(messages.requestFailed)) + \" \" +\n                        \"<button class='\" + buttonClass + \" k-button-md k-rounded-md k-button-solid k-button-solid-base'><span class='k-button-text'>\" + (encode(messages.retry)) + \"</span></button>\";\n                    }\n                    )({\n                        buttonClass: [classNames.button, classNames.retry].join(\" \"),\n                        messages: messages\n                    }));\n                } else if (!data.length) {\n                    // no rows message\n                    this._hideStatus();\n                    this._showNoRecordsTemplate();\n                } else {\n                    if (pageable) {\n                        viewChildrenMap = that._viewChildrenMap(options);\n                    }\n\n                    // render rows\n                    this._hideStatus();\n\n                    hasFooterTemplate = this._hasFooterTemplate();\n\n                    this._contentTree.render(this._trs({\n                        columns: leafColumns(nonLockedColumns(this.columns)),\n                        editedColumn: options.editedColumn,\n                        editedColumnIndex: options.editedColumnIndex,\n                        aggregates: options.aggregates,\n                        selected: selected,\n                        data: data,\n                        childrenMap: childrenMap,\n                        viewChildrenMap: viewChildrenMap,\n                        hasFooterTemplate: hasFooterTemplate,\n                        visible: true,\n                        level: 0\n                    }));\n\n                    if (this._hasLockedColumns) {\n                        this._absoluteIndex = 0;\n                        this._lockedContentTree.render(this._trs({\n                            columns: leafColumns(lockedColumns(this.columns)),\n                            editedColumn: options.editedColumn,\n                            editedColumnIndex: options.editedColumnIndex,\n                            aggregates: options.aggregates,\n                            selected: selected,\n                            data: data,\n                            childrenMap: childrenMap,\n                            viewChildrenMap: viewChildrenMap,\n                            hasFooterTemplate: hasFooterTemplate,\n                            visible: true,\n                            level: level,\n                            isLockedTable: true\n                        }));\n                    }\n                }\n\n                if (this._touchScroller) {\n                    this._touchScroller.contentResized();\n                }\n\n                this._muteAngularRebind(function() {\n                    this._angularItems(\"compile\");\n                    this._angularFooters(\"compile\");\n                });\n\n                this.items().filter(function() {\n                    return $.inArray($(this).attr(uidAttr), selected) >= 0;\n                })\n                .addClass(\"k-selected\");\n\n                this._syncLockedContentHeight();\n\n                that._togglePagerVisibility();\n\n                that._setExpanderElement();\n            },\n\n            _setExpanderElement: function() {\n                var that = this,\n                    hiddenDivClass = 'k-grid-content-expander',\n                    hiddenDiv = '<div class=\"' + hiddenDivClass + '\"></div>',\n                    expander;\n\n                if (that.options.scrollable && that.wrapper.is(\":visible\")) {\n                    expander = that.table.parent().children('.' + hiddenDivClass);\n                    if (!that.dataSource || !that.dataSource.view().length) {\n                        if (!expander[0]) {\n                            expander = $(hiddenDiv).appendTo(that.table.parent());\n                        }\n                        if (that.thead) {\n                            expander.width(that.thead.width());\n                        }\n                    } else if (expander[0]) {\n                        expander.remove();\n                    }\n                }\n            },\n\n            _renderProgress: function(toggle) {\n                kendo.ui.progress(this.wrapper, toggle);\n            },\n\n            _renderOptions: function(options) {\n                options = options || {};\n                var that = this;\n                var dataMaps = that.dataSource._getDataMaps();\n                var filter = that.dataSource.filter();\n\n                if (that._isPageable()) {\n                    options.childrenMap = dataMaps.children;\n                    options.idsMap = dataMaps.ids;\n\n                    if (filter) {\n                        options.filteredChildrenMap = dataMaps.filteredChildren;\n                    }\n                }\n\n                return options;\n            },\n\n            _renderedModelLevel: function(model, options) {\n                return !this._isPageable() ? 0 : this.dataSource._pageableModelLevel(model, options);\n            },\n\n            _viewChildrenMap: function(options) {\n                options = options || {};\n                var that = this;\n                var dataSource = that.dataSource;\n                var viewChildrenMap = dataSource.childrenMap(dataSource.view());\n                var idField = dataSource._modelIdField();\n                var parentsNotInView = dataSource._parentNodesNotInView();\n                var parentNotInView;\n                var parentNotInViewId;\n                var parents;\n                var parent;\n                var parentId;\n                var child;\n                var childId;\n                var parentsCopy;\n\n                that._clearRenderMap();\n\n                for (var i = 0; i < parentsNotInView.length; i++) {\n                    parentNotInView = parentsNotInView[i];\n                    parentNotInViewId = parentNotInView[idField];\n\n                    that._markNodeAsNonRenderable(parentNotInViewId);\n\n                    viewChildrenMap[parentNotInViewId] = viewChildrenMap[parentNotInViewId] || [];\n\n                    parents = dataSource._parentNodes(parentNotInView);\n\n                    // copy the items to avoid mutating the original collection\n                    parentsCopy = parents.slice();\n                    parentsCopy.push(parentNotInView);\n\n                    for (var parentIndex = 0; parentIndex < parentsCopy.length - 1; parentIndex++) {\n                        parent = parentsCopy[parentIndex];\n                        parentId = parent[idField];\n                        that._markNodeAsNonRenderable(parentId);\n                        viewChildrenMap[parentId] = viewChildrenMap[parentId] || [];\n\n                        child = parentsCopy[parentIndex + 1];\n                        childId = child[idField];\n                        that._markNodeAsNonRenderable(childId);\n                        viewChildrenMap[childId] = viewChildrenMap[childId] || [];\n\n                        if (viewChildrenMap[parentId].indexOf(child) === -1) {\n                            viewChildrenMap[parentId].unshift(child);\n                        }\n                    }\n                }\n\n                return viewChildrenMap;\n            },\n\n            _clearRenderMap: function() {\n                this._skipRenderingMap = {};\n            },\n\n            _dataToRender: function(options) {\n                var that = this;\n\n                if (that._isPageable()) {\n                    return that.dataSource._pageableRootNodes(options);\n                }\n\n                return that.dataSource.rootNodes();\n            },\n\n            _markNodeAsNonRenderable: function(nodeId) {\n                this._skipRenderingMap[nodeId] = true;\n            },\n\n            _adjustRowsHeight: function(table1, table2) {\n                if (!this._hasLockedColumns) {\n                    return;\n                }\n\n                var rows = table1[0].rows;\n                var length = rows.length;\n                var idx;\n                var rows2 = table2[0].rows;\n                var containers = table1.add(table2);\n                var containersLength = containers.length;\n                var heights = [];\n\n                for (idx = 0; idx < length; idx++) {\n                    if (!rows2[idx]) {\n                        break;\n                    }\n\n                    if (rows[idx].style.height) {\n                        rows[idx].style.height = rows2[idx].style.height = \"\";\n                    }\n                }\n\n                for (idx = 0; idx < length; idx++) {\n                    if (!rows2[idx]) {\n                        break;\n                    }\n\n                    var offsetHeight1 = rows[idx].offsetHeight;\n                    var offsetHeight2 = rows2[idx].offsetHeight;\n                    var height = 0;\n\n                    if (offsetHeight1 > offsetHeight2) {\n                        height = offsetHeight1;\n                    } else if (offsetHeight1 < offsetHeight2) {\n                        height = offsetHeight2;\n                    }\n\n                    heights.push(height);\n                }\n\n                for (idx = 0; idx < containersLength; idx++) {\n                    containers[idx].style.display = \"none\";\n                }\n\n                for (idx = 0; idx < length; idx++) {\n                    if (heights[idx]) {\n                        //add one to resolve row misalignment in IE\n                        rows[idx].style.height = rows2[idx].style.height = (heights[idx] + 1) + \"px\";\n                    }\n                }\n\n                for (idx = 0; idx < containersLength; idx++) {\n                    containers[idx].style.display = \"\";\n                }\n            },\n\n            _ths: function(columns, rowSpan) {\n                var ths = [];\n                var column, title, children, cellClasses, attr, headerContent;\n                var index;\n                var leafs;\n\n                for (var i = 0, length = columns.length; i < length; i++) {\n                    column = columns[i];\n                    children = [];\n                    cellClasses = [classNames.header];\n\n                    if (column.selectable) {\n                        leafs = leafColumns(columns);\n                        index = inArray(column, leafs);\n                        attr = {\n                            scope: \"col\",\n                            role: \"columnheader\",\n                            className: cellClasses.join(\" \")\n                        };\n\n                        if (column.headerTemplate) {\n                            title = column.headerTemplate({});\n                        }\n\n                        title = column.headerTemplate ? title : kendo.template( function () { return SELECTCOLUMNHEADERTMPL; })({});\n\n\n                        if (rowSpan && !column.colSpan) {\n                            attr.rowSpan = rowSpan;\n                        }\n\n                        if (index > -1) {\n                            attr[kendo.attr(\"index\")] = index;\n                        }\n\n                        children.push(kendoHtmlElement(title));\n\n                        ths.push(kendoDomElement(\"th\", $.extend(true, {}, attr, column.headerAttributes), children));\n                        continue;\n                    }\n\n                    if (column.headerTemplate) {\n                        title = column.headerTemplate({});\n                    } else {\n                        title = column.title || column.field || \"\";\n                    }\n\n                    if (column.headerTemplate) {\n                        headerContent = kendoHtmlElement(title);\n                    } else {\n                        headerContent = kendoTextElement(title);\n                    }\n\n                    if (this.options.sortable) {\n                        children.push(kendoDomElement(\"span\", { className: classNames.headerCellInner }, [\n                            kendoDomElement(\"span\", { className: classNames.link }, [\n                                kendoDomElement(\"span\", { className: classNames.columnTitle }, [\n                                    headerContent\n                                ])\n                            ])\n                        ]));\n                    } else {\n                        children.push(headerContent);\n                    }\n\n                    attr = {\n                        \"data-field\": column.field,\n                        \"data-title\": column.title,\n                        \"style\": column.hidden === true ? { \"display\": \"none\" } : {},\n                        className: cellClasses.join(\" \"),\n                        \"role\": \"columnheader\"\n                    };\n\n                    if (this.options.sortable) {\n                        var sortableTitle = title + \". \" + (this.options.messages.sortHeader);\n                        attr[\"aria-label\"] = sortableTitle;\n                        attr[\"title\"] = sortableTitle;\n                    }\n\n                    if (!column.columns) {\n                        attr.rowSpan = rowSpan ? rowSpan : 1;\n                    }\n\n                    if (column.headerAttributes) {\n                        if (column.headerAttributes.colSpan === 1) {\n                            delete column.headerAttributes.colSpan;\n                        }\n                        if (column.headerAttributes[\"class\"]) {\n                            attr.className += \" \" + column.headerAttributes[\"class\"];\n                            delete column.headerAttributes[\"class\"];\n                        }\n                    }\n\n                    if (column[\"data-index\"] > -1) {\n                        attr[\"data-index\"] = column[\"data-index\"];\n                    }\n\n                    attr = extend(true, {}, attr, column.headerAttributes);\n\n                    ths.push(kendoDomElement(\"th\", attr, children));\n                }\n\n                return ths;\n            },\n\n            _cols: function(columns) {\n                var cols = [];\n                var width, attr;\n\n                for (var i = 0; i < columns.length; i++) {\n                    if (columns[i].hidden === true) {\n                        continue;\n                    }\n\n                    width = columns[i].width;\n                    attr = {};\n\n                    if (width && parseInt(width, 10) !== 0) {\n                        attr.style = {\n                            width: typeof width === \"string\" ? width : width + \"px\"\n                        };\n                    }\n\n                    cols.push(kendoDomElement(\"col\", attr));\n                }\n\n                return cols;\n            },\n\n            _clearColsCache: function() {\n                this._headerColsTree.render([]);\n                if (this.options.scrollable) {\n                    this._contentColsTree.render([]);\n                }\n                if (this._hasLockedColumns) {\n                    this._lockedHeaderColsTree.render([]);\n                    this._lockedContentColsTree.render([]);\n                }\n            },\n\n            _renderCols: function() {\n                var columns = nonLockedColumns(this.columns);\n                this._headerColsTree.render(this._cols(leafColumns(columns)));\n\n                if (this.options.scrollable) {\n                    this._contentColsTree.render(this._cols(leafColumns(columns)));\n                }\n\n                if (this._hasLockedColumns) {\n                    columns = lockedColumns(this.columns);\n                    this._lockedHeaderColsTree.render(this._cols(leafColumns(columns)));\n                    this._lockedContentColsTree.render(this._cols(leafColumns(columns)));\n                }\n            },\n\n            _retrieveFirstColumn: function(columns, rows) {\n                var result = $();\n\n                if (rows.length && columns[0]) {\n                    var column = columns[0];\n\n                    while (column.columns && column.columns.length) {\n                        column = column.columns[0];\n                        rows = rows.filter(\":not(:first)\");\n                    }\n\n                    result = result.add(rows);\n                }\n\n                return result;\n            },\n\n            _updateFirstColumnClass: function() {\n                var that = this;\n                var columns = that.columns || [];\n                var tr = that.thead.find(\">tr:not(:first, .k-filter-row)\");\n                var rows;\n\n                columns = nonLockedColumns(columns);\n\n                rows = that._retrieveFirstColumn(columns, tr);\n\n                if (that.lockedHeader) {\n                    tr = that.lockedHeader.find(\"thead>tr:not(.k-filter-row):not(:first)\");\n                    columns = lockedColumns(that.columns);\n\n                    rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                }\n\n                rows.each(function() {\n                    var ths = $(this).find(\"th\");\n                    ths.removeClass(\"k-first\");\n                    ths.eq(0).addClass(\"k-first\");\n                });\n            },\n\n            _updateRowSpans: function(rows) {\n                for (var i = rows.length - 1; i >= 0; i--) {\n                    var included = visibleChildColumns(rows[i].cells).length > 0;\n\n                    if (included) {\n                        rows[i].rowSpan = rows.length - i;\n                    }\n                }\n            },\n\n            _setColumnDataIndexes: function(columns) {\n                for (var i = 0; i < columns.length; i++) {\n                   columns[i][\"data-index\"] = i;\n                }\n            },\n\n            _updateColumnCellIndex: function() {\n                var header;\n                var offset = 0;\n\n                if (this.lockedHeader) {\n                    header = this.lockedHeader.find(\"thead\");\n                    offset = updateCellIndex(header, lockedColumns(this.columns));\n                }\n                updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n            },\n\n            _setParentsVisibility: function(column, visible) {\n                var columns = this.columns;\n                var idx;\n                var parents = [];\n                var parent;\n\n                var predicate = visible ?\n                    function(p) { return visibleColumns(p.columns).length && p.hidden; } :\n                    function(p) { return !visibleColumns(p.columns).length && !p.hidden; };\n\n\n                if (columnParents(column, columns, parents) && parents.length) {\n                    for (idx = parents.length - 1; idx >= 0; idx--) {\n                        parent = parents[idx];\n\n                        if (predicate(parent)) {\n                            parent.hidden = !visible;\n                        }\n                    }\n                }\n            },\n\n            _prepareColumns: function(rows, columns, parentCell, parentRow, parentColumn) {\n                var row = parentRow || rows[rows.length - 1];\n\n                var childRow = rows[row.index + 1];\n                var totalColSpan = 0;\n\n                for (var idx = 0; idx < columns.length; idx++) {\n                    var cell = $.extend({}, columns[idx], { headerAttributes: columns[idx].headerAttributes || {} } );\n                    row.cells.push(cell);\n\n                    if (columns[idx].columns && columns[idx].columns.length) {\n                        if (!childRow) {\n                            childRow = { rowSpan: 0, cells: [], index: rows.length };\n                            rows.push(childRow);\n                        }\n                        if (columns[idx].columns.length) {\n                            cell.headerAttributes.colSpan = visibleChildColumns(columns[idx].columns).length || 1;\n                            cell.headerAttributes[\"data-colspan\"] = leafColumns(columns[idx].columns).length;\n                        }\n                        this._prepareColumns(rows, columns[idx].columns, cell, childRow, columns[idx]);\n                        if (!cell.hidden) {\n                            totalColSpan += cell.headerAttributes.colSpan - 1;\n                        }\n                        row.rowSpan = rows.length - row.index;\n                    }\n                    columns[idx].rowIndex = row.index;\n                    if (parentColumn) {\n                        columns[idx].parentColumn = parentColumn;\n                    }\n                    columns[idx].cellIndex = row.cells.length - 1;\n                }\n                if (parentCell) {\n                    parentCell.headerAttributes.colSpan += totalColSpan;\n                }\n            },\n\n            _renderHeaderTree: function(tree, columns, hasMultiColumnHeaders) {\n                var idx;\n                var rows = [];\n                var rowsToRender = [];\n                var filterThs = [];\n\n                if (hasMultiColumnHeaders) {\n                    rows = [{ rowSpan: 1, cells: [], index: 0 }];\n                    this._prepareColumns(rows, columns);\n                    this._updateRowSpans(rows);\n                    for (idx = 0; idx < rows.length; idx++) {\n                        rowsToRender.push(kendoDomElement(\"tr\", { \"role\": \"row\", \"class\": \"k-table-row\" }, this._ths(rows[idx].cells, rows[idx].rowSpan)));\n                    }\n                } else {\n                    rowsToRender.push(kendoDomElement(\"tr\", { \"role\": \"row\", \"class\": \"k-table-row\" }, this._ths(columns)));\n                }\n\n                if (this._hasFilterRow()) {\n                    this._filterThs(columns, filterThs);\n                    rowsToRender.push(kendoDomElement(\"tr\", { \"class\": \"k-filter-row k-table-row\" }, filterThs));\n                }\n\n                tree.render(rowsToRender);\n            },\n\n            _renderHeader: function() {\n                var columns = nonLockedColumns(this.columns);\n                var hasMultiColumnHeaders = grep(this.columns, function(item) {\n                    return item.columns !== undefined$1;\n                }).length > 0;\n                this._setColumnDataIndexes(leafColumns(this.columns));\n                this._renderHeaderTree(this._headerTree, columns, hasMultiColumnHeaders);\n\n                if (this._hasLockedColumns) {\n                    columns = lockedColumns(this.columns);\n                    this._renderHeaderTree(this._lockedHeaderTree, columns, hasMultiColumnHeaders);\n\n                    this._applyLockedContainersWidth();\n                    this._syncLockedHeaderHeight();\n                }\n                this._updateFirstColumnClass();\n            },\n\n            _filterThs: function(columns, ths) {\n                var column;\n                var attr;\n                var uidAttr = kendo.attr('uid');\n\n                for (var i = 0, length = columns.length; i < length; i++) {\n                    column = columns[i];\n\n                    if (column.columns) {\n                        this._filterThs(column.columns, ths);\n                    }\n\n                    if (column.columns && column.columns.length) {\n                        continue;\n                    }\n\n                    attr = {\n                        \"style\": column.hidden === true ? { \"display\": \"none\" } : {},\n                        \"className\": \"k-table-th k-header\",\n                        \"title\": this.options.messages.filterCellTitle,\n                        \"aria-label\": this.options.messages.filterCellTitle\n                    };\n                    attr[uidAttr] = column.headerAttributes.id;\n                    ths.push(kendoDomElement(\"th\", attr));\n                }\n            },\n\n            _updateFilterThs: function(before, column, refColumn) {\n                var columns = leafColumns([column]);\n                var filterRowThs = $(this.lockedHeader).add(this.thead).find(\"tr.k-filter-row th\");\n                var refIndex;\n                var currIndex;\n                var uidAttr = kendo.attr('uid');\n\n                function thIndex(ths, uid) {\n                    for (var i = 0; i < ths.length; i++) {\n                        if (ths.eq(i).attr(uidAttr) === uid) {\n                            return i;\n                        }\n                    }\n                }\n\n                for (var i = columns.length - 1; i >= 0; i--) {\n                    column = columns[i];\n                    currIndex = thIndex(filterRowThs, column.headerAttributes.id);\n                    refIndex = thIndex(filterRowThs, refColumn.headerAttributes.id);\n                    filterRowThs.eq(currIndex)[before ? \"insertBefore\" : \"insertAfter\"](filterRowThs.eq(refIndex));\n                }\n            },\n\n            _applyLockedContainersWidth: function() {\n                if (!this._hasLockedColumns) {\n                    return;\n                }\n\n                var lockedWidth = columnsWidth(this.lockedHeader.find(\">table>colgroup>col\"));\n\n                var headerTable = this.thead.parent();\n                var nonLockedWidth = columnsWidth(headerTable.find(\">colgroup>col\"));\n\n                var wrapperWidth = this.wrapper[0].clientWidth;\n                var scrollbar = kendo.support.scrollbar();\n\n                if (lockedWidth >= wrapperWidth) {\n                    lockedWidth = wrapperWidth - 3 * scrollbar;\n                }\n\n                this.lockedHeader\n                    .add(this.lockedContent)\n                    .width(lockedWidth);\n\n                headerTable.add(this.table).width(nonLockedWidth);\n\n                var width = wrapperWidth - lockedWidth;\n                this.content.width(width - 1);\n                headerTable.parent().width(width - scrollbar - 2);\n            },\n\n            _trs: function(options) {\n                var that = this;\n                var model, attr, className, hasChildren, childNodes, i, length;\n                var modelId;\n                var rows = [];\n                var level = options.level;\n                var data = options.data;\n                var dataSource = this.dataSource;\n                var aggregates = dataSource.aggregates() || {};\n                var idField = dataSource._modelIdField();\n                var parentIdField = dataSource._modelParentIdField();\n                var columns = options.columns;\n                var pageable = that._isPageable();\n                var isLockedTable = options.isLockedTable;\n                var childrenMap = options.childrenMap || dataSource.childrenMap(dataSource._getData());\n\n                for (i = 0, length = data.length; i < length; i++) {\n                    className = [ \"k-table-row\" ];\n\n                    model = data[i];\n                    modelId = model[idField];\n\n                    childNodes = pageable ? childrenMap[modelId] : (model.loaded() ? dataSource.childNodes(model) : []);\n                    hasChildren = childNodes && childNodes.length;\n\n                    attr = { \"role\": \"row\" };\n\n                    attr[kendo.attr(\"uid\")] = model.uid;\n\n                    if (!isLockedTable && hasChildren) {\n                        attr[ARIA_EXPANDED] = !!model.expanded;\n                    }\n\n                    if (options.visible) {\n                        if (!pageable || (pageable && !that._skipRenderingMap[modelId])) {\n                            if (this._absoluteIndex % 2 !== 0) {\n                                className.push(classNames.alt);\n                            }\n\n                            this._absoluteIndex++;\n                        }\n                    } else {\n                        attr.style = { display: \"none\" };\n                    }\n\n                    if ($.inArray(model.uid, options.selected) >= 0) {\n                        className.push(classNames.selected);\n                    }\n\n                    if (hasChildren) {\n                        className.push(classNames.group);\n                    }\n\n                    if (model._edit) {\n                        className.push(\"k-grid-edit-row\");\n                    }\n\n                    attr.className = className.join(\" \");\n\n                    if (!that._skipRenderingMap[modelId]) {\n                        var row;\n                        var rowOptions = {\n                            model: model,\n                            attr: attr,\n                            level: pageable ? that._renderedModelLevel(model, options) : level,\n                            editedColumn: options.editedColumn,\n                            editedColumnIndex: options.editedColumnIndex,\n                            hasChildren: hasChildren,\n                            visible: options.visible,\n                            isAlt: this._absoluteIndex % 2 === 0\n                        };\n\n                        if (that.options.rowTemplate) {\n                            row = this. _trFromTemplate(rowOptions);\n                        } else {\n                            row = this._tds(rowOptions, columns, this._td.bind(this));\n                        }\n\n                        rows.push(row);\n                    }\n\n\n                    if (hasChildren && (that.options.renderAllRows || !!model.expanded)) {\n                        if (pageable) {\n                            // render the child nodes in the paged view only\n                            childNodes = (options.viewChildrenMap || {})[modelId] || [];\n                        }\n\n                        if (childNodes.length === 0) {\n                            continue;\n                        }\n\n                        rows = rows.concat(this._trs({\n                            columns: columns,\n                            editedColumn: options.editedColumn,\n                            editedColumnIndex: options.editedColumnIndex,\n                            aggregates: aggregates,\n                            selected: options.selected,\n                            visible: pageable ? options.visible : (options.visible && !!model.expanded),\n                            data: childNodes,\n                            childrenMap: options.childrenMap || childrenMap,\n                            hasFooterTemplate: options.hasFooterTemplate,\n                            viewChildrenMap: options.viewChildrenMap,\n                            level: level + 1,\n                            isLockedTable: options.isLockedTable\n                        }));\n                    }\n                }\n\n                if (options.hasFooterTemplate && model) {\n                    attr = {\n                        className: classNames.footerTemplate + \" k-table-row\",\n                        \"data-parentId\": model[parentIdField]\n                    };\n\n                    if (!options.visible) {\n                        attr.style = { display: \"none\" };\n                    }\n\n                    rows.push(this._tds({\n                        model: aggregates[model[parentIdField]],\n                        attr: attr,\n                        level: level,\n                        editedColumn: options.editedColumn,\n                        editedColumnIndex: options.editedColumnIndex\n                    }, columns, this._footerId));\n                }\n\n                return rows;\n            },\n\n            _trFromTemplate: function(options) {\n                var rowTemplate = this.options.rowTemplate;\n                var altRowTemplate = this.options.altRowTemplate;\n                var row;\n                var template;\n\n                altRowTemplate = altRowTemplate ? altRowTemplate : rowTemplate;\n\n                if (!kendo.isFunction(rowTemplate)) {\n                    rowTemplate = kendo.template(rowTemplate);\n                }\n\n                if (!kendo.isFunction(altRowTemplate)) {\n                    altRowTemplate = kendo.template(altRowTemplate);\n                }\n\n                if (this._absoluteIndex % 2 !== 0) {\n                    template = rowTemplate(options);\n                } else {\n                    template = altRowTemplate(options);\n                }\n\n                if (!$(template).length) {\n                    return kendoTextElement(template);\n                }\n\n                row = this.parseRowTemplate($(template)[0], options);\n\n                return row;\n            },\n\n            parseRowTemplate: function(element, options) {\n                var nodeName = element.nodeName.toLocaleLowerCase();\n                var childNodes = element.childNodes;\n                var children = [];\n                var currElement;\n                var attributes;\n\n                attributes = this.parseAttributes(element);\n\n                for (var i = 0; i < childNodes.length; i++) {\n                    if (!/\\S/.test(childNodes[i].nodeValue)) {\n                       continue;\n                    }\n                    if (childNodes[i].nodeName.toLocaleLowerCase() === \"td\") {\n                        children.push(this._createCellElement(childNodes[i]));\n                    }\n                }\n\n                if (options && !options.visible) {\n                   attributes.style = attributes.style || {};\n                   attributes.style = $.extend(true, attributes.style, { display: \"none\" });\n                }\n\n                if (this._isTextNode(nodeName)) {\n                    currElement = kendoTextElement(element.nodeValue);\n                } else {\n                    currElement = kendoDomElement(nodeName, attributes, children);\n                }\n\n                return currElement;\n            },\n\n            _createCellElement: function(element) {\n                var attributes = this.parseAttributes(element);\n                var spaceElements = $(element).find('.' + classNames.iconHidden).remove();\n                var iconElement = $(element).find(ICON_EXPAND_COLLAPSE_SELECTOR).remove()[0];\n                var children = [];\n\n                for (var i = 0; i < spaceElements.length; i++) {\n                    children.push(kendoDomElement(\"span\", this.parseAttributes(spaceElements[i])));\n                }\n\n                if (iconElement) {\n                    children.push(kendoDomElement(\"span\", this.parseAttributes(iconElement)));\n                }\n                children.push(kendoHtmlElement($(element).html()));\n\n                return kendoDomElement(\"td\", attributes, children);\n            },\n\n            parseAttributes: function(element) {\n                if (this._isTextNode(element.nodeName)) {\n                    return null;\n                }\n\n                element = $(element)[0];\n                var attributes = element.attributes;\n                var length = attributes.length;\n                var result = {};\n\n                for (var i = 0; i < length; i++) {\n                    result[attributes[i].name] = attributes[i].value;\n                }\n\n                return result;\n            },\n\n            _isTextNode: function(nodeName) {\n                return nodeName.indexOf('text') >= 0;\n            },\n\n            _footerId: function(options) {\n                var content = [];\n                var column = options.column;\n                var template = options.column.footerTemplate || $.noop;\n                var aggregates = options.model[column.field] || {};\n                var attr = {\n                    \"role\": \"gridcell\",\n                    \"class\": \"k-table-td\",\n                    \"style\": column.hidden === true ? { \"display\": \"none\" } : {}\n                };\n\n                if (column.expandable) {\n                    content = content.concat(createPlaceholders({\n\n                        level: options.level + 1,\n                        className: classNames.iconPlaceHolder\n                    }));\n                }\n\n                if (column.attributes) {\n                    extend(true, attr, column.attributes, {\n                        \"style\": column.hidden === true ? { \"display\": \"none\" } : {}\n                    });\n                }\n\n                content.push(kendoHtmlElement(template(aggregates) || \"\"));\n\n                return kendoDomElement(\"td\", attr, content);\n            },\n\n            _hasFooterTemplate: function() {\n                return !!grep(leafColumns(this.columns), function(c) {\n                    return c.footerTemplate;\n                }).length;\n            },\n\n            _tds: function(options, columns, renderer) {\n                var children = [];\n                var column;\n                var editedColumnField = (options.editedColumn || {}).field;\n                var incellEditing = this._isIncellEditable();\n                var length = columns.length;\n\n                for (var i = 0; i < length; i++) {\n                    column = columns[i];\n\n                    var col = renderer({\n                        model: options.model,\n                        column: column,\n                        editColumn: !incellEditing || (incellEditing && column.field === editedColumnField && options.editedColumnIndex === i),\n                        level: options.level\n                    });\n\n                    children.push(col);\n                }\n\n                return kendoDomElement(\"tr\", options.attr, children);\n            },\n\n            _td: function(options) {\n                var children = [];\n                var model = options.model;\n                var column = options.column;\n                var iconType = kendo.defaults.iconType;\n                var iconClass;\n                var attr = {\n                    \"role\": \"gridcell\",\n                    \"class\": \"k-table-td\",\n                    \"style\": column.hidden === true ? { \"display\": \"none\" } : {}\n                };\n                var incellEditing = this._isIncellEditable();\n                var columnHasEditCommand = false;\n\n                if (column.attributes) {\n                    extend(true, attr, column.attributes);\n                }\n\n                if (!!column.headerAttributes && !!column.headerAttributes.id) {\n                    attr[\"aria-describedby\"] = column.headerAttributes.id;\n                }\n\n                if (model._edit && column.field && options.editColumn && (incellEditing || (!incellEditing && isColumnEditable(column, model)))) {\n                    attr[kendo.attr(\"container-for\")] = column.field;\n\n                    if (incellEditing) {\n                        if (attr.className && attr.className.indexOf(classNames.editCell) !== -1) {\n                            attr.className += \" k-table-td\" + classNames.editCell;\n                        } else if (!attr.className) {\n                            attr.className = \"k-table-td \" + classNames.editCell;\n                        }\n                    }\n                } else {\n                    if (column.expandable) {\n                        children = createPlaceholders({ level: options.level, className: classNames.iconPlaceHolder });\n\n                        if (model.hasChildren) {\n                            attr.ariaExpanded = model.expanded;\n                            iconClass = model.expanded ? classNames.iconCollapse : classNames.iconExpand;\n                        } else {\n                            iconClass = classNames.iconPlaceHolder;\n                        }\n\n                        if (model._error) {\n                            iconClass = classNames.refresh;\n                        } else if (!model.loaded() && model.expanded) {\n                            iconClass = \"loading\";\n                            attr[\"aria-busy\"] = true;\n                        }\n\n                        children.push(kendoHtmlElement(kendo.ui.icon($((\"<span ref-treelist-expand-collapse-icon class=\\\"k-treelist-toggle \" + (iconClass === classNames.iconPlaceHolder ? 'k-i-none' : iconClass === 'loading' ? 'k-i-loading' : '') + \"\\\"></span>\")), { icon: iconClass, type: iconType })));\n\n                        attr.style[\"white-space\"] = \"nowrap\";\n                    }\n\n                    if (isDirtyColumn(column, model)) {\n                        if (attr.className) {\n                            attr.className += classNames.dirtyCell;\n                        } else if (!attr.className) {\n                            attr.className = classNames.dirtyCell;\n                        }\n                    }\n\n                    if (column.draggable) {\n                        attr[\"class\"] += \" k-drag-cell k-touch-action-none\";\n\n                        if (typeof attr[ARIA_LABEL] === \"undefined\") {\n                            attr[ARIA_LABEL] = this.options.messages.dragHandleLabel;\n                        }\n\n                        attr.style.cursor = \"move\";\n                    }\n\n                    if (column.command) {\n                        if (attr.className && attr.className.indexOf(\"k-command-cell\") !== -1 ) {\n                            attr.className += \" k-command-cell\";\n                        } else if (!attr.className) {\n                            attr.className = \"k-command-cell\";\n                        }\n\n                        columnHasEditCommand = grep(column.command, function(command) {\n                            return command === EDIT || command.name === EDIT;\n                        }).length > 0;\n\n                        if (model._edit && !this._isIncellEditable() && columnHasEditCommand) {\n                            children = this._buildCommands([\"update\", \"canceledit\"]);\n                        } else {\n                            children = this._buildCommands(column.command);\n                        }\n                    } else {\n                        children.push(this._cellContent(column, model));\n                    }\n\n                    attr.className = [attr[\"class\"], attr.className].join(\" \").trim();\n                }\n\n                return kendoDomElement(\"td\", attr, children);\n            },\n\n            _cellContent: function(column, model) {\n                var that = this;\n                var value;\n                var incellEditing = that._isIncellEditable();\n                var dirtyIndicator;\n\n                if (column.selectable) {\n                    return kendoHtmlElement(SELECTCOLUMNTMPL);\n                }\n\n                if (column.draggable) {\n                    return kendoHtmlElement(DRAGHANDLECOLUMNTMPL());\n                }\n\n                if (column.template) {\n                    value = that._evalColumnTemplate(column, model);\n                } else if (column.field) {\n                    value = model.get(column.field);\n                    dirtyIndicator = incellEditing ? column.dirtyIndicatorTemplate(model) : \"\";\n                    if (value !== null && !isUndefined(value)) {\n                        if (column.format) {\n                            value = kendo.format(column.format, value);\n                        }\n\n                        value = dirtyIndicator + value;\n                    } else {\n                        value = dirtyIndicator;\n                    }\n                } else if (value === null || isUndefined(value)) {\n                    value = \"\";\n                }\n\n                if (column.template || !column.encoded) {\n                    return kendoHtmlElement(value, true);\n                } else {\n                    if (incellEditing) {\n                        return kendoHtmlElement(value, true);\n                    } else {\n                        return kendoTextElement(value, true);\n                    }\n                }\n            },\n\n            _evalColumnTemplate: function(column, model) {\n                if (this._isIncellEditable()) {\n                    return column.dirtyCellTemplate(model);\n                } else {\n                    return column.template(model);\n                }\n            },\n\n            _createDirtyColumnTemplate: function(column) {\n                var that = this;\n                var templateSettings = that._customTemplateSettings();\n                var templateFunction = function(data) {\n                    return (that._dirtyIndicatorTemplate(column.field)(data) + this.columnTemplate(data));\n                };\n\n                return kendoTemplate(templateFunction, templateSettings).bind({ columnTemplate: column.template });\n            },\n\n            _createIndicatorTemplate: function(column) {\n                var dirtyIndicatorTemplate = this._dirtyIndicatorTemplate(column.field);\n\n                return kendoTemplate(dirtyIndicatorTemplate);\n            },\n\n            _dirtyIndicatorTemplate: function(field) {\n                var that = this;\n                var dirtyField;\n                var templateSettings = that._customTemplateSettings();\n                var paramName = templateSettings.paramName;\n\n                if (field && paramName) {\n                    return function (ref) {\n                        var dirty = ref.dirty;\n                        var dirtyFields = ref.dirtyFields;\n\n                        return (dirty && dirtyFields && dirtyFields[field] ? '<span class=\"k-dirty\"></span>' : '');\n                    };\n                }\n\n                return function () { return \"\"; };\n            },\n\n            _customTemplateSettings: function() {\n                return extend({}, kendo.Template, this.options.templateSettings);\n            },\n\n            _buildCommands: function(commands) {\n                var i, result = [];\n\n                for (i = 0; i < commands.length; i++) {\n                    result.push(this._handleCommand(commands[i]));\n                }\n\n                return result;\n            },\n\n            _handleCommand: function(command) {\n                var name = (command.name || command).toLowerCase();\n                var text = this.options.messages.commands[name];\n\n                command = extend({}, defaultCommands[name], { text: text }, command);\n\n\n                if (command.template) {\n                    return kendoHtmlElement(kendo.template(command.template)({ message: command.text || this.options.messages.commands.search }));\n                } else {\n                    return this._button(command, name, command.icon);\n                }\n            },\n\n            _button: function(command, name, icon) {\n                if (command.className && command.className.indexOf(\"k-primary\") > -1) {\n                    command.className = command.className.replace(\"k-primary\", \"k-button-solid-primary\");\n                }\n\n                if (!command.className || command.className.indexOf(\"k-button-solid-primary\") === -1) {\n                    command.className = (command.className || \"\") + \" k-button-solid-base\";\n                }\n                var buttonHTML = '<button data-command=\"' + name + '\" class=\"' + command.className + '\">' + (command.text || (command.text === \"\" ? \"\" : command.name)) + '</button>';\n\n                var button = kendoHtmlElement(kendo.html.renderButton(buttonHTML, {\n                    icon: icon,\n                    iconClass: command.imageClass\n                }));\n\n                return button;\n            },\n\n            _positionResizeHandle: function(e) {\n                var th = $(e.currentTarget);\n                var resizeHandle = this.resizeHandle;\n                var position = th.position();\n                var left;\n                var rtlCorrection = 0;\n                var headerWrap;\n                var ieCorrection;\n                var webkitCorrection;\n                var firefoxCorrection;\n                var leftMargin;\n                var invisibleSpace;\n                var leftBorderWidth;\n                var scrollLeft;\n                var cellWidth = outerWidth(th);\n                var container = th.closest(\"div\");\n                var button = typeof e.buttons !== \"undefined\" ? e.buttons : (e.which || e.button);\n                var indicatorWidth = this.options.columnResizeHandleWidth || 3;\n                var halfResizeHandle = (indicatorWidth * 3) / 2;\n\n                left = cellWidth;\n\n                if (typeof button !== \"undefined\" && button !== 0) {\n                    //do not create a new resize handle if a mouse button is still pressed\n                    //this happens during resizing or before UserEvents trigger \"start\"\n                    return;\n                }\n\n                if (!resizeHandle) {\n                    resizeHandle = this.resizeHandle = $(\n                        '<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\"></div></div>'\n                    );\n                }\n\n                var cells = leafDataCells(th.closest(\"thead\")).filter(\":visible\");\n                if (isRtl) {\n                    scrollLeft = kendo.scrollLeft(container);\n\n                    if (browser.mozilla || (browser.webkit && browser.version >= 85)) {\n                        scrollLeft = scrollLeft * -1;\n                    }\n                    leftBorderWidth = parseFloat(container.css(\"borderLeftWidth\"));\n                    left = th.offset().left + scrollLeft - parseFloat(th.css(\"marginLeft\")) - (container.offset().left + leftBorderWidth);\n                    rtlCorrection = (left <= scrollLeft ? halfResizeHandle : 0);// when shown on first column headers are misaligned due to the width of the resize handler\n                    headerWrap = th.closest(\".k-grid-header-wrap, .k-grid-header-locked\");\n                    invisibleSpace = headerWrap[0].scrollWidth - headerWrap[0].offsetWidth; // the difference between the entire width and the visible area\n                    leftMargin = parseFloat(headerWrap.css(\"marginLeft\"));\n                    ieCorrection = browser.msie ? 2 * kendo.scrollLeft(headerWrap) + leftBorderWidth - leftMargin - rtlCorrection : 0;\n                    webkitCorrection = browser.webkit && (browser.version < 85) ? (invisibleSpace - rtlCorrection - leftMargin + leftBorderWidth) : -rtlCorrection; //margin left is added due to a margin that avoids double borders\n                    firefoxCorrection = browser.mozilla ? leftBorderWidth - leftMargin - rtlCorrection : 0;\n                    left -= webkitCorrection + firefoxCorrection + ieCorrection;\n                } else {\n                    for (var idx = 0; idx < cells.length; idx++) {\n                        if (cells[idx] == th[0]) {\n                            break;\n                        }\n                        left += cells[idx].offsetWidth;\n                    }\n                }\n\n                container.append(resizeHandle);\n\n                resizeHandle\n                    .show()\n                    .css({\n                        top: position.top,\n                        left: left - halfResizeHandle,\n                        height: outerHeight(th),\n                        width: indicatorWidth * 3\n                    })\n                    .data(\"th\", th);\n\n                var that = this;\n                resizeHandle.off(\"dblclick\" + NS).on(\"dblclick\" + NS, function() {\n                    //TODO handle frozen columns index\n                    var index = th.index();\n                    if ($.contains(that.thead[0], th[0])) {\n                        index += grep(that.columns, function(val) { return val.locked && !val.hidden; }).length;\n                    }\n                    that.autoFitColumn(index);\n                });\n            },\n\n            autoFitColumn: function(column) {\n                var that = this,\n                    options = that.options,\n                    columns = that.columns,\n                    index,\n                    th,\n                    headerTable,\n                    isLocked,\n                    visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                    col;\n\n                //  retrieve the column object, depending on the method argument\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(columns, function(item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || column.hidden) {\n                    return;\n                }\n\n                index = inArray(column, columns);\n                isLocked = column.locked;\n\n                if (isLocked) {\n                    headerTable = that.lockedHeader.children(\"table\");\n                } else {\n                    headerTable = that.thead.parent();\n                }\n\n                th = headerTable.find(\"[data-index='\" + index + \"']\");\n\n                var contentTable = isLocked ? that.lockedTable : that.table,\n                    footer = that.footer || $();\n\n                if (that.footer && that.lockedContent) {\n                    footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                }\n\n                var footerTable = footer.find(\"table\").first();\n\n                if (that.lockedHeader && visibleLocked >= index && !isLocked) {\n                    index -= visibleLocked;\n                }\n\n                // adjust column index, depending on previous hidden columns\n                for (var j = 0; j < columns.length; j++) {\n                    if (columns[j] === column) {\n                        break;\n                    } else {\n                        if (columns[j].hidden) {\n                            index--;\n                        }\n                    }\n                }\n\n                // get col elements\n                if (options.scrollable) {\n                    col = headerTable.find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index)\n                        .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                        .add(footerTable.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n                } else {\n                    col = contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n                }\n\n                var tables = headerTable.add(contentTable).add(footerTable);\n\n                var oldColumnWidth = outerWidth(th);\n\n                // reset the table and autofitted column widths\n                // if scrolling is disabled, we need some additional repainting of the table\n                col.width(\"\");\n                tables.css(\"table-layout\", \"fixed\");\n                col.width(\"auto\");\n                tables.addClass(\"k-autofitting\");\n                tables.css(\"table-layout\", \"\");\n\n                var newColumnWidth = Math.ceil(\n                        Math.max(\n                            outerWidth(th),\n                            outerWidth(contentTable.find(\"tr\").eq(0).children(\"td:visible\").eq(index)),\n                            outerWidth(footerTable.find(\"tr\").eq(0).children(\"td:visible\").eq(index))\n                ));\n\n                col.width(newColumnWidth);\n                column.width = newColumnWidth;\n\n                // if all visible columns have widths, the table needs a pixel width as well\n                if (options.scrollable) {\n                    var cols = headerTable.find(\"col\"),\n                        colWidth,\n                        totalWidth = 0;\n                    for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n                        if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                            totalWidth += parseInt(colWidth, 10);\n                        } else {\n                            totalWidth = 0;\n                            break;\n                        }\n                    }\n\n                    if (totalWidth) {\n                        tables.each(function() {\n                            this.style.width = totalWidth + \"px\";\n                        });\n                    }\n                }\n\n                tables.removeClass(\"k-autofitting\");\n\n                that.trigger(COLUMNRESIZE, {\n                    column: column,\n                    oldWidth: oldColumnWidth,\n                    newWidth: newColumnWidth\n                });\n\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n            },\n\n            _adjustLockedHorizontalScrollBar: function() {\n                var table = this.table,\n                    content = table.parent();\n\n                var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n                this.lockedContent.height(outerHeight(content) - scrollbar);\n            },\n\n            _syncLockedContentHeight: function() {\n                if (this.lockedTable) {\n                    if (!this._touchScroller) {\n                        this._adjustLockedHorizontalScrollBar();\n                    }\n                    this._adjustRowsHeight(this.table, this.lockedTable);\n                    this._syncLockedScroll();\n                }\n            },\n\n            _syncLockedHeaderHeight: function() {\n                if (this.lockedHeader) {\n                    var lockedTable = this.lockedHeader.children(\"table\");\n                    var table = this.thead.parent();\n\n                    this._adjustRowsHeight(lockedTable, table);\n\n                    syncTableHeight(lockedTable, table);\n                }\n            },\n\n            _syncLockedScroll: function() {\n                if (!this.options.scrollable) {\n                    return;\n                }\n                this.lockedContent[0].scrollTop = this.content[0].scrollTop;\n            },\n\n            _resizable: function() {\n                if (!this.options.resizable) {\n                    return;\n                }\n\n                if (this.resizable) {\n                    this.resizable.destroy();\n                }\n\n                var treelist = this;\n\n                $(this.lockedHeader).find(\"thead\").add(this.thead)\n                    .on(\"mousemove\" + NS, \"tr:not(.k-filter-row) > th\", this._positionResizeHandle.bind(this));\n\n                this.resizable = new kendo.ui.Resizable(this.wrapper, {\n                    handle: \".k-resize-handle\",\n                    start: function(e) {\n                        var th = $(e.currentTarget).data(\"th\");\n                        var index = $.inArray(th[0], leafDataCells(th.closest(\"thead\")).filter(\":visible\"));\n                        var header, contentTable;\n\n                        treelist.wrapper.addClass(\"k-grid-column-resizing\");\n\n                        if (treelist.lockedHeader && $.contains(treelist.lockedHeader[0], th[0])) {\n                            header = treelist.lockedHeader;\n                            contentTable = treelist.lockedTable;\n                        } else {\n                            header = treelist.thead.parent();\n                            contentTable = treelist.table;\n                        }\n\n                        this.col = contentTable.children(\"colgroup\").find(\"col\").eq(index)\n                              .add(header.find(\"col\").eq(index));\n                        this.th = th;\n                        this.startLocation = e.x.location;\n                        this.columnWidth = outerWidth(th);\n                        this.table = this.col.closest(\"table\");\n                        this.totalWidth = this.table.width();\n                    },\n                    resize: function(e) {\n                        var rtlModifier = isRtl ? -1 : 1;\n                        var minColumnWidth = 11;\n                        var delta = (e.x.location * rtlModifier) - (this.startLocation * rtlModifier);\n\n                        if (this.columnWidth + delta < minColumnWidth) {\n                            delta = minColumnWidth - this.columnWidth;\n                        }\n\n                        this.table.width(this.totalWidth + delta);\n                        this.col.width(this.columnWidth + delta);\n                    },\n                    resizeend: function() {\n                        treelist.wrapper.removeClass(\"k-grid-column-resizing\");\n\n                        var field = this.th.attr(\"data-field\");\n                        var column = grep(leafColumns(treelist.columns), function(c) {\n                            return c.field == field;\n                        });\n                        var newWidth = Math.floor(outerWidth(this.th));\n\n                        column[0].width = newWidth;\n                        treelist._resize();\n                        treelist._syncLockedContentHeight();\n                        treelist._syncLockedHeaderHeight();\n                        treelist.trigger(COLUMNRESIZE, {\n                            column: column,\n                            oldWidth: this.columnWidth,\n                            newWidth: newWidth\n                        });\n\n                        this.table = this.col = this.th = null;\n                    }\n                });\n            },\n\n            _sortable: function() {\n                var columns;\n                var column;\n                var sortableInstance;\n                var cells;\n                var cell, idx, length;\n                var sortable = this.options.sortable;\n                var hasMultiColumnHeaders = grep(this.columns, function(item) {\n                    return item.columns !== undefined$1;\n                }).length > 0;\n                var sortHandler = this._sort.bind(this);\n\n                if (!sortable) {\n                    return;\n                }\n\n                if (hasMultiColumnHeaders) {\n                    if (this.lockedHeader) {\n                        cells = sortCells(leafDataCells(this.lockedHeader.find(\">table>thead\")).add(leafDataCells(this.thead)));\n                    } else {\n                        cells = leafDataCells(this.thead);\n                    }\n                } else {\n                    cells = $(this.lockedHeader).add(this.thead).find(\"tr:not(.k-filter-row) th\");\n                }\n                columns = leafColumns(this.columns);\n\n                for (idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (column.sortable !== false && !column.command && !column.draggable && column.field && !column.selectable) {\n                        cell = cells.eq(idx);\n\n                        sortableInstance = cell.data(\"kendoColumnSorter\");\n                        if (sortableInstance) {\n                            sortableInstance.destroy();\n                        }\n\n                        cell.kendoColumnSorter(\n                                extend({}, sortable, column.sortable, {\n                                    dataSource: this.dataSource,\n                                    change: sortHandler\n                                })\n                            );\n                    }\n                }\n            },\n\n            _filterable: function() {\n                var cells;\n                var filterable = this.options.filterable;\n                var idx;\n                var length;\n                var columns;\n                var column;\n                var cell;\n                var filterMenuInstance;\n                var hasMultiColumnHeaders = grep(this.columns, function(item) {\n                    return item.columns !== undefined$1;\n                }).length > 0;\n\n                if (!filterable || this.options.columnMenu) {\n                    return;\n                }\n\n                var filterInit = (function(e) {\n                    this.trigger(FILTERMENUINIT, { field: e.field, container: e.container });\n                }).bind(this);\n\n                var filterOpen = (function(e) {\n                    this.trigger(FILTERMENUOPEN, { field: e.field, container: e.container });\n                }).bind(this);\n\n                var filterHandler = this._filter.bind(this);\n\n                if (hasMultiColumnHeaders) {\n                    if (this.lockedHeader) {\n                        cells = leafDataCells(this.lockedHeader.find(\">table>thead\").add(this.thead));\n                    } else {\n                        cells = leafDataCells(this.thead);\n                    }\n                } else {\n                    cells = $(this.lockedHeader).add(this.thead).find(\"tr:not(.k-filter-row) th\");\n                }\n                columns = leafColumns(this.columns);\n\n                if (filterable && typeof filterable.mode == STRING && filterable.mode.indexOf(\"menu\") == -1) {\n                    filterable = false;\n                }\n\n                if (!filterable) {\n                    return;\n                }\n\n                for (idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n                    cell = cells.eq(idx);\n\n                    filterMenuInstance = cell.data(\"kendoFilterMenu\");\n                    if (filterMenuInstance) {\n                        filterMenuInstance.destroy();\n                    }\n\n                    if (column.draggable || column.command || column.filterable === false || column.selectable) {\n                        continue;\n                    }\n\n                    cell.kendoFilterMenu(extend(true, {}, filterable, column.filterable, {\n                        dataSource: this.dataSource,\n                        init: filterInit,\n                        open: filterOpen,\n                        change: filterHandler,\n                        appendTo: DOT + classNames.headerCellInner\n                    }));\n                }\n            },\n\n            _filterRow: function() {\n                var that = this;\n                if (!that._hasFilterRow()) {\n                   return;\n                }\n\n                var settings;\n                var $angular = that.options.$angular;\n                var uidAttr = kendo.attr('uid');\n                var columns = leafColumns(that.columns),\n                    filterable = that.options.filterable,\n                    filterHandler = this._filter.bind(this),\n                    existingInstance;\n\n                for (var i = 0; i < columns.length; i++) {\n                    var suggestDataSource,\n                        col = columns[i],\n                        operators = that.options.filterable.operators,\n                        customDataSource = false,\n                        th = this.wrapper.find('.k-grid-header .k-filter-row th[' + uidAttr + '=\"' + col.headerAttributes.id + '\"]'),\n                        field = col.field,\n                        parentColumn = col.parentColumn;\n\n                    delete col.parentColumn;\n\n                    if (field && col.filterable !== false) {\n                        var cellOptions = col.filterable && col.filterable.cell || {};\n                        existingInstance = th.find('.k-filtercell').data('kendoFilterCell');\n\n                        if (existingInstance) {\n                            existingInstance.destroy();\n                            th.empty();\n                        }\n\n                        suggestDataSource = that.options.dataSource;\n                        if (suggestDataSource instanceof DataSource) {\n                            suggestDataSource = that.options.dataSource.options;\n                        }\n\n                        var messages = extend(true, {}, filterable.messages);\n                        if (col.filterable) {\n                            extend(true, messages, col.filterable.messages);\n                        }\n\n                        if (cellOptions.enabled === false) {\n                            th.html(\"&nbsp;\");\n                            continue;\n                        }\n                        if (cellOptions.dataSource) {\n                            suggestDataSource = cellOptions.dataSource;\n                            customDataSource = true;\n                        }\n                        if (col.filterable && col.filterable.operators) {\n                            operators = col.filterable.operators;\n                        }\n\n                        settings = {\n                            column: col,\n                            dataSource: that.dataSource,\n                            suggestDataSource: suggestDataSource,\n                            customDataSource: customDataSource,\n                            field: field,\n                            messages: messages,\n                            values: col.values,\n                            template: cellOptions.template,\n                            delay: cellOptions.delay,\n                            inputWidth: cellOptions.inputWidth,\n                            suggestionOperator: cellOptions.suggestionOperator,\n                            minLength: cellOptions.minLength,\n                            dataTextField: cellOptions.dataTextField,\n                            operator: cellOptions.operator,\n                            operators: operators,\n                            showOperators: cellOptions.showOperators,\n                            change: filterHandler\n                        };\n\n                        if ($angular) {\n                            settings.$angular = $angular;\n                        }\n\n                        $(\"<span/>\").attr(kendo.attr(\"field\"), field)\n                            .appendTo(th)\n                            .kendoFilterCell(settings);\n                        col.parentColumn = parentColumn;\n                    } else {\n                        th.html(\"&nbsp;\");\n                    }\n                }\n\n                this._filterFocusable().attr(TABINDEX, -1);\n            },\n\n            _hasFilterRow: function() {\n                var filterable = this.options.filterable;\n                var hasFiltering = filterable &&\n                        typeof filterable.mode == STRING &&\n                        filterable.mode.indexOf(\"row\") != -1;\n                var columns = this.columns;\n                var columnsWithoutFiltering = $.grep(columns, function(col) {\n                    return col.filterable === false;\n                });\n\n                if (columns.length && columnsWithoutFiltering.length == columns.length) {\n                    hasFiltering = false;\n                }\n\n                return hasFiltering;\n            },\n\n            _change: function() {\n                var that = this;\n                var selectedValues;\n\n                if (that._checkBoxSelection) {\n                    selectedValues = that.selectable.value();\n                    that._uncheckCheckBoxes();\n                    that._checkRows(selectedValues);\n                    if (selectedValues.length && selectedValues.length === that.items().length) {\n                        that._toggleHeaderCheckState(true);\n                    } else {\n                        that._toggleHeaderCheckState(false);\n                    }\n                }\n                this.trigger(CHANGE);\n            },\n\n            _isLocked: function() {\n                return this.lockedHeader !== null;\n            },\n\n            _selectable: function() {\n                var that = this;\n                var selectable = this.options.selectable;\n                var filter;\n                var element = this.table;\n                var useAllItems;\n                var isLocked = that._isLocked();\n                var multi;\n                var cell;\n\n                if (selectable) {\n                    selectable = kendo.ui.Selectable.parseOptions(selectable);\n\n                    if (this._hasLockedColumns) {\n                        element = element.add(this.lockedTable);\n                        useAllItems = selectable.multiple && selectable.cell;\n                    }\n\n                    filter = \">tbody>tr:not(.k-footer-template)\";\n\n                    if (selectable.cell) {\n                        filter = filter + \">td\";\n                    }\n\n                    this.selectable = new kendo.ui.Selectable(element, {\n                        filter: filter,\n                        aria: true,\n                        multiple: selectable.multiple,\n                        change: this._change.bind(this),\n                        useAllItems: useAllItems,\n                        continuousItems: this._continuousItems.bind(this, filter, selectable.cell),\n                        relatedTarget: !selectable.cell && this._hasLockedColumns ? this._selectableTarget.bind(this) : undefined$1\n                    });\n\n                    if (that.options.navigatable) {\n                        multi = selectable.multiple;\n                        cell = selectable.cell;\n\n                        element.on(\"keydown\" + NS, function(e) {\n                            var current = that.current();\n                            var target = e.target;\n                            if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, element) > -1 &&\n                                !current.is(\".k-header\")) {\n\n                                    e.preventDefault();\n                                    e.stopPropagation();\n                                    current = cell ? current : current.parent();\n\n                                    if (isLocked && !cell) {\n                                        current = current.add(that._relatedRow(current));\n                                    }\n\n                                    if (multi) {\n                                        if (!e.ctrlKey) {\n                                            that.selectable.clear();\n                                        } else {\n                                            if (current.hasClass(classNames.selected)) {\n                                                current.removeClass(classNames.selected);\n                                                that.trigger(CHANGE);\n                                                return;\n                                            }\n                                        }\n                                    } else {\n                                        that.selectable.clear();\n                                    }\n                                    if (!cell) {\n                                        that.selectable._lastActive = current;\n                                    }\n\n                                    that.selectable.value(current);\n                                    that.trigger(CHANGE);\n                            } else if (!cell && ((e.shiftKey && e.keyCode == keys.LEFT) ||\n                                        (e.shiftKey && e.keyCode == keys.RIGHT) ||\n                                        (e.shiftKey && e.keyCode == keys.UP) ||\n                                        (e.shiftKey && e.keyCode == keys.DOWN) ||\n                                        (e.keyCode === keys.SPACEBAR && e.shiftKey))) {\n\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = current.parent();\n\n                                if (isLocked) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n\n                                if (multi) {\n                                    if (!that.selectable._lastActive) {\n                                        that.selectable._lastActive = current;\n                                    }\n                                    that.selectable.selectRange(that.selectable._firstSelectee(), current);\n                                } else {\n                                    that.selectable.clear();\n                                    that.selectable.value(current);\n                                }\n                                that.trigger(CHANGE);\n                            }\n                        });\n                    }\n                }\n            },\n\n            _continuousItems: function(filter, cell) {\n                if (!this.lockedContent) {\n                    return;\n                }\n\n                var lockedItems = $(filter, this.lockedTable);\n                var nonLockedItems = $(filter, this.table);\n                var columns = cell ? lockedColumns(this.columns).length : 1;\n                var nonLockedColumns = cell ? this.columns.length - columns : 1;\n                var result = [];\n\n                for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                    push.apply(result, lockedItems.slice(idx, idx + columns));\n                    push.apply(result, nonLockedItems.splice(0, nonLockedColumns));\n                }\n\n                return result;\n            },\n\n            _selectableTarget: function(items) {\n                var related;\n                var result = $();\n                for (var idx = 0, length = items.length; idx < length; idx ++) {\n                    related = this._relatedRow(items[idx]);\n\n                    if (inArray(related[0], items) < 0) {\n                        result = result.add(related);\n                    }\n                }\n\n                return result;\n            },\n\n            _relatedRow: function(row) {\n                var lockedTable = this.lockedTable;\n                row = $(row);\n\n                if (!lockedTable) {\n                    return row;\n                }\n\n                var table = row.closest(this.table.add(this.lockedTable));\n                var index = table.find(\">tbody>tr\").index(row);\n\n                table = table[0] === this.table[0] ? lockedTable : this.table;\n\n                return table.find(\">tbody>tr\").eq(index);\n            },\n\n            select: function(value) {\n                var that = this;\n                var selectable = this.selectable;\n\n                if (that._checkBoxSelection) {\n                    if (value) {\n                        that._checkRows(value);\n                        if (that.select().length === that.items().length) {\n                            that._toggleHeaderCheckState(true);\n                        }\n                    }\n\n                    return that.items().filter(\".\" + SELECTED);\n                }\n\n                if (!selectable) {\n                    return $();\n                }\n\n                if (typeof value !== \"undefined\") {\n                    if (!selectable.options.multiple) {\n                        selectable.clear();\n\n                        value = value.first();\n                    }\n\n                    if (this._hasLockedColumns) {\n                        value = value.add($.map(value, this._relatedRow.bind(this)));\n                    }\n                }\n\n                return selectable.value(value);\n            },\n\n            clearSelection: function() {\n                var that = this;\n\n                if (that.selectable && !that._checkBoxSelection) {\n                    that.selectable.clear();\n                }\n\n                if (that._checkBoxSelection) {\n                    that._deselectCheckRows(that.select(), true);\n                    return;\n                }\n            },\n\n            _uncheckCheckBoxes: function() {\n                var that = this;\n                var tables = that.table.add(that.lockedTable);\n\n                tables.find(\"tbody \" + CHECKBOXINPUT).attr(\"aria-checked\", false)\n                    .prop(\"checked\", false).attr(\"aria-label\", \"Select row\");\n\n            },\n\n            _deselectCheckRows: function(items, preventChange) {\n                var that = this;\n                items = that.table.add(that.lockedTable).find(items);\n\n                if (that._isLocked()) {\n                    items = items.add(items.map(function() {\n                        return that._relatedRow(this);\n                    }));\n                }\n\n                items.each(function() {\n                    $(this).removeClass(SELECTED).find(CHECKBOXINPUT).attr(\"aria-checked\", false)\n                        .prop(\"checked\", false).attr(\"aria-label\", \"Select row\");\n                });\n                that._toggleHeaderCheckState(false);\n\n                if (!preventChange) {\n                    that.trigger(CHANGE);\n                }\n            },\n\n            _headerCheckboxClick: function(e) {\n                var that = this,\n                    checkBox = $(e.target),\n                    checked = checkBox.prop(\"checked\"),\n                    parentGrid = checkBox.closest(\".k-grid\").getKendoTreeList();\n\n                if (that !== parentGrid) {\n                    return;\n                }\n\n                if (checked) {\n                    that.select(parentGrid.items());\n                } else {\n                    that.clearSelection();\n                }\n                that.trigger(CHANGE);\n            },\n\n            _checkboxClick: function(e) {\n                var that = this,\n                    row = $(e.target).closest(\"tr\"),\n                    isSelecting = !row.hasClass(SELECTED),\n                    dataItem = that.dataItem(row),\n                    children = [],\n                    selector = \"\";\n\n                if (that !== row.closest(\".k-grid\").getKendoTreeList()) {\n                    return;\n                }\n\n                if (that._includeChildren) {\n                    that.dataSource.allChildNodes(dataItem, children);\n\n                    for (var i = 0; i < children.length; i++) {\n                        selector += \"tr[data-uid='\" +\tchildren[i].uid + \"'],\";\n                    }\n                }\n\n                selector += \"tr[data-uid='\" +\tdataItem.uid + \"']\";\n                row = $(selector);\n\n                if (isSelecting) {\n                    that.select(row);\n                    that.trigger(CHANGE);\n                } else {\n                    that._deselectCheckRows(row);\n                }\n            },\n\n            _checkRows: function(items) {\n                items.each(function() {\n                    $(this).addClass(SELECTED).find(CHECKBOXINPUT).prop(\"checked\", true)\n                        .attr(\"aria-label\", \"Deselect row\").attr(\"aria-checked\", true);\n                });\n            },\n\n            _toggleHeaderCheckState: function(checked) {\n                var that = this;\n                if (checked) {\n                    that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                        .prop(\"checked\", true).attr(\"aria-checked\", true)\n                        .attr(\"aria-label\", \"Deselect all rows\");\n                } else {\n                    that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                        .prop(\"checked\", false).attr(\"aria-checked\", false)\n                        .attr(\"aria-label\", \"Select all rows\");\n                }\n            },\n\n            _dataSource: function(dataSource) {\n                var that = this;\n                var ds = this.dataSource;\n                var pageable = that.options.pageable;\n\n                if (ds) {\n                    ds.unbind(CHANGE, this._refreshHandler);\n                    ds.unbind(ERROR, this._errorHandler);\n                    ds.unbind(SORT, this._sortHandler);\n                    ds.unbind(PROGRESS, this._progressHandler);\n                }\n\n                this._refreshHandler = this.refresh.bind(this);\n                this._errorHandler = this._error.bind(this);\n                this._sortHandler = this._clearSortClasses.bind(this);\n                this._progressHandler = this._progress.bind(this);\n\n\n                if (isPlainObject(dataSource)) {\n                    extend(dataSource, { table: that.table, fields: that.columns });\n\n                    if (isPlainObject(pageable) && pageable.pageSize !== undefined$1) {\n                        dataSource.pageSize = pageable.pageSize;\n                    }\n                }\n\n                ds = this.dataSource = TreeListDataSource.create(dataSource);\n\n                if (pageable) {\n                    ds._collapsedTotal = undefined$1;\n                }\n\n                ds.bind(CHANGE, this._refreshHandler);\n                ds.bind(ERROR, this._errorHandler);\n                ds.bind(SORT, this._sortHandler);\n                ds.bind(PROGRESS, this._progressHandler);\n\n                this._dataSourceFetchProxy = (function() {\n                    this.dataSource.fetch();\n                }).bind(this);\n            },\n\n            setDataSource: function(dataSource) {\n                this._dataSource(dataSource);\n                this._sortable();\n                this._filterable();\n                this._filterRow();\n                this._columnMenu();\n                this._pageable();\n\n                this._contentTree.render([]);\n\n                if (this.options.autoBind) {\n                    this.dataSource.fetch();\n                }\n            },\n\n            dataItem: function(element) {\n                if (element instanceof TreeListModel) {\n                    return element;\n                }\n\n                var row = $(element).closest(\"tr\");\n                var uid = row.attr(kendo.attr(\"uid\"));\n                var model = isUndefined(uid) ? null : this.dataSource.getByUid(uid);\n\n                return model;\n            },\n\n            editRow: function(row) {\n                var that = this;\n                var model;\n\n                if (this._isIncellEditable() || !this.options.editable) {\n                    return;\n                }\n\n                if (typeof row === STRING) {\n                    row = this.tbody.find(row);\n                }\n\n                if (that._isPageable() && that._isPopupEditable() && row instanceof TreeListModel) {\n                    // popup editor can be created without a rendered row\n                    model = row;\n                } else {\n                    model = this.dataItem(row);\n                }\n\n                if (!model) {\n                    return;\n                }\n\n                if (that.editor) {\n                    model._edit = true;\n                    this._render();\n                    this._cancelEditor();\n                } else {\n                    that._preventPageSizeRestore = false;\n\n                }\n\n                if (this._editMode() != \"popup\") {\n                    model._edit = true;\n                }\n\n                if (this.trigger(BEFORE_EDIT, { model: model })) {\n                    that.dataSource._restorePageSizeAfterAddChild();\n                    return;\n                }\n\n                this._render();\n\n                this._createEditor(model);\n\n                this.trigger(EDIT, {\n                    container: this.editor.wrapper,\n                    model: model\n                });\n            },\n\n            _cancelEdit: function(e) {\n                if (!this.editor) {\n                    return;\n                }\n                var currentIndex;\n\n                e = extend(e, {\n                    container: this.editor.wrapper,\n                    model: this.editor.model\n                });\n\n                if (this.trigger(CANCEL, e)) {\n                    return;\n                }\n\n                if (this.options.navigatable) {\n                    currentIndex = this.items().index($(this.current()).parent());\n                }\n\n                this.cancelRow();\n\n                if (this.options.navigatable) {\n                    this._setCurrent(this.items().eq(currentIndex).children().filter(NAVCELL).first());\n                    focusTable(this.table, true);\n                }\n            },\n\n            cancelRow: function() {\n                if (this._isIncellEditable()) {\n                    return;\n                }\n\n                this._cancelEditor();\n\n                this._render();\n            },\n\n            saveRow: function() {\n                var editor = this.editor;\n                var args;\n\n                if (this._isIncellEditable()) {\n                    return;\n                }\n\n                if (!editor) {\n                    return;\n                }\n\n                args = {\n                    model: editor.model,\n                    container: editor.wrapper\n                };\n\n                if (editor.end() && !this.trigger(SAVE, args)) {\n                    this.dataSource.sync();\n                }\n            },\n\n            addRow: function(parent) {\n                var that = this;\n                var dataSource = that.dataSource;\n                var pageable = that._isPageable();\n                var incellEditing = that._isIncellEditable();\n                var inlineEditing = that._isInlineEditable();\n                var editor = this.editor;\n                var index = 0;\n                var model = {};\n\n                if ((editor && !editor.end()) || !this.options.editable) {\n                    return;\n                }\n\n                if (parent) {\n                    if (!(parent instanceof TreeListModel)) {\n                        parent = this.dataItem(parent);\n                    }\n\n                    model[parent.parentIdField] = parent.id;\n                    index = this.dataSource.indexOf(parent) + 1;\n\n                    this.expand(parent)\n                        .then(function() {\n                            var showNewModelInView = pageable && dataSource._isLastItemInView(parent) && (incellEditing || inlineEditing);\n                            that._insertAt(model, index, showNewModelInView);\n                        });\n\n                    return;\n                }\n\n                this._insertAt(model, index);\n            },\n\n            _insertAt: function(model, index, showNewModelInView) {\n                var that = this;\n                var dataSource = that.dataSource;\n                model = that.dataSource.insert(index, model);\n\n                if (showNewModelInView) {\n                    dataSource._setAddChildPageSize();\n                }\n\n                var row = this._itemFor(model);\n                var cell;\n\n                if (that._isIncellEditable()) {\n                    cell = row.children(\"td\").eq(that._firstEditableColumnIndex(row));\n                    that.editCell(cell);\n                } else if (row && row[0]) {\n                    that.editRow(row);\n                } else if ((that._isPageable() || that.dataSource.filter()) && (that._isPopupEditable() || that._isInlineEditable())) {\n                    that.editRow(model);\n                }\n            },\n\n            _firstEditableColumnIndex: function(container) {\n                var that = this;\n                var model = that.dataItem(container);\n                var columns = leafColumns(that.columns);\n                var length = columns.length;\n                var column;\n                var idx;\n\n                for (idx = 0; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (model && (!model.editable || model.editable(column.field)) && !column.command && !column.draggable && column.field && column.hidden !== true) {\n                        return idx;\n                    }\n                }\n\n                return -1;\n            },\n\n            removeRow: function(row) {\n                var model = this.dataItem(row);\n                var args = {\n                    model: model,\n                    row: row\n                };\n\n                if (this.options.editable && model && !this.trigger(REMOVE, args)) {\n                    if (document.activeElement === $(row).find(\".k-grid-delete\")[0]) {\n                        $(row).find(\".k-grid-delete\").trigger(\"blur\");\n                    }\n                    this.dataSource.remove(model);\n\n                    if (!this._isIncellEditable()) {\n                        this.dataSource.sync();\n                    }\n                }\n            },\n\n            _cancelEditor: function() {\n                var that = this;\n                var model;\n                var editor = that.editor;\n\n                if (editor) {\n                    model = editor.model;\n\n                    that._destroyEditor();\n\n                    if (!that._isIncellEditable()) {\n                        that.dataSource.cancelChanges(model);\n                    } else if (that._shouldRestorePageSize()) {\n                        that.dataSource._restorePageSizeAfterAddChild();\n                    }\n\n                    model._edit = false;\n                }\n\n                that._preventPageSizeRestore = false;\n            },\n\n            _shouldRestorePageSize: function() {\n                var that = this;\n                return that._isPageable() && that._isIncellEditable() && !that._preventPageSizeRestore;\n            },\n\n            _destroyEditor: function() {\n                if (!this.editor) {\n                    return;\n                }\n\n                this.editor.close();\n                this.editor = null;\n            },\n\n            _createEditor: function(model) {\n                var row = this.itemFor(model);\n                var columns = leafColumns(this.columns);\n                var leafCols = [];\n\n                for (var idx = 0; idx < columns.length; idx++) {\n                    leafCols.push(extend({}, columns[idx]));\n                    delete leafCols[idx].parentColumn;\n                }\n\n                row = row.add(this._relatedRow(row));\n\n                var mode = this._editMode();\n\n                var options = {\n                    columns: leafCols,\n                    model: model,\n                    target: this,\n                    clearContainer: false,\n                    template: this.options.editable.template\n                };\n\n                if (mode == \"inline\") {\n                    this.editor = new Editor(row, options);\n                } else {\n                    extend(options, {\n                        window: this.options.editable.window,\n                        commandRenderer: (function() {\n                            return this._buildCommands([\"update\", \"canceledit\"]);\n                        }).bind(this),\n                        fieldRenderer: this._cellContent.bind(this),\n                        save: this.saveRow.bind(this),\n                        cancel: this._cancelEdit.bind(this),\n                        appendTo: this.wrapper\n                    });\n\n                    this.editor = new PopupEditor(row, options);\n                }\n            },\n\n            _createIncellEditor: function(cell, options) {\n                var that = this;\n                var column = extend({}, options.columns[0]);\n\n                delete column.parentColumn;\n\n                return new IncellEditor(cell, extend({}, {\n                    fieldRenderer: that._cellContent.bind(that),\n                    appendTo: that.wrapper,\n                    clearContainer: false,\n                    target: that,\n                    columns: [column],\n                    model: options.model,\n                    change: options.change\n                }));\n            },\n\n            editCell: function(cell) {\n                var that = this;\n                cell = $(cell);\n                var column = leafColumns(that.columns)[that.cellIndex(cell)];\n                var model = that.dataItem(cell);\n\n                if (that._isIncellEditable() && model && isColumnEditable(column, model)) {\n                    that._editCell(cell, column, model);\n                }\n            },\n\n            _editCell: function(cell, column, model) {\n                var that = this;\n                var editedCell;\n\n                if (that.trigger(BEFORE_EDIT, { model: model })) {\n                    that.dataSource._restorePageSizeAfterAddChild();\n                    return;\n                }\n\n                that.closeCell();\n\n                model._edit = true;\n\n                that._cancelEditor();\n\n                that._render({\n                    editedColumn: column,\n                    editedColumnIndex: cell.index()\n                });\n\n                editedCell = that.table.add(that.lockedTable).find(DOT + classNames.editCell).first();\n\n                that.editor = that._createIncellEditor(editedCell, {\n                    columns: [column],\n                    model: model,\n                    change: function(e) {\n                        if (that.trigger(SAVE, { values: e.values, container: cell, model: model } )) {\n                            e.preventDefault();\n                        }\n\n                    }\n                });\n\n                if (that.lockedTable) {\n                    that._syncLockedContentHeight();\n                }\n\n                // refresh the current element as the DOM element reference can be changed after render()\n                that._current = editedCell;\n\n                that.trigger(EDIT, { container: cell, model: model });\n            },\n\n            closeCell: function(isCancel) {\n                var that = this;\n                var cell = (that.editor || {}).element;\n                var tr;\n                var model;\n\n                if (!cell || !cell[0] || !that._isIncellEditable()) {\n                    return;\n                }\n\n                model = that.dataItem(cell);\n\n                if (isCancel && that.trigger(CANCEL, { container: cell, model: model })) {\n                    return;\n                }\n\n                that.trigger(CELL_CLOSE, { type: isCancel ? CANCEL : SAVE, model: model, container: cell });\n\n                that._cancelEditor();\n\n                cell.removeClass(classNames.editCell);\n\n                tr = cell.parent().removeClass(classNames.editRow);\n\n                if (that.lockedContent) {\n                    that._relatedRow(tr).removeClass(classNames.editRow);\n                }\n\n                that._render();\n\n                that.trigger(ITEM_CHANGE, { item: tr, data: model, ns: ui });\n\n                if (that.lockedContent) {\n                    adjustRowHeight(tr.css(\"height\", \"\")[0], that._relatedRow(tr).css(\"height\", \"\")[0]);\n                }\n            },\n\n            cancelChanges: function() {\n                this.dataSource.cancelChanges();\n            },\n\n            saveChanges: function() {\n                var that = this;\n                var editable = (that.editor || {}).editable;\n                var valid = editable && editable.end();\n\n                if ((valid || !editable) && !that.trigger(SAVE_CHANGES)) {\n                    that.dataSource.sync();\n                }\n            },\n\n            _editMode: function() {\n                var mode = \"inline\",\n                    editable = this.options.editable;\n\n                if (editable !== true) {\n                    if (typeof editable == \"string\") {\n                        mode = editable;\n                    } else {\n                        mode = editable.mode || mode;\n                    }\n                }\n\n                return mode.toLowerCase();\n            },\n\n            _isIncellEditable: function() {\n                return this._editMode() === INCELL;\n            },\n\n            _isInlineEditable: function() {\n                return this._editMode() === INLINE;\n            },\n\n            _isPopupEditable: function() {\n                return this._editMode() === POPUP;\n            },\n\n            hideColumn: function(column) {\n                this._toggleColumnVisibility(column, true);\n            },\n\n            showColumn: function(column) {\n                this._toggleColumnVisibility(column, false);\n            },\n\n            _toggleColumnVisibility: function(column, hidden) {\n                column = this._findColumn(column);\n\n                if (!column || column.hidden === hidden) {\n                    return;\n                }\n\n                column.hidden = hidden;\n                this._setParentsVisibility(column, !hidden);\n\n                this._ensureExpandableColumn();\n                this._clearColsCache();\n                this._renderCols();\n                this._renderHeader();\n                this._render();\n\n                this._adjustTablesWidth();\n                if (hidden) {\n                    this._ariaAddHiddenColIndex();\n                } else {\n                    this._ariaRemoveHiddenColIndex();\n                }\n\n                this.trigger(hidden ? COLUMNHIDE : COLUMNSHOW, { column: column });\n\n                if (!hidden && !column.width) {\n                    this.table\n                        .add(this.thead.closest(\"table\"))\n                        .width(\"\");\n                }\n                this._updateFirstColumnClass();\n            },\n\n            _findColumn: function(column) {\n                if (typeof column == \"number\") {\n                    column = this.columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(leafColumns(this.columns), function(item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(leafColumns(this.columns), function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                return column;\n            },\n\n            _adjustTablesWidth: function() {\n                var idx, length;\n                var cols = this.thead.prev().children();\n                var colWidth, width = 0;\n\n                for (idx = 0, length = cols.length; idx < length; idx++ ) {\n                    colWidth = cols[idx].style.width;\n                    if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                        width += parseInt(colWidth, 10);\n                    } else {\n                        width = 0;\n                        break;\n                    }\n                }\n\n\n                if (width) {\n                    this.table\n                        .add(this.thead.closest(\"table\"))\n                        .width(width);\n                }\n            },\n\n            _reorderable: function() {\n                if (!this.options.reorderable) {\n                    return;\n                }\n\n                var scrollable = this.options.scrollable === true;\n                var selector = (scrollable ? \".k-grid-header \" : \"table>.k-grid-header \") + HEADERCELLS;\n                var that = this;\n\n                this._draggableInstance = new ui.Draggable(this.wrapper, {\n                    group: kendo.guid(),\n                    filter: selector,\n                    hint: function(target) {\n                        return $('<div class=\"k-reorder-clue k-drag-clue\" />')\n                        .html(target.attr(kendo.attr(\"title\")) || target.attr(kendo.attr(\"field\")) || target.text())\n                        .prepend(kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }));\n                    }\n                });\n\n                this.reorderable = new ui.Reorderable(this.wrapper, {\n                    draggable: this._draggableInstance,\n                    dragOverContainers: this._allowDragOverContainers.bind(this),\n                    inSameContainer: function(e) {\n                        return $(e.source).parent()[0] === $(e.target).parent()[0] && targetParentContainerIndex(flatColumnsInDomOrder(that.columns), that.columns, e.sourceIndex, e.targetIndex) > -1;\n                    },\n                    change: function(e) {\n                        var columns = flatColumnsInDomOrder(that.columns);\n                        var column = columns[e.oldIndex];\n                        var newIndex = targetParentContainerIndex(columns, that.columns, e.oldIndex, e.newIndex);\n\n                        that.trigger(COLUMNREORDER, {\n                            newIndex: newIndex,\n                            oldIndex: inArray(column, columns),\n                            column: column\n                        });\n\n                        that.reorderColumn(newIndex, column, e.position === \"before\");\n                    }\n                });\n            },\n\n            _allowDragOverContainers: function(sourceIndex, targetIndex) {\n                var columns = flatColumnsInDomOrder(this.columns);\n                return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, this.columns, sourceIndex, targetIndex) > -1;\n            },\n\n            _reorderTrees: function(destSources, destContainer, destDomTree, sources, sourcesContainer, sourcesDomTree, before, depth) {\n                var ths = $();\n                var source = sourcesContainer.find(\"tr\").eq(sources[0].rowIndex);\n                var sourceDOM = sourcesDomTree.children[sources[0].rowIndex];\n                var sourceChildren = source.children();\n                var destDomChildren;\n                var currentIndex;\n                var destColumn = before ? destSources[0] : destSources[destSources.length - 1];\n                var destRow;\n                var sourcesLeafs;\n                var destLeafs;\n                var reorderTaget;\n                var destThs;\n\n                for (var idx = 0; idx < sources.length; idx++) {\n                    currentIndex = sources[idx].cellIndex;\n                    ths = ths.add(sourceChildren.eq(currentIndex));\n                    destDomChildren = destDomTree.children[destColumn.rowIndex].children;\n                    if (destDomTree === sourcesDomTree && before) {\n                        currentIndex += idx;\n                    }\n\n                    destDomChildren.splice(before ? destColumn.cellIndex + idx : destColumn.cellIndex + 1 + idx, 0, sourceDOM.children[currentIndex]);\n                }\n\n                if (destDomTree === sourcesDomTree && before) {\n                    sourceDOM.children.splice(sources[0].cellIndex + sources.length, sources.length);\n                } else {\n                    sourceDOM.children.splice(sources[0].cellIndex, sources.length);\n                }\n                destRow = destContainer.find(\"tr\").eq(destColumn.rowIndex);\n                destThs = destRow.find(\">th.k-header\").eq(destColumn.cellIndex);\n\n                if (destThs.length && ths[0] !== destThs[0]) {\n                    ths[before ? \"insertBefore\" : \"insertAfter\"](destThs);\n                }\n\n                if (depth >= sources[0].rowIndex + 1 && depth != 1) {\n                    sourcesLeafs = [];\n                    for (idx = 0; idx < sources.length; idx++) {\n                        if (sources[idx].columns) {\n                            sourcesLeafs = sourcesLeafs.concat(sources[idx].columns);\n                        }\n                    }\n                    if (!sourcesLeafs.length) {\n                        return;\n                    }\n\n                    destLeafs = [];\n\n                    for (idx = 0; idx < destSources.length; idx++) {\n                        if (destSources[idx].columns) {\n                            destLeafs = destLeafs.concat(destSources[idx].columns);\n                        }\n                    }\n\n                    if (!destLeafs.length && (destContainer !== sourcesContainer || (destColumn.cellIndex - sources[0].cellIndex > 1 || sources[0].cellIndex - destColumn.cellIndex > 1))) {\n                        reorderTaget = findReorderTarget(this.columns, destColumn, sources[0], before, this.columns);\n\n                        destLeafs = [reorderTaget];\n                        if (!reorderTaget && sourcesLeafs.length && destContainer.find(\"tr\").length > sources[0].rowIndex + 1) {\n                            this._insertTree(sourcesLeafs, sourcesContainer, sourcesDomTree, destContainer, destDomTree);\n                            return;\n                        }\n                    }\n\n                    if (!destLeafs.length) {\n                        return;\n                    }\n\n                    this._reorderTrees(destLeafs, destContainer, destDomTree, sourcesLeafs, sourcesContainer, sourcesDomTree, before, depth);\n                }\n            },\n\n            _insertTree: function(columns, sourcesContainer, sourcesDomTree, destContainer, destDomTree) {\n                var leafs = [];\n                var row;\n                var ths = $();\n                var domTr;\n\n                row = sourcesContainer.find(\"tr\").eq(columns[0].rowIndex);\n                domTr = sourcesDomTree.children[columns[0].rowIndex];\n\n                for (var idx = 0; idx < columns.length; idx++) {\n                    if (columns[idx].columns) {\n                        leafs = leafs.concat(columns[idx].columns);\n                    }\n                    destDomTree.children[columns[0].rowIndex].children.splice(idx, 0, domTr.children[columns[idx].rowIndex]);\n                    ths = ths.add(row.find(\">th.k-header\").eq(columns[idx].cellIndex));\n                }\n\n                sourcesDomTree.children[columns[0].rowIndex].children.splice(columns[0].cellIndex, columns.length);\n                destContainer.find(\"tr\").eq(columns[0].rowIndex).append(ths);\n\n                if (leafs.length) {\n                    this._insertTree(leafs, sourcesContainer, sourcesDomTree, destContainer, destDomTree);\n                }\n            },\n\n            _reorderHeader: function(destColumn, column, before) {\n                var sourcesDepth = column.columns ? depth([column]) : 1;\n                var targetDepth = destColumn.columns ? depth([destColumn]) : 1;\n                var sourceLocked = isLocked(column);\n                var destLocked = isLocked(destColumn);\n                var destContainer = destLocked ? this.lockedHeader : this.thead;\n                var sourcesContainer = sourceLocked ? this.lockedHeader : this.thead;\n                var destDomTree = destLocked ? this._lockedHeaderTree : this._headerTree;\n                var sourcesDomTree = sourceLocked ? this._lockedHeaderTree : this._headerTree;\n                var rowsToAdd;\n                var destRows = destContainer.find(\"tr:not(.k-filter-row)\");\n                var destTarget;\n\n\n                if (sourcesDepth === targetDepth || sourcesDepth < destRows.length ) {\n                    this._reorderTrees([destColumn], destContainer, destDomTree , [column], sourcesContainer ,sourcesDomTree, before, sourcesDepth);\n                    updateRowSpans(destContainer, destDomTree);\n                    removeEmptyRows(sourcesContainer, sourcesDomTree);\n                } else {\n                    if (destContainer !== sourcesContainer) {\n                        rowsToAdd = sourcesDepth - destRows.length;\n\n                        destRows.each(function(idx) {\n                            var cells = this.cells;\n                            for (var i = 0; i < cells.length; i++) {\n                                if (cells[i].colSpan <= 1 && cells[i].attributes.rowspan) {\n                                    destDomTree.children[idx].children[i].attr.rowSpan += rowsToAdd;\n                                    cells[i].rowSpan += rowsToAdd;\n                                }\n                            }\n                        });\n\n                        for (var j = 0; j < rowsToAdd; j++) {\n                           destDomTree.children.push(kendoDomElement(\"tr\", { \"role\": \"row\" }));\n                           if (destContainer.is(\"thead\")) {\n                               destTarget = destContainer;\n                           } else {\n                              destTarget = destContainer.find(\"thead\");\n                           }\n\n                           if (this._hasFilterRow()) {\n                               $(\"<tr class='k-table-row' role='row'></tr>\").insertBefore(destTarget.find('tr.k-filter-row'));\n                           } else {\n                               destTarget.append(\"<tr class='k-table-row' role='row'></tr>\");\n                           }\n                        }\n                    }\n\n                    this._reorderTrees([destColumn], destContainer, destDomTree , [column], sourcesContainer ,sourcesDomTree, before, sourcesDepth);\n                    removeEmptyRows(sourcesContainer, sourcesDomTree);\n                 }\n            },\n\n            reorderColumn: function(destIndex, column, before) {\n                var lockChanged;\n                var parent = column.parentColumn;\n                var columns = parent ? parent.columns : this.columns;\n                var sourceIndex = inArray(column, columns);\n                var destColumn = columns[destIndex];\n                var isLocked = !!destColumn.locked;\n                var hasMultiColumnHeaders = grep(this.columns, function(item) {\n                    return item.columns !== undefined$1;\n                }).length > 0;\n                var nonLockedColumnsLength = nonLockedColumns(columns).length;\n\n                if (sourceIndex === destIndex) {\n                    return;\n                }\n\n                if (isLocked && !column.locked && nonLockedColumnsLength == 1) {\n                    return;\n                }\n\n                if (!isLocked && column.locked && (columns.length - nonLockedColumnsLength == 1)) {\n                    return;\n                }\n\n                if (before === undefined$1) {\n                    before = destIndex < sourceIndex;\n                }\n\n                if (hasMultiColumnHeaders) {\n                    this._reorderHeader(destColumn, column, before);\n                }\n\n                lockChanged = !!column.locked;\n                lockChanged = lockChanged != isLocked;\n\n                column.locked = isLocked;\n                columns.splice(before ? destIndex : destIndex + 1, 0, column);\n                columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n                this._setColumnDataIndexes(leafColumns(this.columns));\n                this._clearColsCache();\n                this._renderCols();\n\n                //reorder column header manually\n                if (!hasMultiColumnHeaders) {\n                    var ths = $(this.lockedHeader).add(this.thead).find(\"tr:not(.k-filter-row) th\");\n\n                    ths.eq(sourceIndex)[before ? \"insertBefore\" : \"insertAfter\"](ths.eq(destIndex));\n\n                    var dom = this._headerTree.children[0].children;\n                    if (this._hasLockedColumns) {\n                        dom = this._lockedHeaderTree.children[0].children.concat(dom);\n                    }\n                    dom.splice(before ? destIndex : destIndex + 1, 0, dom[sourceIndex]);\n                    dom.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n                    if (this._hasLockedColumns) {\n                        this._lockedHeaderTree.children[0].children = dom.splice(0, lockedColumns(columns).length);\n                        this._headerTree.children[0].children = dom;\n                    }\n                } else {\n                    if (this.lockedHeader) {\n                        columns = nonLockedColumns(this.columns);\n                        this._prepareColumns([{ rowSpan: 1, cells: [], index: 0 }], columns);\n                        columns = lockedColumns(this.columns);\n                        this._prepareColumns([{ rowSpan: 1, cells: [], index: 0 }], columns);\n                    } else {\n                        this._prepareColumns([{ rowSpan: 1, cells: [], index: 0 }], this.columns);\n                    }\n                }\n                this._updateColumnCellIndex();\n                this._applyLockedContainersWidth();\n                this._syncLockedHeaderHeight();\n                this._updateFirstColumnClass();\n\n                if (this._hasFilterRow()) {\n                    this._updateFilterThs(before, column, destColumn);\n                }\n\n                this.refresh();\n\n                if (!lockChanged) {\n                    return;\n                }\n\n                if (isLocked) {\n                    this.trigger(COLUMNLOCK, {\n                        column: column\n                    });\n                } else {\n                    this.trigger(COLUMNUNLOCK, {\n                        column: column\n                    });\n                }\n            },\n\n            lockColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || column.hidden) {\n                    return;\n                }\n\n                var index = lockedColumns(columns).length - 1;\n                this.reorderColumn(index, column, false);\n            },\n\n            unlockColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || column.hidden) {\n                    return;\n                }\n\n                var index = lockedColumns(columns).length;\n                this.reorderColumn(index, column, true);\n            },\n\n            _columnMenu: function() {\n                var ths = $(this.lockedHeader).add(this.thead).find(\"th\");\n                var columns = this.columns;\n                var options = this.options;\n                var columnMenu = options.columnMenu;\n                var column, menu, menuOptions, sortable, filterable;\n                var initHandler = this._columnMenuInit.bind(this);\n                var openHandler = this._columnMenuOpen.bind(this);\n                var sortHandler = this._sort.bind(this);\n                var filterHandler = this._filter.bind(this);\n                var hasLockableColumns = grep(this.columns, function(item) {\n                    return item.lockable !== false;\n                }).length > 0;\n                var hasMultiColumnHeaders = grep(this.columns, function(item) {\n                    return item.columns !== undefined$1;\n                }).length > 0;\n\n                if (hasMultiColumnHeaders) {\n                    columns = leafColumns(columns);\n                    if (this.lockedHeader) {\n                        ths = sortCells(leafDataCells(this.lockedHeader.find(\">table>thead\")).add(leafDataCells(this.thead)));\n                    } else {\n                        ths = leafDataCells(this.thead);\n                    }\n                } else {\n                    ths = $(this.lockedHeader).add(this.thead).find(\"tr:not(.k-filter-row) th\");\n                }\n\n                if (!columnMenu) {\n                    return;\n                }\n\n                if (typeof columnMenu == \"boolean\") {\n                    columnMenu = {};\n                }\n\n                for (var i = 0; i < ths.length; i++) {\n                    column = columns[i];\n                    if (!column.field) {\n                        continue;\n                    }\n\n                    menu = ths.eq(i).data(\"kendoColumnMenu\");\n                    if (menu) {\n                        menu.destroy();\n                    }\n\n                    sortable = false;\n                    if (column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false) {\n                        sortable = extend({}, options.sortable, { compare: (column.sortable || {}).compare });\n                    }\n\n                    filterable = false;\n                    if (options.filterable && column.filterable !== false && columnMenu.filterable !== false) {\n                        filterable = extend({ pane: this.pane }, column.filterable, options.filterable);\n                    }\n\n                    menuOptions = {\n                        dataSource: this.dataSource,\n                        values: column.values,\n                        columns: columnMenu.columns,\n                        sortable: sortable,\n                        filterable: filterable,\n                        messages: columnMenu.messages,\n                        owner: this,\n                        closeCallback: closeCallback,\n                        init: initHandler,\n                        open: openHandler,\n                        sort: sortHandler,\n                        filtering: filterHandler,\n                        pane: this.pane,\n                        hasLockableColumns: lockedColumns(columns).length > 0 && hasLockableColumns && !hasMultiColumnHeaders,\n                        appendTo: DOT + classNames.headerCellInner,\n                        reorderable: !!options.reorderable\n                    };\n\n                    if (options.$angular) {\n                        menuOptions.$angular = options.$angular;\n                    }\n\n                    ths.eq(i).kendoColumnMenu(menuOptions);\n                }\n            },\n\n            _columnMenuInit: function(e) {\n                this.trigger(COLUMNMENUINIT, { field: e.field, container: e.container });\n            },\n\n            _columnMenuOpen: function(e) {\n                this.trigger(COLUMNMENUOPEN, { field: e.field, container: e.container });\n            },\n\n            _filter: function(e) {\n                if (this.trigger(FILTER, { filter: e.filter, field: e.field })) {\n                    e.preventDefault();\n                }\n            },\n\n            _sort: function(e) {\n                if (this.trigger(SORT, { sort: e.sort })) {\n                    e.preventDefault();\n                }\n            },\n\n            _pageable: function() {\n                var that = this,\n                    wrapper,\n                    pageable = that.options.pageable;\n\n                if (pageable) {\n                    wrapper = that.wrapper.children(\"div.k-grid-pager\");\n\n                    if (!wrapper.length) {\n                        wrapper = $('<div class=\"k-pager k-grid-pager\"/>').appendTo(that.wrapper);\n                    }\n\n                    that._destroyPager();\n\n                    if (typeof pageable === \"object\" && pageable instanceof kendo.ui.TreeListPager) {\n                        that.pager = pageable;\n                    } else if (that.dataSource && !that.dataSource.options.serverPaging) {\n                        that._createPager(wrapper);\n                    }\n\n                    if (that.pager) {\n                        that.pager.bind(PAGE_CHANGE, function(e) {\n                            if (that.trigger(PAGE, { page: e.index })) {\n                                e.preventDefault();\n                            }\n                        });\n                    }\n                }\n            },\n\n            _createPager: function(element, options) {\n                var that = this;\n\n                that.pager = new TreeListPager(element, extend({}, that.options.pageable, {\n                    dataSource: that.dataSource,\n                    size: \"medium\",\n                    navigatable: that.options.navigatable\n                }, options));\n            },\n\n            _destroyPager: function() {\n                if (this.pager) {\n                    this.pager.destroy();\n                    this.pager = null;\n                }\n            },\n\n            _isPageable: function() {\n                var that = this;\n                return that.options.pageable && (!that.dataSource || (that.dataSource && that.dataSource._isPageable()));\n            },\n\n            _togglePagerVisibility: function() {\n                var that = this;\n                var pageable = that.options.pageable;\n\n                if (pageable && (isPlainObject(pageable) || pageable instanceof TreeListPager) && pageable.alwaysVisible === false) {\n                    that.wrapper.find(\".k-grid-pager\").toggle((that.dataSource.collapsedTotal() || 0) >= that.dataSource.pageSize());\n                }\n            }\n        });\n\n        function closeCallback(element) {\n            focusTable(element.closest(\".k-treelist\").find(\"[role=treegrid]\"), true);\n        }\n\n        function isInputElement(element) {\n           return $(element).is(\":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-link,.k-input,.k-multiselect-wrap,.k-tool-icon,.k-input-value-text,.k-input-inner,.k-button-icon\");\n        }\n\n        function isLocked(column) {\n            if (!column.parentColumn) {\n                return !!column.locked;\n            }\n            return !!isLocked(column.parentColumn);\n        }\n\n        function findParentColumnWithChildren(columns, index, source, rtl) {\n            var target;\n            var locked = !!source.locked;\n            var targetLocked;\n\n            do {\n                target = columns[index];\n                index += rtl ? 1 : -1;\n                targetLocked = !!target.locked;\n            } while (target && index > -1 && index < columns.length && target != source && !target.columns && targetLocked === locked);\n\n            return target;\n        }\n\n        function findReorderTarget(columns, target, source, before, masterColumns) {\n            if (target.columns) {\n                target = target.columns;\n                return target[before ? 0 : target.length - 1];\n            } else {\n                var parent = columnParent(target, columns);\n                var parentColumns;\n\n                if (parent) {\n                    parentColumns = parent.columns;\n                } else {\n                    parentColumns = columns;\n                }\n\n                var index = inArray(target, parentColumns);\n                if (index === 0 && before && parentColumns.length !== 1) {\n                    index++;\n                } else if (index == parentColumns.length - 1 && !before && index !== 0) {\n                    index--;\n                } else if (index > 0 || (index === 0 && !before && index !== 0)) {\n                    index += before ? -1 : 1;\n                }\n\n                var sourceIndex = inArray(source, parentColumns);\n                target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n                var targetIndex = inArray(target, masterColumns);\n                if (target.columns && (!targetIndex || targetIndex === parentColumns.length - 1)) {\n                    return null;\n                }\n\n                if (target && target != source && target.columns) {\n                    return findReorderTarget(columns, target, source, before, masterColumns);\n                }\n            }\n            return null;\n        }\n\n        function leafColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (!columns[idx].columns) {\n                    result.push(columns[idx]);\n                    continue;\n                }\n                result = result.concat(leafColumns(columns[idx].columns));\n            }\n\n            return result;\n        }\n\n        function getColumnsFields(columns) {\n            var result = [];\n            columns = leafColumns(columns);\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (typeof columns[idx] === \"string\") {\n                    result.push(columns[idx]);\n                } else if (columns[idx].field) {\n                    result.push(columns[idx].field);\n                }\n            }\n            return result;\n        }\n\n        function visibleChildColumns(columns) {\n            return grep(columns, function(column) {\n                return !column.hidden;\n            });\n        }\n\n        function isVisible(column) {\n            return visibleColumns([column]).length > 0;\n        }\n\n        function visibleColumns(columns) {\n            return grep(columns, function(column) {\n                var result = !column.hidden;\n                if (result && column.columns) {\n                    result = visibleColumns(column.columns).length > 0;\n                }\n                return result;\n            });\n        }\n\n        function normalizeColumns(columns, hide, parentIds) {\n            return map(columns, function(column) {\n                var hidden;\n\n                column.parentIds = parentIds;\n\n                if (!isVisible(column) || hide) {\n                    hidden = true;\n                }\n\n                var uid = kendo.guid();\n                column.headerAttributes = extend({ headers: parentIds }, column.headerAttributes);\n                if (!column.headerAttributes || !column.headerAttributes.id) {\n                    column.headerAttributes = extend({ id: uid }, column.headerAttributes);\n                } else {\n                    uid = column.headerAttributes.id;\n                }\n\n                if (column.columns) {\n                    column.columns = normalizeColumns(column.columns, hidden, parentIds ? (parentIds + \" \" + uid) : uid);\n                }\n                return extend({ hidden: hidden }, column);\n            });\n        }\n\n        function flatColumnsInDomOrder(columns) {\n            var result = flatColumns(lockedColumns(columns));\n            return result.concat(flatColumns(nonLockedColumns(columns)));\n        }\n\n        function targetParentContainerIndex(flatColumns, columns, sourceIndex, targetIndex) {\n            var column = flatColumns[sourceIndex];\n            var target = flatColumns[targetIndex];\n\n            var parent = columnParent(column, columns);\n            columns = parent ? parent.columns : columns;\n\n            return inArray(target, columns);\n        }\n\n        function parentColumnsCells(cell) {\n            var container = cell.closest(\"table\");\n            var result = $().add(cell);\n\n            var row = cell.closest(\"tr\");\n            var headerRows = container.find(\"tr\");\n            var level = headerRows.index(row);\n            if (level > 0) {\n                var parent = headerRows.eq(level - 1);\n                var parentCellsWithChildren = parent.find(\"th\").filter(function() {\n                    return !$(this).attr(\"rowspan\");\n                });\n\n                var offset = 0;\n                var index = row.find(\"th\").index(cell);\n\n                var prevCells = cell.prevAll().filter(function() {\n                    return this.colSpan > 1;\n                });\n\n                for (var idx = 0; idx < prevCells.length; idx++) {\n                    offset += prevCells[idx].colSpan || 1;\n                }\n\n                index += Math.max(offset - 1, 0);\n\n                offset = 0;\n                for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                    var parentCell = parentCellsWithChildren.eq(idx);\n                    if (parentCell.attr(\"data-colspan\")) {\n                        offset += parentCell[0].getAttribute(\"data-colspan\");\n                    } else {\n                        offset += 1;\n                    }\n                    if (index >= idx && index < offset) {\n                        result = parentColumnsCells(parentCell).add(result);\n                        break;\n                    }\n                }\n            }\n            return result;\n        }\n\n        function childColumnsCells(cell) {\n            var container = cell.closest(\"thead\");\n            var result = $().add(cell);\n\n            var row = cell.closest(\"tr\");\n            var headerRows = container.find(\"tr\");\n            var level = headerRows.index(row) + cell[0].rowSpan;\n            var colSpanAttr = kendo.attr(\"colspan\");\n\n            if (level <= headerRows.length - 1) {\n                var child = row.next();\n                var prevCells = cell.prevAll();\n\n                var idx;\n\n                prevCells = prevCells.filter(function() {\n                    return !this.rowSpan || this.rowSpan === 1;\n                });\n\n                var offset = 0;\n\n                for (idx = 0; idx < prevCells.length; idx++) {\n                    offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n                }\n\n                var cells = child.find(\"th\");\n                var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n\n                idx = 0;\n\n                while (idx < colSpan) {\n                    child = cells.eq(idx + offset);\n                    result = result.add(childColumnsCells(child));\n                    var value = parseInt(child.attr(colSpanAttr), 10);\n                    if (value > 1) {\n                        colSpan -= value - 1;\n                    }\n                    idx++;\n                }\n            }\n\n            return result;\n        }\n\n        function columnParent(column, columns) {\n            var parents = [];\n            columnParents(column, columns, parents);\n            return parents[parents.length - 1];\n        }\n\n        function columnParents(column, columns, parents) {\n            parents = parents || [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (column === columns[idx]) {\n                    return true;\n                } else if (columns[idx].columns) {\n                    var inserted = parents.length;\n                    parents.push(columns[idx]);\n                    if (!columnParents(column, columns[idx].columns, parents)) {\n                        parents.splice(inserted, parents.length - inserted);\n                    } else {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        }\n\n        function flatColumns(columns) {\n            var result = [];\n            var children = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                result.push(columns[idx]);\n                if (columns[idx].columns) {\n                    children = children.concat(columns[idx].columns);\n                }\n\n            }\n            if (children.length) {\n                result = result.concat(flatColumns(children));\n            }\n            return result;\n        }\n\n        function columnPosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n\n            for (idx = 0; idx < columns.length; idx++) {\n               if (columns[idx] == column) {\n                    result = { cell: cellCounts[row], row: row };\n                    break;\n               } else if (columns[idx].columns) {\n                   result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n                   if (result) {\n                        break;\n                   }\n               }\n\n               cellCounts[row]++;\n            }\n            return result;\n        }\n\n        function updateCellIndex(thead, columns, offset) {\n            offset = offset || 0;\n\n            var position;\n            var cell;\n            var allColumns = columns;\n            columns = leafColumns(columns);\n\n            var cells = {};\n            var rows = thead.find(\">tr:not(.k-filter-row)\");\n\n            var filter = function() {\n                var el = $(this);\n                return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n            };\n\n            for (var idx = 0, length = columns.length; idx < length; idx++) {\n                position = columnPosition(columns[idx], allColumns);\n\n                if (!cells[position.row]) {\n                    cells[position.row] = rows.eq(position.row)\n                        .find(\".k-header\")\n                        .filter(filter);\n                }\n\n                cell = cells[position.row].eq(position.cell);\n                cell.attr(kendo.attr(\"index\"), offset + idx);\n            }\n\n            return columns.length;\n        }\n\n        function depth(columns) {\n            var result = 1;\n            var max = 0;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].columns) {\n                    var temp = depth(columns[idx].columns);\n                    if (temp > max) {\n                        max = temp;\n                    }\n                }\n            }\n            return result + max;\n        }\n\n        function lockedColumns(columns) {\n            return grep(columns, is(\"locked\"));\n        }\n\n        function nonLockedColumns(columns) {\n            return grep(columns, not(is(\"locked\")));\n        }\n\n        function updateRowSpans(container, containerDOMtree) {\n            var rows = container.find(\"tr:not(.k-filter-row)\");\n            var length = rows.length;\n\n            rows.each(function(idx) {\n                var cells = this.cells;\n                for (var i = 0; i < cells.length; i++) {\n                    if (cells[i].colSpan <= 1 && cells[i].attributes.rowspan) {\n                        containerDOMtree.children[idx].children[i].attr.rowSpan = length - idx;\n                        cells[i].rowSpan = length - idx;\n                    }\n                }\n            });\n        }\n\n        function removeEmptyRows(container, containerDOMtree) {\n            var rows = container.find(\"tr\");\n            var emptyRows = [];\n\n            rows.filter(function(idx) {\n                var shouldRemove = !$(this).children().length;\n                if (shouldRemove) {\n                    emptyRows.push(idx);\n\n                }\n                return shouldRemove;\n            }).remove();\n\n            for (var i = emptyRows.length - 1; i >= 0; i--) {\n                containerDOMtree.children.splice(emptyRows[i], 1);\n            }\n\n            updateRowSpans(container, containerDOMtree);\n        }\n\n        function focusTable(table, direct) {\n          if (direct === true) {\n             table = $(table);\n             var scrollTop, scrollLeft;\n             scrollTop = table.parent().scrollTop();\n             scrollLeft = kendo.scrollLeft(table.parent());\n\n            kendo.focusElement(table);\n\n            kendo.scrollLeft(table.parent().scrollTop(scrollTop), scrollLeft);\n\n          } else {\n             $(table).one(\"focusin\", function(e) { e.preventDefault(); }).trigger(\"focus\");\n          }\n        }\n\n        function adjustRowHeight(row1, row2) {\n           var height;\n           var offsetHeight1 = row1.offsetHeight;\n           var offsetHeight2 = row2.offsetHeight;\n\n           if (offsetHeight1 > offsetHeight2) {\n               height = offsetHeight1 + \"px\";\n           } else if (offsetHeight1 < offsetHeight2) {\n               height = offsetHeight2 + \"px\";\n           }\n\n           if (height) {\n               row1.style.height = row2.style.height = height;\n           }\n        }\n\n        function isColumnEditable(column, model) {\n            if (!column || !model || !column.field || column.selectable || column.command || column.draggable || (column.editable && !column.editable(model))) {\n                return false;\n            }\n\n            return (column.field && model.editable && model.editable(column.field));\n        }\n\n        function capitalize(word) {\n            return word.charAt(0).toUpperCase() + word.slice(1);\n        }\n\n        function isDirtyColumn(column, model) {\n            var field = (column || {}).field || \"\";\n            return (model.dirty && model.dirtyFields && model.dirtyFields[field] && isColumnEditable(column, model));\n        }\n\n        function isUndefined(value) {\n            return typeof(value) === \"undefined\";\n        }\n\n        function isNumber(value) {\n            return typeof value === \"number\" && !isNaN(value);\n        }\n\n        if (kendo.ExcelMixin) {\n            kendo.ExcelMixin.extend(TreeList.prototype);\n        }\n\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(TreeList.prototype);\n\n           TreeList.prototype._drawPDF = function(progress) {\n               var treeList = this;\n\n               if (treeList.options.pdf.paperSize && treeList.options.pdf.paperSize != \"auto\") {\n                   return treeList._drawPDF_autoPageBreak(progress);\n               }\n\n               var result = new $.Deferred();\n               var dataSource = treeList.dataSource;\n               var allPages = treeList.options.pdf.allPages;\n\n               this._initPDFProgress(progress);\n\n               // This group will be our document containing all pages\n               var doc = new kendo.drawing.Group();\n               var startingPage = dataSource.page();\n\n               function resolve() {\n                   if (allPages && startingPage !== undefined$1) {\n                       dataSource.unbind(\"change\", exportPage);\n                       dataSource.one(\"change\", function() {\n                           result.resolve(doc);\n                       });\n\n                       dataSource.page(startingPage);\n                   } else {\n                       result.resolve(doc);\n                   }\n               }\n\n               function exportPage() {\n                    treeList._drawPDFShadow({\n                        width: treeList.wrapper.width()\n                    }, {\n                        avoidLinks: treeList.options.pdf.avoidLinks\n                    })\n                    .done(function(group) {\n                        var pageNum = dataSource.page();\n                        var totalPages = allPages ? dataSource.totalPages() : 1;\n\n                        var args = {\n                            page: group,\n                            pageNumber: pageNum,\n                            progress: pageNum / totalPages,\n                            totalPages: totalPages\n                        };\n\n                        progress.notify(args);\n                        doc.append(args.page);\n\n                        if (pageNum < totalPages) {\n                            dataSource.page(pageNum + 1);\n                        } else {\n                            resolve();\n                        }\n                    })\n                    .fail(function(err) {\n                        result.reject(err);\n                    });\n                }\n\n                if (allPages) {\n                    dataSource.bind(\"change\", exportPage);\n                    dataSource.page(1);\n                } else {\n                    exportPage();\n                }\n\n                return result.promise();\n            };\n\n            TreeList.prototype._initPDFProgress = function(deferred) {\n                var loading = $(\"<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>\");\n                loading.prepend(this.wrapper.clone().css({\n                    position: \"absolute\", top: 0, left: 0\n                }));\n\n                this.wrapper.append(loading);\n\n                var progressBar = $(\"<div class='k-loading-pdf-progress'>\")\n                    .appendTo(loading)\n                    .kendoProgressBar({\n                        type: \"chunk\",\n                        chunkCount: 10,\n                        min: 0,\n                        max: 1,\n                        value: 0\n                    }).data(\"kendoProgressBar\");\n\n                deferred.progress(function(e) {\n                    progressBar.value(e.progress);\n                })\n                .always(function() {\n                    kendo.destroy(loading);\n                    loading.remove();\n                });\n            };\n\n            TreeList.prototype._drawPDF_autoPageBreak = function(progress) {\n                var treeList = this;\n                var result = new $.Deferred();\n                var dataSource = treeList.dataSource;\n                var allPages = treeList.options.pdf.allPages;\n                var origBody = treeList.wrapper.find('table[role=\"treeList\"] > tbody');\n                var cont = $(\"<div>\")\n                    .css({ position: \"absolute\", left: -10000, top: -10000 });\n                var clone = treeList.wrapper.clone().css({\n                    height: \"auto\", width: \"auto\"\n                }).appendTo(cont);\n                clone.find(\".k-grid-content\").css({ height: \"auto\", width: \"auto\", overflow: \"visible\" });\n                clone.find('table[role=\"treeList\"], .k-grid-footer table').css({ height: \"auto\", width: \"100%\", overflow: \"visible\" });\n                clone.find(\".k-grid-pager, .k-grid-toolbar, .k-grouping-header\").remove();\n                clone.find(\".k-grid-header, .k-grid-footer\").css({ paddingRight: 0 });\n\n                this._initPDFProgress(progress);\n\n                var body = clone.find('table[role=\"treeList\"] > tbody').empty();\n                var startingPage = dataSource.page();\n\n                function resolve() {\n                    if (allPages && startingPage !== undefined$1) {\n                        dataSource.one(\"change\", draw);\n                        dataSource.page(startingPage);\n                    } else {\n                        treeList.refresh();\n                        draw();\n                    }\n                }\n\n                function draw() {\n                    cont.appendTo(document.body);\n                    var options = $.extend({}, treeList.options.pdf, {\n                        _destructive: true,\n                        progress: function(p) {\n                            progress.notify({\n                                page: p.page,\n                                pageNumber: p.pageNum,\n                                progress: 0.5 + p.pageNum / p.totalPages / 2,\n                                totalPages: p.totalPages\n                            });\n                        }\n                    });\n                    kendo.drawing.drawDOM(clone, options)\n                        .always(function() {\n                            cont.remove();\n                        })\n                        .then(function(group) {\n                            result.resolve(group);\n                        })\n                        .fail(function(err) {\n                            result.reject(err);\n                        });\n                }\n\n                function renderPage() {\n                    var pageNum = dataSource.page();\n                    var totalPages = allPages ? dataSource.totalPages() : 1;\n                    body.append(origBody.find(\"tr\"));\n                    if (pageNum < totalPages) {\n                        dataSource.page(pageNum + 1);\n                    } else {\n                        dataSource.unbind(\"change\", renderPage);\n                        resolve();\n                    }\n                }\n\n                if (allPages) {\n                    dataSource.bind(\"change\", renderPage);\n                    dataSource.page(1);\n                } else {\n                    renderPage();\n                }\n\n                return result.promise();\n            };\n        }\n\n        extend(true, kendo.data, {\n            TreeListDataSource: TreeListDataSource,\n            TreeListModel: TreeListModel\n        });\n\n        ui.plugin(TreeList);\n        ui.plugin(TreeListPager);\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}